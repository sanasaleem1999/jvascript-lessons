/*!
 * jQuery JavaScript Library v1.11.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-05-01T17:42Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.19
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-04-18
 */

/*! jQuery UI - v1.11.2 - 2014-10-24
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, resizable.js, selectable.js, sortable.js, autocomplete.js, menu.js, progressbar.js, slider.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Core 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Mouse 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */

/*!
 * jQuery UI Position 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI Draggable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */

/*!
 * jQuery UI Resizable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */

/*!
 * jQuery UI Selectable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */

/*!
 * jQuery UI Sortable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */

/*!
 * jQuery UI Menu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */

/*!
 * jQuery UI Autocomplete 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */

/*!
 * jQuery UI Progressbar 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */

/*!
 * jQuery UI Slider 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2012 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

// /*************************************************************************
// *
// * ADOBE CONFIDENTIAL
// * ___________________
// *
// *  Copyright 2012 Adobe Systems Incorporated
// *  All Rights Reserved.
// *
// * NOTICE:  All information contained herein is, and remains
// * the property of Adobe Systems Incorporated and its suppliers,
// * if any.  The intellectual and technical concepts contained
// * herein are proprietary to Adobe Systems Incorporated and its
// * suppliers and may be covered by U.S. and Foreign Patents,
// * patents in process, and are protected by trade secret or copyright law.
// * Dissemination of this information or reproduction of this material
// * is strictly forbidden unless prior written permission is obtained
// * from Adobe Systems Incorporated.
// **************************************************************************/

//! moment.js
//! version : 2.8.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
 * ADOBE CONFIDENTIAL
 * ___________________
 *
 *  Copyright 2014 Adobe Systems Incorporated
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by all applicable intellectual property laws,
 * including trade secret and or copyright laws.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 **************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
 *
 * ADOBE CONFIDENTIAL
 * ___________________
 *
 *  Copyright 2014 Adobe Systems Incorporated
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 **************************************************************************/

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property 
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property 
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property 
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright Google Inc.
// Licensed under the Apache Licence Version 2.0
// Autogenerated at Tue Jun 17 02:31:43 PDT 2014
// @overrides window
// @provides html4

// Copyright Google Inc.

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2012 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*
 * jQuery File Upload Plugin 5.42.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2017 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/**
 * SHA256 Hash Algorithm Plugin
 *
 * @version 1.1 (17/08/2012)
 * @requires jQuery v1.2.6+
 * @author Alex Weber <alexweber.com.br>
 * @copyright Copyright (c) 2008-2009, Alex Weber
 * @see http://anmar.eu.org/projects/jssha2/
 * @see http://pajhome.org.uk/crypt/md5
 *
 * Distributed under the terms of the new BSD License
 * http://www.opensource.org/licenses/bsd-license.php
 */

/**
 * This plugin is based on the following work:
 *
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined
 * in FIPS 180-2
 * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 *
 */

(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(e,t){function g(e){var t=e.length,n=h.type(e);return n==="function"||h.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function S(e,t,n){if(h.isFunction(t))return h.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return h.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(E.test(t))return h.filter(t,e,n);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==n})}function A(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function _(e){var t=M[e]={};return h.each(e.match(O)||[],function(e,n){t[n]=!0}),t}function P(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(T.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))}function H(){if(T.addEventListener||event.type==="load"||T.readyState==="complete")P(),h.ready()}function q(e,t,n){if(n===undefined&&e.nodeType===1){var r="data-"+t.replace(I,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:F.test(n)?h.parseJSON(n):n}catch(i){}h.data(e,t,n)}else n=undefined}return n}function R(e){var t;for(t in e){if(t==="data"&&h.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function U(e,t,r,i){if(!h.acceptData(e))return;var s,o,u=h.expando,a=e.nodeType,f=a?h.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===undefined&&typeof t=="string")return;l||(a?l=e[u]=n.pop()||h.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:h.noop});if(typeof t=="object"||typeof t=="function")i?f[l]=h.extend(f[l],t):f[l].data=h.extend(f[l].data,t);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==undefined&&(o[h.camelCase(t)]=r),typeof t=="string"?(s=o[t],s==null&&(s=o[h.camelCase(t)])):s=o,s}function z(e,t,n){if(!h.acceptData(e))return;var r,i,s=e.nodeType,o=s?h.cache:e,u=s?e[h.expando]:h.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){h.isArray(t)?t=t.concat(h.map(t,h.camelCase)):t in r?t=[t]:(t=h.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!R(r):!h.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!R(o[u]))return}s?h.cleanData([e],!0):l.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function et(){return!0}function tt(){return!1}function nt(){try{return T.activeElement}catch(e){}}function rt(e){var t=it.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function wt(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==B?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==B?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],n=e.childNodes||e;(r=n[i])!=null;i++)!t||h.nodeName(r,t)?s.push(r):h.merge(s,wt(r,t));return t===undefined||t&&h.nodeName(e,t)?h.merge([e],s):s}function Et(e){J.test(e.type)&&(e.defaultChecked=e.checked)}function St(e,t){return h.nodeName(e,"table")&&h.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function xt(e){return e.type=(h.find.attr(e,"type")!==null)+"/"+e.type,e}function Tt(e){var t=vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Nt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)h._data(n,"globalEval",!t||h._data(t[r],"globalEval"))}function Ct(e,t){if(t.nodeType!==1||!h.hasData(e))return;var n,r,i,s=h._data(e),o=h._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)h.event.add(t,n,u[n][r])}o.data&&(o.data=h.extend({},o.data))}function kt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!l.noCloneEvent&&t[h.expando]){i=h._data(t);for(r in i.events)h.removeEvent(t,r,i.handle);t.removeAttribute(h.expando)}if(n==="script"&&t.text!==e.text)xt(t).text=e.text,Tt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),l.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&J.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Ot(t,n){var r,i=h(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:h.css(i[0],"display");return i.detach(),s}function Mt(e){var t=T,n=At[e];if(!n){n=Ot(e,t);if(n==="none"||!n)Lt=(Lt||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Lt[0].contentWindow||Lt[0].contentDocument).document,t.write(),t.close(),n=Ot(e,t),Lt.detach();At[e]=n}return n}function jt(e,t){return{get:function(){var n=e();if(n==null)return;if(n){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function Vt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Xt.length;while(i--){t=Xt[i]+n;if(t in e)return t}return r}function $t(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=h._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&V(r)&&(s[o]=h._data(r,"olddisplay",Mt(r.nodeName)))):(i=V(r),(n&&n!=="none"||!i)&&h._data(r,"olddisplay",i?n:h.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Jt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Kt(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=h.css(e,n+X[s],!0,i)),r?(n==="content"&&(o-=h.css(e,"padding"+X[s],!0,i)),n!=="margin"&&(o-=h.css(e,"border"+X[s]+"Width",!0,i))):(o+=h.css(e,"padding"+X[s],!0,i),n!=="padding"&&(o+=h.css(e,"border"+X[s]+"Width",!0,i)));return o}function Qt(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Pt(e),o=l.boxSizing&&h.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Ht(e,t,s);if(i<0||i==null)i=e.style[t];if(Dt.test(i))return i;r=o&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Kt(e,t,n||(o?"border":"content"),r,s)+"px"}function Gt(e,t,n,r,i){return new Gt.prototype.init(e,t,n,r,i)}function on(){return setTimeout(function(){Yt=undefined}),Yt=h.now()}function un(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=X[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function an(e,t,n){var r,i=(sn[t]||[]).concat(sn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function fn(e,t,n){var r,i,s,o,u,a,f,c,p=this,d={},v=e.style,m=e.nodeType&&V(e),g=h._data(e,"fxshow");n.queue||(u=h._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,p.always(function(){p.always(function(){u.unqueued--,h.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=h.css(e,"display"),c=f==="none"?h._data(e,"olddisplay")||Mt(e.nodeName):f,c==="inline"&&h.css(e,"float")==="none"&&(!l.inlineBlockNeedsLayout||Mt(e.nodeName)==="inline"?v.display="inline-block":v.zoom=1)),n.overflow&&(v.overflow="hidden",l.shrinkWrapBlocks()||p.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(en.exec(i)){delete t[r],s=s||i==="toggle";if(i===(m?"hide":"show")){if(i!=="show"||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||h.style(e,r)}else f=undefined}if(!h.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=h._data(e,"fxshow",{}),s&&(g.hidden=!m),m?h(e).show():p.done(function(){h(e).hide()}),p.done(function(){var t;h._removeData(e,"fxshow");for(t in d)h.style(e,t,d[t])});for(r in d)o=an(m?g[r]:0,r,p),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?Mt(e.nodeName):f)==="inline"&&(v.display=f)}function ln(e,t){var n,r,i,s,o;for(n in e){r=h.camelCase(n),i=t[r],s=e[n],h.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=h.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function cn(e,t,n){var r,i,s=0,o=rn.length,u=h.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Yt||on(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yt||on(),duration:n.duration,tweens:[],createTween:function(t,n){var r=h.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;ln(l,f.opts.specialEasing);for(;s<o;s++){r=rn[s].call(f,e,l,f.opts);if(r)return r}return h.map(l,an,f),h.isFunction(f.opts.start)&&f.opts.start.call(e,f),h.fx.timer(h.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Fn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(O)||[];if(h.isFunction(n))while(r=s[i++])r.charAt(0)==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function In(e,t,n,r){function o(u){var a;return i[u]=!0,h.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===Hn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function qn(e,t){var n,r,i=h.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&h.extend(!0,e,n),e}function Rn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==a[0]&&a.unshift(s),n[s]}function Un(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Jn(e,t,n,r){var i;if(h.isArray(t))h.each(t,function(t,i){n||Wn.test(e)?r(e,i):Jn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&h.type(t)==="object")for(i in t)Jn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Yn(){try{return new e.XMLHttpRequest}catch(t){}}function Zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function ir(e){return h.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l={},c="1.11.1",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,v=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:c,constructor:h,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!h.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((i=arguments[u])!=null)for(r in i){e=o[r],n=i[r];if(o===n)continue;f&&n&&(h.isPlainObject(n)||(t=h.isArray(n)))?(t?(t=!1,s=e&&h.isArray(e)?e:[]):s=e&&h.isPlainObject(e)?e:{},o[r]=h.extend(f,s,n)):n!==undefined&&(o[r]=n)}return o},h.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return h.type(e)==="function"},isArray:Array.isArray||function(e){return h.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||h.type(e)!=="object"||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(l.ownLast)for(t in e)return f.call(e,t);for(t in e);return t===undefined||f.call(e,t)},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&h.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(d,"ms-").replace(v,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=g(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:function(e){return e==null?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(g(Object(e))?h.merge(n,typeof e=="string"?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(r<n)e[i++]=t[r++];if(n!==n)while(t[r]!==undefined)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=g(e),a=[];if(u)for(;s<o;s++)r=t(e[s],s,n),r!=null&&a.push(r);else for(s in e)r=t(e[s],s,n),r!=null&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return typeof t=="string"&&(s=e[t],t=e,e=s),h.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||h.guid++,i):undefined},now:function(){return+(new Date)},support:l}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var y=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[];if(!e||typeof e!="string")return r;if((l=t.nodeType)!==1&&l!==9)return[];if(v&&!i){if(s=Z.exec(e))if(f=s[1]){if(l===9){u=t.getElementById(f);if(!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){y=g=w,S=t,x=l===9&&e;if(l===1&&t.nodeName.toLowerCase()!=="object"){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+mt(d[c]);S=et.test(e)&&dt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!==L&&e}function vt(){}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[w]||(t[w]={});if((u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){var r=0,i=t.length;for(;r<i;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function St(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(z,"$1"),n,a<i&&St(e.slice(a,i)),i<s&&St(e=e.slice(i)),i<s&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=b==null?1:Math.random()||.1,x=w.length;l&&(f=o!==p&&o);for(;m!==x&&(c=w[m])!=null;m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}v+=m;if(n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=_.call(a));y=wt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L=typeof undefined,A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+F+"*\\]",U=":("+I+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|"+".*"+")\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(U),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=st.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;if(i===p||i.nodeType!==9||!i.documentElement)return p;p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(i.getElementsByClassName)&&at(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),n.getById=at(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=Y.test(i.querySelectorAll))at(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),at(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return lt(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?lt(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']");if(n.matchesSelector&&v&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return J.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=W.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=X.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length);for(o in r.filter)(i=K[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&dt(t.parentNode)||t)){f.splice(a,1),e=s.length&&mt(f);if(!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ft("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),at(function(e){return e.getAttribute("disabled")==null})||ft(j,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(e);h.find=y,h.expr=y.selectors,h.expr[":"]=h.expr.pseudos,h.unique=y.uniqueSort,h.text=y.getText,h.isXMLDoc=y.isXML,h.contains=y.contains;var b=h.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;h.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?h.find.matchesSelector(r,e)?[r]:[]:h.find.matches(e,h.grep(t,function(e){return e.nodeType===1}))},h.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(h(e).filter(function(){for(t=0;t<i;t++)if(h.contains(r[t],this))return!0}));for(t=0;t<i;t++)h.find(e,r[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,typeof e=="string"&&b.test(e)?h(e):e||[],!1).length}});var x,T=e.document,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=h.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?n=[null,e,null]:n=N.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,!0));if(w.test(n[1])&&h.isPlainObject(t))for(n in t)h.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}r=T.getElementById(n[2]);if(r&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=T,this.selector=e,this}return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?typeof x.ready!="undefined"?x.ready(e):e(h):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};C.prototype=h.fn,x=h(T);var k=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};h.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&i.nodeType!==9&&(n===undefined||i.nodeType!==1||!h(i).is(n)))i.nodeType===1&&r.push(i),i=i[t];return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),h.fn.extend({has:function(e){var t,n=h(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(h.contains(this,n[t]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=b.test(e)||typeof e!="string"?h(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&h.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?h.unique(s):s)},index:function(e){return e?typeof e=="string"?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,n){return h.dir(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,n){return h.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return h.dir(e,"previousSibling",n)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(n,r){var i=h.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=h.filter(r,i)),this.length>1&&(L[e]||(i=h.unique(i)),k.test(e)&&(i=i.reverse())),this.pushStack(i)}});var O=/\S+/g,M={};h.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):h.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;for(;u&&s<i;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;(function s(t){h.each(t,function(t,n){var r=h.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&s(n)})})(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&h.each(arguments,function(e,n){var r;while((r=h.inArray(n,u,r))>-1)u.splice(r,1),t&&(r<=i&&i--,r<=s&&s--)}),this},has:function(e){return e?h.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return u&&(!r||a)&&(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(n){h.each(t,function(t,s){var o=h.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?h.extend(e,r):r}},i={};return r.pipe=r.then,h.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=i!==1||e&&h.isFunction(e.promise)?i:0,o=s===1?e:h.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1){a=new Array(i),f=new Array(i),l=new Array(i);for(;t<i;t++)n[t]&&h.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s}return s||o.resolveWith(l,n),o.promise()}});var D;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(e===!0?--h.readyWait:h.isReady)return;if(!T.body)return setTimeout(h.ready);h.isReady=!0;if(e!==!0&&--h.readyWait>0)return;D.resolveWith(T,[h]),h.fn.triggerHandler&&(h(T).triggerHandler("ready"),h(T).off("ready"))}}),h.ready.promise=function(t){if(!D){D=h.Deferred();if(T.readyState==="complete")setTimeout(h.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{T.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var n=!1;try{n=e.frameElement==null&&T.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!h.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}P(),h.ready()}}()}}return D.promise(t)};var B=typeof undefined,j;for(j in h(l))break;l.ownLast=j!=="0",l.inlineBlockNeedsLayout=!1,h(function(){var e,t,n,r;n=T.getElementsByTagName("body")[0];if(!n||!n.style)return;t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=e=t.offsetWidth===3,e&&(n.style.zoom=1)),n.removeChild(r)}),function(){var e=T.createElement("div");if(l.deleteExpando==null){l.deleteExpando=!0;try{delete e.test}catch(t){l.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return n!==1&&n!==9?!1:!t||t!==!0&&e.getAttribute("classid")===t};var F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/([A-Z])/g;h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?h.cache[e[h.expando]]:e[h.expando],!!e&&!R(e)},data:function(e,t,n){return U(e,t,n)},removeData:function(e,t){return z(e,t)},_data:function(e,t,n){return U(e,t,n,!0)},_removeData:function(e,t){return z(e,t,!0)}}),h.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=h.data(s);if(s.nodeType===1&&!h._data(s,"parsedAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=h.camelCase(r.slice(5)),q(s,r,i[r])));h._data(s,"parsedAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):s?q(s,e,h.data(s,e)):undefined},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=h._data(e,t),n&&(!r||h.isArray(n)?r=h._data(e,t,h.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=h.queue(e,t),r=n.length,i=n.shift(),s=h._queueHooks(e,t),o=function(){h.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return h._data(e,n)||h._data(e,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,n)})})}}),h.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?h.queue(this[0],e):t===undefined?this:this.each(function(){var n=h.queue(this,e,t);h._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=h.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=h._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,h.css(e,"display")==="none"||!h.contains(e.ownerDocument,e)},$=h.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(h.type(n)==="object"){i=!0;for(u in n)h.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,h.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(h(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},J=/^(?:checkbox|radio)$/i;(function(){var e=T.createElement("input"),t=T.createElement("div"),n=T.createDocumentFragment();t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=t.firstChild.nodeType===3,l.tbody=!t.getElementsByTagName("tbody").length,l.htmlSerialize=!!t.getElementsByTagName("link").length,l.html5Clone=T.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",e.type="checkbox",e.checked=!0,n.appendChild(e),l.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){l.noCloneEvent=!1}),t.cloneNode(!0).click());if(l.deleteExpando==null){l.deleteExpando=!0;try{delete t.test}catch(r){l.deleteExpando=!1}}})(),function(){var t,n,r=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(l[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),l[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var K=/^(?:input|select|textarea)$/i,Q=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h._data(e);if(!g)return;n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=h.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof h===B||!!e&&h.event.triggered===e.type?undefined:h.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(O)||[""],u=t.length;while(u--){s=Z.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort();if(!d)continue;f=h.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=h.event.special[d]||{},c=h.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:v.join(".")},a);if(!(p=o[d])){p=o[d]=[],p.delegateCount=0;if(!f.setup||f.setup.call(e,r,v,l)===!1)e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l)}f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),h.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h.hasData(e)&&h._data(e);if(!g||!(l=g.events))return;t=(t||"").match(O)||[""],f=t.length;while(f--){u=Z.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort();if(!d){for(d in l)h.event.remove(e,d+t[f],n,r,!0);continue}c=h.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,p=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;while(s--)o=p[s],(i||m===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(p.splice(s,1),o.selector&&p.delegateCount--,c.remove&&c.remove.call(e,o));a&&!p.length&&((!c.teardown||c.teardown.call(e,v,g.handle)===!1)&&h.removeEvent(e,d,g.handle),delete l[d])}h.isEmptyObject(l)&&(delete g.handle,h._removeData(e,"events"))},trigger:function(t,n,r,i){var s,o,u,a,l,c,p,d=[r||T],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];u=c=r=r||T;if(r.nodeType===3||r.nodeType===8)return;if(Y.test(v+h.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[h.expando]?t:new h.Event(v,typeof t=="object"&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=n==null?[t]:h.makeArray(n,[t]),l=h.event.special[v]||{};if(!i&&l.trigger&&l.trigger.apply(r,n)===!1)return;if(!i&&!l.noBubble&&!h.isWindow(r)){a=l.delegateType||v,Y.test(a+v)||(u=u.parentNode);for(;u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||T)&&d.push(c.defaultView||c.parentWindow||e)}p=0;while((u=d[p++])&&!t.isPropagationStopped())t.type=p>1?a:l.bindType||v,s=(h._data(u,"events")||{})[t.type]&&h._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&h.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());t.type=v;if(!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&h.acceptData(r)&&o&&r[v]&&!h.isWindow(r)){c=r[o],c&&(r[o]=null),h.event.triggered=v;try{r[v]()}catch(g){}h.event.triggered=undefined,c&&(r[o]=c)}return t.result},dispatch:function(e){e=h.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(h._data(this,"events")||{})[e.type]||[],l=h.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=h.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,n=((h.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),n!==undefined&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!=this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){i=[];for(s=0;s<u;s++)r=t[s],n=r.selector+" ",i[n]===undefined&&(i[n]=r.needsContext?h(n,this).index(a)>=0:h.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[h.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=G.test(i)?this.mouseHooks:Q.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new h.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||T),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return e.pageX==null&&t.clientX!=null&&(r=e.target.ownerDocument||T,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===nt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(h.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=h.extend(new h.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?h.event.trigger(i,null,t):h.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=T.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===B&&(e[r]=null),e.detachEvent(r,n))},h.Event=function(e,t){if(!(this instanceof h.Event))return new h.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?et:tt):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),this[h.expando]=!0},h.Event.prototype={isDefaultPrevented:tt,isPropagationStopped:tt,isImmediatePropagationStopped:tt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=et;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=et;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=et,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!h.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),l.submitBubbles||(h.event.special.submit={setup:function(){if(h.nodeName(this,"form"))return!1;h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:undefined;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(h.nodeName(this,"form"))return!1;h.event.remove(this,"._submit")}}),l.changeBubbles||(h.event.special.change={setup:function(){if(K.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")h.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)});return!1}h.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return h.event.remove(this,"._change"),!K.test(this.nodeName)}}),l.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=h._data(r,t);i||r.addEventListener(e,n,!0),h._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=h._data(r,t)-1;i?h._data(r,t,i):(r.removeEventListener(e,n,!0),h._removeData(r,t))}}}),h.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=tt;else if(!r)return this;return i===1&&(o=r,r=function(e){return h().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=h.guid++)),this.each(function(){h.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,h(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=tt),this.each(function(){h.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return h.event.trigger(e,t,n,!0)}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",st=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+it+")[\\s/>]","i"),ut=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ft=/<([\w:]+)/,lt=/<tbody/i,ct=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,dt=/^$|\/(?:java|ecma)script/i,vt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},yt=rt(T),bt=yt.appendChild(T.createElement("div"));gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.extend({clone:function(e,t,n){var r,i,s,o,u,a=h.contains(e.ownerDocument,e);l.html5Clone||h.isXMLDoc(e)||!ot.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(bt.innerHTML=e.outerHTML,bt.removeChild(s=bt.firstChild));if((!l.noCloneEvent||!l.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!h.isXMLDoc(e)){r=wt(s),u=wt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&kt(i,r[o])}if(t)if(n){u=u||wt(e),r=r||wt(s);for(o=0;(i=u[o])!=null;o++)Ct(i,r[o])}else Ct(e,s);return r=wt(s,"script"),r.length>0&&Nt(r,!a&&wt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,c,p=e.length,d=rt(t),v=[],m=0;for(;m<p;m++){s=e[m];if(s||s===0)if(h.type(s)==="object")h.merge(v,s.nodeType?[s]:s);else if(!ct.test(s))v.push(t.createTextNode(s));else{u=u||d.appendChild(t.createElement("div")),a=(ft.exec(s)||["",""])[1].toLowerCase(),c=gt[a]||gt._default,u.innerHTML=c[1]+s.replace(at,"<$1></$2>")+c[2],i=c[0];while(i--)u=u.lastChild;!l.leadingWhitespace&&ut.test(s)&&v.push(t.createTextNode(ut.exec(s)[0]));if(!l.tbody){s=a==="table"&&!lt.test(s)?u.firstChild:c[1]==="<table>"&&!lt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)h.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}h.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}}u&&d.removeChild(u),l.appendChecked||h.grep(wt(v,"input"),Et),m=0;while(s=v[m++]){if(r&&h.inArray(s,r)!==-1)continue;o=h.contains(s.ownerDocument,s),u=wt(d.appendChild(s),"script"),o&&Nt(u);if(n){i=0;while(s=u[i++])dt.test(s.type||"")&&n.push(s)}}return u=null,d},cleanData:function(e,t){var r,i,s,o,u=0,a=h.expando,f=h.cache,c=l.deleteExpando,p=h.event.special;for(;(r=e[u])!=null;u++)if(t||h.acceptData(r)){s=r[a],o=s&&f[s];if(o){if(o.events)for(i in o.events)p[i]?h.event.remove(r,i):h.removeEvent(r,i,o.handle);f[s]&&(delete f[s],c?delete r[a]:typeof r.removeAttribute!==B?r.removeAttribute(a):r[a]=null,n.push(s))}}}}),h.fn.extend({text:function(e){return $(this,function(e){return e===undefined?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=St(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=St(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?h.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&h.cleanData(wt(n)),n.parentNode&&(t&&h.contains(n.ownerDocument,n)&&Nt(wt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&h.cleanData(wt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return t.nodeType===1?t.innerHTML.replace(st,""):undefined;if(typeof e=="string"&&!ht.test(e)&&(l.htmlSerialize||!ot.test(e))&&(l.leadingWhitespace||!ut.test(e))&&!gt[(ft.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(at,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(h.cleanData(wt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(wt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,c=this.length,p=this,d=c-1,v=e[0],m=h.isFunction(v);if(m||c>1&&typeof v=="string"&&!l.checkClone&&pt.test(v))return this.each(function(n){var r=p.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(c){a=h.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,a.childNodes.length===1&&(a=n);if(n){o=h.map(wt(a,"script"),xt),s=o.length;for(;f<c;f++)r=a,f!==d&&(r=h.clone(r,!0,!0),s&&h.merge(o,wt(r,"script"))),t.call(this[f],r,f);if(s){u=o[o.length-1].ownerDocument,h.map(o,Tt);for(f=0;f<s;f++)r=o[f],dt.test(r.type||"")&&!h._data(r,"globalEval")&&h.contains(u,r)&&(r.src?h._evalUrl&&h._evalUrl(r.src):h.globalEval((r.text||r.textContent||r.innerHTML||"").replace(mt,"")))}a=n=null}}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){var n,r=0,i=[],o=h(e),u=o.length-1;for(;r<=u;r++)n=r===u?this:this.clone(!0),h(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Lt,At={};(function(){var e;l.shrinkWrapBlocks=function(){if(e!=null)return e;e=!1;var t,n,r;n=T.getElementsByTagName("body")[0];if(!n||!n.style)return;return t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",e=t.offsetWidth!==3),n.removeChild(r),e}})();var _t=/^margin/,Dt=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Pt,Ht,Bt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Pt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n.getPropertyValue(t)||n[t]:undefined,n&&(o===""&&!h.contains(e.ownerDocument,e)&&(o=h.style(e,t)),Dt.test(o)&&_t.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o===undefined?o:o+""}):T.documentElement.currentStyle&&(Pt=function(e){return e.currentStyle},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n[t]:undefined,o==null&&u&&u[t]&&(o=u[t]),Dt.test(o)&&!Bt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left=t==="fontSize"?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),o===undefined?o:o+""||"auto"}),function(){function a(){var t,n,r,a;n=T.getElementsByTagName("body")[0];if(!n||!n.style)return;t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=s=!1,u=!0,e.getComputedStyle&&(i=(e.getComputedStyle(t,null)||{}).top!=="1%",s=(e.getComputedStyle(t,null)||{width:"4px"}).width==="4px",a=t.appendChild(T.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=a[0].offsetHeight===0,o&&(a[0].style.display="",a[1].style.display="none",o=a[0].offsetHeight===0),n.removeChild(r)}var t,n,r,i,s,o,u;t=T.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=r&&r.style;if(!n)return;n.cssText="float:left;opacity:.5",l.opacity=n.opacity==="0.5",l.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle=t.style.backgroundClip==="content-box",l.boxSizing=n.boxSizing===""||n.MozBoxSizing===""||n.WebkitBoxSizing==="",h.extend(l,{reliableHiddenOffsets:function(){return o==null&&a(),o},boxSizingReliable:function(){return s==null&&a(),s},pixelPosition:function(){return i==null&&a(),i},reliableMarginRight:function(){return u==null&&a(),u}})}(),h.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var Ft=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,qt=/^(none|table(?!-c[ea]).+)/,Rt=new RegExp("^("+W+")(.*)$","i"),Ut=new RegExp("^([+-])=("+W+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ht(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=h.camelCase(t),a=e.style;t=h.cssProps[u]||(h.cssProps[u]=Vt(a,u)),o=h.cssHooks[t]||h.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=Ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(h.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!h.cssNumber[u]&&(n+="px"),!l.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)try{a[t]=n}catch(f){}},css:function(e,t,n,r){var i,s,o,u=h.camelCase(t);return t=h.cssProps[u]||(h.cssProps[u]=Vt(e.style,u)),o=h.cssHooks[t]||h.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),s===undefined&&(s=Ht(e,t,r)),s==="normal"&&t in Wt&&(s=Wt[t]),n===""||n?(i=parseFloat(s),n===!0||h.isNumeric(i)?i||0:s):s}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,n,r){if(n)return qt.test(h.css(e,"display"))&&e.offsetWidth===0?h.swap(e,zt,function(){return Qt(e,t,r)}):Qt(e,t,r)},set:function(e,n,r){var i=r&&Pt(e);return Jt(e,n,r?Kt(e,t,r,l.boxSizing&&h.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),l.opacity||(h.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=h.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&h.trim(s.replace(Ft,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ft.test(s)?s.replace(Ft,i):s+" "+i}}),h.cssHooks.marginRight=jt(l.reliableMarginRight,function(e,t){if(t)return h.swap(e,{display:"inline-block"},Ht,[e,"marginRight"])}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+X[r]+t]=s[r]||s[r-2]||s[0];return i}},_t.test(e)||(h.cssHooks[e+t].set=Jt)}),h.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,s={},o=0;if(h.isArray(t)){r=Pt(e),i=t.length;for(;o<i;o++)s[t[o]]=h.css(e,t[o],!1,r);return s}return n!==undefined?h.style(e,t,n):h.css(e,t)},e,t,arguments.length>1)},show:function(){return $t(this,!0)},hide:function(){return $t(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){V(this)?h(this).show():h(this).hide()})}}),h.Tween=Gt,Gt.prototype={constructor:Gt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(h.cssNumber[n]?"":"px")},cur:function(){var e=Gt.propHooks[this.prop];return e&&e.get?e.get(this):Gt.propHooks._default.get(this)},run:function(e){var t,n=Gt.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Gt.propHooks._default.set(this),this}},Gt.prototype.init.prototype=Gt.prototype,Gt.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=h.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(e.elem.style[h.cssProps[e.prop]]!=null||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Gt.propHooks.scrollTop=Gt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Gt.prototype.init,h.fx.step={};var Yt,Zt,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),nn=/queueHooks$/,rn=[fn],sn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=tn.exec(t),s=i&&i[3]||(h.cssNumber[e]?"":"px"),o=(h.cssNumber[e]||s!=="px"&&+r)&&tn.exec(h.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,h.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};h.Animation=h.extend(cn,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],sn[n]=sn[n]||[],sn[n].unshift(t)},prefilter:function(e,t){t?rn.unshift(e):rn.push(e)}}),h.speed=function(e,t,n){var r=e&&typeof e=="object"?h.extend({},e):{complete:n||!n&&t||h.isFunction(e)&&e,duration:e,easing:n&&t||t&&!h.isFunction(t)&&t};r.duration=h.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in h.fx.speeds?h.fx.speeds[r.duration]:h.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){h.isFunction(r.old)&&r.old.call(this),r.queue&&h.dequeue(this,r.queue)},r},h.fn.extend({fadeTo:function(e,t,n,r){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=h.isEmptyObject(e),s=h.speed(t,n,r),o=function(){var t=cn(this,h.extend({},e),s);(i||h._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=h.timers,o=h._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&nn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=h._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=h.timers,o=r?r.length:0;n.finish=!0,h.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(e,t){var n=h.fn[t];h.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(un(t,!0),e,r,i)}}),h.each({slideDown:un("show"),slideUp:un("hide"),slideToggle:un("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,n=0;Yt=h.now();for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||h.fx.stop(),Yt=undefined},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Zt||(Zt=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Zt),Zt=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx?h.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=T.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=T.createElement("select"),i=n.appendChild(T.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",l.getSetAttribute=t.className!=="t",l.style=/top/.test(r.getAttribute("style")),l.hrefNormalized=r.getAttribute("href")==="/a",l.checkOn=!!e.value,l.optSelected=i.selected,l.enctype=!!T.createElement("form").enctype,n.disabled=!0,l.optDisabled=!i.disabled,e=T.createElement("input"),e.setAttribute("value",""),l.input=e.getAttribute("value")==="",e.value="t",e.setAttribute("type","radio"),l.radioValue=e.value==="t"}();var hn=/\r/g;h.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(hn,""):n==null?"":n);return}return r=h.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,h(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":h.isArray(i)&&(i=h.map(i,function(e){return e==null?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return t!=null?t:h.trim(h.text(e))}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(l.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!h.nodeName(n.parentNode,"optgroup"))){t=h(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=h.makeArray(t),o=i.length;while(o--){r=i[o];if(h.inArray(h.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1}return n||(e.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){if(h.isArray(t))return e.checked=h.inArray(h(e).val(),t)>=0}},l.checkOn||(h.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var pn,dn,vn=h.expr.attrHandle,mn=/^(?:checked|selected)$/i,gn=l.getSetAttribute,yn=l.input;h.fn.extend({attr:function(e,t){return $(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===B)return h.prop(e,t,n);if(s!==1||!h.isXMLDoc(e))t=t.toLowerCase(),r=h.attrHooks[t]||(h.expr.match.bool.test(t)?dn:pn);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=h.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);h.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(O);if(s&&e.nodeType===1)while(n=s[i++])r=h.propFix[n]||n,h.expr.match.bool.test(n)?yn&&gn||!mn.test(n)?e[r]=!1:e[h.camelCase("default-"+n)]=e[r]=!1:h.attr(e,n,""),e.removeAttribute(gn?n:r)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&t==="radio"&&h.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),dn={set:function(e,t,n){return t===!1?h.removeAttr(e,n):yn&&gn||!mn.test(n)?e.setAttribute(!gn&&h.propFix[n]||n,n):e[h.camelCase("default-"+n)]=e[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vn[t]||h.find.attr;vn[t]=yn&&gn||!mn.test(t)?function(e,t,r){var i,s;return r||(s=vn[t],vn[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,vn[t]=s),i}:function(e,t,n){if(!n)return e[h.camelCase("default-"+t)]?t.toLowerCase():null}});if(!yn||!gn)h.attrHooks.value={set:function(e,t,n){if(!h.nodeName(e,"input"))return pn&&pn.set(e,t,n);e.defaultValue=t}};gn||(pn={set:function(e,t,n){var r=e.getAttributeNode(n);r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="";if(n==="value"||t===e.getAttribute(n))return t}},vn.id=vn.name=vn.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.value!==""?r.value:null},h.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:pn.set},h.attrHooks.contenteditable={set:function(e,t,n){pn.set(e,t===""?!1:t,n)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),l.style||(h.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var bn=/^(?:input|select|textarea|button|object)$/i,wn=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return $(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),h.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!h.isXMLDoc(e),s&&(t=h.propFix[t]||t,i=h.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):bn.test(e.nodeName)||wn.test(e.nodeName)&&e.href?0:-1}}}}),l.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),l.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),l.enctype||(h.propFix.enctype="encoding");var En=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=typeof e=="string"&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(f){t=(e||"").match(O)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(En," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=h.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=arguments.length===0||typeof e=="string"&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(f){t=(e||"").match(O)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(En," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?h.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):h.isFunction(e)?this.each(function(n){h(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=h(this),s=e.match(O)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===B||n==="boolean")this.className&&h._data(this,"__className__",this.className),this.className=this.className||e===!1?"":h._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(En," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var Sn=h.now(),xn=/\?/,Tn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=h.trim(t+"");return i&&!h.trim(i.replace(Tn,function(e,t,i,s){return n&&t&&(r=0),r===0?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var n,r;if(!t||typeof t!="string")return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=undefined}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&h.error("Invalid XML: "+t),n};var Nn,Cn,kn=/#.*$/,Ln=/([?&])_=[^&]*/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,On=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,_n=/^\/\//,Dn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Pn={},Hn={},Bn="*/".concat("*");try{Cn=location.href}catch(jn){Cn=T.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Dn.exec(Cn.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn,type:"GET",isLocal:On.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qn(qn(e,h.ajaxSettings),t):qn(h.ajaxSettings,e)},ajaxPrefilter:Fn(Pn),ajaxTransport:Fn(Hn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;if(b===2)return;b=2,o&&clearTimeout(o),a=undefined,s=r||"",E.readyState=e>0?4:0,f=e>=200&&e<300||e===304,n&&(w=Rn(l,E,n)),w=Un(l,w,E,f);if(f)l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(h.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(h.etag[i]=S)),e===204||l.type==="HEAD"?x="nocontent":e===304?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y);else{y=x;if(e||!x)x="error",e<0&&(e=0)}E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=undefined,u&&p.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(p.trigger("ajaxComplete",[E,l]),--h.active||h.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=h.ajaxSetup({},t),c=l.context||l,p=l.context&&(c.nodeType||c.jquery)?h(c):h.event,d=h.Deferred(),v=h.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!f){f={};while(t=An.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Cn)+"").replace(kn,"").replace(_n,Nn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=h.trim(l.dataType||"*").toLowerCase().match(O)||[""],l.crossDomain==null&&(n=Dn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Nn[1]&&n[2]===Nn[2]&&(n[3]||(n[1]==="http:"?"80":"443"))===(Nn[3]||(Nn[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=h.param(l.data,l.traditional)),In(Pn,l,t,E);if(b===2)return E;u=l.global,u&&h.active++===0&&h.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Mn.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(xn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ln.test(i)?i.replace(Ln,"$1_="+Sn++):i+(xn.test(i)?"&":"?")+"_="+Sn++)),l.ifModified&&(h.lastModified[i]&&E.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&E.setRequestHeader("If-None-Match",h.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+Bn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&b!==2){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);a=In(Hn,l,t,E);if(!a)x(-1,"No Transport");else{E.readyState=1,u&&p.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(b<2))throw S;x(-1,S)}}return E}return E.abort()},getJSON:function(e,t,n){return h.get(e,t,n,"json")},getScript:function(e,t){return h.get(e,undefined,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,n,r,i){return h.isFunction(n)&&(i=i||r,r=n,n=undefined),h.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return h.isFunction(e)?this.each(function(t){h(this).wrapInner(e.call(this,t))}):this.each(function(){var t=h(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(n){h(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!l.reliableHiddenOffsets()&&(e.style&&e.style.display||h.css(e,"display"))==="none"},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var zn=/%20/g,Wn=/\[\]$/,Xn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,$n=/^(?:input|select|textarea|keygen)/i;h.param=function(e,t){var n,r=[],i=function(e,t){t=h.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=h.ajaxSettings&&h.ajaxSettings.traditional);if(h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){i(this.name,this.value)});else for(n in e)Jn(n,e[n],t,i);return r.join("&").replace(zn,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&$n.test(this.nodeName)&&!Vn.test(e)&&(this.checked||!J.test(e))}).map(function(e,t){var n=h(this).val();return n==null?null:h.isArray(n)?h.map(n,function(e){return{name:t.name,value:e.replace(Xn,"\r\n")}}):{name:t.name,value:n.replace(Xn,"\r\n")}}).get()}}),h.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Yn()||Zn()}:Yn;var Kn=0,Qn={},Gn=h.ajaxSettings.xhr();e.ActiveXObject&&h(e).on("unload",function(){for(var e in Qn)Qn[e](undefined,!0)}),l.cors=!!Gn&&"withCredentials"in Gn,Gn=l.ajax=!!Gn,Gn&&h.ajaxTransport(function(e){if(!e.crossDomain||l.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Kn;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)n[i]!==undefined&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||s.readyState===4)){delete Qn[o],t=undefined,s.onreadystatechange=h.noop;if(i)s.readyState!==4&&s.abort();else{f={},u=s.status,typeof s.responseText=="string"&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}!u&&e.isLocal&&!e.crossDomain?u=f.text?200:404:u===1223&&(u=204)}}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?s.readyState===4?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(undefined,!0)}}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=T.head||h("head")[0]||T.documentElement;return{send:function(r,i){t=T.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){if(n||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||h.expando+"_"+Sn++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(tr.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");if(u||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(tr,"$1"+i):t.jsonp!==!1&&(t.url+=(xn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||h.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,er.push(i)),o&&h.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),h.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||T;var r=w.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=h.buildFragment([e],t,i),i&&i.length&&h(i).remove(),h.merge([],r.childNodes))};var nr=h.fn.load;h.fn.load=function(e,t,n){if(typeof e!="string"&&nr)return nr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=h.trim(e.slice(u,e.length)),e=e.slice(0,u)),h.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(s="POST"),o.length>0&&h.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?h("<div>").append(h.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var rr=e.document.documentElement;h.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=h.css(e,"position"),c=h(e),p={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=h.css(e,"top"),a=h.css(e,"left"),f=(l==="absolute"||l==="fixed")&&h.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),h.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(p.top=t.top-u.top+o),t.left!=null&&(p.left=t.left-u.left+i),"using"in t?t.using.call(e,p):c.css(p)}},h.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(!s)return;return t=s.documentElement,h.contains(t,i)?(typeof i.getBoundingClientRect!==B&&(r=i.getBoundingClientRect()),n=ir(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return h.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(r,"marginTop",!0),left:t.left-n.left-h.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||rr;while(e&&!h.nodeName(e,"html")&&h.css(e,"position")==="static")e=e.offsetParent;return e||rr})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);h.fn[e]=function(r){return $(this,function(e,r,i){var s=ir(e);if(i===undefined)return s?t in s?s[t]:s.document.documentElement[r]:e[r];s?s.scrollTo(n?h(s).scrollLeft():i,n?i:h(s).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=jt(l.pixelPosition,function(e,n){if(n)return n=Ht(e,t),Dt.test(n)?h(e).position()[t]+"px":n})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){h.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return $(this,function(t,n,r){var i;return h.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?h.css(t,n,o):h.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return h});var sr=e.jQuery,or=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=or),t&&e.jQuery===h&&(e.jQuery=sr),h},typeof t===B&&(e.jQuery=e.$=h),h}),function(e){typeof define=="function"&&define.amd?define("jquery-ui",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var r=0,i=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var n=i.call(arguments,1),r=0,s=n.length,o,u;for(;r<s;r++)for(o in n[r])u=n[r][o],n[r].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=i.call(arguments,1),a=this;return s=!o&&u.length?e.widget.extend.apply(null,[s].concat(u)):s,o?this.each(function(){var n,i=e.data(this,r);if(s==="instance")return a=i,!1;if(!i)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(i[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=i[s].apply(i,u);if(n!==i&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))}),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var s=e.widget,o=!1;e(document).mouseup(function(){o=!1});var u=e.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(o)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which===1,i=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var t,n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,v,m,g,y,b,w=e(t.of),E=e.position.getWithinInfo(t.within),S=e.position.getScrollInfo(E),x=(t.collision||"flip").split(" "),T={};return b=d(w),w[0].preventDefault&&(t.at="left top"),v=b.width,m=b.height,g=b.offset,y=e.extend({},g),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),T[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),x.length===1&&(x[1]=x[0]),t.at[0]==="right"?y.left+=v:t.at[0]==="center"&&(y.left+=v/2),t.at[1]==="bottom"?y.top+=m:t.at[1]==="center"&&(y.top+=m/2),l=h(T.at,v,m),y.left+=l[0],y.top+=l[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),b=p(this,"marginTop"),N=f+d+p(this,"marginRight")+S.width,C=c+b+p(this,"marginBottom")+S.height,k=e.extend({},y),L=h(T.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?k.left-=f:t.my[0]==="center"&&(k.left-=f/2),t.my[1]==="bottom"?k.top-=c:t.my[1]==="center"&&(k.top-=c/2),k.left+=L[0],k.top+=L[1],n||(k.left=s(k.left),k.top=s(k.top)),o={marginLeft:d,marginTop:b},e.each(["left","top"],function(n,r){e.ui.position[x[n]]&&e.ui.position[x[n]][r](k,{targetWidth:v,targetHeight:m,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:N,collisionHeight:C,offset:[l[0]+L[0],l[1]+L[1]],my:t.my,at:t.at,within:E,elem:a})}),t.using&&(u=function(e){var n=g.left-k.left,s=n+v-f,o=g.top-k.top,u=o+m-c,l={target:{element:w,left:g.left,top:g.top,width:v,height:m},element:{element:a,left:k.left,top:k.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};v<f&&i(n+s)<v&&(l.horizontal="center"),m<c&&i(o+u)<m&&(l.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),a.offset(e.extend(k,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,r,i,s,o,u=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(u?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},u&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(a),r=u||document.documentElement,r.insertBefore(t,r.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=e(a).offset().left,n=s>10&&s<11,t.innerHTML="",r.removeChild(t)}()})();var a=e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(!this.handleElement.is(t.target))return;try{n.activeElement&&n.activeElement.nodeName.toLowerCase()!=="body"&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n=e==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;if(!u||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};return t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),o.axis==="y"&&(a=this.originalPageX),o.axis==="x"&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){this.options.axis!=="y"&&this.helper.css("right")!=="auto"&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];if(o!==u&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x")r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed);if(!i.axis||i.axis!=="y")r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!=="x")t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!=="y")t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--){a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height;if(g<a-v||m>f+v||b<l-v||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)){r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1;continue}d.snapMode!=="inner"&&(i=Math.abs(l-b)<=v,s=Math.abs(c-y)<=v,o=Math.abs(a-g)<=v,u=Math.abs(f-m)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,d.snapMode!=="outer"&&(i=Math.abs(l-y)<=v,s=Math.abs(c-b)<=v,o=Math.abs(a-m)<=v,u=Math.abs(f-g)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!o.length)return;i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}});var f=e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=this.element.children(this.handles[n]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof s.aspectRatio=="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",i==="auto"?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];this._updatePrevProperties();if(!a)return!1;n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e)t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),i<s.maxHeight&&(s.maxHeight=i);this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),r==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),r==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;if(!h)return;a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u})},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a=typeof r.grid=="number"?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<d,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l);if(/^(se|s|e)$/.test(u))n.size.width=p,n.size.height=d;else if(/^(ne)$/.test(u))n.size.width=p,n.size.height=d,n.position.top=o.top-h;else if(/^(sw)$/.test(u))n.size.width=p,n.size.height=d,n.position.left=o.left-c;else{if(d-l<=0||p-f<=0)t=n._getPaddingPlusBorderDimensions(this);d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=l-t.height,n.size.width=p,n.position.left=o.left+s.width-p)}}});var l=e.ui.resizable,c=e.widget("ui.selectable",e.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),h=e.widget("ui.sortable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),e==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&s==="right"||i==="down"?2:1:i&&(i==="down"?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&n||i==="left"&&!n:r&&(r==="down"&&t||r==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function f(){o.push(this)}var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(f);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!h)return;if(this.containers.length===1)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY";for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[p].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p]){this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),p=e.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(this.previousFilter)return;var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this._filterMenuItems(i),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,r=this,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=s.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);r._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),e==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.outerHeight(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.find(this.options.items)[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(e.trim(e(this).text()))})}});e.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){var r,i;if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),r=n.item.attr("aria-label")||i.value,r&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0));if(!t||!t[0])t=this.element.closest(".ui-front");return t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!n&&!r)this.selectedItem=null,this.search(null,e)},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;t&&t.length?n=this.options.messages.results(t.length):n=this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion)}});var d=e.ui.autocomplete,v=e.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===undefined)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===undefined&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),e==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),m=e.widget("ui.slider",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[],u="",a="",f=null,l=null;n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){o.length>1?r.label?(u=r.range&&t<2?t==0?"min":"max":t+1,a=r.label+" "+u):r.labels&&(a=r.labels[t]):r.label&&(a=r.label),f=r.values?r.values[t]:r.value,r.unittext&&(l=f+" "+self.options.unittext),e(this).data("ui-slider-handle-index",t).attr({role:"slider",title:a,"aria-valuemin":r.min,"aria-valuemax":r.max,"aria-valuenow":f,"aria-valuetext":l})})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),t==="disabled"&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css(n==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n,e(this).attr("aria-valuenow",a.values(r)),a.options.unittext&&e(this).attr("aria-valuetext",a.values(r)+" "+a.options.unittext),a.options.range&&r<2&&a.handles.eq(r===0?1:0).attr(r===0?"aria-valuemin":"aria-valuemax",a.values(r))}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}),this.handle.attr("aria-valuenow",r),this.options.unittext&&this.handle.attr("aria-valuetext",r+" "+this.options.unittext))},_handleEvents:{keydown:function(t){var n,r,i,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,o);if(n===!1)return}}s=this.options.step,this.options.values&&this.options.values.length?r=i=this.values(o):r=i=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-s)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))},keypress:function(t){var n=e(t.target).data("ui-slider-handle-index");console.log(t.type+" "+t.keyCode)}},_updateAriaLimit:function(t){var n=this.options[t];this.range&&this.options.values&&this.options.values.length==2?this.handles.eq(t==="min"?0:1).attr(t==="min"?"aria-valuemin":"aria-valuemax",n):this.handles.each(function(r){e(this).attr(t=="min"?"aria-valuemin":"aria-valuemax",n)})}})}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),define("libs/underscore/1.6.0/underscore",function(){}),define("libs-patch/underscore/1.6.0/underscore-patch",["libs/underscore/1.6.0/underscore"],function(){return _.bindAll=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length===0&&(t=_.functions(e)),_.each(t,function(t){e[t]=_.bind(e[t],e)}),e},_}),function(e,t){if(typeof define=="function"&&define.amd)define("libs/backbone/1.1.2/backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("libs-patch/backbone/1.1.2/backbone-patch",["require","libs/backbone/1.1.2/backbone"],function(e){var t=e("libs/backbone/1.1.2/backbone");return t.View=function(e){return e.extend({constructor:function(t){this._configure(t||{}),e.apply(this,arguments)},_configure:function(e){var t=["model","collection","el","id","attributes","className","tagName","events"];this.options&&(e=_.extend({},_.result(this,"options"),e)),_.extend(this,_.pick(e,t)),this.options=e}})}(t.View),t}),define("core/dev/ac-core",["underscore","require","backbone"],function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;return p=t.toUrl("core"),d=p.lastIndexOf("/"),v=p.indexOf(".js"),v!==-1?n=p.substr(d+1,v-d-1):n=p.substr(d+1),r=Ac.Core,r||(r=Ac.Core={}),i=r[n],i||(i=r[n]={}),i.VERSION=n,s=document.location,s.href.indexOf("jasmine_spec_runner")>0&&(o=!0),e.extend(i,{getBaseCloudUrl:function(){return u||(Ac.config.getBaseUri?u=Ac.config.getBaseUri("cloud_base_uri"):u=s.protocol+"//"+s.host+"/"),u},getBaseFilesUrl:function(){return a||(Ac.config.getBaseUri?a=Ac.config.getBaseUri("files_base_uri"):a=Ac.Features.getFeature("api_base_uri")),a},getBaseFSSUrl:function(){return f||(f=Ac.config.getBaseUri("fss_base_uri")),f},getBaseAiCUrl:function(){return l||(l=Ac.config.getBaseUri("aic_base_uri")),l},getBaseGoMobileUrl:function(){return c||(c=Ac.config.getBaseUri("gomobile_base_uri")),c},isJasmine:function(){return o},getBaseReviewUrl:function(){return h||(h=Ac.config.getBaseUri("review_base_uri")),h}}),i}),define("aicx/dev/ac-aicx",["underscore","require"],function(e,t){var n,r,i,s,o,u,a;return o=t.toUrl("aicx"),u=o.lastIndexOf("/"),a=o.indexOf(".js"),a!==-1?n=o.substr(u+1,a-u-1):n=o.substr(u+1),r=Ac.Aicx,r||(r=Ac.Aicx={}),i=r[n],i||(i=r[n]={}),i.VERSION=n,e.extend(i,{getBaseAicUrl:function(){return s||(Ac.config.getBaseUri?s=Ac.config.getBaseUri("aic_base_uri"):s=Ac.Plugins.groups.aic.base_url),s}}),i}),define("core/dev/utils/util",["core/ac-core"],function(e){return e.Util=function(e){function t(e){var t,n;if(!e)return;n=e.lastIndexOf(".");if(n>=0&&n!==e.length-1){n+=1;var r=e.indexOf(" ",n);r>=0?t=e.substring(n,r):t=e.substr(n)}return t&&(t=t.toLowerCase()),t}function n(e){var t=e+"=",n,r,i=document.cookie.split(";");for(n=0;n<i.length;n+=1){r=i[n];while(r.charAt(0)===" ")r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null}function r(e){var t=e.split("."),n=window,r,i;for(r=0,i=t.length;r<i;r+=1)n&&(n=n[t[r]]);if(typeof n!="function")throw new Error("Ac.Core.Util.getClassFromName: '"+e+"' not found");return n}function i(e){var t="";return _.each(e,function(n,r){_.has(e,r)&&!_.isFunction(n)&&(t&&(t+="\n"),t+="  "+r+": "+n)}),t}function s(e){LOG(i(e))}function o(e,t){return t&&(e=e.concat(t)),e}function u(){var e=navigator.userAgent.indexOf(" Mobile/")>0;return e?"mobile":"desktop"}function a(e){return e?e.replace(/\ /g," "):e}function f(e){return e.indexOf("??")>=0&&(e=e.replace(/\?\?+/g,"?")),e}function l(){return navigator.userAgent.indexOf("Windows")>=0}function c(){return navigator.userAgent.toLowerCase().indexOf("windows nt 6.2")>=0||navigator.userAgent.toLowerCase().indexOf("windows nt 6.3")>=0}function h(){return navigator.userAgent.indexOf("Macintosh")>=0}function p(){return navigator.userAgent.indexOf("MSIE")>=0}function d(){return navigator.userAgent.indexOf("MSIE 8")>=0}function v(){return navigator.userAgent.indexOf("MSIE 9")>=0}function m(){return v()||d()}function g(){return navigator.userAgent.indexOf("MSIE 10")>=0}function y(){var e=navigator.userAgent;return g()?!0:e.indexOf("Mozilla")>=0&&e.indexOf("Windows NT")>=0&&e.indexOf("Trident")>=0&&e.indexOf("MSIE")<0}function b(){return navigator.userAgent.indexOf("Firefox")>=0}function w(){return navigator.userAgent.indexOf("Firefox/3.6")>=0}function E(e){var t,n,r;return t=navigator.userAgent,n=t.indexOf("Firefox"),n<0?!1:(r=parseInt(t.substr(n+8),10),r>=e)}function S(){return this.isReader()||this.isAcrobat()}function x(){return navigator.userAgent.indexOf("ReaderServices")>=0}function T(){return navigator.userAgent.indexOf("AcrobatServices")>=0}function N(){return navigator.userAgent.indexOf("iPad")>=0}function C(){return navigator.userAgent.indexOf("iPhone")>=0}function k(){return navigator.userAgent.indexOf("AppleWebKit")>=0}function L(e){return navigator.userAgent.indexOf("Version/"+e)>=0}function A(){return navigator.userAgent.indexOf("Android")>=0}function O(){var e=navigator.userAgent.match(/(Reader|Acrobat)Services\/([0-9]+)\.([0-9]+)\.([0-9]+)/),t=e&&e[4]?parseInt(e[4]):0;return t>=1e4&&t<2e4?"Beta":t>=2e4&&t<3e4?"DC":t>=3e4&&t<4e4?"2017":"Trunk"}function M(){return O()=="Trunk"}function D(){return O()=="Beta"}function P(){return O()=="DC"}function H(){return O()=="2017"}function B(){var e="(-webkit-min-device-pixel-ratio: 1.5),                    (min--moz-device-pixel-ratio: 1.5),                    (-o-min-device-pixel-ratio: 3/2),                    (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(e).matches?!0:!1}function j(){return N()||C()||A()}function F(){return!j()&&!d()&&!v()}function I(){var t=e(document.createElement("div")),n;return t.html("<svg/>"),n=t.find(":first-child"),n.length===1&&n[0].namespaceURI==="http://www.w3.org/2000/svg"}function q(){return window.File}function R(){return navigator.onLine}function U(){return!C()}return{getExtension:t,getCookie:n,getClassFromName:r,formatProperties:i,logProperties:s,addToArray:o,getClientType:u,replaceSpaceWithNbsp:a,compressQuestionMarks:f,isWindows:l,isWindows8:c,isMac:h,isIE:p,isIE8:d,isIE9:v,isIE9orBelow:m,isIE10:g,isIE10orAbove:y,isFirefox:b,isFirefox36:w,isFirefoxGte:E,isCEF:S,isReader:x,isAcrobat:T,isIpad:N,isIphone:C,isAppleWekKit:k,isIosVersion:L,isAndroid:A,isRetina:B,isTouchDevice:j,isDragAndDropSupported:F,isSvgSupported:I,isFileApiSupported:q,isConnected:R,showBreadcrumbs:U,isTrunk:M,isBeta:D,isConsumer:P,isClassic:H}}(jQuery),e.Util}),define("core/dev/utils/ajax-util",["core/ac-core","core/utils/util"],function(e,t){function c(){var t=(new Date).getTime(),n,r=!1;return a||(a=e.Features.getFeature("throttle_interval_threshold")),u&&(n=t-u,r=n>a),u=t,r}function h(t){var u=t.type,a=t.url,l=t.data,h;return!t.throttleOn||t.throttleIgnore?!1:(l&&(h=JSON.stringify(l)),c()||u!==n||a!==r||h!==i?(n=u,r=a,i=h,f=undefined,s=1,!1):(s+=1,o||(o=e.Features.getFeature("throttle_count_threshold")),s>o))}var n,r,i,s=0,o,u,a,f,l;return e.AjaxUtil={addGlobalAjaxHandlers:function(e){var t=$(document);_.each(e,function(e,n){n==="ajaxStart"?t.ajaxStart(e):n==="ajaxSend"?t.ajaxSend(e):n==="ajaxComplete"?t.ajaxComplete(e):n==="ajaxStop"?t.ajaxStop(e):n==="ajaxError"&&t.ajaxError(e)})},removeGlobalAjaxHandlers:function(e){var t=$(document);if(!e){t.unbind("ajaxStart"),t.unbind("ajaxSend"),t.unbind("ajaxComplete"),t.unbind("ajaxStop"),t.unbind("ajaxError");return}_.each(e,function(e,n){n==="ajaxStart"?t.unbind("ajaxStart",e):n==="ajaxSend"?t.unbind("ajaxSend",e):n==="ajaxComplete"?t.unbind("ajaxComplete",e):n==="ajaxStop"?t.unbind("ajaxStop",e):n==="ajaxError"&&t.unbind("ajaxError",e)})},setContextOptions:function(e){l=e},resetThrottle:function(){n=undefined,r=undefined,i=undefined,s=0,o=undefined,u=undefined,a=undefined,f=undefined},beforeSend:function(t,n){var r=h(n),i;return e.Features.isFeatureEnabled("throttle_ajax_requests")?(r&&(i=n.type+" "+n.url+" cancelled: repeated "+o+" or more times, each within "+a+" msecs of previous. data="+(n.data||""),i!==f&&(l&&_.defer(function(){e.opFactory.create("SendingLogEventOp",l).run({message:i,ajaxOptions:{throttleIgnore:!0}})}),f=i)),!r):!0},complete:function(e){var n;t.isCEF()&&l&&(n=e.status===0?!1:!0,n!==l.appApi.networkConnectivityApi.isOnline()&&l.networkConnectivityModel.set({is_connected:n,ajax_status:n}))}},e.AjaxUtil}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s+".js"))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n))}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.4",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("core/dev/nls/ui-strings",{root:!0,"bg-bg":!0,"ar-ae":!0,"ca-es":!0,"cs-cz":!0,"da-dk":!0,"de-de":!0,"en-ae":!0,"en-gb":!0,"en-il":!0,"es-es":!0,"eu-es":!0,"fi-fi":!0,"fr-fr":!0,"fr-ma":!0,"he-il":!0,"hr-hr":!0,"hu-hu":!0,"it-it":!0,"ja-jp":!0,"ko-kr":!0,"nb-no":!0,"nl-nl":!0,"pl-pl":!0,"pt-br":!0,"ro-ro":!0,"ru-ru":!0,"sk-sk":!0,"sl-si":!0,"sl-sl":!0,"sv-se":!0,"tr-tr":!0,"uk-ua":!0,"zh-cn":!0,"zh-tw":!0}),define("core/dev/nls/root/ui-strings",{ACTIONS:"Actions",ACTIONS_UC:"ACTIONS",ADDED:"Added",ADD_ACCOUNT:"Add Account",BACK:"Back",CLOSE:"Close",CONTINUE:"Continue",EXTENSION:"(.<%- ext %>)",FILES:"Files",FILE_NAME:"File Name",FOLDER_NAME:"Folder Name",LOCATION:"Location",MODIFIED:"Modified",NAME:"Name",OR:"or",PROPERTIES:"Properties",PROPERTIES_UC:"PROPERTIES",REMOVE:"Remove",SELECT_FILES:"Select Files",SELECT_FILE:"Select File",SIZE:"Size",SELECT_ALL:"Select All",TOTAL_FILES:"Total Files",N_ITEMS_CLICK_TO_VIEW:"<%= num %> items. Click to view.",CREATED_DATE:"Date Added",MODIFIED_DATE:"Date Modified",VIEWED_DATE:"Date Viewed",DATE_HH_MM_AMPM:"<%= hour %><%= sep %><%= minute %> <%= amPm %>",DATE_YESTERDAY:"Yesterday",DATE_MM_DD_YYYY:"<%= month %>/<%= day %>/<%= year %>",DATE_AND_TIME:"<%= dateStr %>, <%= timeStr %>",YYYY:"YYYY",AM:"AM",PM:"PM",HH:"H",HH_MM_SEPARATOR:":",MM:"M",DD:"D",ANIMATION:"Animation",AUDIO:"Audio",CALENDAR:"Calendar",CASCADING_STYLE_SHEET:"Cascading Style Sheet",CERTIFICATE:"Certificate",FONT:"Font",IMAGE:"Image",PLAIN_TEXT:"Plain Text",PRESENTATION:"Presentation",RICH_TEXT:"Rich Text",SPREADSHEET:"Spreadsheet",STYLE_SHEET:"Style Sheet",TEXT:"Text",UNKNOWN:"Unknown",VIDEO:"Video",KB:"<%= num %> KB",MB:"<%= num %> MB",GB:"<%= num %> GB",DECIMAL_SEPARATOR:".",THOUSANDS_SEPARATOR:",",FILE_NAME_CONTAINS:"File Name contains",FILE_TYPE_IS:"File Type is",FILE_CONTENT:"File contains",DATE_LAST_MODIFIED:"Date Last Modified is",DATE_LAST_VIEWED:"Date Last Viewed is",DATE_ADDED:"Date Added is",FILE_ADDED_BY:"File Added by",MIN_SIZE:"Min Size",MAX_SIZE:"Max Size",FILTER_DISPLAY_VALUE:"<%= field %>: <%= value %>",CREATE_PDF:"Create PDF",EXPORT_PDF:"Export PDF",COMBINE_PDF:"Combine PDF",FILL_SIGN:"Fill & Sign",ADOBE_ACROBAT:"Adobe Acrobat",ADOBE_READER_MOBILE:"Adobe Reader Mobile",ADOBE_READER:"Adobe Reader",ADOBE_SCAN:"Adobe Scan",TODAY:"Today",YESTERDAY:"Yesterday",WITHIN_LAST_WEEK:"Within Last Week",WITHIN_LAST_MONTH:"Within Last Month",ONE_TO_TWO_MONTHS_AGO:"1-2 Months Ago",TWO_TO_THREE_MONTHS_AGO:"2-3 Months Ago",THREE_TO_FOUR_MONTHS_AGO:"3-4 Months Ago",FOUR_TO_FIVE_MONTHS_AGO:"4-5 Months Ago",FIVE_TO_SIX_MONTHS_AGO:"5-6 Months Ago",SIX_TO_TWELVE_MONTHS_AGO:"6-12 Months Ago",MORE_THAN_ONE_YEAR_AGO:"1+ Year Ago",OK:"OK",CANCEL:"Cancel",CONFIRM_DELETE_TITLE:"Delete",CONFIRM_DELETE_MSG_ONE_ITEM:"Are you sure you want to delete this item?",CONFIRM_DELETE_MSG_N_ITEMS:"Are you sure you want to delete these <%= numItems %> items?",DOWNLOAD:"Download",DOWNLOAD_FILE:"Download File",DOWNLOAD_FILES:"Download Files",DOWNLOAD_FOLDER:"Download Folder",RENAME:"Rename",RENAME_ELLIPSIS:"Rename...",RENAME_FILE:"Rename File",RENAME_FOLDER:"Rename Folder",MOVE_FILE:"Move File",MOVE_FILES:"Move Files",MOVE_FOLDER:"Move Folder",MOVE_FOLDERS:"Move Folders",MOVE_FILE_AND_FOLDER:"Move File and Folder",MOVE_FILES_AND_FOLDER:"Move Files and Folder",MOVE_FILE_AND_FOLDERS:"Move File and Folders",MOVE_FILES_AND_FOLDERS:"Move Files and Folders",SHARE:"Share",SHARE_ELLIPSIS:"Share...",SHARE_FILE:"Share File",SHARE_FILES:"Share Files",SEND_FILE:"Send & Track File",SEND_FILES:"Send & Track Files",DELETE:"Delete",HOME:"Home",ENTER_KEYWORD:"Search",SEARCH:"Search",SHARED:"Shared",PREVIEW_NOT_AVAILABLE:"Cannot Preview Filetype",PREVIEW_NOT_AVAILABLE_DESC:"Please <a class='preview-download' href='javascript:void(0)'>download</a> the file for viewing.",RENAME_NAME_IN_USE:'The <%= existingType %> named "<%= name %>" already exists in this location. Please choose another <%= renamedType %> name.',RENAME_ILLEGAL_NAME:"The name contains illegal characters or has too many characters. Please choose another <%= renamedType %> name.",MOVE:"Move",MOVE_FILE_TO:"Move File To...",MOVE_FILES_TO:"Move Files To...",MOVE_FOLDER_TO:"Move Folder To...",MOVE_FOLDERS_TO:"Move Folders To...",MOVE_FILE_AND_FOLDER_TO:"Move File and Folder To...",MOVE_FILES_AND_FOLDER_TO:"Move Files and Folder To...",MOVE_FILE_AND_FOLDERS_TO:"Move File and Folders To...",MOVE_FILES_AND_FOLDERS_TO:"Move Files and Folders To...",DUPLICATE_NAME_TITLE:"Duplicate <%= type %> Name",DUPLICATE_NAME_PROMPT:'A <%= type %> named "<%- name %>" already exists at this location. What would you like to do?',DUPLICATE_NAME_REPLACE_EXISTING:"Replace the existing <%= type %>",DUPLICATE_NAME_RENAME_UPLOADED:"Rename the uploaded <%= type %>",DUPLICATE_NAME_DELETE_MOVED:"Delete the moved <%= type %>",DUPLICATE_NAME_RENAME_MOVED:"Rename the moved <%= type %>",FILE_INITIAL_CAP:"File",FILE:"file",FOLDER_INITIAL_CAP:"Folder",FOLDER:"folder",REPORT_ABUSE:"Report Abuse",REPORT_ABUSE_TITLE:"Report Abuse",REPORT_ABUSE_CONTENT_LABEL:"Content",REPORT_ABUSE_TITLE_LABEL:"Title",REPORT_ABUSE_DEFAMATION_LABEL:"Defamation",REPORT_ABUSE_OFFENSIVE_LABEL:"Offensive Content",REPORT_ABUSE_EXPLICIT_LABEL:"Sexually Explicit Content",REPORT_ABUSE_TRADEMARK_LABEL:"Trademark Infringement",REPORT_ABUSE_RACIST_LABEL:"Racist or Hate Content",REPORT_ABUSE_OTHER_LABEL:"Other",REPORT_ABUSE_BLURB:"If you feel that this content violates the Adobe <a class='abuse-dialog-link' href='http://www.adobe.com/go/gfooter_terms_of_use' target='_blank'>Terms of Use</a>, you may report this content by filling out this quick form.",REPORT_ABUSE_EMAIL_PROMPT:"Your Email",REPORT_ABUSE_NAME_PROMPT:"Your Name",REPORT_ABUSE_TARGET_TYPE_PROMPT:"What are you reporting?",REPORT_ABUSE_REASON_PROMPT:"Why are you reporting this content?",REPORT_ABUSE_DESCRIPTION_PROMPT:"Please provide a description of your concern.",REPORT_ABUSE_COPYRIGHT_REPORT:"To report a Copyright Violation, please follow Section 17 in the <a class='abuse-dialog-link' href='http://www.adobe.com/go/gfooter_terms_of_use' target='_blank'>Terms of Use</a>.",REPORT_ABUSE_REPORT_BUTTON:"Report Abuse",REPORT_ABUSE_EMAIL_ERROR:"You must enter a valid email address.",LANGUAGE_CHANGE:"<%= lang %> (Change)",CHOOSE_LANGUAGE:"Choose Your Language",QUOTA_WARNING_DLG_TITLE_RUNNING_OUT:"File Storage Running Out",QUOTA_WARNING_DLG_MSG_RUNNING_OUT:"You are currently using <%= using %> of your <%= allotment %> allotment and will soon run out of storage.",QUOTA_WARNING_DLG_TITLE_EXCEEDED:"File Storage Exceeded",QUOTA_WARNING_DLG_MSG_LOGIN_EXCEEDED:"Your total storage of <%= using %> exceeds the maximum <%= allotment %> allowed with your new subscription.",QUOTA_WARNING_DLG_MSG_UPLOAD_EXCEEDED:"The uploaded file could not be saved because it would exceed your quota allotment of <%= allotment %>.",QUOTA_WARNING_DLG_MSG_YOU_MAY_VIEW:"You may view and download all existing files, but to save additional files you must upgrade your account.",QUOTA_WARNING_DLG_MSG_YOU_WILL_NEED:"You will need to delete some files to free up some additional space.",QUOTA_WARNING_DLG_MSG_UPGRADE:"Upgrade your account for more storage and additional features.",LEARN_MORE:"Learn More",UPGRADE:"Upgrade",ERROR:"Error",MISC_ERROR_ACROBAT_FILE_OPEN_MAX_TITLE:"File Open Maximum Exceeded",MISC_ERROR_ACROBAT_FILE_OPEN_MAX_MSG:"You can open at most 50 files at a time.",HTTP_STATUS_DEFAULT_TITLE:"Could not complete your request",HTTP_STATUS_DEFAULT_MSG:"An error occurred while trying to complete your request, and it could not be completed.",HTTP_STATUS_DEFAULT_MSG_CEF:"An error occurred while connecting to the service. Please try again later.",HTTP_STATUS_400_TITLE:"Could not complete your request (400)",HTTP_STATUS_400_TITLE_CEF:"Could not complete your request",HTTP_STATUS_400_MSG:"An error occurred while trying to complete your request, and it could not be completed.",HTTP_STATUS_401_TITLE:"You have been logged out (401)",HTTP_STATUS_401_TITLE_CEF:"You have been logged out",HTTP_STATUS_401_MSG:'Your session has expired and you have been logged out due to inactivity. Click "Sign In" below to log back in.',HTTP_STATUS_401_MSG_CEF:"An error occurred. Please try signing out, and signing in again",HTTP_STATUS_403_QUOTA_TITLE:"Storage Quota Exceeded (403)",HTTP_STATUS_403_QUOTA_TITLE_CEF:"Storage Quota Exceeded",HTTP_STATUS_403_QUOTA_MSG:"Your file could not be uploaded, as it would exceed your storage quota. You may want to delete some existing files to provide more space.",HTTP_STATUS_403_DEL_FOLDER_TITLE:"Cannot Delete Folder With Content (403)",HTTP_STATUS_403_DEL_FOLDER_TITLE_CEF:"Cannot Delete Folder With Content",HTTP_STATUS_403_DEL_FOLDER_MSG:"You may only delete empty folders. Please delete all contents before deleting the folder.",HTTP_STATUS_403_NO_SHARING_TITLE:"Sharing Disallowed (403)",HTTP_STATUS_403_NO_SHARING_TITLE_CEF:"Sharing Disallowed",HTTP_STATUS_403_NO_SHARING_MSG:"Your file could not be shared because it is an audio or video file.",HTTP_STATUS_403_VIRUS_TITLE:"Virus Detected (403)",HTTP_STATUS_403_VIRUS_TITLE_CEF:"Virus Detected",HTTP_STATUS_403_VIRUS_MSG:"Your file could not be uploaded because it contains a virus.",HTTP_STATUS_403_ENCRYPTION_TITLE:"Decryption failed (403)",HTTP_STATUS_403_ENCRYPTION_TITLE_CEF:"Decryption failed",HTTP_STATUS_403_ENCRYPTION_MSG:"There was an error accessing your content. Decryption failed. Contact your IT Administrator.",HTTP_STATUS_403_TITLE:"Forbidden (403)",HTTP_STATUS_403_TITLE_CEF:"Forbidden",HTTP_STATUS_403_MSG:"The operation could not be completed. Please try again later.",HTTP_STATUS_404_TITLE:"File Not Found (404)",HTTP_STATUS_404_TITLE_CEF:"File Not Found",HTTP_STATUS_404_MSG:"The file you are trying to access could not be found. The file may have been deleted or moved in another session.",HTTP_STATUS_405_TITLE:"Method Not Allowed (405)",HTTP_STATUS_405_TITLE_CEF:"Method Not Allowed",HTTP_STATUS_405_MSG:"Your request could not be completed, as the method is not allowed.",HTTP_STATUS_406_TITLE:"Browser Incompatibility",HTTP_STATUS_406_TITLE_CEF:"Type Not Supported",HTTP_STATUS_406_MSG:"Your browser is unable to communicate with this website. Please try a different browser. (Error 406: Type not supported).",HTTP_STATUS_415_TITLE:"Unsupported Media Type (415)",HTTP_STATUS_415_TITLE_CEF:"Unsupported Media Type",HTTP_STATUS_415_MSG:"Your request could not be completed, as the media type specified is not supported.",HTTP_STATUS_500_TITLE:"Internal Server Error (500)",HTTP_STATUS_500_TITLE_CEF:"Internal Server Error",HTTP_STATUS_500_MSG:"Your request could not be completed due to an internal server error.",HTTP_STATUS_501_TITLE:"Request not Implemented (501)",HTTP_STATUS_501_TITLE_CEF:"Request not Implemented",HTTP_STATUS_501_MSG:"The request you are trying to make is not yet implemented in the server.",HTTP_STATUS_503_TITLE:"Server Currently Unavailable (503)",HTTP_STATUS_503_TITLE_CEF:"Server Currently Unavailable",HTTP_STATUS_503_MSG:"The server could not reached, and may be down. Please try again later.",DOWNLOAD_FORM_TITLE:"Form File",DOWNLOAD_FORM_MESSAGE:"Your form file must be converted to PDF to be downloaded.",DOWNLOAD_FORMS_EXCLUDED_MESSAGE:"Your selection includes form files, which are not available for download. These files will be excluded. You can download PDF versions by selecting a single form file for download.",DOWNLOAD_FORMS_MESSAGE:"Form files are not available for download. You can download PDF versions by selecting a single form file for download.",SETTINGS:"Settings",DONE:"Done",FILE_LISTS:"File Lists",STORAGE:"Storage",EDIT_ACCOUNTS:"Edit Accounts",DOCUMENT_CLOUD_FILES:"Document Cloud",REMOVE_ACCOUNT:"Remove Account",ACROBAT_DOT_COM_FILES:"Document Cloud",DOWNLOAD_ALL:"Download All",NOTIFICATION_UPLOADING:"Uploading...",NOTIFICATION_CONVERTING:"Converting...",NOTIFICATION_CONVERSION_FAILURE:"Conversion Failure",NOTIFICATION_DOWNLOAD_FAILURE:"Download Failure",READY:"Ready",NOTIFICATION_WAITING:"Pending...",NOTIFICATION_DOWNLOADING:"Downloading...",NOTIFICATION_PROCESSING:"Processing...",NOTIFICATION_DOWNLOAD_ERROR:"An error occurred while downloading this file",NOTIFICATION_RETRY:"Retry",YES:"Yes",NO:"No",REPLACE_EXISTING_FILE_TITLE:"Replace existing file",REPLACE_EXISTING_FILE_MSG:"A file with this name already exists. Do you want to replace it?",REPLACE_EXISTING_FILE_ARIA_LABEL:"Replace existing file. Yes",OPEN:"Open",OPEN_FILE:"Open File",OPEN_FILES:"Open Files",OPEN_FOLDER:"Open Folder",SAVE_AS:"Save As",SAVE_AS_FILE:"Save As File",SAVE_AS_FILES:"Save As Zip",SAVED:"Saved",SHOW_IN_FOLDER:"Show in Folder",SEND:"Send",CONVERT_TO_PDF:"Convert to PDF",COMBINE:"Combine",BROWSE_FOLDER:"Browse...",CHOOSE_DIFFERENT_FOLDER:"Choose a Different Folder...",ATTACH_TO_EMAIL:"Attach to Email",SEND_AND_TRACK:"Send & Track",PRINT:"Print",PUBLIC_ICON_TOOLTIP:"File shared with Adobe Send & Track",RNA_VERSION_DIALOG_TITLE:"An error occurred",RNA_VERSION_DIALOG_CONTENT:"Features in this area connect to the Adobe Document Cloud and must be updated to remain compatible with the service. To update to the latest version, choose Check for Updates from the Help menu or click the link below to continue your work in a web browser.",RNA_VERSION_DIALOG_LINK_TITLE:"Go to Document Cloud",EXPORTPDF_RHP_GOURL:"http://www.adobe.com/go/epdfrhprdr6_12_0_0",EXPORTPDF_GOURL:"http://www.adobe.com/go/epdfrdr6_12_0_0",CREATEPDF_RHP_GOURL:"http://www.adobe.com/go/cpdfrhprdr6_12_0_0",CREATEPDF_GOURL:"http://www.adobe.com/go/cpdfrdr2_12_0_0",MY_FILES_GOURL:"http://www.adobe.com/go/doccloudfilesrdr_12_0_0",FILLSIGN_GOURL:"http://www.adobe.com/go/fsrdr1_12_0_0",SEND_GOURL:"http://www.adobe.com/go/sendpluginrdr2_12_0_0",SENTFILES_GOURL:"http://www.adobe.com/go/sendpluginrdr3_12_0_0",MY_FILES_GOURL_ACRO:"http://www.adobe.com/go/doccloudfilesacro_12_0_0",FILLSIGN_GOURL_ACRO:"http://www.adobe.com/go/fsacro1_12_0_0",SEND_GOURL_ACRO:"http://www.adobe.com/go/sendpluginacro2_12_0_0",SENTFILES_GOURL_ACRO:"http://www.adobe.com/go/sendpluginacro3_12_0_0",SERVER_OUTAGE_DIALOG_TITLE:"An error occurred",SERVER_OUTAGE_DIALOG_CONTENT:"The service you are trying to reach is temporarily unavailable.  Please try again later."}),define("core/dev/utils/num-util",["core/ac-core","i18n!core/nls/ui-strings"],function(e,t){var n=9007199254740992,r=2147483647,i=1024,s=i*i,o=i*s,u=0,a=i,f=999.5*i-1,l=1.05*s-1,c=9.95*s-1,h=999.5*s-1,p=1.05*o-1,d=_.template(t.KB),v=_.template(t.MB),m=_.template(t.GB);return e.NumUtil={MAX_INT:n,MAX_INT32:r,KB:i,MB:s,GB:o,localizeDecimalPoint:function(e){return e.replace(/\./g,t.DECIMAL_SEPARATOR)},formatWithThousandsSeparator:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t.THOUSANDS_SEPARATOR)},formatSize:function(e){var t;return e>p?t=m({num:(e/o).toFixed(0)}):e>h?t=m({num:1}):e>c?t=v({num:(e/s).toFixed(0)}):e>l?t=v({num:(e/s).toFixed(1)}):e>f?t=v({num:1}):e>a?t=d({num:Math.ceil(e/i).toFixed(0)}):t=d({num:e>u?1:0}),this.formatWithThousandsSeparator(this.localizeDecimalPoint(t))},removeNonNumerics:function(e){var t="",n,r=e.length,i;for(n=0;n<r;n+=1)i=e.charCodeAt(n),i>=48&&i<=57&&(t+=String.fromCharCode(i));return t},pad:function(e,t,n){var r=e.toString(),i="0";n&&n.pad&&(i=n.pad);while(r.length<t)r=i+r;return r},padSpace:function(e,t){return this.pad(e,t,{pad:" "})}},e.NumUtil}),define("core/dev/utils/crypto-util",["core/ac-core","core/utils/num-util"],function(e,t){return e.CryptoUtil={getSha256:function(e){return $.sha256?$.sha256(e):""},getRandomString:function(e){var n=(new Date).toString()+_.random(t.MAX_INT);return this.getSha256(n).substr(0,e||32)}},e.CryptoUtil}),define("core/dev/utils/http-util",["core/ac-core","core/utils/ajax-util","core/utils/crypto-util"],function(e,t,n){var r="application/vnd.adobe.skybox+json;version=<%= version %>",i="application/vnd.adobe.skybox+json;version=<%= version %>;charset=utf-8",s="application/vnd.adobe.dex+json;version=<%= version %>",o="application/vnd.adobe.dex+json;version=<%= version %>;charset=utf-8",u={},a={},f={},l={},c;return e.HttpUtil={REQUEST_HEADER_CLIENT_ID:"api_browser",setSessionAttrs:function(e,t){var n=_.pick(t,"primary_token","expiration_time");e.set(n),c=n},clearSessionAttrs:function(e){e&&e.unset("primary_token"),c=undefined},getRequestHeaders:function(t,r,i){var s,o,u,a,f,l;i?(r=r||{},r.isAicRequest=i):i=r&&r.isAicRequest;if(t==="GET"||t==="DELETE")s=i?this.getAicRequestHeadersGetDelete(r):this.getBhRequestHeadersGetDelete(r);else if(t==="POST"||t==="PUT")s=i?this.getAicRequestHeadersPostPut(r):this.getBhRequestHeadersPostPut(r);return r&&(u=r.excludeAccessToken,a=r.excludeClientId,f=r.includeCsrf,l=r.etag),a||(s["x-api-client-id"]=this.REQUEST_HEADER_CLIENT_ID),o=c?c.primary_token:undefined,o&&!u&&(s.Authorization="Bearer "+o),f&&(s["x-csrftoken"]=e.Util.getCookie("csrftoken")),l&&(s["If-None-Match"]=l),i&&(s["x-request-id"]=n.getRandomString(32)),s},getRequestHeadersNoClientId:function(e,t,n){return this.getRequestHeaders(e,_.extend({},t,{excludeClientId:!0}),n)},getBhRequestHeadersGetDelete:function(e){var t;return e&&(t=e.bhAcceptVersion),t=t||1,{Accept:this.getBhRequestHeaderAccept(t)}},getBhRequestHeadersPostPut:function(e){var t,n;return e&&(t=e.bhAcceptVersion,n=e.bhContentTypeVersion),t=t||1,n=n||1,{Accept:this.getBhRequestHeaderAccept(t),"Content-Type":this.getBhRequestHeaderContentType(n)}},getBhRequestHeaderAccept:function(e){return this._getRenderedHeaderTemplate(r,e,u)},getBhRequestHeaderContentType:function(e){return this._getRenderedHeaderTemplate(i,e,a)},getAicRequestHeadersGetDelete:function(e){var t;return e&&(t=e.aicAcceptVersion),t=t||1,{Accept:this.getAicRequestHeaderAccept(t)}},getAicRequestHeadersPostPut:function(e){var t,n;return e&&(t=e.aicAcceptVersion,n=e.aicContentTypeVersion),t=t||1,n=n||1,{Accept:this.getAicRequestHeaderAccept(t),"Content-Type":this.getAicRequestHeaderContentType(n)}},getAicRequestHeaderAccept:function(e){return this._getRenderedHeaderTemplate(s,e,f)},getAicRequestHeaderContentType:function(e){return this._getRenderedHeaderTemplate(o,e,l)},addRequestHeaders:function(e,t,n){var r=this.getRequestHeaders(e,t,n);return t=_.extend({},t),_.extend(t,{headers:r})},customizeOptions:function(e,n,r){return n=this.addRequestHeaders(e,n,r),_.extend(n,{throttleOn:!0,beforeSend:t.beforeSend,complete:t.complete})},getClientIdQueryParam:function(){return"x-api-client-id="+this.REQUEST_HEADER_CLIENT_ID},_getRenderedHeaderTemplate:function(e,t,n){var r="v"+t,i;return i=n[r],i||(i=n[r]=_.template(e,{version:t})),i}},e.HttpUtil}),define("plugins-common/dev/ac-plugins",["underscore"],function(e){var t=Ac.Plugins;return t||(t=Ac.Plugins={}),e.extend(t,{ACROBAT:"acrobat",CONVERTPDF:"convertpdf",CREATEPDF:"createpdf",CREATEPDF_RHP:"createpdf_rhp",DESKTOP_CONNECTOR_FILES:"desktop_connector_files",EXPORTPDF:"exportpdf",EXPORTPDF_RHP:"exportpdf_rhp",FILLSIGN:"fillsign",FILLSIGN_SETTINGS:"fillsign_settings",FORMSCENTRAL:"formscentral",HOME:"home",SAMPLE_FILES:"sample_files",MY_COMPUTER:"my_computer",MY_COMPUTER_SELECT:"my_computer_select",MY_FILES:"my_files",MY_FILES_SELECT:"my_files_select",SCAN_FILES:"scan_files",MY_RECENT_FILES:"my_recent_files",MY_SHAREPOINT_FILES:"my_sharepoint_files",SEND:"send",OB_PREVIEW:"ob_preview",TOOL_EXAMPLE:"tool_example",DIGSIG:"digsig"}),t}),define("core/dev/ops/op",["underscore","core/ac-core","core/utils/util","core/utils/http-util","plugins-common/ac-plugins"],function(e,t,n,r,i){return t.Op=Backbone.View.extend({initialize:function(){Backbone.View.prototype.initialize.call(this),this.cid=e.uniqueId("op"),delete this.options.viewId,delete this.$el,delete this.el,e.bindAll(this)},run:function(){return LOG(0,"AcCore.Op.run must be implemented by sub-class"),undefined},teardown:function(){return undefined},_showModalUi:function(e,t){this.options.appApi.displayApi.showModal(e,t).showSpinner(e)},_getResolvedPromise:function(e){return $.Deferred().resolve().promise(e)},_getRejectedPromise:function(e){return $.Deferred().reject().promise(e)},_getUnresolvedPromise:function(e){return $.Deferred().promise(e)},_logSiteCatalystEvent:function(e){var t=this.options,r=[];if(t.noScAnalytics)return;r=n.addToArray(r,t.scContext),r=n.addToArray(r,this._getSiteCatalystContext()),r=n.addToArray(r,e),t.appApi.siteCatalystApi.logScEvent(r)},_getSiteCatalystContext:function(){return undefined},_logFormScEvent:function(t,n,s){var o=this.options,u,a,f,l=o.appApi,c={},h={};if(o.noScAnalytics)return;n&&(c.featureType=n,h.action=n),t&&(c.sectionName=t,h.category=t),s&&(h.label=s),l.siteCatalystApi.logScEvent([s],c),u=l.pluginsApi.getBaseUrl(i.FILLSIGN)+"/api/event",a="POST",f=e.extend({},r.getRequestHeaders(a),{"Content-Type":"application/json"}),o=e.extend({},o,{type:a,headers:f,dataType:"json",modal:!1,data:JSON.stringify(h)}),l.networkApi.throttledAjax(u,o)}}),t.Op}),define("aicx/dev/ops/getting/getting-base-aic-uris-op",["core/ac-core","aicx/ac-aicx","core/ops/op"],function(e,t){return t.GettingBaseAicUrisOp=e.Op.extend({run:function(){var e=t.baseAicUrisModel;return e&&!_.isEmpty(e.attributes)?this._getResolvedPromise(e):(t.baseAicUrisModel=e=this.options.baseAicUrisModel,e.fetch({modal:!1}))}}),t.GettingBaseAicUrisOp}),define("aicx/dev/ops/user/getting-users-me-op",["core/ac-core","aicx/ac-aicx","core/ops/op"],function(e,t){var n=["comments","common","conversions","files","fillsign","rfe","send"],r=["acrobat","common","conversions","esign","fillsign","send"];return t.GettingUsersMeOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.localeApi,i=e.usersMeIdentityModel,s,o,u,a;return s=i.get("user_id"),e.usersMeModel.fetch({modal:!1}).then(_.bind(function(f){e.usersMeIdentityModel.set(f.identity),e.usersMeSubscriptionsModel.set("subscriptions",f.subscriptions),e.usersMeLimitsConversionsModel.set(f["limits/conversions"]),e.usersMePrefsConversionsModel.set(f["prefs/conversions"]),_.each(n,_.bind(function(e){this._getPrefsModel(e).set(f["prefs/"+e])},this)),_.each(r,_.bind(function(e){this._getLimitsModel(e).set(f["limits/"+e])},this)),a=_.isString(t.getQueryParamLocale()),o=t.getNormalizedLocale(),u=t.getNormalizedLocale(f.identity.user_lang),!a&&o!==u&&t.setLocale(u),!_.isUndefined(s)&&s!==i.get("user_id")&&e.appApi.routerApi.reloadPage({noDeepLink:!0,reason:"User ID changed"})},this))},_getPrefsModel:function(e){var n=this.options,r=n.prefsModels,i;return r||(r=n.prefsModels={}),i=r[e],i||(i=r[e]=t.modelFactory.create("UsersMePrefsModel",undefined,{category:e})),i},_getLimitsModel:function(e){var n=this.options,r=n.limitsModels,i;return r||(r=n.limitsModels={}),i=r[e],i||(i=r[e]=t.modelFactory.create("UsersMeLimitsModel",undefined,{category:e})),i}}),t.GettingUsersMeOp}),define("aicx/dev/ops/user/getting-users-me-limits-op",["core/ac-core","aicx/ac-aicx","core/ops/op"],function(e,t){var n={};return t.GettingUsersMeLimitsOp=e.Op.extend({run:function(e,t){function i(){var t=$.Deferred().resolve(r.attributes).promise();return n[e]=t,t}var r;return r=this.options.limitsModels[e],r?t?r.fetch({modal:!1}).then(function(){return i()}):n[e]||i():(LOG("AcAicx.GettingUsersMeLimitsOp.run: Unrecognized preferences category: "+e),this._getResolvedPromise())}}),t.GettingUsersMeLimitsOp}),define("aicx/dev/ops/user/getting-users-me-prefs-op",["core/ac-core","aicx/ac-aicx","core/ops/op"],function(e,t){var n={};return t.GettingUsersMePrefsOp=e.Op.extend({run:function(e,t){function i(){var t=$.Deferred().resolve(r.attributes).promise();return n[e]=t,t}var r;return r=this.options.prefsModels[e],r?t?r.fetch({modal:!1}).then(function(){return i()}):n[e]||i():(LOG("AcAicx.GettingUsersMePrefsOp.run: Unrecognized preferences category: "+e),this._getResolvedPromise())}}),t.GettingUsersMePrefsOp}),define("aicx/dev/ops/user/setting-users-me-prefs-op",["core/ac-core","aicx/ac-aicx","core/ops/op"],function(e,t){return t.SettingUsersMePrefsOp=e.Op.extend({run:function(e,t){var n=this.options.prefsModels[e];return n?(t=_.clone(t),n.clear({silent:!0}),n.set("id","_"),n.save(t,{global:!1}).then(function(){return $.Deferred().resolve(n.attributes).promise()})):(LOG("AcAicx.SettingUsersMePrefsOp.run no model for '"+e+"' category"),this._getRejectedPromise())}}),t.SettingUsersMePrefsOp}),define("aicx/dev/ops/op-factory",["core/ac-core","aicx/ac-aicx","aicx/ops/getting/getting-base-aic-uris-op","aicx/ops/user/getting-users-me-op","aicx/ops/user/getting-users-me-limits-op","aicx/ops/user/getting-users-me-prefs-op","aicx/ops/user/setting-users-me-prefs-op"],function(e,t){return t.OpFactory=e.Op.extend({create:function(e,n){var r=t[e];if(!!r)return new r(n);LOG(0,"AcAicx.OpFactory.create: Unrecognized class: "+e)}}),t.OpFactory}),define("core/dev/models/model",["core/ac-core","core/utils/http-util"],function(e,t){return e.Model=Backbone.Model.extend({initialize:function(){Backbone.Model.prototype.initialize.call(this),this.idAttribute="id"},fetch:function(e){return Backbone.Model.prototype.fetch.call(this,this.customizeOptions("GET",e))},save:function(e,t,n){var r=Backbone.Model.prototype.save,i;return!e||_.isObject(e)?i=r.call(this,e,this.customizeOptions("POST",t)):i=r.call(this,e,t,this.customizeOptions("POST",n)),i},destroy:function(e){return Backbone.Model.prototype.destroy.call(this,this.customizeOptions("DELETE",e))},customizeOptions:function(e,n){return t.customizeOptions(e,_.extend({},n,{excludeClientId:!0}))},_getClientIdQueryParam:function(){return t.getClientIdQueryParam()}}),e.Model}),define("aicx/dev/models/aicx-model",["core/ac-core","aicx/ac-aicx","core/utils/http-util","core/models/model"],function(e,t,n){t.AicxModel=e.Model.extend({customizeOptions:function(e,t){return n.customizeOptions(e,t,!0)}})}),define("aicx/dev/models/base-aic-uris-model",["aicx/ac-aicx","core/utils/util","aicx/models/aicx-model"],function(e,t){return e.BaseAicUrisModel=e.AicxModel.extend({url:function(){return t.isCEF()?e.getBaseAicUrl()+"createpdf/api/base_uris":Ac.Aicx.baseCpdfUri+"base_uris"}}),e.BaseAicUrisModel}),define("aicx/dev/models/users-me-identity-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMeIdentityModel=e.AicxModel.extend({url:function(){return e.baseAicUrisModel.get("api")+"users/me/identity"}}),e.UsersMeIdentityModel}),define("aicx/dev/models/users-me-limits-conversions-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMeLimitsConversionsModel=e.AicxModel.extend({url:function(){return e.baseAicUrisModel.get("api")+"users/me/limits/conversions"}}),e.UsersMeLimitsConversionsModel}),define("aicx/dev/models/users-me-limits-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMeLimitsModel=e.AicxModel.extend({initialize:function(t,n){e.AicxModel.prototype.initialize.call(this),this._category=n.category},url:function(){return e.baseAicUrisModel.get("api")+"users/me/limits/"+this._category}}),e.UsersMeLimitsModel}),define("aicx/dev/models/users-me-model",["aicx/ac-aicx","core/utils/util","aicx/models/aicx-model"],function(e,t){return e.UsersMeModel=e.AicxModel.extend({url:function(){var n=e.baseAicUrisModel.get("api")+"users/me"+"?fields=identity,subscriptions,"+"limits/acrobat,"+"limits/common,"+"limits/conversions,"+"limits/esign,"+"limits/fillsign,"+"limits/send,"+"prefs/comments,"+"prefs/common,"+"prefs/conversions,"+"prefs/files,"+"prefs/fillsign,"+"prefs/send";return t.isCEF()||(n+=",prefs/rfe"),n}}),e.UsersMeModel}),define("aicx/dev/models/users-me-prefs-conversions-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMePrefsConversionsModel=e.AicxModel.extend({url:function(){return""}}),e.UsersMePrefsConversionsModel}),define("aicx/dev/models/users-me-prefs-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMePrefsModel=e.AicxModel.extend({initialize:function(t,n){e.AicxModel.prototype.initialize.call(this),this._category=n.category},url:function(){return e.baseAicUrisModel.get("api")+"users/me/prefs/"+this._category}}),e.UsersMePrefsModel}),define("aicx/dev/models/users-me-subscriptions-model",["aicx/ac-aicx","aicx/models/aicx-model"],function(e){return e.UsersMeSubscriptionsModel=e.AicxModel.extend({url:function(){return e.baseAicUrisModel.get("api")+"users/me/subscriptions"}}),e.UsersMeSubscriptionsModel}),define("aicx/dev/models/model-factory",["core/ac-core","aicx/ac-aicx","core/models/model","aicx/models/base-aic-uris-model","aicx/models/users-me-identity-model","aicx/models/users-me-limits-conversions-model","aicx/models/users-me-limits-model","aicx/models/users-me-model","aicx/models/users-me-prefs-conversions-model","aicx/models/users-me-prefs-model","aicx/models/users-me-subscriptions-model"],function(e,t){return t.ModelFactory=e.Model.extend({create:function(e,n,r){var i=t[e];if(!!i)return new i(n,r);LOG(0,"AcAicx.ModelFactory.create: Unrecognized class: "+e)}}),t.ModelFactory}),define("aicx/dev/ac-aicx-init",["aicx/ac-aicx","aicx/models/model-factory","aicx/ops/op-factory"],function(e){return _.extend(e,{modelFactory:new e.ModelFactory,opFactory:new e.OpFactory}),e}),define("aicx/dev/all-modules",["aicx-unmapped/dev/ops/op-factory","aicx-unmapped/dev/ops/getting/getting-base-aic-uris-op","aicx-unmapped/dev/ops/user/setting-users-me-prefs-op","aicx-unmapped/dev/ops/user/getting-users-me-limits-op","aicx-unmapped/dev/ops/user/getting-users-me-prefs-op","aicx-unmapped/dev/ops/user/getting-users-me-op","aicx-unmapped/dev/models/base-aic-uris-model","aicx-unmapped/dev/models/model-factory","aicx-unmapped/dev/models/users-me-limits-model","aicx-unmapped/dev/models/users-me-prefs-conversions-model","aicx-unmapped/dev/models/users-me-prefs-model","aicx-unmapped/dev/models/users-me-limits-conversions-model","aicx-unmapped/dev/models/aicx-model","aicx-unmapped/dev/models/users-me-identity-model","aicx-unmapped/dev/models/users-me-model","aicx-unmapped/dev/models/users-me-subscriptions-model","aicx-unmapped/dev/ac-aicx-init","aicx-unmapped/dev/ac-aicx"],function(){return undefined}),define("app-api/dev/ac-app-api",["require"],function(e){var t,n,r,i,s,o;return i=e.toUrl("core"),s=i.lastIndexOf("/"),o=i.indexOf(".js"),o!==-1?t=i.substr(s+1,o-s-1):t=i.substr(s+1),n=Ac.AppApi,n||(n=Ac.AppApi={}),r=n[t],r||(r=n[t]={}),r.VERSION=t,r}),define("core/dev/utils/app-api-mgr",["core/ac-core"],function(e){var t={},n="dev";return e.AppApiMgr={addAppApi:function(e,n){t[e]=n},hasAppApi:function(e){return!!t[e]},getAppApi:function(e){var r;return e&&(r=t[e],r||LOG("AcCore.AppApiMgr.getAppApi ERROR No App API for version '"+e+"'")),r||(r=t[n]),r},appApisAreReady:function(){_.each(t,function(e){e.appIsReady()})}},e.AppApiMgr}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Nt.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var n=!0;return h(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){gn[e]||(i(t),gn[e]=!0)}function u(e,t){return function(n){return v(e.call(this,n),t)}}function a(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function f(){}function l(e,t){t!==!1&&M(e),p(this,e),this._d=new Date(+e._d)}function c(e){var t=T(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*f+6e4*a+36e5*u,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function h(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pt.length>0)for(n in Pt)r=Pt[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function d(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function m(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=B(t,e),e.isBefore(t)?n=m(e,t):(n=m(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function y(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=bt.duration(n,r),b(this,i,e),this}}function b(e,t,n,r){var i=t._milliseconds,s=t._days,o=t._months;r=null==r?!0:r,i&&e._d.setTime(+e._d+i*n),s&&pt(e,"Date",ht(e,"Date")+s*n),o&&ct(e,ht(e,"Month")+o*n),r&&bt.updateOffset(e,s||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function E(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function S(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&C(e[r])!==C(t[r]))&&o++;return o+s}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ln[e]||cn[t]||t}return e}function T(e){var t,r,i={};for(r in e)n(e,r)&&(t=x(r),t&&(i[t]=e[r]));return i}function N(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}bt[t]=function(i,s){var o,u,a=bt._locale[t],f=[];if("number"==typeof i&&(s=i,i=e),u=function(e){var t=bt().utc().set(r,e);return a.call(bt._locale,t,i||"")},null!=s)return u(s);for(o=0;n>o;o++)f.push(u(o));return f}}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function k(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function L(e,t,n){return ut(bt([e,11,31+t-n]),t,n).week}function A(e){return O(e)?366:365}function O(e){return e%4===0&&e%100!==0||e%400===0}function M(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[kt]<0||e._a[kt]>11?kt:e._a[Lt]<1||e._a[Lt]>k(e._a[Ct],e._a[kt])?Lt:e._a[At]<0||e._a[At]>23?At:e._a[Ot]<0||e._a[Ot]>59?Ot:e._a[Mt]<0||e._a[Mt]>59?Mt:e._a[_t]<0||e._a[_t]>999?_t:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Lt)&&(t=Lt),e._pf.overflow=t)}function _(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,n,r,i,s=0;s<e.length;){for(i=D(e[s]).split("-"),t=i.length,n=D(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=H(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&S(i,n,!0)>=t-1)break;t--}s++}return null}function H(e){var t=null;if(!Dt[e]&&Ht)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return Dt[e]}function B(e,t){return t._isUTC?bt(e).zone(t._offset||0):bt(e).local()}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e){var t,n,r=e.match(It);for(t=0,n=r.length;n>t;t++)r[t]=mn[r[t]]?mn[r[t]]:j(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function I(e,t){return e.isValid()?(t=q(t,e.localeData()),hn[t]||(hn[t]=F(t)),hn[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(qt.lastIndex=0;r>=0&&qt.test(e);)e=e.replace(qt,n),qt.lastIndex=0,r-=1;return e}function R(e,t){var n,r=t._strict;switch(e){case"Q":return Gt;case"DDDD":return Zt;case"YYYY":case"GGGG":case"gggg":return r?en:zt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?tn:Wt;case"S":if(r)return Gt;case"SS":if(r)return Yt;case"SSS":if(r)return Zt;case"DDD":return Ut;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"X":return Kt;case"Z":case"ZZ":return $t;case"T":return Jt;case"SSSS":return Xt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Yt:Rt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rt;case"Do":return Qt;default:return n=new RegExp(Q(K(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match($t)||[],n=t[t.length-1]||[],r=(n+"").match(an)||["-",0,0],i=+(60*r[1])+C(r[2]);return"+"===r[0]?-i:i}function z(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[kt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(i[kt]=C(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t),null!=r?i[kt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Lt]=C(t));break;case"Do":null!=t&&(i[Lt]=C(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=C(t));break;case"YY":i[Ct]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Ct]=C(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":i[At]=C(t);break;case"m":case"mm":i[Ot]=C(t);break;case"s":case"ss":i[Mt]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":i[_t]=C(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=U(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=C(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function W(e){var n,r,i,s,o,u,a;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,u=4,r=t(n.GG,e._a[Ct],ut(bt(),1,4).year),i=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=t(n.gg,e._a[Ct],ut(bt(),o,u).year),i=t(n.w,1),null!=n.d?(s=n.d,o>s&&++i):s=null!=n.e?n.e+o:o),a=at(r,i,s,u,o),e._a[Ct]=a.year,e._dayOfYear=a.dayOfYear}function X(e){var n,r,i,s,o=[];if(!e._d){for(i=$(e),e._w&&null==e._a[Lt]&&null==e._a[kt]&&W(e),e._dayOfYear&&(s=t(e._a[Ct],i[Ct]),e._dayOfYear>A(s)&&(e._pf._overflowDayOfYear=!0),r=rt(s,0,e._dayOfYear),e._a[kt]=r.getUTCMonth(),e._a[Lt]=r.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=i[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?rt:nt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],X(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(e){if(e._f===bt.ISO_8601)return void Y(e);e._a=[],e._pf.empty=!0;var t,n,r,i,s,o=""+e._i,u=o.length,a=0;for(r=q(e._f,e._locale).match(It)||[],t=0;t<r.length;t++)i=r[t],n=(o.match(R(i,e))||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),a+=n.length),mn[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),z(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=u-a,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[At]<12&&(e._a[At]+=12),e._isPm===!1&&12===e._a[At]&&(e._a[At]=0),X(e),M(e)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(e){var t,n,i,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void (e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[s],J(t),_(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||i>o)&&(i=o,n=t));h(e,n||t)}function Y(e){var t,n,r=e._i,i=rn.exec(r);if(i){for(e._pf.iso=!0,t=0,n=on.length;n>t;t++)if(on[t][1].exec(r)){e._f=on[t][0]+(i[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(r)){e._f+=un[t][0];break}r.match($t)&&(e._f+="Z"),J(e)}else e._isValid=!1}function Z(e){Y(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function tt(t){var n,r=t._i;r===e?t._d=new Date:E(r)?t._d=new Date(+r):null!==(n=Bt.exec(r))?t._d=new Date(+n[1]):"string"==typeof r?Z(t):w(r)?(t._a=et(r.slice(0),function(e){return parseInt(e,10)}),X(t)):"object"==typeof r?V(t):"number"==typeof r?t._d=new Date(r):bt.createFromInputFallback(t)}function nt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function st(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ot(e,t,n){var r=bt.duration(e).abs(),i=Tt(r.as("s")),s=Tt(r.as("m")),o=Tt(r.as("h")),u=Tt(r.as("d")),a=Tt(r.as("M")),f=Tt(r.as("y")),l=i<pn.s&&["s",i]||1===s&&["m"]||s<pn.m&&["mm",s]||1===o&&["h"]||o<pn.h&&["hh",o]||1===u&&["d"]||u<pn.d&&["dd",u]||1===a&&["M"]||a<pn.M&&["MM",a]||1===f&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,st.apply({},l)}function ut(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=bt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function at(e,t,n,r,i){var s,o,u=rt(e,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:i,s=i-u+(u>r?7:0)-(i>u?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:A(e-1)+o}}function ft(t){var n=t._i,r=t._f;return t._locale=t._locale||bt.localeData(t._l),null===n||r===e&&""===n?bt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),bt.isMoment(n)?new l(n,!0):(r?w(r)?G(t):J(t):tt(t),new l(t)))}function lt(e,t){var n,r;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),k(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ht(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function dt(e,t){return function(n){return null!=n?(pt(this,e,n),bt.updateOffset(this,t),this):ht(this,e)}}function vt(e){return 400*e/146097}function mt(e){return 146097*e/400}function gt(e){bt.duration.fn[e]=function(){return this._data[e]}}function yt(e){"undefined"==typeof ender&&(wt=xt.moment,xt.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,wt,Et,St="2.8.3",xt="undefined"!=typeof global?global:this,Tt=Math.round,Nt=Object.prototype.hasOwnProperty,Ct=0,kt=1,Lt=2,At=3,Ot=4,Mt=5,_t=6,Dt={},Pt=[],Ht="undefined"!=typeof module&&module.exports,Bt=/^\/?Date\((\-?\d+)/i,jt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ft=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,It=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,qt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Rt=/\d\d?/,Ut=/\d{1,3}/,zt=/\d{1,4}/,Wt=/[+\-]?\d{1,6}/,Xt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Jt=/T/i,Kt=/[\+\-]?\d+(\.\d{1,3})?/,Qt=/\d{1,2}/,Gt=/\d/,Yt=/\d\d/,Zt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],an=/([\+\-]|\d\d)/gi,fn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ln={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},cn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hn={},pn={s:45,m:45,h:22,d:26,M:11},dn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),mn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return v(C(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+":"+v(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+v(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dn.length;)Et=dn.pop(),mn[Et+"o"]=a(mn[Et],Et);for(;vn.length;)Et=vn.pop(),mn[Et+Et]=u(mn[Et],2);mn.DDDD=u(mn.DDD,3),h(f.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=bt.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=i,o._strict=s,o._isUTC=!1,o._pf=r(),ft(o)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),bt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},bt.utc=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=i,o._i=t,o._f=n,o._strict=s,o._pf=r(),ft(o).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var r,i,s,o,u=e,a=null;return bt.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(a=jt.exec(e))?(r="-"===a[1]?-1:1,u={y:0,d:C(a[Lt])*r,h:C(a[At])*r,m:C(a[Ot])*r,s:C(a[Mt])*r,ms:C(a[_t])*r}):(a=Ft.exec(e))?(r="-"===a[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r},u={y:s(a[2]),M:s(a[3]),d:s(a[4]),h:s(a[5]),m:s(a[6]),s:s(a[7]),w:s(a[8])}):"object"==typeof u&&("from"in u||"to"in u)&&(o=g(bt(u.from),bt(u.to)),u={},u.ms=o.milliseconds,u.M=o.months),i=new c(u),bt.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},bt.version=St,bt.defaultFormat=sn,bt.ISO_8601=function(){},bt.momentProperties=Pt,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},bt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Dt[e]||(Dt[e]=new f),Dt[e].set(t),bt.locale(e),Dt[e]):(delete Dt[e],null)},bt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!w(e)){if(t=H(e))return t;e=[e]}return P(e)},bt.isMoment=function(e){return e instanceof l||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof c};for(Et=yn.length-1;Et>=0;--Et)N(yn[Et]);bt.normalizeUnits=function(e){return x(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},h(bt.fn=l.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?I(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return _(this)},isDSTShifted:function(){return this._a?this.isValid()&&S(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=I(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,n){var r,i,s,o=B(e,this),u=6e4*(this.zone()-o.zone());return t=x(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+o.daysInMonth()),i=12*(this.year()-o.year())+(this.month()-o.month()),s=this-bt(this).startOf("month")-(o-bt(o).startOf("month")),s-=6e4*(this.zone()-bt(this).startOf("month").zone()-(o.zone()-bt(o).startOf("month").zone())),i+=s/r,"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-u)/864e5:"week"===t?(r-u)/6048e5:r),n?i:d(i)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=B(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:dt("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=x(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):+this.clone().startOf(t)>+bt(e).startOf(t)},isBefore:function(e,t){return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):+this.clone().startOf(t)<+bt(e).startOf(t)},isSame:function(e,t){return t=x(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):+this.clone().startOf(t)===+B(e,this).startOf(t)},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,r=this._offset||0;return null==e?this._isUTC?r:this._dateTzOffset():("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==e&&(!t||this._changeInProgress?b(this,bt.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return k(this.year(),this.month())},dayOfYear:function(e){var t=Tt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return L(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return L(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=dt("Milliseconds",!1),bt.fn.second=bt.fn.seconds=dt("Seconds",!1),bt.fn.minute=bt.fn.minutes=dt("Minutes",!1),bt.fn.hour=bt.fn.hours=dt("Hours",!0),bt.fn.date=dt("Date",!0),bt.fn.dates=s("dates accessor is deprecated. Use date instead.",dt("Date",!0)),bt.fn.year=dt("FullYear",!0),bt.fn.years=s("years accessor is deprecated. Use year instead.",dt("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,h(bt.duration.fn=c.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,s=this._months,o=this._data,u=0;o.milliseconds=r%1e3,e=d(r/1e3),o.seconds=e%60,t=d(e/60),o.minutes=t%60,n=d(t/60),o.hours=n%24,i+=d(n/24),u=d(vt(i)),i-=d(mt(u)),s+=d(i/30),i%=30,u+=d(s/12),s%=12,o.days=i,o.months=s,o.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*vt(t),"month"===e?n:n/12;switch(t=this._days+mt(this._months/12),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(Et in fn)n(fn,Et)&&gt(Et.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinal:function(e){var t=e%10,n=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ht?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=wt),bt}),yt(!0)):yt()}.call(this),define("core/dev/utils/date-util",["core/ac-core","i18n!core/nls/ui-strings","core/utils/num-util","moment"],function(e,t,n,r){var i=(new Date).getTime(),s,o,u=_.template(t.DATE_HH_MM_AMPM),a=_.template(t.DATE_MM_DD_YYYY);return e.DateUtil={TODAY:"today",YESTERDAY:"yesterday",WITHIN_LAST_WEEK:"within-last-week",WITHIN_LAST_MONTH:"within-last-month",ONE_TO_TWO_MONTHS_AGO:"one-to-two-months-ago",TWO_TO_THREE_MONTHS_AGO:"two-to-three-months-ago",THREE_TO_FOUR_MONTHS_AGO:"three-to-four-months-ago",FOUR_TO_FIVE_MONTHS_AGO:"four-to-five-months-ago",FIVE_TO_SIX_MONTHS_AGO:"five-to-six-months-ago",SIX_TO_TWELVE_MONTHS_AGO:"six-to-twelve-months-ago",MORE_THAN_ONE_YEAR_AGO:"more-than-one-year-ago",ALL_TIME:"all-time",formatDate:function(e){var n,i;return n=r.utc(e).toDate(),i=new Date,i=this.getBeginningOfDay(i),n>i?this.formatTimeOnly(e):(i=this.getNumDaysAgo(i,1),n>i?t.DATE_YESTERDAY:this.formatDateOnly(e))},formatDateOnly:function(e){var n=r.utc(e).toDate(),i,s,o;return s=n.getMonth()+1,t.MM==="MM"&&s<10&&(s="0"+s),o=n.getDate(),t.DD==="DD"&&o<10&&(o="0"+o),i=n.getFullYear(),t.YYYY==="YY"&&(i-=2e3),$.trim(a({month:s,day:o,year:i}))},formatTimeOnly:function(e){var i=r.utc(e).toDate(),s,o,a;return s=i.getHours(),this.useAmPm()?(s<12?a=t.AM:(s-=12,a=t.PM),s===0&&(s=12)):a="",t.HH==="HH"&&(s=n.pad(s,2)),o=n.pad(i.getMinutes(),2),$.trim(u({hour:s,sep:t.HH_MM_SEPARATOR,minute:o,amPm:a}))},getBeginningOfDay:function(e){return e=new Date(e.getTime()),e.setHours(0,0,0,0),e},getEndOfDay:function(e){return e=new Date(e.getTime()),e.setHours(23,59,59,999),e},getNumDaysAgo:function(e,t){return e=new Date(e.getTime()-t*864e5),this.getBeginningOfDay(e)},getNumMonthsAgo:function(e,t){return _.times(t,_.bind(function(){e=this.getOneMonthAgo(e)},this)),this.getBeginningOfDay(e)},getOneMonthAgo:function(e){return e=new Date(e.getTime()),e.setDate(e.getDate()-this.getNumDaysInMonth(e)),this.getBeginningOfDay(e)},isLeapYear:function(e){return(new Date(e,1,29)).getMonth()===1},getNumDaysInMonth:function(e){var t,n=e.getMonth();return n===1?t=this.isLeapYear(e.getFullYear())?29:28:n===3||n===5||n===8||n===10?t=30:t=31,t},useAmPm:function(){return t.AM.length>0&&t.PM.length>0},getDateRange:function(e){var t={},n=new Date,r;switch(e){case"today":t.begin=this.getBeginningOfDay(n),t.end=this.getEndOfDay(n);break;case"yesterday":r=this.getBeginningOfDay(n),t.begin=this.getNumDaysAgo(r,1),t.end=r;break;case"within-last-week":t.begin=this.getNumDaysAgo(n,7),t.end=this.getEndOfDay(n);break;case"within-last-month":t.begin=this.getNumMonthsAgo(n,1),t.end=this.getEndOfDay(n);break;case"one-to-two-months-ago":t.begin=this.getNumMonthsAgo(n,2),t.end=this.getNumMonthsAgo(n,1);break;case"two-to-three-months-ago":t.begin=this.getNumMonthsAgo(n,3),t.end=this.getNumMonthsAgo(n,2);break;case"three-to-four-months-ago":t.begin=this.getNumMonthsAgo(n,4),t.end=this.getNumMonthsAgo(n,3);break;case"four-to-five-months-ago":t.begin=this.getNumMonthsAgo(n,5),t.end=this.getNumMonthsAgo(n,4);break;case"five-to-six-months-ago":t.begin=this.getNumMonthsAgo(n,6),t.end=this.getNumMonthsAgo(n,5);break;case"six-to-twelve-months-ago":t.begin=this.getNumMonthsAgo(n,12),t.end=this.getNumMonthsAgo(n,6);break;case"more-than-one-year-ago":t.begin=new Date(0),t.end=this.getNumMonthsAgo(n,12)}return t.begin=t.begin.getTime(),t.end=t.end.getTime(),t},getISOLocalDate:function(e){var t,r,i,s;return t=e.getTimezoneOffset(),t>0?s="-":(t=-t,s="+"),i=t%60,r=(t-i)/60,e.getFullYear()+"-"+n.pad(e.getMonth()+1,2)+"-"+n.pad(e.getDate(),2)+"T"+n.pad(e.getHours(),2)+":"+n.pad(e.getMinutes(),2)+":"+n.pad(e.getSeconds(),2)+s+n.pad(r,2)+":"+n.pad(i,2)},toggleElapsedTimeLogging:function(){o=!o},logElapsedTime:function(e,t){var r,u,a;if(!Ac.Features.isFeatureEnabled("elapsed_time_console_logging"))return;r=(new Date).getTime(),t&&t.startTime&&(i=t.startTime),s||(s=i),u=r-s,a=r-i,s=r,o&&LOG(n.padSpace(a,8)+n.padSpace(u,8)+": "+e)}},e.DateUtil}),define("core/dev/apis/api",["underscore","core/ac-core"],function(e,t){return t.Api=Backbone.View.extend({initialize:function(){Backbone.View.prototype.initialize.call(this),this.cid=e.uniqueId("api"),delete this.options.viewId,delete this.$el,delete this.el,e.bindAll(this)},_addModelChangeCallback:function(e,t){e.on("change",function(e,n){var r={};try{r=JSON.parse(n.xhr.responseText)}catch(i){}t(r)})},_getResolvedPromise:function(e){return $.Deferred().resolve().promise(e)}}),t.Api}),define("app-api/dev/acrobat-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.AcrobatApi=e.Api.extend({isInAcrobat:function(){return this.options.acrobatUiModel.get("is_in_acrobat")},setInAcrobat:function(e){this.options.acrobatUiModel.set("is_in_acrobat",e)},isFolderSelectionMode:function(){return this.options.acrobatUiModel.isFolderSelectionMode()},allowMultipleSelection:function(){return this.options.acrobatUiModel.get("allow_multiple_selection")},getSelectedFilterIndex:function(){return this.options.acrobatUiModel.get("selected_filter_index")},setSelectedFilterIndex:function(e){this.options.acrobatUiModel.set("selected_filter_index",e)},addSelectedFilterIndexChangeCallback:function(e){this.options.acrobatUiModel.on("change:selected_filter_index",e)},removeSelectedFilterIndexChangeCallback:function(e){this.options.acrobatUiModel.off("change:selected_filter_index",e)},getFilterFileExtensions:function(e){return this.options.acrobatUiModel.get("file_filters")[e].extensions}}),t.AcrobatApi}),define("app-api/dev/base-aic-uris-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.BaseAicUrisApi=e.Api.extend({getApiUris:function(){return this.options.baseAicUrisModel.attributes}}),t.BaseAicUrisApi}),define("app-api/dev/base-files-uris-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.BaseFilesUrisApi=e.Api.extend({getApiUri:function(){return Ac.baseFilesUrisModel.getApiUri()},getDownloadUri:function(){return Ac.baseFilesUrisModel.getDownloadUri()},getImsUri:function(){return Ac.baseFilesUrisModel.getImsUri()},getRenditionUri:function(){return Ac.baseFilesUrisModel.getRenditionUri()},getUploadUri:function(){return Ac.baseFilesUrisModel.getUploadUri()},getAlternateUploadUri:function(){return Ac.baseFilesUrisModel.getAlternateUploadUri()},getSendApiUri:function(){return Ac.baseFilesUrisModel.getSendApiUri()},getServerVersion:function(){return Ac.baseFilesUrisModel.get("server_version")}}),t.BaseFilesUrisApi}),define("app-api/dev/base-cloud-uris-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.BaseCloudUrisApi=e.Api.extend({getApiUri:function(){return Ac.baseCloudUrisModel.getApiUri()},getDownloadUri:function(){return Ac.baseCloudUrisModel.getDownloadUri()},getImsUri:function(){return Ac.baseCloudUrisModel.getImsUri()},getRenditionUri:function(){return Ac.baseCloudUrisModel.getRenditionUri()},getUploadUri:function(){return Ac.baseCloudUrisModel.getUploadUri()},getCpdfUri:function(){return Ac.baseCloudUrisModel.getCpdfUri()},getExplodePdfUri:function(){return Ac.baseCloudUrisModel.getExplodePdfUri()}}),t.BaseCloudUrisApi}),define("core/dev/utils/sc-analytics",["core/ac-core"],function(e){return e.ScAnalytics={APP_WEB:"A-WEB",APP_READER:"A-RDR",APP_ACROUNKNOWN:"A-AC-",APP_ACROPRO:"A-ACP",APP_ACROSTD:"A-ACS",APP_DOMAIN:"cloud.acrobat.com",LEVEL_ANNUAL:"an",LEVEL_MONTHLY:"mo",LEVEL_BASIC:"basic",LEVEL_FREE:"free",AB_TEST:"ABTEST",CHAT_POD_TEST:"CHAT_POD_TEST",CONTROL:"Control",VAR1:"Var1",VAR2:"Var2",VAR3:"Var3",NOT_IN:"not_in",0:"0",1:"1","2_TO_5":"2to5","6_TO_10":"6to10","11_OR_MORE":"11orMore","1_2_MONTHS_AGO":"1-2MonthsAgo","2_3_MONTHS_AGO":"2-3MonthsAgo","3_4_MONTHS_AGO":"3-4MonthsAgo","4_5_MONTHS_AGO":"4-5MonthsAgo","5_6_MONTHS_AGO":"5-6MonthsAgo","6_12_MONTHS_AGO":"6-12MonthsAgo",ABOUT_PRODUCT:"AboutProduct",ACOM:"Acom",ACOM_AND_MY_COMPUTER:"AcomAndMyComptr",ACOM_FILES:"AcomFiles",ACOM_ONLY:"AcomOnly",ACOM_TREFOIL:"AcomTrefoil",ADOBE_DOT_COM:"adobe.com",ACTIONS:"Actions",ACTION_BAR:"ActionBar",ADD_FILES:"AddFiles",ADD_FILES_TO_EXPORT:"AddFilestoExport",ADD_FILES_TO_CONVERT:"AddFilestoConvert",ALL:"All",ALL_FILES:"AllFiles",ANALYTICS_CLASS:"site-catalyst",ANALYTICS_SELECTOR:".site-catalyst",ASK_US:"AskUs",ATTACH_TO_EMAIL:"AttachToEmail",A_DOT_COM:"Acrobat.com",BACK:"Back",BIZ_SRC:"BizSrc",BOTTOM_NAV_BAR:"BottomNavBar",BREADCRUMB:"BreadCrumb",BROWSE:"Browse",CANCEL:"Cancel",CHANGE:"change",CHAT:"Chat",CHAT_POD:"ChatPod",CHECKBOX:"Checkbox",CHECKED:"Checked",CHOOSE_FILES:"ChooseFiles",CHOOSE_FILES_DLG:"ChooseFilesDlg",CLEARED:"Cleared",CLICK:"click",CLICKED:"Clicked",CLICKED_NOOP:"ClickedNoOp",CLICK_URL:"ClickURL",CLOSE:"Close",CLOSED:"Closed",COMPLETED:"Completed",CONTINUE:"Continue",COPY_SHARED:"CopyShared",COUNT_FILES:"CountFiles",CREATE_PDF:"CreatePDF",CREATED_BY_TOOL:"CreatedByTool",CRITERIA:"Criteria",DATE:"Date",DATE_ACCESSED:"DateAccessed",DATE_ACCESSED_DOWN:"DateAccessedDown",DATE_ACCESSED_UP:"DateAccessedUp",DATE_ADDED:"DateAdded",DATE_ADDED_DOWN:"DateAddedDown",DATE_ADDED_UP:"DateAddedUp",DATE_DOWN:"DateDown",DATE_MODIFIED:"DateModified",DATE_MODIFIED_DOWN:"DateModifiedDown",DATE_MODIFIED_UP:"DateModifiedUp",DATE_UP:"DateUp",DELETE:"Delete",DELETED:"Deleted",DELETE_DLG:"DeleteDlg",DELETE_EXISTING:"DeleteExisting",DELETE_UPLOADED:"DeleteUploaded",DESKTOP_CONNECTOR:"DesktopConnector",DESKTOP_CONNECTOR_FILES:"DesktopConnectorFiles",DIALOG_CANCEL:"cancel",DIALOG_COMMIT:"commit",DISMISS:"Dismiss",DISMISSED:"Dismissed",DOCUMENT_CLOUD:"DOCCLD",SCAN_DOC_OPEN:"ScanFileOpened",DOWNLOAD:"Download",DOWNLOAD_CLICKED:"DownloadClicked",DOWNLOAD_ICON:"DownloadIcon",DOWNLOAD_LINK:"DownloadLink",DOWNLOAD_SUCCESS:"DownloadSuccess",DOWNLOAD_TEXT:"DownloadText",DRAG_FILES:"DragFiles",DUP_FILE_NAME_DLG:"DupFileNameDlg",EMAIL_LINK:"EmailLink",EMAIL_LINK_BUTTON:"EmailLinkButton",EMAIL_SHARED:"EmailShared",EMPTY:"Empty",EMPTY_UPLOAD_FILE:"EmptyUploadFile",ENTERED:"Entered",ERROR:"Error",ERROR_DLG:"ErrorDlg",ES_SUBSCRIBE_PAGE:"ESSubscribePage",EULA:"eula",EXCEL:"Excel",EXISTING:"Existing",EXIT_FULL_SCREEN:"ExitFullScreen",EXPANDED:"Expanded",EXPORT_PDF:"ExportPDF",FAILED:"Failed",FILE:"File",FILES:"Files",FILE_ADDED_BY:"FileAddedBy",FILE_LIST:"FileList",FILE_LISTING:"FileListing",FILE_NAME:"FileName",FILE_NAME_DOWN:"FileNameDown",FILE_EXISTS:"FileExists",FILE_NAME_UP:"FileNameUp",FILE_SIZE_DOWN:"FileSizeDown",FILE_SIZE_UP:"FileSizeUp",FILE_TYPE:"FileType",FILE_TYPE_DOWN:"FileTypeDown",FILE_TYPE_UP:"FileTypeUp",FILE_VIEW:"FileView",FILTER:"Filter",FILTER_ICON:"FilterIcon",FIRST_TIME_USER:"FirstTimeUser",FIT_FULL_PAGE:"FitPgFull",FIT_PAGE_WIDTH:"FitPgWidth",FOLDER_NAME:"FolderName",FOLDER_EXISTS:"FolderExists",FOLDER_NOT_EMPTY:"FolderNotEmpty",FORBIDDEN:"Forbidden",FULL_SCREEN:"FullScreen",GEAR_ICON:"GearIcon",GEAR_MENU:"GearMenu",GENERAL:"General",GENERIC:"Generic",HELP:"Help",HELP_MENU:"HelpMenu",HIDDEN:"Hidden",HIDE:"Hide",HIDE_FILE_INFO:"HideFileInfo",HIDE_RHP:"HideRHP",HOME:"Home",HTML:"HTML",HUD:"HUD",ILLUSTRATOR:"Illustrator",IMAGE:"Image",INDESIGN:"InDesign",INITIAL_STARTUP:"InitialStartup",INITIAL_VIEW:"InitialView",KEYWORD:"Keyword",KEYWORDS:"Keywords",LAST_MONTH:"LastMonth",LAST_WEEK:"LastWeek",LEFT:"Left",LIMIT:"Limit",LIST:"List",MAKE_PRIVATE:"MakePrivate",MAKE_PUBLIC:"MakePublic",MANAGE_SUB:"ManageSubscription",MENU_BTN:"MenuBtn",MOVE:"Move",MOVE_BUTTON:"MoveButton",MOVE_DLG:"MoveDlg",MULTIPLE:"Multiple",MULTI_EMAIL:"MultiEmail",MY_COMPUTER:"MyCmptr",MY_COMPUTER_ONLY:"MyCmptrOnly",MY_INFO:"MyInformation",NAME:"Name",NAME_DOWN:"NameDown",NAME_ENTERED:"NameEntered",NAME_UP:"NameUp",NEW_FOLDER:"NewFolder",NEW_FOLDER_DLG:"NewFolderDlg",NEW_FOLDER_ICON:"NewFolderIcon",NEXT_PAGE:"NextPg",NGDOC:"NGDoc",NONE:"None",NON_PDF:"NonPDF",NOT_FOUND:"NotFound",NUM_FILES:"NumFiles",NUM_FILES_CHECKED:"NumFilesChecked",NUM_FILES_SHOWN:"NumFilesShown",NUM_FOLDERS_CHECKED:"NumFoldersChecked",NUM_FOLDERS_SHOWN:"NumFoldersShown",OP:"Op",OPTION_DLG:"OptionDlg",OS_OPEN_DLG:"OSOpenDlg",OTHER:"Other",OVER_1_YEAR_AGO:"Over1YearAgo",PAGE_NUM_ENTERED:"PgNumEntered",PDF:"PDF",PHOTOSHOP:"Photoshop",PLAN_TYPE:"PlanType",PLUS:"Plus",POWERPOINT:"Powerpoint",PREVIEW:"Preview",PREV_PAGE:"PrevPg",PRIVATE:"Private",PRODUCTS:"products",PROGRESS_STATUS_MENU:"ProgressStatusMenu",PUBLIC:"Public",QUOTA_EXCEEDED:"QuotaExceeded",RECEIVER:"Receiver",RECENT_FILES:"RecentFiles",RECENT_FOLDER:"RecentFolder",REMOVE_HISTORY:"RemoveHistory",RENAME:"Rename",RENAME_DLG:"RenameDlg",RENAME_FILE:"RenameFile",RENAME_UPLOADED:"RenameUploaded",RENDER:"show",REPORT_ABUSE:"ReportAbuse",RESULTS:"Results",RETURNING_USER:"ReturningUser",RHP:"RHP",SC_UNDEFINED:"SC_UNDEFINED",ADOBE_SCAN:"AdobeScan",SCROLL:"Scroll",SEARCH:"Search",SEARCH_BAR:"SearchBar",SEARCH_BOX:"SearchBox",SEARCH_TEXT_ENTERED:"SearchTextEntered",SETTINGS_DLG:"SettingsDlg",SELECTED:"Selected",SELECT_FILES:"SelectFiles",SEND_AND_TRACK:"SendAndTrack",SEND_ICON:"SendIcon",SEND_MENU:"SendMenu",SEND_FOR_SIG:"SendForSig",SENT:"Sent",SHARE:"Share",SHARED:"Shared",SHAREPOINT:"SharePoint",SHAREPOINT_FILES:"SharePointFiles",SHARE_DIALOG:"ShareFileDlg",SHOW:"Show",SHOWN:"Shown",SHOW_FILE_INFO:"ShowFileInfo",SHOW_IMAGE_PREVIEW:"ShowImagePreview",SHOW_NGDOC_PREVIEW:"ShowNGDocPreview",SHOW_RHP:"ShowRHP",SHRUNK:"Shrunk",SIGN_IN:"SignIn",SIGN_OUT:"SignOut",SIGNED_IN:"SignedIn",SIGNED_OUT:"SignedOut",SINGLE:"Single",SINGLE_EMAIL:"SingleEmail",SIZE:"Size",SIZE_DOWN:"SizeDown",SIZE_UP:"SizeUp",SMALL_PREVIEW:"SmallPreview",SORT:"Sort",SORT_BY:"SortBy",SORT_COLUMN:"SortColumn",SORT_ICON:"SortIcon",START_NOW:"StartNow",SUCCESS:"Success",SUPPORT:"Support",TEXT:"Text",TERM:"Term",THIRD_PARTY:"third_party",THUMB:"Thumb",TODAY:"Today",TOOLBAR:"Toolbar",TOOLS:"Tools",TOP_HEADER:"TopHeader",TYPED_TEXT:"TypedText",UI:"ui",UNCHECKED:"Unchecked",UNKNOWN:"Unknown",UNSHARE:"Unshare",UPLOAD:"Upload",UPLOADED:"Uploaded",UPLOAD_FILE:"UploadFile",UPLOAD_ICON:"UploadIcon",UPSELL_STARTED:"UpsellStarted",URL_HIGHLIGHT:"UrlHighlight",USER:"User",USER_ACCOUNT_MENU:"UserAcctMenu",VIDEO:"Video",VIEW_ALL_CREATED_FILES:"ViewAllCreatedPDFFiles",VIEW_ALL_EXPORTED_FILES:"ViewAllExportedFiles",VIEW_BY:"ViewBy",VIRUS_DETECTED:"VirusDetected",WEB_PLUGIN_VARIANT:"WebPluginVariant",WORD:"Word",YESTERDAY:"Yesterday",ZIP:"Zip",ZOOM_IN:"ZoomIn",ZOOM_OUT:"ZoomOut",PROGRESS_BAR:"ProgressBar",ALL_BUTTON:"AllButton",SAVE_AS:"SaveAs",UPLOADING:"1-Uploading",UPLOAD_COMPLETE:"2-Upload_Complete",UPLOAD_CANCELLED:"Upload_Cancelled",UPLOAD_ERROR:"Upload_Error",CONVERTING:"3-Converting",CONVERT_FAILED:"Convert_Failed",COMPLETE:"4-Complete",DOWNLOAD_CLICK:"5-Download",DOWNLOADING:"6-Downloading",DOWNLOAD_COMPLETE:"7-Downloaded",SHOW_IN_FOLDER:"ShowInFolder",HOVER_OVER:"HoverOver",getCountCode:function(e){var t;return e<=0?t=this[0]:e===1?t=this[1]:e<=5?t=this["2_TO_5"]:e<=10?t=this["6_TO_10"]:t=this["11_OR_MORE"],t},getValue:function(e){return e.data("value")?e.data("value"):e.attr("type")==="checkbox"?e.prop("checked")?"Checked":"UnChecked":e.attr("type")==="radio"?e.is(":checked")?e.val():null:e.val()}},e.ScAnalytics}),define("files/dev/nls/ui-strings",{root:!0,"ar-ae":!0,"bg-bg":!0,"ca-es":!0,"cs-cz":!0,"da-dk":!0,"de-de":!0,"en-ae":!0,"en-gb":!0,"en-il":!0,"es-es":!0,"eu-es":!0,"fi-fi":!0,"fr-fr":!0,"fr-ma":!0,"he-il":!0,"hr-hr":!0,"hu-hu":!0,"it-it":!0,"ja-jp":!0,"ko-kr":!0,"nb-no":!0,"nl-nl":!0,"pl-pl":!0,"pt-br":!0,"ro-ro":!0,"ru-ru":!0,"sk-sk":!0,"sl-si":!0,"sl-sl":!0,"sv-se":!0,"tr-tr":!0,"uk-ua":!0,"zh-cn":!0,"zh-tw":!0}),define("files/dev/nls/root/ui-strings",{SHOW:"Show",OPEN_SELECTED:"Open Selected",SAVE:"Save",NEW_FOLDER:"New Folder",UPLOAD_FILE:"Upload File",CANCEL_UPLOAD:"Cancel upload",SORT:"Sort",NO_FILES_IN_ROOT:"There are currently no files in Document Cloud.",NO_FILES_IN_CONNECTOR:"There are currently no files in <%= connector %>.",NO_FILES_IN_FOLDER:"This folder is empty.",UPLOAD_TO_ACCESS:"Upload your files to have access to them anywhere.",UNSUPPORTED_CONNECTOR_MSG:"<%= actionName %> is currently not supported for files stored in <%= connectorLabel %>.",NO_SEARCH_RESULTS:"No Search Results.",TRY_DIFFERENT_SEARCH:"Please try a different search.",NO_SEARCH_RESULTS_FOLDER:"There are no applicable files in this folder.",TOO_MANY_SEARCH_TERMS_HEADER:"Maximum search queries exceeded.",TOO_MANY_SEARCH_TERMS_MESSAGE:"Please remove some search queries to see their search results.",NEW_FOLDER_TITLE:"New Folder",NEW_FOLDER_NAME_PLACEHOLDER:"Edit New Folder Name",CREATE_FOLDER:"Create Folder",SORT_BY:"Sort by:",SORT_BY_FILE_NAME:"File Name",SORT_BY_FILE_TYPE:"File Type",SORT_BY_SIZE:"Size",SORT_BY_DATE_ADDED:"Date Added",SORT_BY_DATE_MODIFIED:"Date Modified",SORT_BY_DATE_VIEWED:"Date Viewed",ASCENDING:"Ascending",DESCENDING:"Descending",DISPLAY:"Sort",VIEW_BY:"View by:",LIST:"List",THUMBNAIL:"Thumbnail",SORT_BY_FILE_SIZE:"File Size",FILTER:"Filter",FILTER_BY:"Filter by...",TAGS_TITLE:"Tags: Coming soon...",TAGS:"Tags",SEARCH_TITLE:"Search for files",CLEAR_SEARCH_TITLE:"Clear search",SEARCH_RESULTS:"Search Results ...",SEARCH_RESULTS_COUNT:"Search Results (<%= count %>)",SEARCH_RESULTS_UNAVAILABLE:"Search Results Unavailable",ADD_FILTER:"Add Filter",REMOVE_FILTER:"Remove Filter",SELECT_ATTRIBUTE:"Select Attribute",SELECT_VALUE:"Select Value",SELECT_FORMAT:"Select Format",SELECT_DATES:"Select Dates",SELECT_TOOL:"Select Tool",ENTER_VALUE:"Enter Value",EXPORT_FROM_PDF:"Export PDF",CONVERT_TO_PDF:"Create PDF",COMBINE_TO_PDF:"Combine Files",FILL_SIGN:"Fill & Sign",ADOBE_ACROBAT:"Adobe Acrobat",ADOBE_READER_MOBILE:"Adobe Reader Mobile",ADOBE_READER:"Adobe Reader",MARK_AS_FAVORITE:"Mark As Favorite",FILE_INFO:"File Info",TYPE:"Type",ADDED:"Added",MODIFIED:"Modified",PAGES:"Pages",SIZE:"Size",SHARING_LINK:"Sharing Link",UNSHARE:"unshare",MARK_AS_FAVORITE_COMING_SOON:"Mark As Favorite: Coming soon...",COMING_SOON:"Coming soon...",PREV_PAGE_TITLE:"Previous Page",NEXT_PAGE_TITLE:"Next Page",PAGE_NUM_TITLE:"Page Number",PAGE_NUM_SEPARATOR:"/",PAGE_COUNT_TITLE:"Number of Pages",ZOOM_OUT_TITLE:"Zoom out",ZOOM_IN_TITLE:"Zoom in",SCROLL_PAGES_TITLE:"Scroll Pages",FIT_PAGE_WIDTH_TITLE:"Fit Page Width",FIT_FULL_PAGE_TITLE:"Fit Full Page",SHOW_RHP:"Show Right-Hand Panel",HIDE_RHP:"Hide Right-Hand Panel",SHOW_FILE_INFO:"Show File Info",HIDE_FILE_INFO:"Hide File Info",SHOW_IMAGE_PREVIEW:"Display Classic Preview",SHOW_NGDOC_PREVIEW:"Display Enhanced Preview",UNDOCK:"Undock",DOCK_TO_BOTTOM:"Dock to Bottom",ZERO_ITEMS:"0 items",ONE_FILE:"1 file",N_FILES:"<%= numFiles %> files",ONE_FOLDER:"1 folder",N_FOLDERS:"<%= numFolders %> folders",ONE_FOLDER_ONE_FILE:"1 folder, 1 file",ONE_FOLDER_N_FILES:"1 folder, <%= numFiles %> files",N_FOLDERS_ONE_FILE:"<%= numFolders %> folders, 1 file",N_FOLDERS_N_FILES:"<%= numFolders %> folders, <%= numFiles %> files",UPLOADING:"Uploading...",PROCESSING:"Processing...",SHARED:"Shared",MAKE_PUBLIC:"Make Public",MAKE_PRIVATE:"Make Private",PRIVATE:"Private",PUBLIC:"Public",SHARE_FILES_PRIVATE_TEXT:"The selected files are private and only viewable by you.",SHARE_FILE_PRIVATE_TEXT:"The selected file is private and only viewable by you.",SHARE_FILES_PUBLIC_TEXT:"The selected files are public, and anyone with the links below can view the files.",SHARE_FILE_PUBLIC_TEXT:"The selected file is public, and anyone with the link below can view the file.",SHARE_FILES_MIXED_TEXT:"The selected files include both public and private files. Click one of the buttons below to share or unshare all files.",EMAIL_BUTTON_SINGLE:"Email Link",EMAIL_BUTTON_MULTI:"Email Links",EMAIL_LINK:"Email",SAVE_BUTTON:"Close",SHARE_FILES_ERROR:"There was an error changing the sharing state of the file(s): <%= error %>",SHARE_FILES_SESSION_TIMEOUT:'Your session has expired. Click "Close" below to return to the Sign In page.',SHARE_FILE_EMAIL_BODY:"To view the file, please click on the link below:",SHARE_FILES_EMAIL_BODY:"To view the files, please click on the links below:",SHARE_FILE_EMAIL_SUBJECT:"<%= firstName %> <%= lastName %> has shared a file with you.",SHARE_FILES_EMAIL_SUBJECT:"<%= firstName %> <%= lastName %> has shared files with you.",SHARE_FILES_AV_DISALLOWED:'Sharing of the file "<%= filename %>" failed because the sharing of audio and video files is not allowed.',SHARE_FILES_SHARING_DISALLOWED:'Sharing of the file "<%= filename %>" failed because sharing the file is not allowed.',FOLDER_UPLOAD_NOT_SUPPORTED_TITLE:"Folder Upload Not Available",FOLDER_UPLOAD_NOT_SUPPORTED_MSG:"We were unable to complete your upload request. Upload of a folder is not currently supported.",FILE_UPLOAD_FAILED_TITLE:"File Upload Failed",FILE_UPLOAD_FAILED_MSG:"We were unable to complete your upload request. You may have tried to upload a file too large or a folder.",FILE_OFFLINE_TITLE:"No Internet Connection",FILE_OFFLINE_CONTENT:"Connect to the internet to view your files stored online.",FILE_OFFLINE_OK_LABEL:"Ok",FILE_OFFLINE_ARIA_LABEL:"No Internet Connection. Ok",FILENAME_TEXT:"File Name",RESTRICT_EDITING:"Restrict Editing",REDUCE_FILE_SIZE:"Reduce File Size",EXPORT_FILE_FORMAT:"File Format",EXPORT_SETTINGS:"Settings",EXPORT_VIEW_RESULT:"Open file after export",FILES_SIGN_OUT_TITLE:"Adobe Document Cloud",FILES_SIGN_OUT_CONTENT:"Sign in to access files",FILES_SIGN_IN_LABEL:"Sign In Now",CCLOUD_SIGN_OUT_TITLE:"Creative Cloud",CCLOUD_SIGN_OUT_CONTENT:"Sign in to access files",FILES_NO_ACCESS_TITLE:"No Access To Service",FILES_NO_ACCESS_MESSAGE:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to ",FILES_NO_ACCESS_SIGN_IN_LINK:"Sign In with an Adobe ID.",MANAGE_DOCUMENTS_SENT_FOR_SIGNATURE:"Manage Documents Sent for Signature",ENCRYPTION_KEY_DISABLED_TITLE:"This content is unavailable due to enterprise restrictions",ENCRYPTION_KEY_DISABLED_MESSAGE:"The encryption key has been revoked and this content is no longer available. Please contact your administrator to re-enable the encryption key and check back again."}),define("app-api/dev/connectors-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/sc-analytics","i18n!files/nls/ui-strings","core/apis/api"],function(e,t,n,r){return t.ConnectorsApi=e.Api.extend({getConnectors:function(){return this.options.systemFoldersModel.get("connectors")},getConnector:function(e){return _.filter(this.getConnectors(),function(t){return t.name===e})},getConnectorsUiHelpers:function(e){var t=this.options.connectorsUiHelpersModel.attributes;return t.connectors||(t.connectors={}),e?t.connectors[e]:t},getConnectorPluginId:function(e,t,n){var r,i=this.getConnector(e);return this.isConnectorRemovable(e)?(_.isUndefined(t)&&i&&(t=i.id),t===""||_.isUndefined(t)?r=e:r=e+"-"+t,n&&(r+="-select"),r):(r=n?e+"-select":e,r)},getConnectorName:function(e){var t=_.find(this.getConnectors(),function(t){return t.id===e});return t?t.name:""},setConnectorPluginRoot:function(e,t){this.options.connectorPluginInfo[e]=_.extend({},this.options.connectorPluginInfo[e],{rootId:t})},getConnectorPluginRoot:function(e){return this.isConnectorPlugin(e)?this.options.connectorPluginInfo[e].rootId:""},setConnectorPluginName:function(e,t){this.options.connectorPluginInfo[e]=_.extend({},this.options.connectorPluginInfo[e],{name:t})},getConnectorPluginName:function(e){return this.isConnectorPlugin(e)?this.options.connectorPluginInfo[e].name:""},getConnectorPluginScName:function(e){var t,r;return this.isConnectorPlugin(e)?(r=this.getConnectorPluginName(e),t=this.getConnectorsUiHelpers(r),!t||!t.site_catalyst_name?n.DOCUMENT_CLOUD:t.site_catalyst_name):undefined},getConnectorPluginLabel:function(e){var t,n,r,i,s;if(!this.isConnectorPlugin(e))return"";t=this.getConnectorPluginName(e),n=this.getConnectorPluginRoot(e),i=this.getConnector(t),s=this.getConnectorsUiHelpers(t);if(i&&n){r=_.find(i,function(e){return e.id===n});if(r)return r.label}return s?s.label:""},getConnectorUIName:function(e){var t,n,r;return t=this.getConnectorPluginName(e),n=this.getConnectorsUiHelpers(t),n?n.label:""},isConnectorPlugin:function(e){return _.has(this.options.connectorPluginInfo,e)},isConnectorRemovable:function(e){var t=this.getConnectorsUiHelpers(),n=t.order_for_add;return e==="root"||e==="ccloud"?!1:!_.isUndefined(_.find(n,function(t){return!_.isUndefined(_.find(t.section_order,function(t){return t.name===e}))}))},hasAnyRemovableConnectors:function(){var e=this.options.appApi.pluginsApi,t=e.getPluginsUiModel("add_account"),n,r;return t&&(n=t.get("plugins"),n&&n.models&&(r=_.find(n.models,function(e){return e.get("is_removable")}))),r!==undefined},isActionRestricted:function(e,t){var n,r=!1;return!e||!t?r:(n=this.getConnectorsUiHelpers(e),!n||!n.supported?r:(r=n.supported[t]===!1,r))},isActionRestrictedOnItems:function(e,t){var n,r,i=!1,s=[];return!e||_.isEmpty(e)?i:(e instanceof Backbone.Model?s.push(e):s=_.values(e),_.find(s,_.bind(function(e){return n=e.get("source"),n==="native"&&(n="root"),r=this.getConnectorsUiHelpers(n),!r||!r.supported?i:(i=r.supported[t]===!1,i)},this)),i)},addConnectorsChangeCallback:function(e){this.options.systemFoldersModel.on("change:connectors",e)},removeConnectorsChangeCallback:function(e){this.options.systemFoldersModel.off("change:connectors",e)},addConnectorsUiHelpersChangeCallback:function(e){this.options.connectorsUiHelpersModel.on("change",e)},removeConnectorsUiHelpersChangeCallback:function(e){this.options.connectorsUiHelpersModel.off("change",e)},addConnector:function(t,n,r){var i;return!_.isUndefined(n)&&n!==""?(i=this.getConnectorPluginId(t,n),this.addConnectorPlugin(i,_.extend({},r,{connectorName:t,accountId:n}))):e.opFactory.create("AddingConnectorOp",this.options).run({connectorName:t,info:r})},addConnectorPlugin:function(t,n){var r=this.options;return e.opFactory.create("AddingConnectorPluginOp",r).run(_.extend({},n,{pluginId:t}))},removeConnector:function(t,n,r){var i=this.getConnectorPluginId(t,n),s=this.options,o=e.opFactory.create("RemovingConnectorOp",s);return r=_.extend({},r,{pluginId:i}),this.isConnectorRemovable(t)?o.run(r).then(function(){return this.removeConnectorPlugin(i,r)}):this._getResolvedPromise()},removeConnectorPlugin:function(t,n){var r=this.options,i=this.getConnectorPluginName(t);return i==="root"?this._getResolvedPromise():e.opFactory.create("RemovingConnectorPluginOp",r).run(_.extend({},n,{pluginId:t})).then(function(){r.connectorPluginInfo=_.omit(r.connectorPluginInfo,t)})},removeConnectorPlugins:function(){return e.opFactory.create("RemovingConnectorPluginsOp",this.options).run()},supportsMultipleAccounts:function(e){var t=this.getConnectorsUiHelpers(e);return t&&t.supported&&t.supported.multiple_accounts},alwaysAppearInLeftRail:function(e){var t=this.getConnectorsUiHelpers(),n;return n=_.find(t.order_for_left_rail,function(t){return t.name===e}),n&&n.alwaysAppear},isDesktopConnector:function(e){var t=this.getConnectorsUiHelpers(e);return t&&t.supported&&t.supported.desktop},getConnectorSignOutImageClass:function(e){var t=this.getConnectorPluginName(e);return t==="ccloud"?"files-sign-out-image-ccloud":"files-sign-out-image-root"},getConnectorSignOutTitle:function(e){var t=this.getConnectorPluginName(e);return t==="ccloud"?r.CCLOUD_SIGN_OUT_TITLE:r.FILES_SIGN_OUT_TITLE},getConnectorSignOutContent:function(e){var t=this.getConnectorPluginName(e);return t==="ccloud"?r.CCLOUD_SIGN_OUT_CONTENT:r.FILES_SIGN_OUT_CONTENT},getTunerPreferences:function(){var e=this.options.tunerUiModel;return e?e.attributes:{}}}),t.ConnectorsApi}),define("app/dev/ac-app",[],function(){var e,t,n;return e="dev",t=Ac.App,t||(t=Ac.App={}),n=t[e],n||(n=t[e]={}),n.VERSION=e,n.ID||(n.APP_ID="app"),n}),define("core/dev/models/ui/ui-model",["core/ac-core"],function(e){return e.UiModel=Backbone.Model.extend({UiModelException:function(e){this.name="AcCore.UiModel.Exception",this.message=e},destroy:function(){throw new this.UiModelException("AcCore.UiModel.destroy should never be called!")},fetch:function(){throw new this.UiModelException("AcCore.UiModel.fetch should never be called!")},save:function(){throw new this.UiModelException("AcCore.UiModel.save should never be called!")},resetToDefaults:function(e){this.set(this.defaults||{},e)},triggerBooleanAttr:function(e){this.set(e,!0).set(e,!1,{silent:!0})}}),e.UiModel}),define("core/dev/models/ui/dialog-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.DialogUiModel=e.UiModel.extend({recognized:{close:{type:"boolean",optional:!0},error:{type:"object",optional:!0}},defaults:{}},{SEVERITY_INFORMATIONAL:"sev-informational",SEVERITY_WARNING:"sev-warning",SEVERITY_ERROR:"sev-error",SEVERITY_SUCCESS:"sev-success"}),e.DialogUiModel}),define("core/dev/utils/css-util",["core/ac-core","core/utils/crypto-util"],function(e,t){var n={},r="transitionend webkitTransitionEnd otransitionend oTransitionEndMSTransitionEnd msTransitionEnd";return e.CssUtil={loadCss:function(e){var r,i;e=$.trim(e),e&&(r=t.getSha256(e).substr(0,8),n[r]||(n[r]=!0,i=document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,document.getElementsByTagName("head")[0].appendChild(i)))},addClass:function(e,t){e&&!e.hasClass(t)&&e.addClass(t)},removeClass:function(e,t){e&&e.hasClass(t)&&e.removeClass(t)},getCssNum:function(e,t){var n=parseInt(e.css(t),10);return $.isNumeric(n)?n:0},getMarginWidth:function(e){return this.getCssNum(e,"margin-left")+this.getCssNum(e,"margin-right")},getMarginHeight:function(e){return this.getCssNum(e,"margin-top")+this.getCssNum(e,"margin-bottom")},getBorderWidth:function(e){return this.getCssNum(e,"border-left-width")+this.getCssNum(e,"border-right-width")},getBorderHeight:function(e){return this.getCssNum(e,"border-top-width")+this.getCssNum(e,"border-bottom-width")},getPaddingWidth:function(e){return this.getCssNum(e,"padding-left")+this.getCssNum(e,"padding-right")},getPaddingHeight:function(e){return this.getCssNum(e,"padding-top")+this.getCssNum(e,"padding-bottom")},getExtraWidth:function(e){return this.getMarginWidth(e)+this.getBorderWidth(e)+this.getPaddingWidth(e)},getExtraHeight:function(e){return this.getMarginHeight(e)+this.getBorderHeight(e)+this.getPaddingHeight(e)},getFullWidth:function(e){return e.width()+this.getExtraWidth(e)},getFullHeight:function(e){return e.height()+this.getExtraHeight(e)},getTransitionDuration:function(e){var t=0,n=e.css("transition-duration");try{t=parseFloat(n.substr(1))*1e3}catch(r){}return t},addTransitionEndCallback:function(t,n,i){var s=e.Util;s.isIE8()||s.isIE9()?i():t.on(r,function(e){if(e.originalEvent.propertyName===n)return i(),!1})},removeTransitionEndCallbacks:function(e){e.off(r)},fitInOneRow:function(e,t,n){function p(){t.css("font-size",a+"px").css("padding","0 "+c+"px")}var r,i,s,o,u,a,f,l=!1,c,h;if(e.length<=1||!n)return;r=e.first(),i=n.lastVisible||e.last();if(r.width()===0)return;a=n.prefFontSize,f=n.minFontSize,c=n.prefLrPadding,h=n.lrPaddingAdjust,_.isNumber(h)||(h=-1),e.css("max-width","none"),p(),o=i.position();while(o){if(o.top===0)break;a-=1,c+=h,p(),o=i.position();if(a<=f){l=!0;break}}s=r.parent().width(),l&&o.top>0&&s>0&&(u=s/e.length-this.getExtraWidth(r),e.css("max-width",u))}},e.CssUtil}),define("core/dev/utils/view-util",["core/ac-core","core/utils/css-util","core/utils/util"],function(e,t,n){var r=$("body"),i=$("#spinner"),s=150,o=150,u,a={ACTIVE:"active",BLACK_ON_WHITE:"black-on-white",WHITE_ON_BLACK:"white-on-black",NONE:"none"};return e.ViewUtil={init:function(t){e.Util.isTouchDevice()&&r.on("touchmove",function(e){var t;$(e.target).parents().each(function(e,n){var r=$(n),i=r.css("overflow-x"),s=r.css("overflow-y");if(i==="auto"||i==="scroll"||s==="auto"||s==="scroll")return t=!0,!1}),t||e.preventDefault()}),n.isCEF()&&(this.options=t),r.off(".suppressFocus").on("mousedown.suppressFocus keydown.suppressFocus",this.suppressFocusEventHandler),this.loadHighContrastTheme()},suppressFocusEventHandler:function(e){var t,n=r.is(e.target);if(n||$(e.target).closest(":focusable").length){switch(e.type){case"mousedown":!_.isUndefined(e.pageX)&&!_.isUndefined(e.pageY)&&(t=!n);break;case"keydown":switch(e.which){case 9:case 35:case 36:case 37:case 38:case 39:case 40:t=!1}}t!==undefined&&r.toggleClass("suppress-focus-outline",t)}},showClickedEffect:function(t,n,r,i){if(!e.Util.isTouchDevice()){i&&i();return}var u=$(t.currentTarget);u.removeClass(r),u.addClass(n),_.delay(function(){u.addClass(r),u.removeClass(n),_.delay(function(){i&&i()},o)},s)},setElementFontByLocale:function(t,n){var r=t.find(n),i=n==="input";e.Locale.getLocale()==="ja-jp"?r.css("font-family","MS Gothic"):i&&e.Util.isIE()&&r.css("font-family","sans-serif")},getNextDisplayedSibling:function(e){var t=e.next();while(t&&t.css("display")==="none")t=t.next();return t.length>0?t:undefined},isElementInDom:function(e){return e.length>0&&e.closest("html").length>0},isElementDisplayed:function(e){return e.length>0&&e.css("display")!=="none"},hasFocus:function(e){return $(document.activeElement).is($(e))},contains:function(e,t){return!e||!t?!1:(e instanceof $&&(e=e.get(0)),t instanceof $&&(t=t.get(0)),!_.isElement(e)||!_.isElement(t)?!1:$.contains(e,t))},selectText:function(e,t,n){var r;e.createTextRange?(r=e.createTextRange(),r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()):e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n)},descendantHasFocus:function(e){return $(document.activeElement).closest(e).length===1},getNextFocusableDescendant:function(e,t,n,r){r=r||"";var i=e.find(r+":focusable"),s=i.index(document.activeElement),o=t?":lt":":gt",u=t?"last":"first",a;return s!==-1?(a=i.filter(o+"("+s+"):"+u),n&&a.length===0&&(a=i[u]())):a=i[u](),a},getSelectedText:function(){var e="",t,n;return t=window.getSelection,t?e=t().toString():(n=document.selection,n&&n.type==="Text"&&(e=n.createRange().text)),e},isAllTextSelected:function(e){return e.text()===this.getSelectedText()},isElementHidden:function(e){var t=!1;return e.css("display")==="none"?t=!0:e.parents().each(function(e,n){$(n).css("display")==="none"&&(t=!0)}),t},isElementEmpty:function(e){return!$.trim(e.html())},enableInput:function(e,t){t?(e.prop("disabled",!1),e.removeClass("disabled"),e.removeClass("theme-disabled-text").addClass("theme-hyperlink")):(e.prop("disabled",!0),e.addClass("disabled"),e.removeClass("theme-hyperlink").addClass("theme-disabled-text"))},isInputEnabled:function(e){return e&&!e.prop("disabled")},isInputChecked:function(e){return e.prop("checked")},isHorizontalScrollBarPresent:function(e){return e.get(0).scrollWidth>e.innerWidth()},isVerticalScrollBarPresent:function(e){return e.get(0).scrollHeight>e.innerHeight()},isOnScreen:function(e){var t,n,r,i,s,o;return t=e.offset(),n=t.left,r=n+e.width(),i=t.top,s=i+e.height(),o=$(window),n<o.width()&&r>0&&i<o.height()&&s>0},getScrollBarWidth:function(){var e,t,n,r;return u?u:(e=document.createElement("p"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),n=e.offsetWidth,t.style.overflow="scroll",r=e.offsetWidth,n===r&&(r=t.clientWidth),document.body.removeChild(t),u=n-r,u)},makeUnselectable:function(e){function t(e){var n;e.nodeType===1&&e.setAttribute("unselectable","on"),n=e.firstChild;while(n)t(n),n=n.nextSibling}e instanceof $&&(e=e.get(0)),t(e)},showSpinner:function(e){e?i.show():i.hide()},swapChildElements:function(e){var t=e.children();if(t.length!==2)return;e.empty().append(t.get().reverse())},getContrastYIQ:function(e){var t=/^rgb\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)$/,n=t.exec(e),r,i,s,o;if(n!==null)return r=n[1],i=n[2],s=n[3],o=(299*r+587*i+114*s)/1e3,o>=128},testHighContrastMode:function(){var e="rgb(31,41,59)",t=$("<span/>").css("color",e).appendTo(r),n=t.css("color").replace(/\ /g,""),i=!1;return t.remove(),n!==e?(i=this.getContrastYIQ(r.css("background-color")),i?a.BLACK_ON_WHITE:a.ACTIVE):a.NONE},getHighContrastMode:function(){var e=null,t=window.matchMedia;return t&&(t("screen and (-ms-high-contrast:none)").matches&&(e=a.NONE),t("screen and (-ms-high-contrast:active)").matches&&(e=a.ACTIVE),t("screen and (-ms-high-contrast:black-on-white)").matches&&(e=a.BLACK_ON_WHITE),t("screen and (-ms-high-contrast:white-on-black)").matches&&(e=a.WHITE_ON_BLACK)),e||(e=this.testHighContrastMode()),e},loadHighContrastTheme:function(){var e,i=$.Deferred();n.isCEF()||(e=this.getHighContrastMode(),i.resolve()),i.then(function(){r.hasClass("high-contrast")||e&&e!==a.NONE?(t.addClass(r,"high-contrast"),e===a.BLACK_ON_WHITE&&t.addClass(r,"black-on-white"),e===a.WHITE_ON_BLACK&&t.addClass(r,"white-on-black"),t.loadCss("css/main-high-contrast.css")):r.removeClass("high-contrast black-on-white white-on-black")})},detachAndReattachElement:function(e){var t=e.parent(),n=e.prev(),r=e.next(),i=e.is(document.activeElement);e.detach(),n.length?e.insertAfter(n):r.length?e.insertBefore(r):e.appendTo(t),i&&e.focus()}},e.ViewUtil}),define("core/dev/templates/alert-dlg-template",[],function(){return'<div class="alert-dlg-msg theme-text"><%= msg %></div><div class="alert-dlg-buttons"><input class="control-button dialog-control-button button-grey ui-theme theme-text              alert-dlg-cancel-btn"       id="alert-dlg-cancel-btn"       type="button" aria-label="<%= cancelBtn %>"       value="<%= cancelBtn %>"/><input class="control-button dialog-control-button theme-button theme-button-label              alert-dlg-ok-btn"       id="alert-dlg-ok-btn"       type="button" aria-label="<%= okBtn %>"       value="<%= okBtn %>"/></div>'}),define("core/dev/utils/truncate",["core/ac-core","core/utils/util"],function(e,t){var n,r,i,s,o=["font-size","font-style","font-weight","font-family","text-indent","letter-spacing"];return e.Truncate={createDivCopy:function(e){var t,u,a;return n===e?t=r:(i||(i=document.createElement("div"),s=$(i),s.css({position:"absolute",left:-1e4,top:-1e4}),document.body.appendChild(i)),n=e,t=r=$(e),a={},_.each(o,function(e){u=t.css(e),s.css(e)!==u&&(a[e]=u)}),_.isEmpty(a)||s.css(a)),s.html(t.html()),s},getTextSize:function(e,t){var n=this.createDivCopy(e),r={width:n.outerWidth()};return t&&(r.height=n.outerHeight()),r},truncateToFit:function(e,n,r){var i=$.trim(e.text().replace(/(\r\n|\n|\r)/gm,"")),s=e.width(),o={text:i,truncatedText:i,width:s};e.removeAttr("title");if(s===0)return o;var u=n();if(u<=0)return o;var a={truncateFromRight:!1,truncateFromExt:t.isWindows(),ellipsis:"...",maxIterations:10};r&&($.extend(a,r),a.ellipsis=_.escape(a.ellipsis));var f=i.length,l=f,c=t.getExtension(i)||"";c!==""&&(c="."+c);var h=c.length,p=f,d=2,v=a.ellipsis,m=a.truncateFromRight,g=a.truncateFromExt,y=a.maxIterations,b=0,w,E,S;while((u>0||p>d)&&b<y)p=Math.ceil(p/2),l=u>0?l-p:l+p,m?w=i.substring(0,l)+v:g?(S=Math.max(l-h,0),w=i.substring(0,S)+v+c):(E=Math.floor(l/2),w=i.substring(0,E)+v+i.substring(f-(l-E))),e.text(w),u=n(),b+=1;return e.attr("title",i),o.truncatedText=e.text(),o},truncateElementText:function(e,t,n){var r;t||(t=e.width()),r=_.bind(function(){return this.getTextSize(e).width-t},this),!isNaN(t)&&t>0&&this.truncateToFit(e,_.bind(r,this),n)},truncateInputPlaceholder:function(e){var t=e.css("text-indent"),n=t?parseInt(t,10):0,r=e.width()-n*2;!isNaN(r)&&r>0&&this.truncateAttribute(e,"placeholder",r)},truncateButtonLabel:function(e){var t=e.width();!isNaN(t)&&t>0&&this.truncateAttribute(e,"value",t)},truncateAttribute:function(e,t,n){var r=this.createDivCopy(e),i;r.text(e.attr(t)),i=_.bind(function(){return this.getTextSize(r).width-n-1},this),this.truncateToFit(r,i),e.attr(t,r.text())}},e.Truncate}),define("core/dev/templates/dialog-template",[],function(){return'<div class="generic-dialog ui-theme theme-container" data-test-name="dlg"        role="dialog" aria-label="<%- title %>">    <div class="dialog-title-bar">        <div class="dialog-icon"></div>        <div class="dialog-title theme-text"><%- title %></div>        <button class="dialog-close-btn" tabindex="-1">            <span class="hidden-accessible"><%- close %></span>        </button>    </div>    <div class="dialog-content theme-text"></div></div>'}),define("core/dev/views/view",["underscore","core/ac-core","core/utils/util","core/utils/view-util"],function(e,t,n,r){return t.View=Backbone.View.extend({ViewException:function(e){this.name="AcCore.View.Exception",this.message=e},initialize:function(){Backbone.View.prototype.initialize.call(this),e.bindAll(this),this._childViewsById={},this._childViewAttrsById={},this._childViewsByAttr={}},teardown:function(){return undefined},addChildView:function(t,n,r){var i;return n=n||e.uniqueId(),this._childViewsById[n]=t,r&&(this._childViewAttrsById[n]=r,this._childViewsByAttr[r]=t),t.options.viewId=n,t.on("all",this._onViewEvent,this),i=t.options.scContext||this._getFullScContext(),i.length>0&&t._setParentScContext(i),n},getChildViewById:function(e){var t=this._childViewsById;return t?t[e]:undefined},getChildViews:function(){var t=this._childViewsById;return t?e.values(t):[]},removeAllChildViews:function(){e.each(this._childViewsById,e.bind(function(e,t){this.removeChildViewById(t)},this))},removeChildView:function(e){return this.removeChildViewById(e.options.viewId)},empty:function(){return this.$el.empty(),this},detach:function(){return this.$el.detach(),this},remove:function(){return this.removeAllChildViews(),this.$el.empty(),this.stopListening(),this},removeChildViewById:function(e){var t=this.getChildViewById(e),n;return t&&(t.off("all",this._onViewEvent,this),t.remove(),t.teardown(),delete this._childViewsById[e],n=this._childViewAttrsById[e],n&&delete this._childViewsByAttr[n]),t},applyRecursively:function(t){t(this),e.each(this._childViewsById,function(e){e.applyRecursively(t)})},applyMethodRecursively:function(e){function t(t){var n=t[e];n&&n()}this.applyRecursively(t)},updateChildViewSizes:function(){this.applyMethodRecursively("invalidateSize"),this.render()},invalidateViewsRecursively:function(){this.applyMethodRecursively("invalidate")},invalidate:function(){return undefined},_hasFocus:function(){return r.hasFocus(this.$el)},_onViewEvent:function(e,t){this.trigger(e,t)},_consumeEvent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!1},_triggerViewEvent:function(t,n){var r=e.extend({},e.omit(this.options,"el"));n&&e.extend(r,n),r.scContext=r.scContext||this._getFullScContext(),this.trigger(t,r)},_renderChildView:function(t,n,r,i){var s=this._childViewsByAttr[t],o,u,a;if(!n){LOG.warning("AcCore.View._renderChildView: No class for '"+t+"'");return}return a=r instanceof $?r:this.$(r),s&&(i&&(o=i.childViewId),o&&!this.getChildViewById(o)&&(s=undefined)),s?s.$el.is(a)||s.setElement(a):(u=e.extend({},this.options,i,{el:a}),s=this[t]=new n(u),i&&(o=i.childViewId),this.addChildView(s,o,t)),s.render()},_getResolvedPromise:function(e){return $.Deferred().resolve().promise(e)},_isInDom:function(){return r.isElementInDom(this.$el)},_isHidden:function(){return r.isElementHidden(this.$el)},_logSiteCatalystEvent:function(t,r){var i=[];if(this.options.noScAnalytics)return;if(e.isUndefined(r)||!r)i=n.addToArray(i,this._getFullScContext());i=n.addToArray(i,t),this.options.appApi.siteCatalystApi.logScEvent(i)},_setParentScContext:function(e){this._parentScContext=e},_getParentScContext:function(){return this._parentScContext},_getSiteCatalystContext:function(){return undefined},_getFullScContext:function(){var e=[];return e=n.addToArray(e,this._getParentScContext()),e=n.addToArray(e,this._getSiteCatalystContext()),e},_addFocusEventListener:function(){this.options.appApi.focusApi.pushFocusHandler(this)},_removeFocusEventListener:function(){this.options.appApi.focusApi.popFocusHandler(this)},_addKeyEventListener:function(){this.options.appApi.keyApi.pushKeyHandler(this)},_removeKeyEventListener:function(){this.options.appApi.keyApi.popKeyHandler(this)}}),t.View}),define("core/dev/views/dialog-view",["core/ac-core","core/utils/util","core/utils/css-util","core/templates/dialog-template","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/utils/view-util","core/views/view"],function(e,t,n,r,i,s,o){var u=".dialog-container";e.DialogView=e.View.extend({events:{"click .dialog-close-btn":"_onCloseBtnClick"},options:{el:u,triggerEl:null},initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener(),this._addKeyEventListener(),_.defer(this._addAppApiCallbacks)},render:function(n){var s=this,u=this.options,a=u.appApi;return e.View.prototype.render.call(this),n||this.$el.empty().html(_.template(r)({title:u.title,close:i.CLOSE})),this.$el.show(),this._initWrappers(),this._initTabLimits(),this._showModalMask(!0),t.isCEF()&&a.pluginsApi.getSelectedPluginId("tools")==="home"&&a.selectionApi.isRunningInFull()&&a.rnaApi.done(function(e){e.disableLeftRailSelection(!0)}),_.delay(function(){o.descendantHasFocus(s.$el)||(s._initTabLimits(),s.$firstTabbable&&s.$firstTabbable.length!==0?s.$firstTabbable.focus():s.$dlg.attr("tabindex","-1").focus().on("blur.focusDialog",function(){$(this).removeAttr("tabindex").off("blur.focusDialog")}))},300),this},open:function(){var e=this.options;return!e.triggerEl&&$(document.activeElement).not("body").length&&(e.triggerEl=document.activeElement),e.dialogsUiModel.pushDialog(this),this._dialogViewId=e.parentView.addChildView(this),this.render(),this._deferred=$.Deferred(),this._deferred.promise()},close:function(e,t){var n,r=this._deferred;if(!r)return;this.closeWithoutResolving(),_.isUndefined(e)||e?(t&&(n=t.resolveArgs),r.resolve(n)):(this.options.scContext&&this._logSiteCatalystEvent(s.CANCEL),r.reject())},closeWithoutResolving:function(){var e=this.options,n=e.appApi,r=n.pluginsApi,i=this._dialogViewId,s;this.applyMethodRecursively("undelegateEvents"),this.applyMethodRecursively("stopListening"),this._removeFocusEventListener(),this._removeKeyEventListener(),this._removeAppApiCallbacks(),e.dialogsUiModel.popDialog(this),t.isCEF()&&r.getSelectedPluginId("tools")==="home"&&n.selectionApi.isRunningInFull()&&n.rnaApi.done(_.bind(function(e){e.disableLeftRailSelection(!1);return},this)),_.defer(_.bind(function(){e.parentView.removeChildViewById(i),n.dialogApi.isDialogOpen()||(this._showModalMask(!1),e.triggerEl&&$(e.triggerEl).is(":focusable")?(s=$(document.activeElement),(s.closest(this.$el).length===1||s.not("body").length===0)&&$(e.triggerEl).focus()):t.isIE()&&e.selectionUiModel.getNumSelectedItems()>0&&e.parentView.$el.focus())},this))},remove:function(){var e=this.$el;this.$dlg.remove(),e.children().length===0&&e.hide()},_initWrappers:function(){this.$dlg=this.$(".generic-dialog"),this.$titleBar=this.$(".dialog-title-bar"),this.$dialogTitle=this.$(".dialog-title"),this.$icon=this.$(".dialog-icon"),this.$dialogCloseBtn=this.$(".dialog-close-btn"),this.$dialogContent=this.$(".dialog-content")},_initTabLimits:function(){var e;e=this.$(":tabbable:not([disabled])"),this.$firstTabbable=e.first(),this.$lastTabbable=e.last()},_showModalMask:function(e){this.options.appApi.displayApi.showModal(e)},_center:function(e){var t=this.$dlg,r,i,s,o,u,a,f,l,c;e&&(r=e.$ref,i=e.horizontalOnly,s=e.verticalOnly),a=t.width()+n.getPaddingWidth(t),f=t.height()+n.getPaddingHeight(t),s||t.css("margin-left",-a/2),i||t.css("margin-top",-f/2),r&&(u=r.offset(),o=t.offset(),c=u.left+(r.width()-a)/2,l=u.top+(r.height()-f)/2,s||t.css("margin-left",c-o.left-a/2),i||t.css("margin-top",l-o.top-f/2))},_isClosed:function(){return this.$el.css("display")==="none"},_appendToDialog:function(e){this.$dialogContent.append(e),this._initTabLimits()},_setTitle:function(e){this.$dialogTitle.text(e)},_onCloseBtnClick:function(){this.close(!1)},_onKeyDown:function(e){var t=e.which,n=$(e.target),r,i,s=e.shiftKey,u=!1;switch(t){case 27:if(n.closest("[role=dialog]").is(this.$dlg)&&n.closest("[role=menu]").length===0||n.closest(this.$dlg).length===0)u=!0,this.close(!1);break;case 9:return this._initTabLimits(),r=this.$firstTabbable,i=this.$lastTabbable,r.is(i)?(u=!0,_.defer(function(){r.focus()})):r.is(n)?s&&(u=!0,_.defer(function(){i.focus()})):i.is(n)?s||(u=!0,_.defer(function(){r.focus()})):o.descendantHasFocus(this.$el)||(u=!0,s?_.defer(function(){i.focus()}):_.defer(function(){r.focus()})),u&&this._consumeEvent(e),!1;case 32:case 13:return!1}return u&&this._consumeEvent(e),!0},_addFocusEventListener:function(){$("body").on("focusin",this._onFocusIn)},_removeFocusEventListener:function(){$("body").off("focusin",this._onFocusIn)},_isOnTop:function(){var e=this.options.dialogsUiModel.get("open");return e[e.length-1]===this},_onFocusIn:function(e){var t=$(e.target),n=this.$firstTabbable,r=this.$lastTabbable;return this._isOnTop()?(n&&r&&t.closest(this.$el).length===0&&(e.shiftKey?_.defer(function(){r.focus()}):_.defer(function(){n.focus()}),this._consumeEvent(e)),!0):!0},_addAppApiCallbacks:function(){this.options.appApi.routerApi.addHistoryChangeCallback(this._onHistoryChange)},_removeAppApiCallbacks:function(){this.options.appApi.routerApi.removeHistoryChangeCallback(this._onHistoryChange)},_onHistoryChange:function(){this.close(!1,{noHistoryEffect:!0})}})}),define("core/dev/views/alert-dlg-view",["core/ac-core","core/templates/alert-dlg-template","core/utils/util","core/utils/view-util","i18n!core/nls/ui-strings","core/utils/css-util","core/utils/truncate","core/views/dialog-view"],function(e,t,n,r,i,s,o){e.AlertDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .alert-dlg-ok-btn":"_onOkClick","click .alert-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this.setElement($(".alert-dialog-container"))},render:function(){var o=this.options,u=o.severity;return e.DialogView.prototype.render.call(this),this._appendToDialog(_.template(t)({msg:o.msg,okBtn:o.okBtn||i.OK,cancelBtn:o.cancelBtn})),this._initWrappers(),this._customizeStyling(),o.cancelBtn||this.$cancelBtn.hide(),this._initTabLimits(),!n.isCEF()||!o.runningInRHP?(this._adjustDialogWidth(),this._center()):(this.$dlg.addClass("generic-dialog-rhp"),this.$titleBar.addClass("dialog-title-bar-rhp"),this.$dialogTitle.addClass("dialog-title-rhp"),this.$icon.addClass("dialog-icon-rhp"),this.$dialogCloseBtn.addClass("dialog-close-btn-rhp"),this.$okBtn.addClass("dialog-control-button-rhp"),this.$cancelBtn.addClass("dialog-control-button-rhp"),this.$dlgControlBtns.addClass("alert-dlg-buttons-rhp"),this.$alertDlgMsg.addClass("alert-dlg-msg-rhp"),_.defer(_.bind(function(){this.$dlg.height(s.getFullHeight(this.$titleBar)+s.getFullHeight(this.$alertDlgMsg)+s.getFullHeight(this.$dlgControlBtns))},this))),n.isWindows()&&r.swapChildElements(this.$dlgControlBtns),this.$okBtn.focus(),this._truncateText(),u&&(this.$titleBar.addClass(u),this.$icon.addClass("dialog-icon-common").addClass(u)),this.$(e.ScAnalytics.ANALYTICS_SELECTOR).trigger(e.ScAnalytics.RENDER),this},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$alertDlgMsg=this.$(".alert-dlg-msg"),this.$dlgControlBtns=this.$(".alert-dlg-buttons"),this.$okBtn=this.$(".alert-dlg-ok-btn"),this.$cancelBtn=this.$(".alert-dlg-cancel-btn")},_customizeStyling:function(){var e=this.options,t;t=e.okBtnClass,t&&this.$okBtn.addClass(t),t=e.cancelBtnClass,t&&this.$cancelBtn.addClass(t),t=e.dlgClass,t&&this.$dlg.addClass(t)},_truncateText:function(){o.truncateButtonLabel(this.$okBtn),o.truncateButtonLabel(this.$cancelBtn)},_adjustDialogWidth:function(){var e=this.$dlg,t=s.getFullWidth(this.$okBtn)+1;this.options.cancelBtn&&(t+=s.getFullWidth(this.$cancelBtn)+1),t>e.width()&&e.width(t)},_onOkClick:function(t){var n=$(t.currentTarget),r=e.ScAnalytics;if(n.prop("disabled"))return;this.$(r.ANALYTICS_SELECTOR).trigger(r.DIALOG_COMMIT),this.close(!0)},_onCancelClick:function(){var t=e.ScAnalytics;this.$(t.ANALYTICS_SELECTOR).trigger(t.DIALOG_CANCEL),this.close(!1)},_onCloseBtnClick:function(){this.close(this.$cancelBtn.css("display")==="none")}})}),define("app-api/dev/dialog-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/models/ui/dialog-ui-model","core/utils/view-util","core/apis/api","core/views/alert-dlg-view"],function(e,t,n,r,i){return n.DialogApi=e.Api.extend({SEVERITY_INFORMATIONAL:r.SEVERITY_INFORMATIONAL,SEVERITY_WARNING:r.SEVERITY_WARNING,SEVERITY_ERROR:r.SEVERITY_ERROR,SEVERITY_SUCCESS:r.SEVERITY_SUCCESS,displayTextAlert:function(e,t,n,r,i,s){return this._displayAlert(e,t,n,r,i,!1,s)},displayHtmlAlert:function(e,t,n,r,i,s){return this._displayAlert(e,t,n,r,i,!0,s)},getDialogParentView:function(){return t.viewMgr},getDialogDomElement:function(){return $(".dialog-container")},closeAllDialogs:function(){this.options.dialogsUiModel.closeAll()},isDialogOpen:function(){return i.isElementDisplayed(this.getDialogDomElement())||i.isElementDisplayed($(".alert-dialog-container"))},getDialogCount:function(){return this.options.dialogsUiModel.getDialogCount()},_displayAlert:function(n,r,i,s,o,u,a){var f,l,c,h,p,d;return this.options.prevAlertDlg&&this.options.prevAlertDlg.close(),u||(i=_.escape(i)),a&&(l=a.okButtonClass,c=a.cancelButtonClass,h=a.dlgClass,p=a.scContext),d=document.activeElement,f=new e.AlertDlgView(_.extend({},this.options,{severity:n,title:r,msg:i,okBtn:s,cancelBtn:o,parentView:t.viewMgr,okBtnClass:l,cancelBtnClass:c,dlgClass:h,scContext:p})),this.options.prevAlertDlg=f,$("#modal-mask").addClass("alert"),f.open().always(_.bind(function(){this.options.prevAlertDlg=undefined,$("#modal-mask").removeClass("alert"),$(d).focus()},this))}}),n.DialogApi}),define("app-api/dev/download-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.DownloadApi=e.Api.extend({getDownloadTicket:function(t,n){return e.opFactory.create("GettingDownloadTicketOp",_.extend({},this.options,{async:!n})).run(!1,t)}}),t.DownloadApi}),define("app-api/dev/display-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/view-util","core/utils/util","core/apis/api"],function(e,t,n,r){var i=_.template('<div class="full-overlay unselectable"></div>');return t.DisplayApi=e.Api.extend({showModal:function(e,t){var n=this.options.modalMaskUiModel,r=!1,i=!1,s,o=!1;return _.isUndefined(e)&&(e=!0),_.isBoolean(t)?r=t:_.isObject(t)&&(r=!!t.transparent,i=!!t.reference),this.isDebugLogging()&&LOG("AcAppApi.DisplayApi.showModal "+e+(r?" transparent":"")+(i?" reference":"")),s=n.get("modal_ref_count"),i&&(e?s+=1:(s-=1,s<0&&(LOG("AcAppApi.DisplayApi.showModal: unbalanced 'hide' call"),s=0,o=!0))),this.options.modalMaskUiModel.set({modal:e,modal_transparent:e&&r,modal_ref_count:s}),o&&n.trigger("change:modal_ref_count"),this},isModal:function(){return this.options.modalMaskUiModel.get("modal")},isModalAjax:function(){return this.options.modalMaskUiModel.get("modal_ajax")},isModalTransparent:function(){return this.options.modalMaskUiModel.get("modal_transparent")},showSpinner:function(e,t){var r=this.options,i,s,o,u=$("#spinner");return t||(t=this.options.spinnerOptions),t&&(i=t.refElem,s=t.miniIcon),e?(r.showSpinnerRefs+=1,u.css("left","50%").css("top","50%"),i&&(o=i.offset(),o&&u.css("left",o.left+i.width()/2+"px").css("top",o.top+i.height()/2+"px")),u.removeClass("mini"),s&&u.addClass("mini")):(r.showSpinnerRefs-=1,r.showSpinnerRefs<0&&(r.showSpinnerRefs=0)),n.showSpinner(r.showSpinnerRefs>0),this},isSpinnerShown:function(){return this.options.showSpinnerRefs>0},clearSpinnerRefs:function(){this.options.showSpinnerRefs=1,this.showSpinner(!1)},setSpinnerOptions:function(e){this.options.spinnerOptions=e},clearSpinnerOptions:function(){this.setSpinnerOptions(undefined)},showAccountMenu:function(e){return this.options.pageHeaderUiModel.set("show_account_menu",e),this},showFullOverlay:function(e,t){var n=this.options.fullOverlayUiModel,r=n.get("overlay_element"),s,o;if(t)if(e){if(t.newElement)return s=r.parent(),s.append(i),o=s.children().last(),o.addClass("shown"),o}else{o=t.element;if(o)return o.remove(),o}return n.set("show_overlay",e),e&&r.empty(),r},isFullOverlayShown:function(){return this.options.fullOverlayUiModel.get("show_overlay")},toggleDebugLogging:function(){return this._isDebugLogging=!this._isDebugLogging,LOG("AcAppApi.DisplayApi.toggleDebugLogging "+(this._isDebugLogging?"on":"off")),this._isDebugLogging},isDebugLogging:function(){return!!this._isDebugLogging},showFrameworkChrome:function(e){e?($(".page-main-container").removeClass("acrobat"),$(".tools-content").removeClass("acrobat"),$(".page-header").show(),$(".toolbar").show()):($(".page-header").hide(),$(".toolbar").hide(),$(".tools-content").addClass("acrobat"),$(".page-main-container").addClass("acrobat"),$(".acrobat-footer").hide())},applyUIThemeStyles:function(t){var n=this.options,i=e.opFactory,s=$.Deferred();return r.isCEF()?n.appApi.rnaApi.then(function(e){e.rnaReaderAPI.fetchCustomThemeColorPalette().done(function(e,r){i.create("ApplyUIThemeStyleOp",_.extend({colorPalette:r,selectorElem:t},n)).run(),s.resolve()})}):s.resolve(),s.promise()},scaleToFit:function(e,t,n){var r=e.width(),i=e.height(),s=Math.min(t/r,n/i);e.width(r*s)}}),t.DisplayApi}),define("app-api/dev/folder-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/util","core/apis/api"],function(e,t,n){var r=!1,i=[];return t.FolderApi=e.Api.extend({getRootFolderId:function(e){var t=this.options,n=t.rootModel,r,i,s=n.get("id");return r=_.find(t.systemFoldersModel.get("connectors"),function(e){return e.name==="root"}),i=t.appApi.connectorsApi.getConnectorPluginRoot(e),r&&(s=r.id),i||s},setCurrentFolderId:function(e,t){this.options.currentFolderIds[e]=t},getCurrentFolderId:function(e){return e||(e=this.getRootFolderId()),this.options.currentFolderIds[e]||this.getRootFolderId(e)},getAcroPrefsFolderId:function(e){var t=this.options,n;n=t.systemFoldersModel.get("system_folders");if(n&&n.acroprefs)return n.acroprefs.id;return},refreshCurrentFolder:function(e,t){return r?this._getResolvedPromise():this.enqueueRefreshCurrentFolder(e,t)},enqueueRefreshCurrentFolder:function(e,t){var n=$.Deferred();return i.unshift({deferred:n,options:e,refreshOptions:t}),this._isRefreshingCurrentFolder||this._dequeueRefreshRequest(),n.promise()},setFilesCollection:function(e){var t=this.options.filesCollectionUiModel,n=_.isEqual(e,t.get("files_collection"));this.options.filesCollectionUiModel.set({files_collection:e}),n&&t.trigger("change:files_collection")},getFilesCollection:function(){return this.options.filesCollectionUiModel.get("files_collection")},addFilesCollectionCallback:function(e){this.options.filesCollectionUiModel.on("change:files_collection",e)},removeFilesCollectionCallback:function(e){this.options.filesCollectionUiModel.off("change:files_collection",e)},_dequeueRefreshRequest:function(){var e,t;if(i.length===0)return;e=i.pop(),t=e.deferred,this._refreshCurrentFolder(e.options,e.refreshOptions).then(t.resolve,t.reject)},_refreshCurrentFolder:function(t,r){var i=!1,s=!1;return this._isRefreshingCurrentFolder=!0,r&&(i=r.global,s=r.excludeEtag),e.opFactory.create("GettingFolderItemsOp",_.extend({},t,{global:i,limitedApi:!n.isIE9orBelow()})).run(t.folderModel.id,{excludeEtag:s}).always(_.bind(function(){this._isRefreshingCurrentFolder=!1,this._dequeueRefreshRequest()},this))},toggleRefreshCurrentFolder:function(){if(!e.Features.isFeatureEnabled("allow_refresh_current_folder_toggling"))return;r=!r,LOG("AcAppApi.FolderApi.toggleRefreshCurrentFolder "+(r?"disabled":"enabled"))}}),t.FolderApi}),define("app-api/dev/error-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/sc-analytics","core/apis/api"],function(e,t,n){return t.ErrorApi=e.Api.extend({addUncaughtExceptionCallback:function(e){this.options.uncaughtExceptionCallbacks.push(e)},sendLogEvent:function(t){e.opFactory.create("SendingLogEventOp",this.options).run(t)},notifyUncaughtExceptionCallbacks:function(e,t,n,r,i){var s=!0;return _.each(this.options.uncaughtExceptionCallbacks,function(o){o(e,t,n,r,i)===!1&&(s=!1)}),s},enqueueAjaxError:function(e){this.options.errorUiModel.enqueueAjaxError(e)},enqueueMiscError:function(e,t){this.options.errorUiModel.enqueueMiscError(e,t)},enqueueDupError:function(e,t){this.options.errorUiModel.enqueueDupError(e,t)},dequeueError:function(){this.options.errorUiModel.dequeueError()},dequeueQuotaError:function(){return this.options.errorUiModel.dequeueQuotaError()},dequeueDupError:function(){return this.options.errorUiModel.dequeueDupError()},isQuotaExceededError:function(e){return this.options.errorUiModel.isQuotaExceededError(e)},isDeleteNonEmptyFolderError:function(e){return this.options.errorUiModel.isDeleteNonEmptyFolderError(e)},isUnsupportedSharingMimeTypeError:function(e){return this.options.errorUiModel.isUnsupportedSharingMimeTypeError(e)},isVirusDetectedError:function(e){return this.options.errorUiModel.isVirusDetectedError(e)},moduleNotLoaded:function(e){this.options.errorUiModel.moduleNotLoaded(e)},getModulesNotLoaded:function(){return this.options.errorUiModel.getModulesNotLoaded()},listenTo:function(e,t,n){e.listenTo(this.options.errorUiModel,t,n)},stopListening:function(e,t,n){this.options.errorUiModel.stopListening(e,t,n)},getStatusErrorStrings:function(e){return this.options.errorUiModel.getStatusErrorStrings(e)},getErrorStrings:function(e){return this.options.errorUiModel.getErrorStrings(e)},logAjaxError:function(e){var t,r=e.status,i,s,o,u,a;o=this.options.appApi;if(!o)return;t=[n.GENERAL,n.ERROR],r&&t.push(r.toString()),r===403?t.push(n.FORBIDDEN):r===404&&t.push(n.NOT_FOUND);try{i=JSON.parse(e.responseText),s=i.error,s&&t.push(s.code),u=s.details,u&&(a=u.limit,a&&(t.push(n.LIMIT),t.push(a.toString())))}catch(f){}o.siteCatalystApi.logScEvent(t)}}),t.ErrorApi}),define("app-api/dev/http-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/http-util","core/apis/api"],function(e,t,n){return t.HttpApi=e.Api.extend({getRequestHeaders:function(e,t){return n.getRequestHeaders(e,t)}}),t.HttpApi}),define("app-api/dev/inactivity-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.InactivityApi=e.Api.extend({isIdle:function(){return this.options.inactivityUiModel.get("is_idle")},addActiveChangeCallback:function(e){this.options.inactivityUiModel.on("change:is_active",e)},removeActiveChangeCallback:function(e){this.options.inactivityUiModel.off("change:is_active",e)},addIdleChangeCallback:function(e){this.options.inactivityUiModel.on("change:is_idle",e)},removeIdleChangeCallback:function(e){this.options.inactivityUiModel.off("change:is_idle",e)},setIdleTimeout:function(e){this.options.inactivityUiModel.set("idle_timeout",e)}}),t.InactivityApi}),define("app-api/dev/focus-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.FocusApi=e.Api.extend({pushFocusHandler:function(e){var t=this.options.focusHandlers,n=t.length;if(n===0||t[n-1]!==e)n=t.push(e);return n},popFocusHandler:function(e){var t=this.options.focusHandlers,n=t.length,r;for(r=n-1;r>=0;r-=1)if(e===t[r]){t.splice(r,1);break}return e},pushFocusConsumer:function(){this.pushFocusHandler(this)},popFocusConsumer:function(){this.popFocusHandler(this)},_onFocusIn:function(){return!0},_onFocusOut:function(){return!0}}),t.FocusApi}),define("app-api/dev/key-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.KeyApi=e.Api.extend({pushKeyHandler:function(e){var t=this.options.keyHandlers,n=t.length;if(n===0||t[n-1]!==e)n=t.push(e);return n},popKeyHandler:function(e){var t=this.options.keyHandlers,n=t.length,r;for(r=n-1;r>=0;r-=1)if(e===t[r]){t.splice(r,1);break}return e},pushKeyConsumer:function(){this.pushKeyHandler(this)},popKeyConsumer:function(){this.popKeyHandler(this)},_onKeyDown:function(){return!0},_onKeyPress:function(){return!0},_onKeyUp:function(){return!0}}),t.KeyApi}),define("app-api/dev/loader-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/css-util","core/apis/api"],function(e,t,n){return t.LoaderApi=e.Api.extend({loadCss:function(e){n.loadCss(e)},loadModule:function(t,n){return e.opFactory.create("LoadingModuleOp",{appApi:this.options.appApi}).run({url:t,displayName:n})}}),t.LoaderApi}),define("app-api/dev/locale-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/apis/api"],function(e,t,n){return n.LocaleApi=e.Api.extend({getLocale:function(){return e.Locale.getLocale()},getNormalizedLocale:function(t){return e.Locale.getNormalizedLocale(t)},getLocaleByCountry:function(t){return e.Locale.getLocaleByCountry(t)},getLanguageName:function(t){return e.Locale.getLanguageName(this.getNormalizedLocale(t))},getQueryParamLocale:function(){return e.Locale.getQueryParamLocale()},setLocale:function(e){t.opFactory.create("SwitchingLanguageOp",_.extend({},this.options,{locale:e})).run()}}),n.LocaleApi}),define("app-api/dev/manipulation-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.ManipulationApi=e.Api.extend({moveToFolderAs:function(t,n,r,i,s){var o=e.opFactory,u,a;return o=e.opFactory,u=o.create("MovingItemOp",_.extend({},t,{id:n,objectType:r,destFolderId:i})),a=o.create("RenamingItemOp",_.extend({},t,{id:n,object_type:r,name:s})),u.run().then(function(){return a.run()})},deleteItem:function(t,n,r){return e.opFactory.create("DeletingItemOp",_.extend({},t,{id:n,object_type:r})).run()}}),t.ManipulationApi}),define("app-api/dev/network-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/ajax-util","core/apis/api"],function(e,t,n){return t.NetworkApi=e.Api.extend({isAjaxRequestActive:function(){return this.options.networkUiModel.get("is_ajax_request_active")},addAjaxActiveChangeCallback:function(e){this.options.networkUiModel.on("change:is_ajax_request_active",e)},throttledAjax:function(e,t){return $.ajax(e,_.extend({},t,{throttleOn:!0,beforeSend:n.beforeSend,complete:n.complete}))}}),t.NetworkApi}),define("app-api/dev/network-connectivity-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.NetworkConnectivityApi=e.Api.extend({isOnline:function(){var e=this.options.networkConnectivityModel;return e.get("is_connected")&&e.get("ajax_status")},addNetworkConnectivtyChangeCallback:function(e){this.options.networkConnectivityModel.on("change:is_connected",e)},removeNetworkConnectivtyChangeCallback:function(e){this.options.networkConnectivityModel.off("change:is_connected",e)},addNetworkOnlineChangeCallback:function(e){this.options.networkConnectivityModel.on("change:ajax_status",e)},removeNetworkOnlineChangeCallback:function(e){this.options.networkConnectivityModel.off("change:ajax_status",e)},resetNetworkStatusToOnline:function(e){this.options.networkConnectivityModel.resetNetworkStatusToOnline(e)},resetNetworkStatus:function(e){this.options.networkConnectivityModel.resetNetworkStatus(e)}}),t.NetworkConnectivityApi}),define("app-api/dev/notification-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){var n=!1;return t.NotificationApi=e.Api.extend({addFolderNotificationCallback:function(e,t){this.options.notificationUiModel.addCallback(e,t)},removeFolderNotificationCallback:function(e,t){this.options.notificationUiModel.removeCallback(e,t)},distributeNotifications:function(e){var t={},r,i,s,o,u;if(n)return;i=this.options.appApi.folderApi.getCurrentFolderId(),_.each(e,function(e){s=e.object_id,e.object_type==="folder"&&e.operation==="deleted"&&s===i?r=s:r=e.parent_id,o=t[r],o||(o=t[r]=[]),o.push(e)}),u=this.options.notificationUiModel.get("callbacks_by_folder_id"),_.each(t,function(e,t){_.each(u[t],function(t){t(e)})})},toggleNotifications:function(){if(!e.Features.isFeatureEnabled("allow_notification_toggling"))return;n=!n,LOG("AcAppApi.NotificationApi.toggleNotifications "+(n?"disabled":"enabled"))}}),t.NotificationApi}),define("app-api/dev/plugins-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","plugins-common/ac-plugins","i18n!core/nls/ui-strings","core/utils/util","core/apis/api"],function(e,t,n,r,i,s){return n.PluginsApi=e.Api.extend({initialize:function(){var t,n;e.Api.prototype.initialize.call(this),t=this.options,n=t.pluginsConfigs,_.each(r.types,function(e){_.each(e.plugin_ids,function(t){n[t]=e})}),t.pluginGroupsUiModel.init(r)},getBaseUrl:function(e){return this.options.pluginGroupsUiModel.getPluginBaseUrl(e)},getGroupBaseUrl:function(e){return this.options.pluginGroupsUiModel.getPluginGroupBaseUrl(e)},getGroupConfigUrl:function(e){var t=this.options.pluginGroupsUiModel.getPluginGroupConfigUrl(e);return t?this.getFullGroupUrl(e,t):""},setPluginGroupConfigLoaded:function(e,t){return this.options.pluginGroupsUiModel.setPluginGroupConfigLoaded(e,t)},isGroupConfigLoaded:function(e){return this.options.pluginGroupsUiModel.isPluginGroupConfigLoaded(e)},isPluginAvailable:function(e){var t,n;return this.getGroupConfigUrl(this.getPluginGroupId(e))&&!this.isGroupConfigLoaded(e)?!1:(t=this.options.pluginsUiModels[e],t?(n=t.get("plugins").get(e),n.get("plugin_loaded")||n.get("selector_loaded")):!1)},getPluginSelectorId:function(e){return e+"-selector"},getPluginContentId:function(e){return e+"-plugin"},setPluginGroupId:function(e,t){this.options.pluginGroupsUiModel.setPluginGroupId(e,t)},getPluginGroupId:function(e){return this.options.pluginGroupsUiModel.getPluginGroupId(e)},getGroupAnalyticsUrl:function(e){var t=this.options.pluginGroupsUiModel.getPluginGroupAnalyticsUrl(e);return t?this.getFullGroupUrl(e,t):""},getGroupCssUrl:function(e){var t=this.options.pluginGroupsUiModel.getPluginGroupCssUrl(e);return t?this.getFullUrl(e,t):""},getGroupModuleUrl:function(e){return this.options.pluginGroupsUiModel.getPluginGroupModuleUrl(e)},getGroupSelectorCssUrl:function(e){var t=this.options.pluginGroupsUiModel.getPluginGroupSelectorCssUrl(e);return t?this.getFullUrl(e,t):""},getGroupSelectorModuleUrl:function(e){return this.options.pluginGroupsUiModel.getPluginGroupSelectorModuleUrl(e)},getFullUrl:function(e,t){return this.prependBaseUrl(t,this.getBaseUrl(e))},getFullGroupUrl:function(e,t){return this.prependBaseUrl(t,this.getGroupBaseUrl(e))},prependBaseUrl:function(e,t){var n=e;return t&&(t.charAt(t.length-1)!==47&&(t+="/"),n=t+n),n},loadPlugin:function(t){return e.opFactory.create("LoadingPluginOp",this.options).run(t)},showPlugin:function(e,t){var n=this.options.pluginsUiModels[e],r,i,s,o;if(!n)return;r=n.get("plugins").get(e),i=r.get("show_plugin"),t!==i&&(o=r.get("selector_api"),o&&o.showSelector(t),r.set("show_plugin",t),n.pluginsChanged()),!t&&e===n.get("selected_plugin_id")&&(s=n.getFirstEnabledId(),s&&this.selectPlugin(s))},selectPlugin:function(t,n,r){var i=this.options,s;return n=n||{},n.noHistoryEffect||(s=i.pluginsUiModels[t],s&&s.set("pending_plugin_id",t)),n.noChildSelection=r===!0,i.appApi.sessionApi.getRoutingAtContentPagePromise().then(_.bind(function(){return this.loadPlugin(t).then(_.bind(function(){if(!r||!this.isPluginSelected(t))return e.opFactory.create("SelectingPluginOp",i).run(t,n)},this))},this))},selectPluginIfNotSelected:function(e,t){return this.selectPlugin(e,t,!0)},getEnabledPlugin:function(e){var t;return this.isPluginEnabled(e)||(t=this.options.pluginsUiModels[e],t&&(e=t.getFirstEnabledId())),e},isPluginSelected:function(e){var t=this.options.pluginsUiModels[e];return t?e===t.get("selected_plugin_id"):!1},isPluginShown:function(e){var t=this.options.pluginsUiModels[e],n;return t?(n=t.get("plugins").get(e),n.get("show_plugin")):!1},isPluginEnabled:function(e){return this.isPluginShown(e)?this.callPluginMethod(e,"isEnabled",undefined,!0,!0):!1},getPluginIdOfType:function(e,t){var n=r.types[e],i,s,o;return n&&(i=n.plugin_ids,i&&i.length>0&&(s=this.getPluginsUiModel(i[0]),s&&(o=s.get(t)))),o},getSelectedPluginId:function(e){return this.getPluginIdOfType(e,"selected_plugin_id")},setDefaultPluginId:function(e,t){var n=r.types[e],i,s,o;n&&(i=n.plugin_ids,i&&i.length>0&&(s=this.getPluginsUiModel(i[0]),s&&(_.isUndefined(_.find(i,function(e){return e===t}))?(o=s.getAllIds(),_.isUndefined(_.find(o,function(e){return e===t}))||(s.set("default_plugin_id",t),n.default_plugin_id=t)):(s.set("default_plugin_id",t),n.default_plugin_id=t))))},setDefaultPluginIdAsUndefined:function(e){var t=r.types[e],n,i;t&&(n=t.plugin_ids,n&&n.length>0&&(i=this.getPluginsUiModel(n[0]),i&&(i.set("default_plugin_id",undefined),t.default_plugin_id=undefined)))},getDefaultPluginId:function(e){return this.getPluginIdOfType(e,"default_plugin_id")},getPendingPluginId:function(e){return this.getPluginIdOfType(e,"pending_plugin_id")||this.getPluginIdOfType(e,"selected_plugin_id")},getSelectedPluginSiteCatalystName:function(e){var t=this.getSelectedPluginId(e),n;return t&&(n=this.getSiteCatalystName(t)),n},getSiteCatalystName:function(e,t,n){return n?this.callSelectorMethod(e,"getSiteCatalystName",undefined,t,!0):this.callPluginMethod(e,"getSiteCatalystName",undefined,t,!0)},expandPlugin:function(e,t){var n=this.options.pluginsUiModels[e];_.isUndefined(t)&&(t=!0),n&&(t?n.set("expanded_plugin_id",e):n.unset("expanded_plugin_id"))},isPluginExpanded:function(e){var t=this.options.pluginsUiModels[e];return t?e===t.get("expanded_plugin_id"):!1},addPlugin:function(e,t,n,r,i){var s=n.get("plugins");s.add(t,{at:i}),this.addPluginsConfig(e,r),this.registerPluginsUiModel(e,n)},removePlugin:function(e,t){var n=t.get("plugins"),r=n.get(e),i=n.indexOf(r),s=r.get("selector_api"),o=r.get("plugin_api");return s&&r.get("selector_api").remove(),o&&r.get("plugin_api").remove(),n.remove(r),this.registerPluginsUiModel(e,undefined),this.addPluginsConfig(e,undefined),i},addPluginApi:function(e,t){this.options.pluginApis[e]=t},getPluginApi:function(e){return this.options.pluginApis[e]},addSelectorApi:function(e,t){this.options.selectorApis[e]=t},getSelectorApi:function(e){return this.options.selectorApis[e]},isPluginOfThisType:function(e,t){var n=this.getPluginTypeConfig(t);return n&&_.indexOf(n.plugin_ids,e)!==-1},getPluginTypeConfig:function(e){return r.types[e]},hasPluginType:function(e){var t=this.getPluginTypeConfig(e);return t?t.plugin_ids.length>0:!1},addPluginsConfig:function(e,t){this.options.pluginsConfigs[e]=t},getPluginsConfig:function(e){return this.options.pluginsConfigs[e]},registerPluginsUiModel:function(e,t){var n=this.options.pluginsUiModels;_.isString(e)?n[e]=t:_.each(e.plugin_ids,function(e){n[e]=t})},getPluginsUiModel:function(e){return this.options.pluginsUiModels[e]},getPluginUiModel:function(e){var t=this.getPluginsUiModel(e);return t&&t.getPluginUiModel(e)},getConfig:function(e){return this.options.pluginGroupsUiModel.getPluginConfig(e)},getApiId:function(e,t){var n;return _.each(e,function(e,r){e===t&&(n=r)}),n},getPluginId:function(e){return this.getApiId(this.options.pluginApis,e)},getSelectorId:function(e){return this.getApiId(this.options.selectorApis,e)},getPreferences:function(){var e={},t;return _.each(this.options.pluginApis,function(n,r){t=n.getPreferences(),t&&(e[r]=t)}),e},setPreferences:function(e){var t;_.each(this.options.pluginApis,function(n,r){t=e[r],n&&t&&n.setPreferences(t)})},getVersionLists:function(){var e={},t;return _.each(this.options.pluginApis,function(n,r){if(n.getPluginVersionList){t=undefined;try{t=n.getPluginVersionList()}catch(i){t=["Error retrieving versions"]}t&&(e[r]={versionList:t,frameworkVersion:n.getAppApiVersion()})}e.hasOwnProperty(r)||(e[r]=["Not implemented"])}),e},getMinimumSupportedRNAVersion:function(e){var t=this.options,n=1,r,i=t.appApi.connectorsApi,o;return s.isCEF()?(i.isConnectorPlugin(e)&&(o=i.getConnectorPluginName(e),i.isDesktopConnector(o)||(e="my_files")),Ac.rnaVersionInfo&&t.appApi.rnaApi.done(_.bind(function(t){var i=t.rnaReaderAPI.getProductVersion(),s,o,u,a,f,l,c,h=0,p=0;return!this._minVersionBlob&&i&&(l=i.lastIndexOf("."),l!==-1&&(s=i.substr(0,l),f=s.lastIndexOf("."),f!==-1&&(o=s.substr(0,f),u=parseInt(i.substr(f+1,l),10),a=parseInt(i.substr(l+1),10),Ac.rnaVersionInfo[i]&&(this._minVersionBlob=Ac.rnaVersionInfo[i]),!this._minVersionBlob&&Ac.rnaVersionInfo[s]&&(c=Ac.rnaVersionInfo[s].range,c&&!_.isUndefined(c.from)&&!_.isUndefined(c.to)?(h=parseInt(c.from,10),p=parseInt(c.to,10),a>=h&&a<=p&&(this._minVersionBlob=Ac.rnaVersionInfo[s])):this._minVersionBlob=Ac.rnaVersionInfo[s]),!this._minVersionBlob&&Ac.rnaVersionInfo[o]&&(c=Ac.rnaVersionInfo[o].range,c&&!_.isUndefined(c.from)&&!_.isUndefined(c.to)?(h=parseInt(c.from,10),p=parseInt(c.to,10),u>=h&&u<=p&&(this._minVersionBlob=Ac.rnaVersionInfo[o])):this._minVersionBlob=Ac.rnaVersionInfo[o]),!this._minVersionBlob&&Ac.rnaVersionInfo["default"]&&(this._minVersionBlob=Ac.rnaVersionInfo["default"])))),this._minVersionBlob&&(r=this._minVersionBlob.rna_version[e],r&&(n=parseInt(r,10))),n},this)),n):n},getRNAVersion:function(e){var t=1,n=this.options.appApi.connectorsApi,r;return s.isCEF()?(n.isConnectorPlugin(e)&&(r=n.getConnectorPluginName(e),n.isDesktopConnector(r)||(e="my_files")),Ac.currentRNAVersions&&(_.isUndefined(Ac.currentRNAVersions[e])||(t=Ac.currentRNAVersions[e])),t):t},getRNAVariant:function(e){var t="",n=this.options.appApi.connectorsApi,r;return s.isCEF()?(n.isConnectorPlugin(e)&&(r=n.getConnectorPluginName(e),n.isDesktopConnector(r)||(e="my_files")),Ac.currentRNAVariants&&(_.isUndefined(Ac.currentRNAVariants[e])||(t=Ac.currentRNAVariants[e])),t):t},getRNASelectedPluginId:function(){var e,t=this.options,n,r=t.appApi.connectorsApi;return t.runningInFull&&(e=this.getSelectedPluginId("tools"),e==="home"&&(e=this.getSelectedPluginId("home_views"))),t.runningInRHP&&(e=this.getSelectedPluginId("full_preview")),t.runningInFileSelection&&(e=this.getSelectedPluginId("file_selection_dlg")),r.isConnectorPlugin(e)&&(n=r.getConnectorPluginName(e),r.isDesktopConnector(n)||(e="my_files")),e},validateRNAPlugin:function(e){var n=this.options,r=n.appApi,i=r.connectorsApi,o,u,a;return s.isCEF()?(n.runningInFull&&(o=this.getSelectedPluginId("tools"),o==="home"&&(o=this.getSelectedPluginId("home_views"))),n.runningInRHP&&(o=this.getSelectedPluginId("full_preview")),n.runningInFileSelection&&(o=this.getSelectedPluginId("file_selection_dlg")),a=o,i.isConnectorPlugin(o)&&(u=i.getConnectorPluginName(o),i.isDesktopConnector(u)||(o="my_files")),t.opFactory.create("ValidatingRNAVersionInfoOp",n).run(o).then(undefined,_.bind(function(){e||this.handleOutDatedRNAPlugin(o,a)},this))):this._getResolvedPromise()},handleOutDatedRNAPlugin:function(e,t){var n=this.options,r=n.appApi,o=r.dialogApi,u=this.getPluginUiModel(t),a=0;if(!s.isCEF())return;r.selectionApi.isRunningInFileSelection()&&(a=1);if(o.getDialogCount()!==a)return;o.displayTextAlert(r.dialogApi.SEVERITY_ERROR,i.RNA_VERSION_DIALOG_TITLE,i.RNA_VERSION_DIALOG_CONTENT,i.RNA_VERSION_DIALOG_LINK_TITLE,i.CANCEL).then(function(){r.rnaApi.done(function(t){n.rnaPluginGoUrlInfo[e]&&t.rnaIpmAPI.invokeMethod({methodName:"executeURI",methodArgs:i[n.rnaPluginGoUrlInfo[e]]})})}),u&&_.defer(function(){$(u.get("content_elem")).empty(),$("#modal-mask").addClass("alert"),r.displayApi.clearSpinnerRefs()})},handleServerOutageFailure:function(){var e=this.options,t=e.appApi,n=t.dialogApi,r=0;s.isCEF()&&_.delay(function(){t.selectionApi.isRunningInFileSelection()&&(r=1),t.networkConnectivityApi.isOnline()&&t.sessionApi.isSignedInReader()&&n.getDialogCount()===r&&n.displayTextAlert(n.SEVERITY_ERROR,i.SERVER_OUTAGE_DIALOG_TITLE,i.SERVER_OUTAGE_DIALOG_CONTENT,i.OK)},500)},callApiMethod:function(e,t,n,r,i,s){function a(){LOG(s()+"plugin  has no '"+t+"' method")}function f(e){LOG(s()+"method '"+t+"' threw error: "+(e.stack||e.message))}var o=e[t],u;if(_.isFunction(o))try{_.isArray(n)?u=o.apply(e,[n]):u=o.call(e,n);if(!_.isUndefined(u)||!r)return u}catch(l){_.isFunction(f)&&f(l)}else!i&&_.isFunction(a)&&a();return r},callPluginApiMethod:function(e,t,n,r,i){var s=_.bind(function(){return"AcAppApi.PluginsApi.callPluginApiMethod: '"+this.getPluginId(e)+"' "},this);return this.callApiMethod(e,t,n,r,i,s)},callPluginMethod:function(e,t,n,r,i){var s=this.options.pluginApis[e];return s?this.callPluginApiMethod(s,t,n,r,i):(i||LOG("AcAppApi.PluginsApi.callPluginMethod: No plugin with id '"+e+"'"),r)},callSelectorApiMethod:function(e,t,n,r,i){var s=_.bind(function(){return"AcAppApi.PluginsApi.callSelectorApiMethod: '"+this.getPluginId(e)+"' "},this);return this.callApiMethod(e,t,n,r,i,s)},callSelectorMethod:function(e,t,n,r,i){var s=this.options.selectorApis[e];return s?this.callSelectorApiMethod(s,t,n,r,i):(i||LOG("AcAppApi.PluginsApi.callSelectorMethod: No selector with id '"+e+"'"),r)},callPluginMethodForEach:function(e,t,n,r,i){var s=[];return _.each(e,_.bind(function(e,o){s[o]=this.callPluginMethod(e,t,n,r,i)},this)),s},callSelectorMethodForEach:function(e,t,n,r,i){var s=[];return _.each(e,_.bind(function(e,o){s[o]=this.callSelectorMethod(e,t,n,r,i)},this)),s},callPluginMethodForEachIfEnabled:function(e,t,n,r,i){var s=[];return _.each(e,_.bind(function(e){this.callPluginMethod(e,"isEnabled",undefined,!0,!0)&&s.push(this.callPluginMethod(e,t,n,r,i))},this)),s}}),n.PluginsApi}),define("files/dev/ac-files",["require"],function(e){var t,n,r,i,s,o;return i=e.toUrl("files"),s=i.lastIndexOf("/"),o=i.indexOf(".js"),o!==-1?t=i.substr(s+1,o-s-1):t=i.substr(s+1),n=Ac.Files,n||(n=Ac.Files={}),r=n[t],r||(r=n[t]={}),r.VERSION=t,r}),define("app-api/dev/preview-api",["core/ac-core","files/ac-files","app-api/dev/ac-app-api","core/utils/util","core/apis/api"],function(e,t,n,r){var i=["file/","about","my_info","my_plan"];return n.PreviewApi=e.Api.extend({initialize:function(){e.Api.prototype.initialize.call(this),this._fullPreviewItemModelCallbacks=[],this.options.fullPreviewUiModel.on("change:item_model",this._onItemModelChange)},closeFullPreview:function(e){var n=this.options,r,i,s;return this.options.fullPreviewOptions?(e=_.extend({},this.options.fullPreviewOptions,e),s=e.noHistoryEffect,r=n.fullPreviewUiModel,i=r.get("prev_document_title"),i&&(document.title=i,r.unset("prev_document_title")),e.fullPreviewUiModel.set("prev_non_preview_path",r.get("prev_non_preview_path")),t.opFactory.create("ClosingFullPreviewOp",e).run().always(function(){r.close(),n.fullPreviewOptions=undefined,s||n.appApi.pluginsApi.selectPlugin(n.toolsUiModel.getSelectedId(),undefined,!0)})):this._getResolvedPromise()},getFullPreviewAssetInfo:function(){var e=this.options.fullPreviewUiModel.get("item_model");return e?{id:e.id,metadata:e.attributes}:undefined},openedFullPreview:function(e){var t=document.title,n=this.options.fullPreviewUiModel;this.options.fullPreviewOptions=e,n.set(_.omit(e.fullPreviewUiModel.attributes,"prev_non_preview_path")),n.get("prev_document_title")||n.set("prev_document_title",t),document.title=n.getFileName()+" - "+t},navigatedToPath:function(e){var t=this.options,n=t.appApi.routerApi,r=t.fullPreviewUiModel;if(n.pathStartsWith(n.getCurrentPath(),"file/"))return;if(!e||e==="/")return;(!r.get("item_model")||!r.get("prev_non_preview_path"))&&!n.pathStartsWith(e,"file/")&&r.set("prev_non_preview_path",e)},ignoreCurrentPath:function(){var e=this.options.appApi.routerApi,t=_.find(i,function(t){return e.currentPathStartsWith(t)});return!_.isUndefined(t)},addIgnorePath:function(e){var t=_.indexOf(i,e);t<0&&i.push(e)},addItemModelChangeCallback:function(e){var t=this._fullPreviewItemModelCallbacks,n=_.indexOf(t,e);n<0&&t.push(e)},removeItemModelChangeCallback:function(e){var t=this._fullPreviewItemModelCallbacks,n=_.indexOf(t,e);n>=0&&t.splice(n,1)},isActive:function(){return!_.isUndefined(this.options.fullPreviewUiModel.get("item_model"))},mayActivatePluginElement:function(e){var t=this.options.appApi.pluginsApi.getPluginTypeConfig("full_preview_overlays").plugin_ids;if(r.isIE9orBelow()||r.isIE10())return;_.each(t,_.bind(function(t){var n=this.options.appApi.pluginsApi,r=n.getPluginApi(t),i=n.getPluginsUiModel(t),s;if(r&&i){s=i.get("plugins").get(t);if(_.isUndefined(s.get("content_elem")))return;n.callPluginApiMethod(r,"mayActivatePluginElement",[e,s.get("preview_elems")],!1,!0)?(s.get("content_elem").removeClass("no-events"),_.each(s.get("preview_elems"),function(e){e.removeClass("no-events")})):this.options.fullPreviewUiModel.isNGDocView()&&(s.get("content_elem").addClass("no-events"),_.each(s.get("preview_elems"),function(e){e.addClass("no-events")}))}},this))},_onItemModelChange:function(e,t){_.each(this._fullPreviewItemModelCallbacks,function(e){e(t)})}}),n.PreviewApi}),define("app-api/dev/rna-analytics-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAAnalyticsAPI=e.Api.extend({initialize:function(){this._analyticsAPI=this.options._analyticsAPI,delete this.options._analyticsAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._analyticsAPI.invoke(e.methodName,e.methodArgs)}}),t.RNAAnalyticsAPI}),define("app-api/dev/rna-asset-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAAssetAPI=e.Api.extend({initialize:function(){this._assetAPI=this.options._assetAPI,delete this.options._assetAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._assetAPI.invoke(e.methodName,e.methodArgs)}}),t.RNAAssetAPI}),define("app-api/dev/rna-cefbrowser-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNACefBrowserAPI=e.Api.extend({initialize:function(){this._browserCefMgr=this.options._browserCefMgr,delete this.options._browserCefMgr,e.Api.prototype.initialize.call(this)},invokeCEFMethod:function(e){this._browserCefMgr.invoke(e.methodName,e.parameters)},invokeMethod:function(e){var t=$.Deferred();return this._browserCefMgr.invoke("getBrowserObject").done(function(n){var r=n[e.methodName]._invoke.apply(undefined,e.parameters);r._done(function(e,n){e===0?t.resolve(n):t.reject(n)}),r._fail(function(e,n){t.reject(n)})}),t.promise()},getVariantNumber:function(e){var t=$.Deferred();return this._browserCefMgr.invoke("getVariantNumber").done(function(e){t.resolve(e)}),t.promise()}}),t.RNACefBrowserAPI}),define("app-api/dev/rna-connectors-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAConnectorsAPI=e.Api.extend({initialize:function(){this._connectorsAPI=this.options._connectorsAPI,delete this.options._connectorsAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._connectorsAPI.invoke(e.methodName,e.methodArgs)},addConnectorAccount:function(e,t,n){var r={connectorId:e,initiatorDlg:t};return n&&n.email&&(r.emailId=n.email),n&&n.accountId&&(r.accountId=n.accountId),this._connectorsAPI.invoke("addConnectorAccount",r)},removeConnectorAccount:function(e,t){return this._connectorsAPI.invoke("removeConnectorAccount",e,t)},getConnectorsUIHelperData:function(e,t){var n=$.Deferred(),r=this._connectorsAPI,i=this.options.connectorsUiHelpersModel,s;return r?i?(s=function(){var e=r.get("uiHelperResponse"),t=JSON.parse(e);r.off("custom:onUIHelpersRefreshComplete",s),t?(i.set(t),n.resolve()):n.reject()},r.on("custom:onUIHelpersRefreshComplete",s),r.invoke("refreshUIHelpersResponse",e,!t),n.promise()):n.reject().promise():n.reject().promise()},getSystemFoldersData:function(e,t){var n=$.Deferred(),r=this._connectorsAPI,i=this.options.systemFoldersModel,s;return r?i?(s=function(){var e=r.get("systemFoldersResponse"),t=JSON.parse(e);r.off("custom:onSystemFoldersRefreshComplete",s),t?(i.set(t),n.resolve()):n.reject()},r.on("custom:onSystemFoldersRefreshComplete",s),r.invoke("refreshStorageResponse",e,!t),n.promise()):n.reject().promise():n.reject().promise()}}),t.RNAConnectorsAPI}),define("app-api/dev/rna-echosign-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAEchoSignApi=e.Api.extend({initialize:function(){this._esAPI=this.options._esAPI,delete this.options._esAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._esAPI.invoke(e.methodName,e.methodArgs)},getEchoSignServiceParams:function(){var e={apiKey:this._esAPI.get("apiKey"),baseURL:this._esAPI.get("baseURL"),apiURL:this.getEchoSignApiURL(),webURL:this.getEchoSignWebURL(),esClientId:this._esAPI.get("esClientId"),esClientSecret:this._esAPI.get("esClientSecret"),imsClientId:this._esAPI.get("imsClientId")};return e},getSFSAppLauncherName:function(){return this._esAPI.get("sfsAppLauncher")},getEchoSignApiURL:function(){return _.isUndefined(this._apiURL)&&(this._apiURL=this._esAPI.get("apiURL")),this._apiURL},getEchoSignWebURL:function(){return _.isUndefined(this._webURL)&&(this._webURL=this._esAPI.get("webURL")),this._webURL},setEchoSignApiURL:function(e){this._apiURL=e},setEchoSignWebURL:function(e){this._webURL=e},setSFSWorkflowInProgress:function(e){return this._esAPI.invoke("sfsWorkflowInProgress",e)},isSendForSignEnabled:function(){return this._esAPI.get("isSendForSignEnabled")},isAnySFSWorkflowsRunning:function(){return this._esAPI.invoke("isAnySFSWorkflowsRunning")},prepareFormsEmailRecipients:function(){return this._esAPI.invoke("prepareFormsEmailRecipients")},isSFSCoachmarkAlreadyDisplayed:function(){return this._esAPI.get("isSFSCoachmarkDisplayed")},setSFSCoachmarkAlreadyDisplayed:function(){return this._esAPI.invoke("setSFSCoachmarkDisplayed")},isSFSNativeLandingPageRegSet:function(){return this._esAPI.get("showSFSNativeLandingPageReg")},isSFSNewLandingPageIPMEnabled:function(){return this._esAPI.get("isSFSNewLandingPageIPMEnabled")},shouldShowSFSCoachmark:function(){return this._esAPI.get("showSFSCoachmark")}}),t.RNAEchoSignApi}),define("app-api/dev/rna-file-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/sc-analytics","core/apis/api"],function(e,t,n){return t.RNAFileAPI=e.Api.extend({initialize:function(){this._fileAPI=this.options._fileAPI,delete this.options._fileAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._fileAPI.invoke(e.methodName,e.methodArgs)},selectAndOpenFile:function(e){var t=this.options,n=$.Deferred();return this.invokeMethod({methodName:"selectAndOpenFile",methodArgs:e}),n.promise()},selectFiles:function(t){var r=this.options,i=$.Deferred(),s,o=r.appApi.pluginsApi,u;return r.runningInRHP?s=o.getSelectedPluginId("full_preview"):s=o.getSelectedPluginId("tools"),s&&(_.extend(t||{},{selectedToolPlugin:s}),o.getPluginApi(s)&&(u=o.callPluginMethod(s,"getSiteCatalystName",undefined,n.UNKNOWN,!0)),u&&_.extend(t||{},{scContext:u})),this.invokeMethod({methodName:"selectFileDialog",methodArgs:t}).done(_.bind(function(n){n._addEventListener("custom:onFilesSelected",_.bind(function(n,s){var o=0,u=s.params,a=[],f={},l,c,h;u.length&&t.scContext&&(u[0].assetId._value===""?this._logScEventsForSelectedLocalFiles(t.scContext,u.length):this._logScEventsForSelectedUploadedFiles(t.scContext,u.length));for(o=0;o<u.length;o++){l=u[o];if(!l)continue;c=new e.LocalItemModel(undefined,{_proxy:l}),h=l.assetId._value,_.isEmpty(h)?a.push(c):f[h]=c}r.appApi.selectionApi.setSelectedLocalFiles(a),r.appApi.selectionApi.setSelectedItemModels(f),i.resolve(this._getSelection()),r.appApi.selectionApi.setSelectedLocalFiles([]),r.appApi.selectionApi.setSelectedItemModels({})},this))},this)),i.promise()},closeDialog:function(e){this.options.readerContextModel.done(_.bind(function(t){var n=t.get("rna");this.fsData=n.get("viewData").get("fileSelectData"),this.fsData.invoke("cancelDialog",e)},this))},openPlatformDialog:function(e){var t={},n=this.options.appApi,r=n.saveAsApi,i=r.isRestrictEditingSelected(),s=r.isReduceFileSizeSelected(),o=$.Deferred();if(!n.selectionApi.isRunningInFileSelection())return;e&&(t.initialPathName=e._proxy),i!==undefined&&(t.restrictEditing=i),s!==undefined&&(t.reduceFileSize=s),r.shouldShowExportOptions()?r.isViewResultVisible().done(function(e){if(!e){o.resolve();return}r.isViewResultChecked().done(function(e){t.viewResultState=e,o.resolve()})}):o.resolve(),o.done(_.bind(function(){this.options.readerContextModel.done(_.bind(function(e){var n=e.get("rna");this.fsData=n.get("viewData").get("fileSelectData"),this.fsData.invoke("setOpenPlatformDialog",t)},this))},this))},getFileSaveAsLocation:function(e){var t=$.Deferred();return this.invokeMethod({methodName:"getFileSaveAsLocation",methodArgs:e}).done(_.bind(function(e){e._addEventListener("custom:onFileSaveAsLocationSelected",_.bind(function(e,n){!n.params||n.params.errorCode!=0?t.reject(n.params.errorCode):t.resolve(n.params)},this))},this)),t.promise()},_getSelection:function(){var e=this.options,t=[],n=[],r={},i,s,o;return o=e.selectionUiModel,o&&(_.each(o.get("selected_local_files"),function(e){t.push(e)}),_.each(o.get("selected_item_models"),function(e,t){r[t]=e}),o.isSelectionComplete()&&(i=!0)),{localFiles:t,localFileInputs:n,uploadedFileAttrs:r,isSelectionComplete:i}},_logScEventsForSelectedLocalFiles:function(e,t){var r=[n.TOOLS,e,n.CHOOSE_FILES_DLG],i=r.concat([n.OS_OPEN_DLG,n.FILE,n.SELECTED]),s=r.concat([n.MY_COMPUTER_ONLY,n.SUCCESS,n.getCountCode(t)]);this.options.appApi.siteCatalystApi.logScEvent(i),this.options.appApi.siteCatalystApi.logScEvent(s)},_logScEventsForSelectedUploadedFiles:function(e,t){var r=[n.TOOLS,e,n.CHOOSE_FILES_DLG],i=r.concat([n.ACOM_ONLY,n.SUCCESS,n.getCountCode(t)]);this.options.appApi.siteCatalystApi.logScEvent(i)}}),t.RNAFileAPI}),define("app-api/dev/rna-fss-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAFssAPI=e.Api.extend({initialize:function(){this._fssAPI=this.options._fssAPI,delete this.options._fssAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._fssAPI.invoke(e.methodName,e.methodArgs)}}),t.RNAFssAPI}),define("app-api/dev/rna-fte-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAFteAPI=e.Api.extend({initialize:function(){this._fteAPI=this.options._fteAPI,delete this.options._fteAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return e.methodName=="toggleMobileLink"?this._fteAPI.get("mobileLinkAPI").invoke(e.methodName,e.methodArgs):this._fteAPI.invoke(e.methodName,e.methodArgs)},onChange:function(e,t){typeof t=="function"&&this._fteAPI.on("change:"+e,t)},onMLChange:function(e,t){typeof t=="function"&&this._fteAPI.get("mobileLinkAPI").on("change:"+e,t)},isToggleButtonVisible:function(){return this._fteAPI.get("mobileLinkAPI").get("toggleButtonVisible")},toggleButtonState:function(){return this._fteAPI.get("mobileLinkAPI").get("toggleButtonState")}}),t.RNAFteAPI}),define("app-api/dev/rna-wt-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAWtAPI=e.Api.extend({initialize:function(){this._wtAPI=this.options._wtAPI,delete this.options._wtAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._wtAPI.invoke(e.methodName,e.methodArgs)},onChange:function(e,t){typeof t=="function"&&this._wtAPI.on("change:"+e,t)}}),t.RNAWtAPI}),define("app-api/dev/rna-ipm-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){var n=!1,r="";return t.RNAIpmAPI=e.Api.extend({initialize:function(){this._ipmAPI=this.options._ipmAPI,delete this.options._ipmAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._ipmAPI.invoke(e.methodName,e.methodArgs)},getIPMMessage:function(t){var n=new $.Deferred;return this._ipmAPI.invoke("getIPMMessage",t).done(function(t){var r=t,i;r||n.reject(),i=new e.RNAIPMModel(undefined,{_proxy:r}),n.resolve(i)}).fail(function(){n.reject()}),n.promise()},getTrackingParam:function(e){var t=new $.Deferred;return n?t.resolve(r).promise():(this._ipmAPI.invoke("getTrackingParam",e).done(function(e){n=!0,r=e,t.resolve(r)}).fail(function(){t.reject()}),t.promise())}}),t.RNAIpmAPI}),define("app-api/dev/rna-leftrail-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNALeftRailAPI=e.Api.extend({initialize:function(){this._leftRailAPI=this.options._leftRailAPI,delete this.options._leftRailAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._leftRailAPI.invoke(e.methodName,e.methodArgs)},selectLeftRailItem:function(e,t,n){return this._leftRailAPI.invoke("selectLeftRailItem",e,t!==!0,n)},selectConnectorLeftRailItem:function(e,t){var n=this.options.appApi.connectorsApi,r=n.getConnectorPluginName(e),i=n.getConnectorPluginRoot(e);return i===undefined&&(i=""),this._leftRailAPI.invoke("selectConnectorLeftRailItem",r,i,t!==!0)},disableLeftRailSelection:function(e){return this._leftRailAPI.invoke("disableLeftRailSelection",e)},isAddAccountVisibleInFileSelDlg:function(){return this._leftRailAPI.invoke("isAddAccountVisibleInFileSelDlg")}}),t.RNALeftRailAPI}),define("app-api/dev/rna-notification-api",["core/ac-core","files/ac-files","app-api/dev/ac-app-api","core/apis/api"],function(e,t,n){return n.RNANotificationApi=e.Api.extend({initialize:function(){this._notificationAPI=this.options._notificationAPI,delete this.options._notificationAPI,e.Api.prototype.initialize.call(this)},createNotification:function(t){var n=$.Deferred();return this._notificationAPI.invoke("createNotification",t).then(function(t){if(!t)n.reject();else{var r=new e.RnaNotificationModel(undefined,_.extend({_proxy:t,shouldCache:!0}));n.resolve(r)}}),n},removeNotification:function(e){return this._notificationAPI.invoke("removeNotification",e)},getNotificationList:function(){return this._notificationAPI.get("notificationList")}}),n.RNANotificationApi}),define("app-api/dev/rna-plugins-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAPluginsAPI=e.Api.extend({initialize:function(){this._pluginsAPI=this.options._pluginsAPI,delete this.options._pluginsAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._pluginsAPI.invoke(e.methodName,e.methodArgs)}}),t.RNAPluginsAPI}),define("app-api/dev/rna-reader-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAReaderAPI=e.Api.extend({initialize:function(){this._rnaModel=this.options._rnaModel,this._rnaAPI=this.options._rnaAPI,this._productConfig=this._rnaModel.get("productConfig"),this._actionMgr=this._rnaModel.get("actionMgr"),this._extBlacklist=this._rnaModel.get("extBlacklist"),delete this.options._rnaModel,delete this.options._rnaAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._rnaAPI.invoke(e.methodName,e.methodArgs)},executeAction:function(e,t){return t||(t=""),this._actionMgr.invoke("executeAction",t,e,!0)},openDecoratedUrl:function(e){return this._rnaAPI.invoke("openDecoratedUrl",e)},isRunningInBrowser:function(){return this._rnaAPI.get("isRunningInBrowser")},isFeatRunning:function(){return this._rnaAPI.get("isFeatRunning")},isASTestAllowInstantiation:function(){return this._rnaAPI.get("isASTestAllowInstantiation")},getProductName:function(){return this._productConfig.get("name")},getProductVersion:function(){return this._productConfig.get("version")},isDebug:function(){return this._productConfig.hasProperty("environment")&&this._productConfig.get("environment")==="debug"},getOpenedFile:function(){return this._rnaModel.get("doc")&&this._rnaModel.get("doc").get("fileProps")},getBlacklistedExtensions:function(){var e=[],t,n,r;if(this._extBlacklist){t=this._extBlacklist.split(","),n=t.length;for(r=0;r<n;++r)e.push(t[r].toLowerCase())}return e},getVariantJsonFromRegistry:function(){return this._rnaModel.get("getVariantJsonFromRegistry")},fetchCustomThemeColorPalette:function(){return this._rnaAPI.fetchProp("themeColorPalette")},isHighContrastEnabled:function(){return this._rnaAPI.get("isHighContrast")}}),t.RNAReaderAPI}),define("app-api/dev/rna-recentfiles-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNARecentFilesAPI=e.Api.extend({initialize:function(){this._recentFilesAPI=this.options._recentFilesAPI,this._servicesAPI=this.options._servicesAPI,delete this.options._recentFilesAPI,delete this.options._servicesAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return e.methodName==="getRecentFileList"?this._recentFilesAPI.fetchProp("recentFileList"):this._servicesAPI.invoke(e.methodName,e.methodArgs)},fetchRecentFileListApi:function(){return this._recentFilesAPI.invoke("fetchRecentFileList")},whitelistRecentFile:function(e){var t=[],n=0;return _.each(e,function(e){t[n++]=e.get("index")+1}),this._recentFilesAPI.invoke("whitelistRecentFile",t)},determineSourceOfRecentFile:function(e,t){return this._recentFilesAPI.invoke("determineSourceOfRecentFile",e,t)}}),t.RNARecentFilesAPI}),define("app-api/dev/rna-sendtrack-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNASendTrackApi=e.Api.extend({initialize:function(){this._stAPI=this.options._stAPI,delete this.options._stAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._stAPI.invoke(e.methodName,e.methodArgs)},getSendTrackAppLauncherWithParcel:function(){return this._stAPI.get("sendTrackAppLauncherWithParcel")},getSendTrackAppLauncherWithModels:function(){var e=this._stAPI.get("sendTrackAppLauncherWithModels");return e?e.models:undefined},getSendTrackAppLauncherWithAssets:function(){return this._stAPI.get("sendTrackAppLauncherWithAssets")},isSendTrackAvailable:function(){return this._stAPI.get("isSendTrackAvailable")},launchSendTrackApp:function(e){return this._stAPI.invoke("launchSendTrackApp",e)},attachToEmail:function(e){return this._stAPI.invoke("attachToEmail",e)},setSendTrackWorkflowInProgress:function(e){return this._stAPI.invoke("sendTrackWorkflowInProgress",e)},launchMailToUrl:function(e){return this._stAPI.invoke("mailToHandle",e)},resolveAddressBookApi:function(){return this._stAPI.invoke("resolveAddressBook")},setNotificationId:function(e){return this._stAPI.invoke("setNotificationId",e)},getOutlookAutoCompleteListAPI:function(){return this._stAPI.invoke("getOutlookAutoCompleteList")},getResolvedEmailAddressesListAPI:function(e){return this._stAPI.invoke("getResolvedEmailAddressesList",e)},launchSendTrackRestrictionsLearnMoreUrl:function(){return this._stAPI.invoke("launchLearnMoreUrl")},isSendTrackRestrictionsEnabled:function(){return this._stAPI.get("IsSendAndTrackRestrictionEnabled")}}),t.RNASendTrackApi}),define("app-api/dev/rna-registry-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNARegistryApi=e.Api.extend({initialize:function(){this._registryAPI=this.options._registryAPI,delete this.options._registryAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._registryAPI.invoke(e.methodName,e.methodArgs)},getRegistryContents:function(e){return this._registryAPI.invoke("getRegistryContents",e)},setRegistryContents:function(e){return this._registryAPI.invoke("setRegistryContents",e)},checkIfRegistryExists:function(e){return this._registryAPI.invoke("checkIfRegistryExists",e)},removeRegistry:function(e){return this._registryAPI.invoke("removeRegistry",e)}}),t.RNARegistryApi}),define("app-api/dev/rna-services-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAServicesAPI=e.Api.extend({initialize:function(){this._servicesAPI=this.options._servicesAPI,delete this.options._servicesAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._servicesAPI.invoke(e.methodName,e.methodArgs)},showServicesProgressWidget:function(e,t,n,r){return this._servicesAPI.invoke("showServicesProgressWidget",e,t,n,r)},addActiveWorkflowNotificationId:function(e,t){return this._servicesAPI.invoke("addWorkflowActiveNotificationId",e,t)},removeActiveWorkflowNotificationId:function(e,t){return this._servicesAPI.invoke("removeWorkflowActiveNotificationId",e,t)},showMarketingContent:function(){return this._servicesAPI.invoke("showMarketingContent")},upgradeToAcrobat:function(){return this._servicesAPI.invoke("upgradeToAcrobat")},handleCloudLinkedApps:function(e){return this._servicesAPI.invoke("handleCloudLinkedApps",e)},launchedEPDFSelectedFiles:function(){return this._servicesAPI.get("epdfLaunchedSelectedFiles").models},launchedCPDFSelectedFiles:function(){return this._servicesAPI.get("cpdfLaunchedSelectedFiles").models},isExportPDFAvailable:function(){return this._servicesAPI.get("exportPDFEnabled")},isCreatePDFAvailable:function(){return this._servicesAPI.get("createPDFEnabled")},isDocumentCloudAvailable:function(){return this._servicesAPI.get("documentCloudEnabled")},isDirtyApi:function(e){return this._servicesAPI.invoke("isDirty",e)},setCanHandleCEFEvent:function(e,t){return this._servicesAPI.invoke("setCanHandleCEFEvent",e,t)},isEnterpriseUser:function(){return this._servicesAPI.get("enterpriseUser")},isPDFServicesEnabled:function(){return this._servicesAPI.get("pdfServicesEnabled")},isEncryptionKeyValid:function(){return this._servicesAPI.get("encryptionKeyValid")},isESignServicesEnabled:function(){return this._servicesAPI.get("esignServicesEnabled")},isSelectionExportExperimentEnabled:function(){return this._servicesAPI.get("isSelectionExperimentEnabled")},isDynamicExportExperimentEnabled:function(){return this._servicesAPI.get("isDynamicExportExperimentEnabled")},isSFSUpsellExperimentEnabled:function(){return this._servicesAPI.get("isSFSUpsellExperimentEnabled")},combineMultipleFilesToSinglePDFApi:function(e){return this._servicesAPI.invoke("combineMultipleFilesToSinglePDF",e)}}),t.RNAServicesAPI}),define("app-api/dev/rna-session-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNASessionAPI=e.Api.extend({initialize:function(){this._sessionAPI=this.options._sessionAPI,delete this.options._sessionAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._sessionAPI.invoke(e.methodName,e.methodArgs)},isSignedInReader:function(){return this._sessionAPI.get("isLoggedIn")},getXApiClientId:function(){return this._sessionAPI.get("x_api_client_id")},logIn:function(t){var n=this.options,r=$.Deferred();return t||(t=!1),this._sessionAPI.invoke("logIn",{silent:t}).then(function(t){var i=(new Date).getTime()/1e3,s=t.expiration_time/1e3-i;n.sessionRNAModel=e.uiModelFactory.create("UiModel"),s>=0&&n.sessionRNAModel.set({primary_token:t.primary_token,expiration_time:s}),r.resolve(n.sessionRNAModel)},function(){r.reject()}),r.promise()}}),t.RNASessionAPI}),define("app-api/dev/rna-services-test-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNAServicesTestAPI=e.Api.extend({initialize:function(){this._servicesTestAPI=this.options._servicesTestAPI,delete this.options._servicesTestAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._servicesTestAPI.invoke(e.methodName,e.methodArgs)}}),t.RNAServicesTestAPI}),define("app-api/dev/rna-digsig-api",["core/ac-core","app-api/dev/ac-app-api","core/apis/api"],function(e,t){return t.RNADigSigAPI=e.Api.extend({initialize:function(){this._digSigAPI=this.options._digSigAPI,delete this.options._digSigAPI,e.Api.prototype.initialize.call(this)},invokeMethod:function(e){return this._digSigAPI.invoke(e.methodName,e.methodArgs)}}),t.RNADigSigAPI}),define("app-api/dev/rna-api",["core/ac-core","files/ac-files","app-api/dev/ac-app-api","app-api/dev/rna-analytics-api","app-api/dev/rna-asset-api","app-api/dev/rna-cefbrowser-api","app-api/dev/rna-connectors-api","app-api/dev/rna-echosign-api","app-api/dev/rna-file-api","app-api/dev/rna-fss-api","app-api/dev/rna-fte-api","app-api/dev/rna-wt-api","app-api/dev/rna-ipm-api","app-api/dev/rna-leftrail-api","app-api/dev/rna-notification-api","app-api/dev/rna-plugins-api","app-api/dev/rna-reader-api","app-api/dev/rna-recentfiles-api","app-api/dev/rna-sendtrack-api","app-api/dev/rna-registry-api","app-api/dev/rna-services-api","app-api/dev/rna-session-api","app-api/dev/rna-services-test-api","app-api/dev/rna-digsig-api","core/apis/api"],function(e,t,n){return n.RNAApi=e.Api.extend({initialize:function(){var t=this.options,r=t.readerContextModel;e.Api.prototype.initialize.call(this),r.done(_.bind(function(e){this._browserCefMgr=t.cefContextModel.get("browserCEFManager"),this.rnaCefBrowserAPI=new n.RNACefBrowserAPI(_.extend(t,{_browserCefMgr:this._browserCefMgr})),this._rnaModel=e.get("rna"),this._rnaAPI=this._rnaModel.get("rnaAPI"),this.rnaReaderAPI=new n.RNAReaderAPI(_.extend(t,{_rnaModel:this._rnaModel,_rnaAPI:this._rnaAPI})),this._analyticsAPI=this._rnaAPI.get("analyticsAPI"),this.rnaAnalyticsAPI=new n.RNAAnalyticsAPI(_.extend(t,{_analyticsAPI:this._analyticsAPI})),this._assetAPI=this._rnaAPI.get("bhClientAPI"),this.rnaAssetAPI=new n.RNAAssetAPI(_.extend(t,{_assetAPI:this._assetAPI})),this._connectorsAPI=this._rnaModel.get("connectorsAPI"),this.rnaConnectorsAPI=new n.RNAConnectorsAPI(_.extend(t,{_connectorsAPI:this._connectorsAPI})),this._esAPI=this._rnaAPI.get("esAPI"),this.esApi=new n.RNAEchoSignApi(_.extend(t,{_esAPI:this._esAPI})),this._fileAPI=this._rnaAPI.get("fileAPI"),this.rnaFileAPI=new n.RNAFileAPI(_.extend(t,{_fileAPI:this._fileAPI})),this._fssAPI=this._rnaAPI.get("fillSignSendAPI"),this.rnaFssAPI=new n.RNAFssAPI(_.extend(t,{_fssAPI:this._fssAPI})),this._fteAPI=this._rnaAPI.get("firstTimeExAPI"),this.rnaFteAPI=new n.RNAFteAPI(_.extend(t,{_fteAPI:this._fteAPI})),this._wtAPI=this._rnaAPI.get("walkthroughAPI"),this.rnaWtAPI=new n.RNAWtAPI(_.extend(t,{_wtAPI:this._wtAPI})),this._ipmAPI=this._rnaModel.get("ipmManager"),this.rnaIpmAPI=new n.RNAIpmAPI(_.extend(t,{_ipmAPI:this._ipmAPI})),this._leftRailAPI=this._rnaAPI.get("leftRailAPI"),this.rnaLeftRailAPI=new n.RNALeftRailAPI(_.extend(t,{_leftRailAPI:this._leftRailAPI})),this._notificationAPI=this._rnaAPI.get("notificationAPI"),this.notificationAPI=new n.RNANotificationApi(_.extend(t,{_notificationAPI:this._notificationAPI})),this._pluginsAPI=this._rnaAPI.get("pluginsAPI"),this.rnaPluginsAPI=new n.RNAPluginsAPI(_.extend(t,{_pluginsAPI:this._pluginsAPI})),this._servicesAPI=this._rnaAPI.get("servicesAPI"),this.rnaServicesAPI=new n.RNAServicesAPI(_.extend(t,{_servicesAPI:this._servicesAPI})),this._recentFilesAPI=this._rnaAPI.get("recentFilesAPI"),this.rnaRecentFilesAPI=new n.RNARecentFilesAPI(_.extend(t,{_recentFilesAPI:this._recentFilesAPI,_servicesAPI:this._servicesAPI})),this._sessionAPI=this._rnaAPI.get("sessionAPI"),this.rnaSessionAPI=new n.RNASessionAPI(_.extend(t,{_sessionAPI:this._sessionAPI})),this._stAPI=this._rnaAPI.get("stAPI"),this.stApi=new n.RNASendTrackApi(_.extend(t,{_stAPI:this._stAPI})),this._registryAPI=this._rnaAPI.get("registryAPI"),this.registryAPI=new n.RNARegistryApi(_.extend(t,{_registryAPI:this._registryAPI})),this._servicesTestAPI=this._rnaAPI.get("servicesTestAPI"),this.rnaServicesTestAPI=new n.RNAServicesTestAPI(_.extend(t,{_servicesTestAPI:this._servicesTestAPI})),this._digSigAPI=this._rnaAPI.get("digsigCEFUIAPI"),this.rnaDigSigAPI=new n.RNADigSigAPI(_.extend(t,{_digSigAPI:this._digSigAPI}))},this))},invokeMethod:function(e){return this.rnaReaderAPI.invokeMethod(e)},executeAction:function(e,t){return this.rnaReaderAPI.executeAction(e,t)},openDecoratedUrl:function(e){return this.rnaReaderAPI.openDecoratedUrl(e)},isRunningInBrowser:function(){return this.rnaReaderAPI.isRunningInBrowser()},isFeatRunning:function(){return this.rnaReaderAPI.isFeatRunning()},isASTestAllowInstantiation:function(){return this.rnaReaderAPI.isASTestAllowInstantiation()},isHighContrastEnabled:function(){return this.rnaReaderAPI.isHighContrastEnabled()},getProductName:function(){return this.rnaReaderAPI.getProductName()},isDebug:function(){return this.rnaReaderAPI.isDebug()},getOpenedFile:function(){return this.rnaReaderAPI.getOpenedFile()},getBlacklistedExtensions:function(){return this.rnaReaderAPI.getBlacklistedExtensions()},getVariantJsonFromRegistry:function(){return this.rnaReaderAPI.getVariantJsonFromRegistry()},analyticsAPI:function(e){return this.rnaAnalyticsAPI.invokeMethod(e)},getVariantNumber:function(e){return this.rnaCefBrowserAPI.getVariantNumber()},assetApi:function(e){return this.rnaAssetAPI.invokeMethod(e)},cefBrowserApi:function(e){return this.rnaCefBrowserAPI.invokeMethod(e)},cefApi:function(e){return this.rnaCefBrowserAPI.invokeCEFMethod(e)},connectorsAPI:function(e){return this.rnaConnectorsAPI.invokeMethod(e)},addConnectorAccount:function(e,t,n){return this.rnaConnectorsAPI.addConnectorAccount(e,t,n)},removeConnectorAccount:function(e,t){return this.rnaConnectorsAPI.removeConnectorAccount(e,t)},getConnectorsUIHelperData:function(e,t){return this.rnaConnectorsAPI.getConnectorsUIHelperData(e,t)},getSystemFoldersData:function(e,t){return this.rnaConnectorsAPI.getSystemFoldersData(e,t)},echoSignApi:function(e){return this.esAPI.invokeMethod(e)},fileApi:function(e){return this.rnaFileAPI.invokeMethod(e)},selectAndOpenFile:function(e){return this.rnaFileAPI.selectAndOpenFile(e)},selectFiles:function(e){return this.rnaFileAPI.selectFiles(e)},openPlatformDialog:function(e){return this.rnaFileAPI.openPlatformDialog(e)},getFileSaveAsLocation:function(e){return this.rnaFileAPI.getFileSaveAsLocation(e)},fssApi:function(e){return this.rnaFssAPI.invokeMethod(e)},ipmApi:function(e){return this.rnaIpmAPI.invokeMethod(e)},getIPMMessage:function(e){return this.rnaIpmAPI.getIPMMessage(e)},getTrackingParam:function(e){return this.rnaIpmAPI.getTrackingParam(e)},selectLeftRailItem:function(e,t,n){return this.rnaLeftRailAPI.selectLeftRailItem(e,t,n)},selectConnectorLeftRailItem:function(e,t){return this.rnaLeftRailAPI.selectConnectorLeftRailItem(e,t)},disableLeftRailSelection:function(e){return this.rnaLeftRailAPI.disableLeftRailSelection(e)},isAddAccountVisibleInFileSelDlg:function(){return this.rnaLeftRailAPI.isAddAccountVisibleInFileSelDlg()},pluginsApi:function(e){return this.rnaPluginsAPI.invokeMethod(e)},recentFilesAPI:function(e){return this.rnaRecentFilesAPI.invokeMethod(e)},whitelistRecentFile:function(e){return this.rnaRecentFilesAPI.whitelistRecentFile(e)},determineSourceOfRecentFile:function(e,t){return this.rnaRecentFilesAPI.determineSourceOfRecentFile(e,t)},sendTrackApi:function(e){return this.stApi.invokeMethod(e)},rnaRegistryAPI:function(e){return this.registryAPI.invokeMethod(e)},servicesApi:function(e){return this.rnaServicesAPI.invokeMethod(e)},sessionApi:function(e){return this.rnaSessionAPI.invokeMethod(e)},isSignedInReader:function(){return this.rnaSessionAPI.isSignedInReader()},getXApiClientId:function(){return this.rnaSessionAPI.getXApiClientId()},logIn:function(e){return this.rnaSessionAPI.logIn(e)},servicesTestApi:function(e){return this.rnaServicesTestAPI.invokeMethod(e)},logAnayticsCustomOpenSave:function(e){var t=(new Date).getTime();if(!_.isUndefined(t)){var n={name:e,loadtime:t.toString()};this.rnaServicesTestAPI.invokeMethod({methodName:"logCustomEventAPI",methodArgs:n})}},logPerformanceEvent:function(e){var t=e;this.rnaServicesTestAPI.invokeMethod({methodName:"logPerformanceEventAPI",methodArgs:t})},IsViewerInTestMode:function(){return this.rnaServicesTestAPI.invokeMethod({methodName:"IsViewerInTestMode"})},sendSignatureToDirectInk:function(e,t){var n={event:e,info:t};this.rnaServicesTestAPI.invokeMethod({methodName:"directInkEvent",methodArgs:n})}}),n.RNAApi}),define("app/dev/nls/ui-strings",{root:!0,"ar-ae":!0,"bg-bg":!0,"ca-es":!0,"cs-cz":!0,"da-dk":!0,"de-de":!0,"en-ae":!0,"en-gb":!0,"en-il":!0,"es-es":!0,"eu-es":!0,"fi-fi":!0,"fr-fr":!0,"fr-ma":!0,"he-il":!0,"hr-hr":!0,"hu-hu":!0,"it-it":!0,"ja-jp":!0,"ko-kr":!0,"nb-no":!0,"nl-nl":!0,"pl-pl":!0,"pt-br":!0,"ro-ro":!0,"ru-ru":!0,"sk-sk":!0,"sl-si":!0,"sl-sl":!0,"sv-se":!0,"tr-tr":!0,"uk-ua":!0,"zh-cn":!0,"zh-tw":!0}),define("app/dev/nls/root/ui-strings",{COPYRIGHT:"©2012-2015 Adobe Systems Incorporated, All Rights Reserved.",HELP:"Help",PRIVACY:"Privacy",TERMS:"Terms",COOKIES:"Cookies",PRIVACY_POLICY:"Privacy Policy & Cookies",TERMS_OF_USE:"Terms of Use",WELCOME_MSG:"Use Adobe Document Services and access your files from any device",LOAD_FAILURES:"Load Failures",MODULES_NOT_LOADED:"The following modules failed to load:<br/><br/><%= modules %>",SIGN_IN:"Sign In",CREATE_ACCOUNT:"Create Account",FORGOT_PASSWORD:"Trouble Signing In?",EMAIL_VERIFICATION:"Email Verification",PDF_SERVICES:"  /  PDF services",ACCOUNT:"Account",LINK_CREATIVE_CLOUD_ACCOUNT:"Link Creative Cloud Account...",LINK_DROPBOX_ACCOUNT:"Link Dropbox Account...",MANAGE_SUB:"My Plan...",USER_ACCOUNT:"User Account...",ASK_US_A_QUESTION:"Ask Us a Question...",SUPPORT:"Support...",CHAT_WITH_US:"Chat With Us...",ABOUT_APP:"About Document Cloud...",SIGN_OUT:"Sign Out",SHOW_PROGRESS:"Show Progress",PROGRESS_COMPLETE:"Progress Complete",REMOVE_HISTORY:"Remove History",OPERATION_IN_PROGRESS_DLG_TITLE:"Operation in Progress",OPERATION_IN_PROGRESS_DLG_MSG:"There is currently an operation in process. Continuing will cancel that operation. Would you like to continue?",QUOTA_LEGEND:"<%= using %> of <%= allotment %>",STORAGE_EXCEEDED_LEARN_MORE:"Storage Exceeded (<a class='quota-display-learn-more'>Learn more</a>)",ABOUT_DLG_TITLE:"About Document Cloud",ABOUT_DLG_COPYRIGHT_PARA:"Copyright © 2012-2015 Adobe Systems Incorporated and its licensors. All Rights Reserved.",ABOUT_DLG_TRADEMARK_PARA:"Adobe, the Adobe logo, and Acrobat are either registered trademarks or trademarks of Adobe Systems Incorporated in the United States and/or other countries. All other trademarks are the property of their respective owners.",ABOUT_DLG_PORTIONS_PARA:"Portions utilize:",ABOUT_DLG_MICROSOFT_PARA:"Microsoft Windows Media Technologies. Copyright © 1999-2002, 2006 Microsoft Corporation. All Rights Reserved.",ABOUT_DLG_IRIS_PARA:"OCR technology by Image Recognition Integrated Systems S.A. Copyright © 1987 - 2012, I.R.I.S. S.A. All rights reserved.",ABOUT_DLG_SOLID_PARA:"Copyright © 2003-2011 Solid Documents, LLC",ABOUT_DLG_THIRD_PARTY_PARA:"Third Party notices, terms and conditions pertaining to third party software can be found at <%= thirdPartyLink %> and are incorporated by reference herein.",ABOUT_DLG_BUILD_NUMBER:"Build: <%= buildNum %>",NO_CONNECTION_TITLE:"No Internet Connection",NO_CONNECTION_MSG:"The features in this area require Internet connectivity. Please connect your computer to the Internet and try again.",NETWORK_FAILURE:"Network Connection Failure",NETWORK_DISCONNECTED:"It appears that there is no network connection. Reader might not be fully functional in the absence of a network connection"}),define("core/dev/utils/router-util",["core/ac-core"],function(e){return e.RouterUtil={parseQueryParams:function(e){return function(e){var t={},n,r;if(e!=="")for(n=0;n<e.length;n+=1)r=e[n].split("="),r.length===2&&(t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," ")));return t}(e.substr(1).split("&"))},hasQueryParam:function(e,t){var n=this.parseQueryParams(window.location.search),r;return r=_.has(n,e),r&&t&&(r=n[e]===t),r}},e.RouterUtil}),define("app-api/dev/router-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","i18n!core/nls/ui-strings","i18n!app/nls/ui-strings","core/utils/router-util","core/apis/api"],function(e,t,n,r,i,s){return n.RouterApi=e.Api.extend({initialize:function(){e.Api.prototype.initialize.call(this),this._historyChangeCallbacks=[],this._addUiModelEventListeners()},navigate:function(e,n){this.isCurrentPath(e)||this.options.appApi.previewApi.navigatedToPath(e);if(this.options.isNavigateEnabled)return t.router.navigate(e,n)},route:function(e,n,r){return t.router.route(e,n,r)},enableNavigate:function(e){this.options.isNavigateEnabled=e},addHistoryChangeCallback:function(e){var t=this._historyChangeCallbacks,n=_.indexOf(t,e);n<0&&t.push(e)},removeHistoryChangeCallback:function(e){var t=this._historyChangeCallbacks,n=_.indexOf(t,e);n>=0&&t.splice(n,1)},reloadPage:function(e){function a(){LOG.info("Reloading page: "+(u||"Unknown reason"),{logServer:!0}),o?window.location=t.origin:t.reload()}var t=window.location,n=this.options.appApi,s=n.dialogApi,o,u;e&&(o=e.noDeepLink,u=e.reason);if(n.statusMenuApi.isNetStatusBusy())return s.displayTextAlert(s.SEVERITY_WARNING,i.OPERATION_IN_PROGRESS_DLG_TITLE,i.OPERATION_IN_PROGRESS_DLG_MSG,r.DELETE,r.CANCEL).then(function(){a()});a()},getCurrentPath:function(){return Backbone.History.started?Backbone.history.getFragment():""},isCurrentPath:function(e){return this.getCurrentPath()===e},pathStartsWith:function(e,t){return e.indexOf(t)===0},currentPathStartsWith:function(e){return this.getCurrentPath().indexOf(e)===0},hasPushState:function(){var e=window.history;return!!e&&!!e.pushState},parseQueryParams:function(e){return s.parseQueryParams(e)},getQueryParams:function(){var e=this._queryParams;if(!e||_.isEmpty(e))e=this._queryParams=this.parseQueryParams(window.location.search);return e},clearQueryParams:function(){this._queryParams=undefined},hasQueryParam:function(e,t){var n=this.getQueryParams(),r;return r=_.has(n,e),r&&t&&(r=n[e]===t),r},pruneSearchField:function(e){var t=_.omit(this.getQueryParams(),e),n="";return _.each(t,function(e,t){n.length===0?n="?":n+="&",n+=t+"="+e}),n},getPathname:function(){return this._pathname||(this._pathname=window.location.pathname),this._pathname},getHash:function(){return _.has(this,"_hash")||(this._hash=window.location.hash),this._hash},getHashParams:function(){return this.parseQueryParams(this._hash||"")},removeSusiHashParams:function(){var e,t,n=window.location,r,i=window.history,s=document.body;this.hasPushState()?i.replaceState("",document.title,n.pathname+this.pruneSearchField(["clt","code","state"])):(e=s.scrollTop,t=s.scrollLeft,r=this._hash,r.indexOf("&")>0&&(r=r.split("&")[0],r.indexOf("=")>0&&(r="")),n.hash=r,s.scrollTop=e,s.scrollLeft=t)},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.fullOverlayUiModel,"change:show_overlay",this._onShowOverlayChange).listenTo(t.router,"route",this._onRouteChange)},_onShowOverlayChange:function(e,n){!n&&!this.options.isNavigateEnabled&&(this.enableNavigate(!0),t.opFactory.create("SelectingToolOp",this.options).run())},_onRouteChange:function(e,t){this.options.appApi.previewApi.navigatedToPath(this.getCurrentPath()),_.each(this._historyChangeCallbacks,function(n){n(e,t)})}}),n.RouterApi}),define("core/dev/templates/filter-description-template",[],function(){return"<%= filterDescription %> (<% for (var index = 0; index < filterExtensions.length; index += 1) { if (index > 0) { %>, <% } %>*.<%= filterExtensions[index] %><% } %>)"}),define("app-api/dev/saveas-api",["core/ac-core","app-api/dev/ac-app-api","core/templates/filter-description-template","core/apis/api"],function(e,t,n){return t.SaveAsApi=e.Api.extend({setCanSave:function(e){this.options.saveAsUiModel.set("canSave",e)},getCanSave:function(){return this.options.saveAsUiModel.get("canSave")},setFilename:function(e){this.options.saveAsUiModel.set("filename",e)},getFilename:function(){return this.options.saveAsUiModel.get("filename")},setCurrentFolderId:function(e){this.options.saveAsUiModel.set("currentFolderId",e)},getCurrentFolderId:function(){return this.options.saveAsUiModel.get("currentFolderId")},setReplaceFileId:function(e){this.options.saveAsUiModel.set("replaceFileId",e)},getReplaceFileId:function(){return this.options.saveAsUiModel.get("replaceFileId")},setReplaceFileObj:function(e){this.options.saveAsUiModel.set("replaceFileObj",e)},getReplaceFileObj:function(){return this.options.saveAsUiModel.get("replaceFileObj")},getSourceKey:function(){return this.options.saveAsUiModel.get("sourceKey")},getAccountId:function(){return this.options.saveAsUiModel.get("accountId")},isRunningInFileSaveAs:function(){return this.options.runningInFileSaveAs===!0},getChosenFileFilter:function(){var e=this.options.saveAsUiModel.get("fileFilterList"),t,n,r="",i=[],s;return _.isUndefined(e)||(t=this.options.saveAsUiModel.get("chosenFileFilter"),n=e.at(t),r=n.get("fileFilterDescription"),i=n.get("fileFilterExtensions")),s={fileFilterDescription:r,fileFilterExtensions:i},s},getChosenFilterDescription:function(){var e=this.getChosenFileFilter();return _.template(n,{filterDescription:e.fileFilterDescription,filterExtensions:e.fileFilterExtensions})},getChosenFileExtension:function(){var t=this.getChosenFileFilter(),n=t.fileFilterExtensions,r=this.getFilename(),i,s=e.Util.getExtension(r);return _.isUndefined(s)||(i=_.find(n,function(e){return e.toLowerCase()===s})),_.isUndefined(i)?n[0]:i},setChosenFileFilterAsPerFilename:function(){var t=this.options.saveAsUiModel.get("fileFilterList"),n=undefined,r=0,i=this.getFilename(),s=e.Util.getExtension(i);_.isUndefined(s)||(t.forEach(function(e){var t=e.get("fileFilterExtensions");t.forEach(function(e){e.toLowerCase()===s&&(n=r)}),r+=1}),_.isUndefined(n)||this.options.saveAsUiModel.set("chosenFileFilter",n))},shouldShowExportOptions:function(){return this.options.saveAsUiModel.get("showExportOptions")},isSettingsButtonVisible:function(){var e=this.options.saveAsUiModel.get("allowSettingsButton"),t=$.Deferred();return e?(this._getFileSelectDataAPI().done(_.bind(function(){var e=this.getChosenFileFilter();this.fsData.invoke("isSettingsButtonVisible",e).done(function(e){t.resolve(e)})},this)),t):(t.resolve(!1),t)},settingsButtonExecute:function(){var e=$.Deferred();return this._getFileSelectDataAPI().done(_.bind(function(){var t=this.getChosenFileFilter();this.fsData.invoke("settingsButtonExecute",t).done(function(){e.resolve()})},this)),e},isViewResultVisible:function(){var e=this.options.saveAsUiModel.get("allowViewResult"),t,n=$.Deferred();return e?(t=this.options.appApi.pluginsApi.getSelectedPluginId("file_selection_dlg"),t!=="my_computer_select"?(n.resolve(!1),n):(this._getFileSelectDataAPI().done(_.bind(function(){var e=this.getChosenFileFilter();this.fsData.invoke("isViewResultVisible",e).done(function(e){n.resolve(e)})},this)),n)):(n.resolve(!1),n)},isViewResultChecked:function(){var e=$.Deferred(),t=this.getChosenFileFilter();return this.viewResultStates===undefined&&(this.viewResultStates={}),this.viewResultStates[t.fileFilterDescription]===undefined?this._getFileSelectDataAPI().done(_.bind(function(){this.fsData.invoke("getViewResultInitialState",t).done(function(t){e.resolve(t)})},this)):e.resolve(this.viewResultStates[t.fileFilterDescription]),e},setViewResultChecked:function(e){this.viewResultStates===undefined&&(this.viewResultStates={}),this.viewResultStates[this.getChosenFileFilter().fileFilterDescription]=e},clearNonSharedSaveAsAttributes:function(){this.setReplaceFileId(""),this.setReplaceFileObj(undefined),this.setCurrentFolderId(""),this.setCurrentFolderProxy(undefined)},setRestrictEditing:function(e){this.options.saveAsUiModel.set("restrictEditing",e)},isRestrictEditingEnabled:function(){return this.options.saveAsUiModel.get("restrictEditingEnabled")},isRestrictEditingVisible:function(){return this.options.saveAsUiModel.get("restrictEditingVisible")},isRestrictEditingSelected:function(){return this.options.saveAsUiModel.get("restrictEditing")},setCurrentFolderProxy:function(e){return this.options.saveAsUiModel.set("currentFolderProxy",e)},getCurrentFolderProxy:function(){return this.options.saveAsUiModel.get("currentFolderProxy")},setReduceFileSize:function(e){this.options.saveAsUiModel.set("reduceFileSize",e)},isReduceFileSizeEnabled:function(){return this.options.saveAsUiModel.get("reduceFileSizeEnabled")},isReduceFileSizeVisible:function(){return this.options.saveAsUiModel.get("reduceFileSizeVisible")},isReduceFileSizeSelected:function(){return this.options.saveAsUiModel.get("reduceFileSize")},shouldDisplaySaveAsOptions:function(){return this.isRunningInFileSaveAs()&&(this.isReduceFileSizeVisible()||this.isRestrictEditingVisible())},setError:function(e){this.options.saveAsUiModel.set("error",e)},clearError:function(){this.options.saveAsUiModel.set("error",undefined,{silent:!0})},addSaveAsErrorCallback:function(e){this.listenTo(this.options.saveAsUiModel,"change:error",e)},removeSaveAsErrorCallback:function(e){this.stopListening(this.options.saveAsUiModel,"change:error",e)},_getFileSelectDataAPI:function(){var e=$.Deferred();return this.fsData?e.resolve():this.options.readerContextModel.done(_.bind(function(t){var n=t.get("rna");this.fsData=n.get("viewData").get("fileSelectData"),e.resolve()},this)),e}}),t.SaveAsApi}),define("app-api/dev/selection-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/utils/sc-analytics","core/utils/util","core/apis/api"],function(e,t,n,r,i){return n.SelectionApi=e.Api.extend({selectFiles:function(e,n){var s=this.options,o,u,a;return s.selectFilesPromise?s.selectFilesPromise:(n&&(o=n.dialog,u=n.plugin,o&&o.singleFileSelection&&(u||(u={}),u.singleFileSelection=!0)),a=s.appApi.pluginsApi,i.isCEF()&&s.runningInFileSelection&&u&&u.pluginScContext?s.scContext=[r.TOOLS,u.pluginScContext,r.CHOOSE_FILES_DLG]:a.getPluginApi(e)&&(s.scContext=[r.TOOLS,a.callPluginMethod(e,"getSiteCatalystName",undefined,r.UNKNOWN,!0),r.CHOOSE_FILES_DLG]),s.selectFilesPromise=t.opFactory.create("ShowingFileSelectionDlgOp",_.extend({},s,o,{parentView:t.viewMgr})).run(u).always(function(){s.selectFilesPromise=undefined}),s.selectFilesPromise)},isSelectingFiles:function(){return!_.isUndefined(this.options.selectFilesPromise)},setSelectedItemModels:function(e){this.options.selectionUiModel.set("selected_item_models",e)},setSelectedLocalFiles:function(e){this.options.selectionUiModel.set("selected_local_files",e)},getSelectedItemModels:function(){return this.options.selectionUiModel.get("selected_item_models")},clearSelection:function(e){return this.options.selectionUiModel.clearSelection(e)},addSelectedItemsModelsChangeCallback:function(e){this.options.selectionUiModel.on("change:selected_item_models",e)},removeSelectedItemsModelsChangeCallback:function(e){this.options.selectionUiModel.off("change:selected_item_models",e)},isRunningInFileSelection:function(){return this.options.runningInFileSelection===!0},isRunningInFull:function(){return this.options.runningInFull===!0},triggerPluginSelectorClick:function(e,n){var r,i;r=_.extend({},n,{pluginId:e}),i=t.viewMgr.getContentPageView(this.options).getChildViewById("_homeViewsView"),i&&i._triggerViewEvent(t.ViewEvents.FILE_SELECTION_DLG_SELECTOR_CLICK,r)}}),n.SelectionApi}),define("app-api/dev/session-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/utils/util","core/apis/api"],function(e,t,n,r){return n.SessionApi=e.Api.extend({isSignedIn:function(){return this.options.signInUiModel.get("is_signed_in")},isSignedInReader:function(){var e=!1;return this.options.appApi.rnaApi.then(function(t){t.isSignedInReader()&&(e=!0)}),e||(e=this.isSignedIn()),e},signOut:function(){var e=this.options,n=e.appApi;return r.isCEF()?n.rnaApi.then(function(e){return e.sessionApi({methodName:"logOut"}).then(function(){n.sessionApi.signedOut(!0)})}):t.opFactory.create("SigningOutOp",this.options).run()},signInFromErrorOp:function(){return t.opFactory.create("SigningInFromErrorOp",this.options).run()},signedOut:function(e){var n=this.options;r.isCEF()&&(n.sessionRNAModel=undefined,n.rootModel.id=undefined),n.routingAtContentPagePromise=undefined,t.opFactory.create("Handling401ErrorOp",n).run(e)},ensureSignedIn:function(e){var n=this.options,i=n.appApi,s=!1,o=$.Deferred(),u=!1;return r.isCEF()?i.sessionApi.isSignedIn()?i.pluginsApi.validateRNAPlugin(e).then(function(){return i.rnaApi.done(function(e){e.rnaServicesAPI.isEnterpriseUser()&&(s=!e.rnaServicesAPI.isPDFServicesEnabled(),u=!e.rnaServicesAPI.isEncryptionKeyValid()),s?o.reject({errorString:"NoAccessToPdfServices"}):u?o.reject({errorString:"NoAccessToPdfServices",errorCode:"UserEncrypted"}):o.resolve()}),o.promise()}):t.opFactory.create("RNARoutingAtContentPageOp",n).run(!1,e):this._getResolvedPromise()},addSignedInChangeCallback:function(e){this.options.signInUiModel.on("change:is_signed_in",e)},removeSignedInChangeCallback:function(e){this.options.signInUiModel.off("change:is_signed_in",e)},getPrimaryToken:function(){return this.options.sessionUiModel.get("primary_token")},getRoutingAtContentPagePromise:function(){var e=this.options,n=t.opFactory;return e.routingAtContentPagePromise||(r.isCEF()?e.routingAtContentPagePromise=n.create("RNARoutingAtContentPageOp",e).run(!0):e.routingAtContentPagePromise=n.create("RoutingAtContentPageOp",e).run()),e.routingAtContentPagePromise},setRoutingAtContentPagePromise:function(e){this.options.routingAtContentPagePromise=e}}),n.SessionApi}),define("app-api/dev/settings-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/utils/sc-analytics","core/apis/api"],function(e,t,n,r){return n.SettingsApi=e.Api.extend({showSettings:function(e){var n,i=this.options;return i.settingsPromise?i.settingsPromise:e&&!i.appApi.pluginsApi.getPluginApi(e)?(n="Settings dialog: unrecognized plugin ID: "+e,LOG(n),$.Deferred().reject(n).promise()):(i.scContext=[r.TOP_HEADER,r.USER_ACCOUNT_MENU,r.SETTINGS_DLG],i.settingsPromise=t.opFactory.create("ShowingSettingsDlgOp",_.extend({},i,{parentView:t.viewMgr})).run().always(function(){i.settingsPromise=undefined}),i.settingsPromise)}}),n.SettingsApi}),define("app-api/dev/site-catalyst-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/utils/sc-analytics","core/utils/util","core/apis/api"],function(e,t,n,r,i){var s=100,o=["prop5","prop48","prop49"];return n.SiteCatalystApi=e.Api.extend({DIALOG_COMMIT:r.DIALOG_COMMIT,DIALOG_CANCEL:r.DIALOG_CANCEL,RENDER:r.RENDER,CLICK:r.CLICK,COUNT_FILES:r.COUNT_FILES,CHANGE:r.CHANGE,ANALYTICS_SELECTOR:r.ANALYTICS_SELECTOR,ANALYTICS_CLASS:r.ANALYTICS_CLASS,logScSelectorEvent:function(e,t){var n=this.options.scEventStore.nonUIEvents[e],r,i,s,o;if(!n)return;i=n.pageName,s=n.prop48||"",o=n.prop49||"",t&&t.data&&_.each(t.data,function(e,t){r=new RegExp("<"+t+">","g"),i=i.replace(r,e),s=s.replace(r,e),o=o.replace(r,e)});if(i){if(s||o)t=t||{},t.rawProperties=t.rawProperties||{};s&&(t.rawProperties.prop48=s),o&&(t.rawProperties.prop49=o),this.logScEvent(i.split(":"),t)}else LOG("AcAppApi.SiteCatalystApi.logScSelectorEvent: Invalid selector: "+e)},register:function(e,n){var r=this.options;n.pages||(n={pages:n,variables:{}}),window.AiCAnalytics=this,r.scPageGroups[e]||(t.opFactory.create("RegisterPageNamesOp").run(e,n,r.scHandlers,r.scEventStore,this),r.scPageGroups[e]=n,_.each(r.scListeners,function(t){try{t(e,n)}catch(r){}})),r.scPageGroups.framework||t.opFactory.create("GetFrameworkPagesOp").run().done(_.bind(function(e){this.register("framework",e)},this))},version:4,_addListener:function(e){var t=this.options;_.each(t.scPageGroups,function(t,n){try{e(n,t)}catch(r){}}),t.scListeners.push(e)},addListener:function(e){this._addListener(e)},logScEvent:function(t,n){var s,o,u,a,f,l,c,h=this.options.appApi.connectorsApi,p=this.options.appApi.pluginsApi,d,v=this.options.appApi.selectionApi,m;_.isArray(t)||(t=[t]),n&&(u=n.locale,a=n.appDomain,f=n.accountLevel,l=n.appType,c=n.connector),u||(u=e.Locale.getSiteCatalystLocale()),a||(a=r.APP_DOMAIN),f!==""&&(f=this.options.appApi.usersMeApi.getUserIdentity().sitecatalyst_plan_code),l!==""&&(i.isCEF()?(i.isReader()?l=r.APP_READER:l=r.APP_ACROUNKNOWN,this.options.appApi.rnaApi.done(function(e){var t=e.getProductName();if(t==="rdr")l=r.APP_READER;else if(t==="pro")l=r.APP_ACROPRO;else if(t==="std"||t==="basic")l=r.APP_ACROSTD})):l=this.options.appApi.acrobatApi.isInAcrobat()?r.APP_READER:r.APP_WEB);if(c!==""&&_.indexOf(_.flatten(t),r.FILE_LIST)!==-1){v.isSelectingFiles()?d=p.getPendingPluginId("file_selection_dlg"):d=p.getPendingPluginId("home_views");if(h.isConnectorPlugin(d))c=h.getConnectorPluginScName(d);else if(d==="my_files"||d==="my_files_select")c=r.DOCUMENT_CLOUD}s=a+(l?":"+l:""),f&&(s+=":"+f),c&&_.indexOf(_.flatten(t),r.FILE_LIST)!==-1&&(s+=":"+c),i.isCEF()&&this.options.appApi.rnaApi.done(function(e){e.getTrackingParam().done(function(e){m=e})}),o="",_.each(t,function(e){e?o+=":"+e:_.isUndefined(e)&&LOG("AcAppApi.SiteCatalystApi.logScEvent missing name after "+s+o)});if(i.isCEF()){var g,y,b;b=p.getRNASelectedPluginId(),y=p.getRNAVariant(b),y&&(g=p.getSiteCatalystName(b),o=o.replace(g+":",g+":"+y+":")),o.search(r.UPSELL_STARTED)!==-1&&(this.options.appApi.sessionApi.isSignedInReader()?o+=":"+r.SIGNED_IN:o+=":"+r.SIGNED_OUT)}return(!i.isCEF()||this.options.appApi.sessionApi.isSignedInReader())&&this._sendEvent(u,a,s,o,n,m),i.isCEF()&&this.options.appApi.rnaApi.done(function(e){var t,i,s=o.substr(1);n&&(i=n.featureType,t=n.sectionName),_.isUndefined(t)&&(_.isEmpty(s)?t=r.SC_UNDEFINED:t=s),_.isUndefined(i)&&(_.isEmpty(s)?i=r.SC_UNDEFINED:i=s),t="SC_"+t,s===r.INITIAL_STARTUP&&f&&(t=r.PLAN_TYPE+":"+f,i=t,s=t),e.analyticsAPI({methodName:"logAnalyticsEvent",methodArgs:[t,i,s]})}),this},toggleConsoleLogging:function(){var e=this.options;e.isScConsoleLoggingEnabled=!e.isScConsoleLoggingEnabled,LOG("AcAppApi.SiteCatalystApi.toggleConsoleLogging "+(e.isScConsoleLoggingEnabled?"on":"off"))},_sendEvent:function(e,t,n,r,i,u){var a=document.location,f=n+r,l,c,h;if(window.s_adobe){h=s_adobe.s_URL=a.href,h.substring(h.lastIndexOf("/")+1)===""&&(h=s_adobe.s_URL=h+"index.html"),s_adobe.s_URLSplit=h.split("/"),s_adobe.prop3=t,s_adobe.prop4=e,s_adobe.prop5=e+":"+f,s_adobe.prop48=undefined,s_adobe.prop49=undefined,i&&(l=i.featureType,l&&(s_adobe.prop48=n+":"+l),c=i.sectionName,c&&(s_adobe.prop49=n+":"+c)),u&&(s_adobe.eVar43=u),s_adobe.channel="Acrobat.com",s_adobe.pageName=f,i&&i.rawProperties&&_.each(i.rawProperties,function(e,t){s_adobe[t]=e}),_.each(o,function(e){var t=s_adobe[e],n=s,r;t&&(r=t.length-n,r>0&&LOG("AcAppApi.SiteCatalystApi.logScEvent WARNING 's_adobe."+e+"' ("+t+") exceeds limit of "+n+" characters by "+r))});try{s_adobe.t()}catch(p){LOG.warn("AcAppApi.SiteCatalystApi._sendEvent: "+(p.stack||p.message))}this.options.isScConsoleLoggingEnabled&&LOG("AcAppApi.SiteCatalystApi._sendEvent "+f),delete s_adobe.campaign}}}),n.SiteCatalystApi}),define("app/dev/models/ui/status-menu-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.StatusMenuUiModel=e.UiModel.extend({recognized:{show_menu:{type:"boolean",optional:!1},is_menu_shown:{type:"boolean",optional:!1},scroll_to_id:{type:"string",optional:!0},status_by_id:{type:"object",optional:!1},menu_item_by_id:{type:"object",optional:!1},show_deferred_by_id:{type:"object",optional:!1},menu_item_shown:{type:"object",optional:!1},menu_item_shown_delay:{type:"number",optional:!1},max_height_frac:{type:"number",optional:!1},inactivity_timeout:{type:"number",optional:!1},tooltips:{type:"object",optional:!1},active_tooltip_id:{type:"string",optional:!0},mouse_leave_timeout:{type:"number",optional:!1},mouse_leave_timer:{type:"number",optional:!0},is_displayed:{type:"boolean",optional:!0},net_status:{type:"string",optional:!1}},defaults:{show_menu:!1,is_menu_shown:!1,status_by_id:{},menu_item_by_id:{},show_deferred_by_id:{},menu_item_shown:{},menu_item_shown_delay:250,max_height_frac:.8,inactivity_timeout:5e3,tooltips:{},mouse_leave_timeout:400,is_displayed:!1,net_status:"idle"},setStatus:function(e,t){var n=this.get("status_by_id"),r=n[e];return t!==r&&(n[e]=t,this.trigger("change:status_by_id",this,e,t)),this.updateNetStatus(),this},removeStatus:function(e){var t=this.get("status_by_id");return t[e]&&(delete t[e],this.trigger("change:status_by_id",this,e)),this.updateNetStatus(),this},updateNetStatus:function(){var e="idle";this.getClientWithStatus("busy")?e="busy":this.getClientWithStatus("warning")?e="warning":this.getClientWithStatus("complete")&&(e="complete"),this.set("net_status",e)},getNetStatus:function(){return this.get("net_status")},hasCompletedItem:function(){var e=this.get("menu_item_shown"),t;return t=_.find(this.get("status_by_id"),function(t,n){return(t==="complete"||t==="warning")&&e[n]}),!_.isUndefined(t)},getClientWithStatus:function(e){var t;return _.each(this.get("status_by_id"),function(n,r){if(e===n)return t=r,!1}),t},statusMenuIsDisplayed:function(){this.updateMenuDisplay(),this.set("is_menu_shown",!0)},updateMenuDisplay:function(){var e=this.get("show_deferred_by_id"),t=this.get("menu_item_by_id"),n,r=this.get("menu_item_shown");_.each(e,function(e,i){n=t[i],r[i]&&n.show(),e.resolve(n)})},statusMenuIsClosed:function(){this.set({show_deferred_by_id:{},is_menu_shown:!1})},showMenuItem:function(e){var t=this.get("show_deferred_by_id"),n;return this.get("menu_item_shown")[e]=!0,this.trigger("change:menu_item_shown"),n=t[e],n||(n=t[e]=$.Deferred()),this.updateMenuDisplay(),n.promise()},hideMenuItem:function(e){return this.get("menu_item_shown")[e]=!1,this.trigger("change:menu_item_shown"),this},isOneMenuItemShown:function(){return!_.isUndefined(_.find(this.get("menu_item_shown"),function(e){return e}))},getNumShownItems:function(){var e=this.get("status_by_id");return _.reduce(this.get("menu_item_shown"),function(t,n,r){return e[r]!=="idle"?t+1:t},0)},enableTooltip:function(e,t,n){this.get("tooltips")[n]={element:e,html:t},this.trigger("change:tooltips")},disableTooltip:function(e){var t=this.get("tooltips")[e];t&&(delete this.get("tooltips")[e],this.trigger("change:tooltips"))},getActiveTooltipProperty:function(e){var t=this.get("tooltips"),n,r=this.get("active_tooltip_id");if(r){n=t[r];if(n)return n[e];LOG(0,"AcApp.StatusMenuUiModel.getActiveTooltipProperty: No "+e+" for id '"+r)}return""},getActiveTooltipElement:function(){return this.getActiveTooltipProperty("element")},getActiveTooltipHtml:function(){return this.getActiveTooltipProperty("html")}},{STATUS_IDLE:"idle",STATUS_BUSY:"busy",STATUS_COMPLETE:"complete",STATUS_WARNING:"warning"})}),define("app-api/dev/status-menu-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/apis/api","app/models/ui/status-menu-ui-model"],function(e,t,n){return n.StatusMenuApi=e.Api.extend({STATUS_IDLE:t.StatusMenuUiModel.STATUS_IDLE,STATUS_BUSY:t.StatusMenuUiModel.STATUS_BUSY,STATUS_COMPLETE:t.StatusMenuUiModel.STATUS_COMPLETE,STATUS_WARNING:t.StatusMenuUiModel.STATUS_WARNING,initialize:function(){e.Api.prototype.initialize.call(this),this._statusChangeCallbacks={},this._statusShowMenuCallbacks=[],this.options.statusMenuUiModel.on("change:status_by_id",this._onStatusByIdChange).on("change:is_menu_shown",this._onIsMenuShownChange)},showMenu:function(e){return this.options.statusMenuUiModel.set("show_menu",e),this},isMenuShown:function(){return this.options.statusMenuUiModel.get("show_menu")},addShowMenuCallback:function(e){var t=this._statusShowMenuCallbacks;_.indexOf(t,e)<0&&t.push(e)},removeShowMenuCallback:function(e){var t=this._statusShowMenuCallbacks,n;n=_.indexOf(t,e),n>=0&&t.splice(n,1)},setStatus:function(e,t){var n=this.options.statusMenuUiModel,r,i,s=this.STATUS_IDLE;return _.isString(t)?r=t:t?(r=t.status||s,i=t.scrollToId):r=s,n.setStatus(e,r),r===this.STATUS_BUSY&&_.isUndefined(i)&&(i=e),i&&n.set({scroll_to_id:i}),this},getStatus:function(e){return this.options.statusMenuUiModel.get("status_by_id")[e]},getNetStatus:function(){return this.options.statusMenuUiModel.getNetStatus()},isNetStatusBusy:function(){return this.options.appApi.statusMenuApi.getNetStatus()===this.STATUS_BUSY},removeStatus:function(e){return this.options.statusMenuUiModel.removeStatus(e),this},addStatusChangeCallback:function(e,t){var n=this._statusChangeCallbacks[e];n||(n=this._statusChangeCallbacks[e]=[]),_.indexOf(n,t)<0&&n.push(t)},removeStatusChangeCallback:function(e,t){var n=this._statusChangeCallbacks[e],r;n&&(r=_.indexOf(n,t),r>=0&&n.splice(r,1))},removeScrollTarget:function(){return this.options.statusMenuUiModel.unset("scroll_to_id"),this},showStatusMenuItem:function(e){return this.options.statusMenuUiModel.showMenuItem(e)},hideStatusMenuItem:function(e){return this.options.statusMenuUiModel.hideMenuItem(e),this},enableStatusMenuTooltip:function(e,t,n){var r=$(e);return r.length===0&&LOG("AcAppApi.StatusMenuApi.enableStatusMenuTooltip element with id '"+n+"' is empty"),this.options.statusMenuUiModel.enableTooltip(e,t,n),this},disableStatusMenuTooltip:function(e){return this.options.statusMenuUiModel.disableTooltip(e),this},_onStatusByIdChange:function(e,t,n){_.each(this._statusChangeCallbacks[t],function(e){e(n)})},_onIsMenuShownChange:function(e,t){_.each(this._statusShowMenuCallbacks,function(e){e(t)})}}),n.StatusMenuApi}),define("app-api/dev/users-me-api",["core/ac-core","app/ac-app","app-api/dev/ac-app-api","core/utils/util","core/apis/api"],function(e,t,n,r){var i=["DCGlobal","DCEnterprise","AcrobatPlus","AcrobatStd","PDFPack","ExportPDF","FillAndSign","ESign","SendNow","CreatePDF","FormsCentral","Files"];return n.UsersMeApi=e.Api.extend({SUBSCRIPTION_ACROBATPLUS:"AcrobatPlus",SUBSCRIPTION_ACROBATSTD:"AcrobatStd",SUBSCRIPTION_CREATEPDF:"CreatePDF",SUBSCRIPTION_DCENTERPRISE:"DCEnterprise",SUBSCRIPTION_DCGLOBAL:"DCGlobal",SUBSCRIPTION_ESIGN:"ESign",SUBSCRIPTION_EXPORTPDF:"ExportPDF",SUBSCRIPTION_FILES:"Files",SUBSCRIPTION_FILLANDSIGN:"FillAndSign",SUBSCRIPTION_FORMSCENTRAL:"FormsCentral",SUBSCRIPTION_PDFPACK:"PDFPack",SUBSCRIPTION_SENDNOW:"SendNow",refreshUserInfo:function(){var n=this.options;return $.when(t.opFactory.create("GettingUsersMeOp",n).run(),e.opFactory.create("GettingStorageQuotaOp",n).run())},clearUserInfo:function(){var e=this.options,t={silent:!0};e.usersMeModel.clear(t),e.usersMeIdentityModel.clear(t),e.usersMeSubscriptionsModel.clear(t),e.usersMeLimitsConversionsModel.clear(t),e.usersMePrefsConversionsModel.clear(t),e.usersMeCohortsModel.clear(t),e.storageQuotaModel.clear(t),_.each(e.prefsModels,function(e){e.clear(t)})},getUserIdentity:function(){return this.options.usersMeIdentityModel.attributes},getUserSubscriptions:function(){return this.options.usersMeSubscriptionsModel.attributes},getUserLimitsConversions:function(){return this.options.usersMeLimitsConversionsModel.attributes},getUserLimitsByCategory:function(e){var t=this.options.limitsModels,n;if(t&&e){n=t[e];if(n)return n.attributes}return LOG("AcAppApi.UsersMeApi.getUserLimitsByCategory: Unrecognized limits category: "+e),{}},getUserPrefsConversions:function(){return this.options.usersMePrefsConversionsModel.attributes},getUserPrefsByCategory:function(e){var t=this.options.prefsModels,n;if(t){n=t[e];if(n)return n.attributes}return LOG("AcAppApi.UsersMeApi.getUserPrefsByCategory: Unrecognized preference category: "+e),{}},getCommonUserPrefs:function(){return this.getUserPrefsByCategory("common")},getUserPrefs:function(e,n){return t.opFactory.create("GettingUsersMePrefsOp",this.options).run(e,n)},setUserPrefs:function(e,n){return t.opFactory.create("SettingUsersMePrefsOp",this.options).run(e,n)},saveCommonPrefs:function(){return t.opFactory.create("SavingCommonPrefsOp",this.options).run()},restoreCommonPrefs:function(){return t.opFactory.create("RestoringCommonPrefsOp",this.options).run()},getUserLimits:function(e,n){return t.opFactory.create("GettingUsersMeLimitsOp",this.options).run(e,n)},getUserCohorts:function(){return this.options.usersMeCohortsModel.attributes},isUserInCohort:function(e,t){return r.isCEF()&&e==="bh-home20"&&t==="enabled"?!1:r.isCEF()&&e==="bh-a12"&&t==="enabled"?!0:this.getUserCohorts()[e]===t},getStorageQuota:function(){return this.options.storageQuotaModel.attributes},addUserIdentityChangeCallback:function(e){this._addModelChangeCallback(this.options.usersMeIdentityModel,e)},addUserSubscriptionsChangeCallback:function(e){this._addModelChangeCallback(this.options.usersMeSubscriptionsModel,e)},addUserLimitsConversionsChangeCallback:function(e){this._addModelChangeCallback(this.options.usersMeLimitsConversionsModel,e)},addUserPrefsConversionsChangeCallback:function(e){this._addModelChangeCallback(this.options.usersMePrefsConversionsModel,e)},addUserPrefsChangeCallback:function(e,t){var n=this.options.prefsModels,r;n&&(r=n[e],r&&this._addModelChangeCallback(r,t))},addUserCohortsChangeCallback:function(e){this._addModelChangeCallback(this.options.usersMeCohortsModel,e)},addUserStorageQuotaChangeCallback:function(e){this._addModelChangeCallback(this.options.storageQuotaModel,e)},getSubscription:function(){var e,t,n;return _.each(i,function(r){e=this.getSubscriptionByName(r),e&&(e.subscription_level!=="Free"?t||(t=e):n||(n=e))},this),_.isUndefined(t)?n:t},getSubscriptionName:function(){var e=this.getSubscription();return e?e.subscription_name:undefined},getSubscriptionByName:function(e){var t=this.getUserSubscriptions().subscriptions;return _.find(t,function(t){return t.subscription_name===e})}}),n.UsersMeApi}),define("app-api/dev/window-api",["core/ac-core","app-api/dev/ac-app-api","core/utils/util","core/apis/api"],function(e,t,n){return t.WindowApi=e.Api.extend({initialize:function(){e.Api.prototype.initialize.call(this),this._windowResizeCallbacks=[],this._addUiModelEventListeners()},addWindowResizeCallback:function(e){var t=this._windowResizeCallbacks,n=_.indexOf(t,e);n<0&&t.push(e)},removeWindowResizeCallback:function(e){var t=this._windowResizeCallbacks,n=_.indexOf(t,e);n>=0&&t.splice(n,1)},_addUiModelEventListeners:function(){var e=this.options;e.windowUiModel.on("change:width",this._onWindowResize).on("change:height",this._onWindowResize),n.isCEF()&&(e.actionsUiModel.addCallback("setFontInfo",this._setFontInfo),e.actionsUiModel.addCallback("dpiChangeInfo",this._handleDpiChange))},_onWindowResize:function(){var e=this.options;this._debouncedWindowResizeListener||(this._debouncedWindowResizeListener=_.debounce(_.bind(function(){_.each(this._windowResizeCallbacks,function(e){e()})},this),e.windowUiModel.get("resize_debounce_delay"))),this._debouncedWindowResizeListener()},_handleDpiChange:function(){var e,t;this.$notificationContainer=$(".notification-content-container"),this.$notificationContainer.length&&(e=this.$notificationContainer.width(),t=this.$notificationContainer.outerHeight(!0),this._oldWidth=e,this._oldHeight=t,this.options.appApi.rnaApi.done(function(n){n.cefBrowserApi({methodName:"setContainerSize",parameters:[e,t]})}))},_setFontInfo:function(e,t){var n=t.normal_font,r=t.semi_bold_font,i=t.bold_font,s=t.normal_font_platform,o=t.semi_bold_font_platform,u=t.bold_font_platform,a,f;n&&(f=$("#readerNormalFontFaceId"),f.length||(f=$('<style id="readerNormalFontFaceId"></style>').appendTo("head")),a="@font-face {font-family: adobe-clean;   src: local('"+n+"');}",n!==s&&(a+=" @font-face {font-family: sans-serif;   src: local('"+s+"');}"),f.text(a),this.options.windowUiModel.set({normal_font:n})),r&&(f=$("#readerSemiBoldFontFaceId"),f.length||(f=$('<style id="readerSemiBoldFontFaceId"></style>').appendTo("head")),a="@font-face {font-family: adobe-clean Semibold;   src: local('"+r+"');}",r!==o&&(a+=" @font-face {font-family: sans-serif Semibold;   src: local('"+o+"');}"),f.text(a),this.options.windowUiModel.set({semi_bold_font:r})),i&&(f=$("#readerBoldFontFaceId"),f.length||(f=$('<style id="readerBoldFontFaceId"></style>').appendTo("head")),a="@font-face {font-family: adobe-clean;   font-weight: bold; src: local('"+i+"');}",i!==u&&(a+=" @font-face {font-family: sans-serif;   font-weight: bold; src: local('"+u+"');}"),f.text(a),this.options.windowUiModel.set({bold_font:i}))}}),t.WindowApi}),define("app-api/dev/app-api",["core/ac-core","app-api/dev/ac-app-api","core-unmapped/dev/utils/app-api-mgr","core/utils/date-util","core/utils/http-util","core/utils/util","core/apis/api","app-api/dev/acrobat-api","app-api/dev/base-aic-uris-api","app-api/dev/base-files-uris-api","app-api/dev/base-cloud-uris-api","app-api/dev/connectors-api","app-api/dev/dialog-api","app-api/dev/download-api","app-api/dev/display-api","app-api/dev/folder-api","app-api/dev/error-api","app-api/dev/http-api","app-api/dev/inactivity-api","app-api/dev/focus-api","app-api/dev/key-api","app-api/dev/loader-api","app-api/dev/locale-api","app-api/dev/manipulation-api","app-api/dev/network-api","app-api/dev/network-connectivity-api","app-api/dev/notification-api","app-api/dev/plugins-api","app-api/dev/preview-api","app-api/dev/rna-api","app-api/dev/router-api","app-api/dev/saveas-api","app-api/dev/selection-api","app-api/dev/session-api","app-api/dev/settings-api","app-api/dev/site-catalyst-api","app-api/dev/status-menu-api","app-api/dev/users-me-api","app-api/dev/window-api"],function(e,t,n,r,i,s){return t.AppApi=e.Api.extend({initialize:function(){var n=this.options,r,i=$.Deferred(),o;e.Api.prototype.initialize.call(this),this.acrobatApi=new t.AcrobatApi(n),this.baseAicUrisApi=new t.BaseAicUrisApi(n),this.baseFilesUrisApi=new t.BaseFilesUrisApi(n),this.baseCloudUrisApi=new t.BaseCloudUrisApi(n),this.connectorsApi=new t.ConnectorsApi(n),this.dialogApi=new t.DialogApi(n),this.displayApi=new t.DisplayApi(n),this.downloadApi=new t.DownloadApi(n),this.errorApi=new t.ErrorApi(n),this.focusApi=new t.FocusApi(n),this.folderApi=new t.FolderApi(n),this.httpApi=new t.HttpApi(n),this.inactivityApi=new t.InactivityApi(n),this.keyApi=new t.KeyApi(n),this.loaderApi=new t.LoaderApi(n),this.localeApi=new t.LocaleApi(n),this.manipulationApi=new t.ManipulationApi(n),this.networkApi=new t.NetworkApi(n),this.notificationApi=new t.NotificationApi(n),this.pluginsApi=new t.PluginsApi(n),this.previewApi=new t.PreviewApi(n),this.routerApi=new t.RouterApi(n),this.selectionApi=new t.SelectionApi(n),this.sessionApi=new t.SessionApi(n),this.settingsApi=new t.SettingsApi(n),this.siteCatalystApi=new t.SiteCatalystApi(n),this.statusMenuApi=new t.StatusMenuApi(n),this.usersMeApi=new t.UsersMeApi(n),this.windowApi=new t.WindowApi(n),s.isCEF()&&(o=new t.RNAApi(n),this.rnaApi=i.promise(),this.saveAsApi=new t.SaveAsApi(n),this.networkConnectivityApi=new t.NetworkConnectivityApi(n),n.readerContextModel.then(_.bind(function(){this.rnaApiObj=o,i.resolve(o)},this))),r=this.appApiReady=$.Deferred(),r.promise(this)},getAppApiVersion:function(){return"dev"},createAppApiVersion:function(e){n.addAppApi(e,new Ac.AppApi[e].AppApi(this.options))},appIsReady:function(){var e,t=Ac.Features;this.displayApi.showSpinner(!1),r.logElapsedTime("app-api appIsReady"),this.rnaApi&&this.rnaApi.then(function(n){n.invokeMethod({methodName:"logAPI",methodArgs:logAPI.getSessionInfo()}),n.isDebug()||n.isFeatRunning()&&n.isASTestAllowInstantiation()?(t.setFeature("javascript_console_logging",!0),t.setFeature("elapsed_time_console_logging",!0)):t.setFeature=undefined,e=n.getXApiClientId(),e&&(i.REQUEST_HEADER_CLIENT_ID=e)});try{this.appApiReady.resolve()}catch(n){LOG.warn("AcAppApi.AppApi.appIsReady: "+(n.stack||n.message),{logServer:!0})}}}),t.AppApi}),define("core/dev/constants/cef-constants",{HomeView:0,FileSelectionDlg:1,FileSaveAsDlg:2}),define("core/dev/constants/odm-constants",["core/ac-core"],function(e){return e.ODMConstants={PRIMITIVE_PROXY:1,MAP_PROXY:2,VECTOR_PROXY:3,FUNCTION_PROXY:4,ADD_EVENT:"addProperty",REMOVE_EVENT:"removeProperty",REPLACE_EVENT:"replaceProperty",CHANGE_EVENT:"change"},e.ODMConstants}),define("core/dev/utils/comment-util",["core/ac-core"],function(e){return e.CommentUtil={isCommentingEnabledPreview:function(t){var n=e.Features,r;if(!document.createElement("canvas").getContext)return!1;if(!n.isFeatureEnabled("review_and_commenting"))return!1;if(n.isFeatureEnabled("review_and_commenting_english_only")){r=t.appApi.localeApi.getLocale();if(r!=="en-us")return!1}return!0},isCommentingEnabled:function(t){var n=e.Features,r=t.appApi.usersMeApi,i=r.getUserIdentity(),s,o,u;if(!e.CommentUtil.isCommentingEnabledPreview(t))return!1;if(!i||!i.email)return!1;if(r.getUserCohorts().rh_rollout==="rh_ui_enabled")return!0;if(!n.isFeatureEnabled("review_and_commenting_external_users")){s=i.email,s=s||"",u=s.lastIndexOf("@");if(u===-1||u===s.length-1)return!1;o=s.substring(u+1);if(o.toUpperCase()!=="ADOBE.COM")return!1}return!0}},e.CommentUtil}),define("core/dev/utils/image-loader",["core/ac-core","core/utils/http-util","core/utils/util"],function(e,t,n){var r=6,i=[],s=[];return e.ImageLoader={loadImage:function(e,t,n,r){var i=$.Deferred();return this.enqueueImageRequest(e,t,i,n,r),this.dequeueImageRequest(),i.promise()},suspendPendingRequests:function(){this._isSuspended=!0},resumePendingRequests:function(){var e;this._isSuspended=!1;for(;;){e=this.dequeueImageRequest();if(!e)break}},cancelPendingRequests:function(){i=[],s=[]},enqueueImageRequest:function(e,t,n,r,s){var o={$image:e,url:t,deferred:n,eventData:r,force:s};i.push(o)},dequeueImageRequest:function(){var e;return this._isSuspended||i.length===0||s.length>=r?e:(e=i.shift(),s.push(e),n.isCEF()?this.processRNAImageRequest(e.$image,e.url,e.deferred,e.eventData,e.force):this.processImageRequest(e.$image,e.url,e.deferred,e.eventData,e.force),e)},processImageRequest:function(e,t,n,r,i){var s=function(e){e.off("load").off("error")},o=_.bind(function(e){this.removeActiveImageRequest(e),this.dequeueImageRequest()},this);if(!i&&e.attr("src")){e.data("loaded")?n.resolve(r):n.reject(r),o(e);return}r=r||{},e.off().on("load",r,_.bind(function(){e.css("visibility","inherit"),e.data("loaded",!0),s(e),o(e),n.resolve(r)},this)).on("error",r,_.bind(function(){e.css("visibility","hidden"),e.data("loaded",!1),s(e),o(e),n.reject(r)},this)),e.attr("src",t)},processRNAImageRequest:function(e,n,r,i,s){var o,u,a,f,l,c,h;o=_.bind(function(e){this.removeActiveImageRequest(e),this.dequeueImageRequest()},this),u=function(e){e.off("load").off("error")},a=function(e,t){e.css("visibility","inherit"),e.data("loaded",!0),u(e),o(e),r.resolve(t)},f=function(e,t){e.css("visibility","hidden"),e.data("loaded",!1),u(e),o(e),r.reject(t)};if(!s&&e.attr("src")){e.data("loaded")?r.resolve(i):r.reject(i),o(e);return}i=i||{},l=new XMLHttpRequest,c=t.getRequestHeaders("GET"),l.open("GET",n,!0),l.responseType="blob",l.withCredentials=!0;for(h in c)c.hasOwnProperty(h)&&l.setRequestHeader(h,c[h]);l.onload=function(){var t=this.status;t===200?(n=URL.createObjectURL(this.response),e.off().on("load",i,function(){URL.revokeObjectURL(n),a(e,i)}).on("error",i,function(){URL.revokeObjectURL(n),f(e,i)}),e.attr("src",n)):f(e,i)},l.onerror=function(){f(e,i)},l.send(null)},removeActiveImageRequest:function(e){_.each(s,function(t,n){if(t&&t.$image===e){s.splice(n,1);return}})}},e.ImageLoader}),define("core/dev/utils/string-util",["core/ac-core"],function(e){var t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return e.StringUtil={isUuid:function(e,n){return _.isString(e)?(_.isNumber(n)&&(e=e.substr(n)),e.search(t)===0):!1},isQuoted:function(e){var t,n,r;return!_.isString(e)||!e?!1:(t=e.length,t<=1?!1:(n=e.charCodeAt(0),r=e.charCodeAt(t-1),this.isQuoteCharCode(n)&&n===r))},beginsWithQuote:function(e){return!_.isString(e)||!e?!1:(e=$.trim(e),e.length>0&&this.isQuoteCharCode(e.charCodeAt(0)))},isQuoteCharCode:function(e){return _.isNumber(e)&&(e===34||e===39)},stripQuotes:function(e){return!_.isString(e)||!e?e:(this.isQuoted(e)&&(e=$.trim(e),e=e.substring(1,e.length-1)),e)},parseUrl:function(e){var t=document.createElement("a"),n={},r,i,s;t.href=e,r=t.search.replace(/^\?/,"").split("&");for(s=0;s<r.length;s+=1)i=r[s].split("="),n[i[0]]=i[1];return{protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,searchObject:n,hash:t.hash}},getLimitedUrl:function(e){var t=this.parseUrl(e),n=t.pathname;return e.indexOf("/limited")>0?e:(n.charAt(0)!=="/"&&(n="/"+n),t.protocol+"//"+t.host+"/limited"+n)},getNormalizedString:function(e,t){var n;if(!_.isString(e)||!e)return undefined;if(_.isUndefined(t)||t!=="NFC"&&t!=="NFD"&&t!=="NFKC"&&t!=="NFKD")t="NFC";try{typeof String.prototype.endsWith=="function"&&(n=e.normalize(t))}catch(r){n=undefined}return n}},e.StringUtil}),function(e){typeof define=="function"&&define.amd?define("jquery.cookie",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(arguments.length>1&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("core/dev/utils/cookie-util",["core/ac-core","core/utils/crypto-util","jquery.cookie"],function(e,t){var n;return e.CookieUtil={setCookie:function(e,t){var n;return _.isUndefined($.cookie)?n:($.cookie.raw=!0,n=$.cookie(e,t,this.getCookieOptions()),n)},getCookie:function(e){return _.isFunction($.cookie)?$.cookie(e):""},deleteCookie:function(e){var t=$.removeCookie(e,this.getCookieOptions());return t},getCookieOptions:function(){var t;return n||(t=e.getBaseCloudUrl(),n={domain:e.Config.COOKIE_DOMAIN,path:"/",expires:14,secure:t&&t.indexOf("https")===0}),n},setPersonalCookie:function(e,t,n){var r=this._getPersonalName(e,t),i;return i=this.setCookie(r,n),this.purgePrefsCookies(e,r),i},getPersonalCookie:function(e,t){return this.getCookie(this._getPersonalName(e,t))},deletePersonalCookie:function(e,t){return this.deleteCookie(this._getPersonalName(e,t))},purgePrefsCookies:function(e,t){var n=document.cookie,r=n.split(";"),i,s;_.each(r,_.bind(function(n){i=n.split("="),s=$.trim(i[0]),s.indexOf(e)===0&&s!==t&&this.deleteCookie(s)},this))},_getPersonalName:function(e,n){return e+t.getSha256(n).substr(0,8)}},e.CookieUtil}),define("core/dev/utils/ipm-util",["core/ac-core","plugins-common/ac-plugins","core/utils/cookie-util"],function(e,t,n){var r=e.LANGUAGE_COOKIE,i={bizSource:"History_bizSource",countryCode:"History_countryCode",language:r,marketingContext:"marketingContext",previousLoginDate:"History_previousLoginDate",subscriptionLevel:"History_subscriptionLevel",subscriptionName:"History_subscriptionName",upgradeFromSku:"History_upgradeFromSku"},s={biz_source:"History_bizSource",country_code:"History_countryCode",subscription_level:"History_subscriptionLevel",subscription_name:"History_subscriptionName",user_lang:r},o={acrobatplus:t.ACROBAT,createpdf:t.CREATEPDF,exportpdf:t.EXPORTPDF,formscentral:t.FORMSCENTRAL};return e.IpmUtil={renderIpmContent:function(t,n,r,i,s){function f(){t.css("visibility","visible")}var o,u,a;if(!e.Features.isFeatureEnabled("test_and_target_content"))return;if(!window.mboxDefine||!window.mboxUpdate)return;try{o=r+e.Locale.getIpmLocale(),u="service_name="+i,a=[n,o,u],s&&(a=a.concat(s)),mboxDefine.apply(undefined,a),mboxUpdate(o,u)}catch(l){LOG(0,"mbox error: "+l.toString()),f()}},getIpmParams:function(e){var t=[],r,s,o;return _.each(i,function(e,i){r=n.getCookie(e),r&&t.push(i+"="+r)}),e&&(s=e.email.toLowerCase(),o=s.split("@")[1],o==="adobetest.com"&&t.push("isAdobeTest=true")),t.length>0?t:undefined},setIpmParams:function(e,t){var r,i;r=_.pick(_.extend({},e,t),_.keys(s)),_.each(r,function(e,t){i=s[t],i&&e&&n.setCookie(i,e)}),n.setCookie("History_previousLoginDate",(new Date).getTime().toString())},getMarketingTool:function(){var e=n.getCookie("marketingContext");return e?o[e]:undefined}},e.IpmUtil}),define("core/dev/utils/event-util",["core/ac-core"],function(e){return e.EventUtil={getEventTarget:function(e){var t;return e=e||window.event,t=e.target,_.isUndefined(t)&&(t=e.srcElement),$(t)},addDomEventListener:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r):(t="on"+t,e.attachEvent(t,n)),this},removeDomEventListener:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r):(t="on"+t,e.detachEvent(t,n)),this},addPostMessageListener:function(e){var t,n;return window.addEventListener?(t="addEventListener",n="message"):(t="attachEvent",n="onmessage"),window[t](n,e,!1),this},removePostMessageListener:function(e){var t,n;return window.removeEventListener?(t="removeEventListener",n="message"):(t="detachEvent",n="onmessage"),window[t](n,e,!1),this}},e.EventUtil}),define("core/dev/utils/focus-util",["core/ac-core"],function(e){return e.FocusUtil={nextElem:function(e){var t=38,n=40,r,i;if(e.keyCode===t||e.keyCode===n)r=$("*[tabindex = 0]:visible"),i=r.index(e.target);if(_.isUndefined(r))return;e.keyCode===t&&i>0?r.eq(i-1).focus():e.keyCode===n&&i<r.length&&r.eq(i+1).focus()}},e.FocusUtil}),define("core/dev/utils/action-ids",["core/ac-core","i18n!core/nls/ui-strings"],function(e,t){return e.ActionIds={toolIdsToActionIds:{send:"tracked_send",exportpdf:"exportpdf",exportpdf_rhp:"exportpdf",createpdf:"createpdf",createpdf_rhp:"createpdf",fillsign:"fillsign"},toolIdsToActionNames:{send:t.SEND_AND_TRACK,exportpdf:"Export PDF",exportpdf_rhp:"Export PDF",convertpdf:"Create PDF",createpdf:"Create PDF",createpdf_rhp:"Create PDF",fillsign:"Fill & Sign"},RENAME:"rename",MOVE:"move",MOVE_ACROSS_CONNECTORS:"move_across_connectors",UPLOAD:"upload",DOWNLOAD:"download",DELETE:"delete",FILTER:"filter",SORT:"sort",SEARCH:"search",NEWFOLDER:"newfolder",SEND:"tracked_send",EXPORTPDF:"exportpdf",CREATEPDF:"createpdf",FILLSIGN:"fillsign",MULTIPLE_SELECTION:"multiple_selection",NON_PDF:"non_pdf",NON_PDF_SAVE:"non_pdf_save"},e.ActionIds}),define("core/dev/utils/breadcrumbs",["core/ac-core","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/view-util"],function(e,t,n,r){var i=_.template('<span class="breadcrumb"><span class="breadcrumb-name theme-text"><%- name %></span><span class="breadcrumb-separator theme-text">/</span></span>'),s=_.template('<div class="breadcrumbs-trunc-menu"></div>'),o=_.template('<div class="breadcrumbs-trunc-menu-item"><%- name %></div>'),u=.9;return e.Breadcrumbs={display:function(a,f,l,c,h,p){function k(e){c($(e.currentTarget).data("id"))}function L(e){if(e.which===13||e.which===32)e.preventDefault(),k(e)}function A(){return n.getTextSize(f).width-l}function O(){return A()>0}function M(e){var t=e.find(".breadcrumb-name");e.attr("title",t.text()),t.text("…")}function D(e){e.css("display","none")}function P(){C=$("body"),x=f.find(".breadcrumbs-trunc-menu"),T=f.find(".breadcrumbs-trunc-menu-item")}function H(e){S.push({id:e.data("id"),name:e.data("name")})}function B(){f.append(s()),x=f.find(".breadcrumbs-trunc-menu"),_.each(S,function(e){x.append(o({name:e.name})),N=x.children().last(),N.data("id",e.id)})}function j(){var e=E.position().left-5,t,i;x.width(x.width()+r.getScrollBarWidth()),x.offset({left:e,top:f.height()}),x.css("max-width",l-e+"px").css("max-height",u*($("body").height()-f.offset().top-f.height())+"px"),t=x.width()-parseInt(T.first().css("padding-left"),10)*2,T.each(function(e,r){i=$(r),i.width(t),n.truncateElementText(i)})}function F(){return f.find(".breadcrumbs-trunc-menu").length>0}function I(){T.off("click"),C.off(".breadcrumbs")}function q(){F()&&(P(),I(),x.slideUp("fast",function(){x.remove(),x=undefined}))}function R(e){$(e.target).closest(x).length===0&&q()}function U(e){e.which===27&&q()}function z(e){c($(e.currentTarget).data("id")),q()}function W(){T.on("click",z),C.on("click.breadcrumbs",R),C.on("keydown.breadcrumbs",U)}function X(){F()||(B(),P(),j(),_.defer(W),x.slideDown("fast"))}function V(e){F()?q():X(),e.stopPropagation()}function J(){E.attr("title",_.template(t.N_ITEMS_CLICK_TO_VIEW,{num:S.length}))}function K(){E.off("click").on("click",V)}function Q(){J(),K()}var d,v,m,g,y,b,w,E,S,x,T,N,C;if(!a)return;f.empty();if(a.length===0||l===0)return;v=a.length;for(d=0;d<v;d+=1)m=a[d],g=d===0&&p?p:e.Util.replaceSpaceWithNbsp(m.name),f.append(i({name:g})),y=f.children(".breadcrumb").last(),d===v-1?(y.addClass("current-folder"),y.find(".breadcrumb-separator").addClass("hidden"),y.attr({role:"heading"})):y.attr({role:"link",tabindex:0}),y.data({id:m.id,name:m.name}),d<v-1&&y.on("click",k).on("keydown",L);b=f.children(".breadcrumb"),w=b.length,e.Util.isWindows()&&h==="ja-jp"&&(l*=.8);if(!O())return;if(w>2){y=b.eq(1),M(y);if(!O())return;E=y}for(d=2;d<w-1;d+=1){y=b.eq(d),S||(S=[],H(E)),H(y),D(y);if(!O()){Q();return}}E&&S&&Q(),n.truncateToFit(b.eq(b.length-1),A),x&&x.length>0&&r.setElementFontByLocale(x,"div")}},e.Breadcrumbs}),define("core/dev/utils/svg-loader",["core/ac-core","core/utils/http-util","core/utils/util"],function(e,t,n){var r=6,i=[],s=[];return e.SvgLoader={loadSvg:function(e,t,n,r){var i=$.Deferred();return this.enqueueSvgRequest(e,t,i,n,r),this.dequeueSvgRequest(),i.promise()},suspendPendingRequests:function(){this._isSuspended=!0},resumePendingRequests:function(){var e;this._isSuspended=!1;for(;;){e=this.dequeueSvgRequest();if(!e)break}},cancelPendingRequests:function(){i=[],s=[]},enqueueSvgRequest:function(e,t,n,r,s){var o={$svg:e,url:t,deferred:n,eventData:r,force:s};i.push(o)},dequeueSvgRequest:function(){var e;return this._isSuspended||i.length===0||s.length>=r?e:(e=i.shift(),s.push(e),this.processSvgRequest(e.$svg,e.url,e.deferred,e.eventData,e.force),e)},processSvgRequest:function(e,r,i,s,o){var u=_.bind(function(e){this.removeActiveSvgRequest(e),this.dequeueSvgRequest()},this);if(!o&&e.data("is_loading")){u(e);return}s=s||{};if(!o&&!e.is(":empty")){u(e),i.resolve(s);return}$.ajax({url:r,type:"GET",headers:t.getRequestHeaders("GET"),global:!1}).then(function(t){var o=t.pages[s.pageNum],a=e.parent().parent(),f;if(e.data("svg_url")&&e.data("svg_url")!==r){e.data("is_loading",!1),u(e),i.reject(s);return}t.results.hasClips&&(n.isAppleWekKit()||n.isFirefox())&&(o=o.replace(/#SVGID/g,window.location.pathname+"#SVGID")),f=a.find("link"),(f.length===0||f.length===1&&f.attr("href").indexOf("font.css")===-1)&&a.prepend(t.results.docLinks),e.data("is_loading",!1),e.html(o),u(e),i.resolve(s)},function(){e.data("is_loading",!1),u(e),i.reject(s)}),e.data("is_loading",!0)},removeActiveSvgRequest:function(e){_.each(s,function(t,n){if(t&&t.$svg===e){s.splice(n,1);return}})}},e.SvgLoader}),define("core/dev/utils/file-types",["core/ac-core","i18n!core/nls/ui-strings"],function(e,t){var n={ANIMATION:"file-icon-animation",AUDIO:"file-icon-audio",FILLSIGN:"file-icon-form",GENERIC:"file-icon-generic",ILLUSTRATOR:"file-icon-illustrator",IMAGE:"file-icon-img",INDESIGN:"file-icon-indesign",PDF:"file-icon-pdf",PHOTOSHOP:"file-icon-photoshop",POSTSCRIPT:"file-icon-postscript",PRESENTATION:"file-icon-presentation",RICH_TEXT:"file-icon-richtext",SPREADSHEET:"file-icon-spreadsheet",TEXT:"file-icon-text",VIDEO:"file-icon-video",ZIP:"file-icon-zip"},r={ADOBE_FILLSIGN:{iconCls:n.FILLSIGN,desc:"Adobe FillSign"},ADOBE_FLASH:{iconCls:n.ANIMATION,desc:"Adobe Flash"},ADOBE_ILLUSTRATOR:{iconCls:n.ILLUSTRATOR,desc:"Adobe Illustrator"},ADOBE_INDESIGN:{iconCls:n.INDESIGN,desc:"Adobe InDesign"},ADOBE_PDF:{iconCls:n.PDF,desc:"Adobe PDF"},ADOBE_PHOTOSHOP:{iconCls:n.PHOTOSHOP,desc:"Adobe Photoshop"},ADOBE_POSTSCRIPT:{iconCls:n.POSTSCRIPT,desc:"Adobe PostScript"},CALENDAR:{iconCls:n.GENERIC,desc:t.CALENDAR},CERTIFICATE:{iconCls:n.GENERIC,desc:t.CERTIFICATE},HTML:{iconCls:n.GENERIC,desc:"HTML"},IMAGE:{iconCls:n.IMAGE,desc:t.IMAGE},JAVASCRIPT:{iconCls:n.GENERIC,desc:"JavaScript"},MS_EXCEL:{iconCls:n.SPREADSHEET,desc:"Microsoft® Excel"},MS_POWERPOINT:{iconCls:n.PRESENTATION,desc:"Microsoft® PowerPoint"},MS_WORD:{iconCls:n.RICH_TEXT,desc:"Microsoft® Word"},QUARK_XPRESS:{iconCls:n.RICH_TEXT,desc:"Quark® Express"},RICH_TEXT:{iconCls:n.RICH_TEXT,desc:t.RICH_TEXT},SPREADSHEET:{iconCls:n.GENERIC,desc:t.SPREADSHEET},STYLE_SHEET:{iconCls:n.GENERIC,desc:t.STYLE_SHEET},TEXT:{iconCls:n.TEXT,desc:t.TEXT},VISIO:{iconCls:n.GENERIC,desc:"Visio®"},ZIP:{iconCls:n.ZIP,desc:"Zip"}},i={pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/msexcel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",odf:"application/vnd.oasis.opendocument.formula",odt:"application/vnd.oasis.opendocument.text",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odg:"application/vnd.oasis.opendocument.graphics",sxd:"application/vnd.sun.xml.draw",sxc:"application/vnd.sun.xml.calc",sxi:"application/vnd.sun.xml.impress",sxw:"application/vnd.sun.xml.writer",stw:"application/vnd.sun.xml.writer.template",pub:"application/vnd.ms-publisher",ps:"application/postscript",txt:"text/plain",text:"text/plain",rtf:"text/rtf",bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",tif:"image/tiff",tiff:"image/tiff",indd:"application/x-indesign",ai:"application/illustrator",psd:"image/vnd.adobe.photoshop",js:"text/javascript",html:"text/html",htm:"text/html",shtml:"wwwserver/html-ssi",css:"text/css",ico:"image/x-icon",xps:"application/vnd.ms-xpsdocument",rle:"application/rle",dib:"image/bmp",emf:"application/emf",pcx:"image/x-pcx",xml:"application/xml",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",asf:"video/x-ms-asf",asx:"video/x-ms-asf",au:"audio/basic",avi:"video/x-msvideo",dif:"video/x-dv",divx:"video/divx",dv:"video/x-dv",flv:"video/x-flv",f4v:"video/x-f4v",lsf:"video/x-la-asf",lsx:"video/x-la-asf",mkv:"video/x-matroska",m3u:"audio/x-mpegurl",m4a:"audio/m4a",m4p:"audio/m4p",m4v:"video/x-m4v",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",mxu:"video/vnd.mpegurl",ogg:"audio/ogg",qt:"video/quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rm:"application/vnd.rn-realmedia",snd:"audio/basic",vob:"video/x-ms-vob",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",zip:"application/zip"},s={"application/illustrator":r.ADOBE_ILLUSTRATOR,"application/javascript":r.JAVASCRIPT,"application/msexcel":r.MS_EXCEL,"application/msword":r.MS_WORD,"application/pdf":r.ADOBE_PDF,"application/postscript":r.ADOBE_POSTSCRIPT,"application/rtf":r.RICH_TEXT,"application/vnd.adobe.form.fillsign":r.FILLSIGN,"application/vnd.quark.quarkxpress":r.QUARK_XPRESS,"application/vnd.visio":r.VISIO,"application/vnd.wordperfect":r.RICH_TEXT,"application/x-indesign":r.ADOBE_INDESIGN,"application/x-pkcs12":r.CERTIFICATE,"application/x-shockwave-flash":r.ADOBE_FLASH,"application/x-x509-ca-cert":r.CERTIFICATE,"application/zip":r.ZIP,"image/vnd.adobe.photoshop":r.ADOBE_PHOTOSHOP,"text/calendar":r.CALENDAR,"text/comma-separated-values":r.SPREADSHEET,"text/css":r.STYLE_SHEET,"text/html":r.HTML,"text/javascript":r.JAVASCRIPT,"text/plain":r.TEXT,"text/richtext":r.RICH_TEXT,"text/rtf":r.RICH_TEXT},o={bmp:!0,cgm:!0,fpx:!0,gif:!0,img:!0,j2c:!0,j2k:!0,jfif:!0,jif:!0,jp2:!0,jpeg:!0,jpg:!0,jpx:!0,pcd:!0,png:!0,svg:!0,tif:!0,tiff:!0},u="application/vnd.adobe.form.fillsign";return e.FileTypes={MimeType:{ADOBE_FILL_SIGN:"application+vnd.adobe.form.fillsign",ADOBE_ILLUSTRATOR:"application+illustrator",ADOBE_INDESIGN:"application+x-indesign",ADOBE_PDF:"application+pdf",ADOBE_PHOTOSHOP:"image+vnd.adobe.photoshop",HTML:"text+html",IMAGE:"image+*",MS_EXCEL:"application+msexcel,application+vnd.ms-excel,application+vnd.openxmlformats-officedocument.spreadsheetml.sheet",MS_POWERPOINT:"application+vnd.ms-powerpoint,application+mspowerpoint,application+vnd.openxmlformats-officedocument.presentationml.presentation",MS_WORD:"application+msword,application+vnd.ms-word,application+vnd.openxmlformats-officedocument.wordprocessingml.document",TEXT:"text+*",VIDEO:"video+*",ZIP:"application+zip"},UiName:{ADOBE_FILL_SIGN:"Adobe Fill & Sign",ADOBE_ILLUSTRATOR:"Adobe Illustrator",ADOBE_INDESIGN:"Adobe InDesign",ADOBE_PDF:"Adobe PDF",ADOBE_PHOTOSHOP:"Adobe Photoshop",HTML:"HTML",MS_EXCEL:"Microsoft® Excel",MS_POWERPOINT:"Microsoft® PowerPoint",MS_WORD:"Microsoft® Word",ZIP:"Zip"},getFileInfo:function(i,o){if(!o)return{iconCls:n.GENERIC,desc:t.UNKNOWN};var u=e.Util.getExtension(o),a=s[i];return i==="application/octet-stream"&&u==="indd"?a=r.ADOBE_INDESIGN:i==="application/postscript"&&u==="ai"&&(a=r.ADOBE_ILLUSTRATOR),!a&&i&&(i.indexOf("audio/")===0?a={iconCls:n.AUDIO,desc:t.AUDIO}:i.indexOf("image/")===0?a={iconCls:n.IMAGE,desc:t.IMAGE}:i.indexOf("video/")===0?a={iconCls:n.VIDEO,desc:t.VIDEO}:i.indexOf("application/pkcs")===0?a={iconCls:n.GENERIC,desc:t.CERTIFICATE}:this.isFormMimeType(i)?a=r.ADOBE_FILLSIGN:i.indexOf("application/vnd.ms-excel")===0||i.indexOf("application/vnd.openxmlformats-officedocument.spreadsheetml")===0?a=r.MS_EXCEL:i.indexOf("application/vnd.ms-powerpoint")===0||i.indexOf("application/vnd.openxmlformats-officedocument.presentationml")===0?a=r.MS_POWERPOINT:i.indexOf("application/vnd.ms-word")===0||i.indexOf("application/vnd.openxmlformats-officedocument.wordprocessingml")===0?a=r.MS_WORD:i.indexOf("application/x-font")===0&&(a={iconCls:n.GENERIC,desc:t.FONT})),a||(u==="form"?a=r.ADOBE_FILLSIGN:u==="ai"?a=r.ADOBE_ILLUSTRATOR:u==="indd"?a=r.ADOBE_INDESIGN:u==="pdf"?a=r.ADOBE_PDF:u==="doc"||u==="docx"?a=r.MS_WORD:u==="xls"||u==="xlsx"?a=r.MS_EXCEL:u==="ppt"||u==="pptx"?a=r.MS_POWERPOINT:u==="html"?a=r.HTML:u==="txt"?a=r.TEXT:u==="zip"?a=r.ZIP:this.isImageFileExtension(u)&&(a=r.IMAGE)),a||(a={iconCls:n.GENERIC,desc:t.UNKNOWN}),_.extend(a,{ext:u}),a},getAllFileExtensions:function(){return i},getFileMimeType:function(e){return i[e]},isFolder:function(t){return!t.type&&!e.Util.getExtension(t.name)},isFormMimeType:function(e){return e===u},isImageFileExtension:function(e){return e?(e.charAt(0)==="."&&(e=e.substr(1)),!_.isUndefined(o[e.toLowerCase()])):!1},formatFileType:function(e){var n,r,i,s;return e&&(n=e.get("content_type"),r=e.get("name"),i=this.getFileInfo(n,r),i?(s=i.desc,s+=i.ext?" "+_.template(t.EXTENSION,{ext:i.ext}):""):s=t.UNKNOWN),s||""}},e.FileTypes}),define("core/dev/ops/preview/getting-hover-preview-metadata-op",["core/ac-core","core/ops/op"],function(e){return e.GettingHoverPreviewMetadataOp=e.Op.extend({run:function(){var t=this.options,n=t.hoverPreviewUiModel,r;return e.opFactory.create("GettingAssetMetadataOp",t).run().then(function(e){r=n.get("item_view"),r&&r.model&&r.model.id===t.id&&n.set("page_count",e.page_count)})}}),e.GettingHoverPreviewMetadataOp}),define("core/dev/ops/preview/getting-rhp-preview-metadata-op",["core/ac-core","core/ops/op"],function(e){return e.GettingRhpPreviewMetadataOp=e.Op.extend({run:function(){function f(){var e=r.get("item_model");return e&&e.id===t.id}function l(e){return n.getConnectorsUiHelpers(n.getConnectorName(e))}var t=this.options,n=t.appApi.connectorsApi,r=t.rhpPreviewUiModel,i=r.get("item_model"),s=e.opFactory,o,u,a;return u=s.create("GettingAssetMetadataOp",t).run().then(function(e){f()&&r.set("page_count",e.page_count)}),a=s.create("GettingFolderPathOp",t).run(i.get("parent_id")).then(function(e){f()&&(o=e.path,r.set("file_path",o),r.set("connector_info",l(o[0].id)))}),$.when.apply(undefined,[u,a])}}),e.GettingRhpPreviewMetadataOp}),define("core/dev/ops/preview/getting-rhp-folder-child-counts-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingRhpFolderChildCountsOp=e.Op.extend({run:function(){function o(){var t=i.get("item_model");return t&&t.id===e.id}function u(e){var t=_.find(e.facets.object_type,function(e){return e.value==="asset"});return t?t.count:0}var e=this.options,n,r,i=e.rhpPreviewUiModel,s=i.get("item_model");return!s||!s.isFolder()?this._getRejectedPromise():(n="POST",r=JSON.stringify({q:{parent_id:s.id},facet:{fields:["object_type"]},pagesize:0}),e.appApi.networkApi.throttledAjax(Ac.baseFilesUrisModel.getApiUri()+"search",_.extend({},e,{type:n,headers:t.getRequestHeadersNoClientId(n),data:r,dataType:"json",global:_.isUndefined(e.global)?!0:e.global})).then(function(e){o()&&i.set("total_files",u(e))}))}}),e.GettingRhpFolderChildCountsOp}),define("core/dev/ops/connectors/adding-connector-op",["core/ac-core","core/utils/util","core/utils/http-util","core/constants/cef-constants","core/ops/op"],function(e,t,n,r){return e.AddingConnectorOp=e.Op.extend({run:function(i){var s=this.options,o=s.appApi.networkApi,u=s.appApi.connectorsApi,a,f,l,c,h,p=r.HomeView;return!i||!i.connectorName?this._getRejectedPromise():(a=u.isDesktopConnector(i.connectorName),a?(s.runningInFileSelection&&(p=r.FileSelectionDlg),s.runningInFileSaveAs&&(p=r.FileSaveAsDlg),h=$.Deferred(),s.appApi.rnaApi.done(function(e){var t=e.addConnectorAccount(i.connectorName,p,i.info);t.done(function(){h.resolve()}).fail(function(){h.reject()})}),h):(f=Ac.baseCloudUrisModel.getApiUri()+"connector/sign_in?"+n.getClientIdQueryParam(),l="GET",c={name:i.connectorName,redirect_code:t.isCEF()?"desktop":"web",locale:e.Locale.getLocale()},o.throttledAjax(f,_.extend({},s,{type:l,headers:n.getRequestHeadersNoClientId(l),dataType:"json",data:c})).then(function(e){e.uri&&(window.location=e.uri)})))}}),e.AddingConnectorOp}),define("core/dev/ops/connectors/adding-connector-plugin-op",["core/ac-core","plugins-common/ac-plugins","core/ops/op"],function(e,t){return e.AddingConnectorPluginOp=e.Op.extend({run:function(n){var r=this.options,i=r.appApi.connectorsApi,s=r.appApi.pluginsApi,o,u,a,f,l,c,h,p,d=[],v,m,g,y,b,w,E=e.opFactory;if(!n||!n.pluginId||!n.connectorName||_.isUndefined(n.accountId))return this._getRejectedPromise();o=n.pluginId,u=s.getPluginsUiModel("add_account"),a=n.connectorName,l=n.accountId,f=n.connectorLabel,w=i.getConnectorsUiHelpers(),b=w.connectors[a],f||(f=b.label);if(!u)return this._getRejectedPromise();if(s.getPluginUiModel(o))return r.runningInFileSelection?(r.appApi.selectionApi.triggerPluginSelectorClick(o,r.fileSelectionDlgOptions),this._getResolvedPromise()):s.selectPlugin(o);m=_.map(w.order_for_left_rail,function(e){return e.name}),g=_.first(m,_.indexOf(m,a)),c=u.get("plugins"),h=c.length-1;for(p=c.length-1;p>=0;p-=1){y=c.at(p).get("connector_name");if(y===a||_.indexOf(g,y)!==-1){h=p+1;break}}return s.addPlugin(o,{id:o,base_url:s.getBaseUrl("my_files"),config:s.getConfig("my_files"),selector_label:f,is_removable:!0,connector_name:a},u,t.types.home_views,h),i.setConnectorPluginRoot(o,l),i.setConnectorPluginName(o,a),v=c.at(h),d.push(E.create("InstantiatingSelectorOp",r).run(v)),d.push(E.create("InstantiatingPluginOp",r).run(v)),$.when.apply($,d).then(function(){return r.runningInFileSelection?(r.appApi.selectionApi.triggerPluginSelectorClick(o,r.fileSelectionDlgOptions),this._getResolvedPromise()):s.selectPlugin(o)})}}),e.AddingConnectorPluginOp}),define("core/dev/ops/connectors/instantiating-connectors-by-cohort-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.InstantiatingConnectorsByCohortOp=e.Op.extend({run:function(n){var r=this.options,i=e.opFactory;return t.isCEF()?i.create("InstantiatingOneConnectorOp",r).run(n).then(function(){return i.create("InstantiatingConnectorsOp",r).run(n)}):i.create("InstantiatingConnectorsOp",r).run(n)}}),e.InstantiatingConnectorsByCohortOp}),define("core/dev/ops/connectors/instantiating-connectors-op",["core/ac-core","plugins-common/ac-plugins","core/utils/util","core/ops/op"],function(e,t,n){return e.InstantiatingConnectorsOp=e.Op.extend({run:function(r){function O(e){var r=e.id,i,s,f,p=t.types,d;if(!r&&l)return;i=e.label||h.connectors[e.name].label,s=u.getConnectorPluginId(e.name,r,l),f=u.isConnectorRemovable(e.name);if(o.getPluginUiModel(s))return;if(n.isCEF()){if(L.disable_local_connectors&&u.isDesktopConnector(e.name))return;if(L.disable_document_cloud&&!f)return;if(L.disable_web_connectors&&f&&!u.isDesktopConnector(e.name))return}d=u.getConnectorPluginId(e.name,"",l),f&&r&&o.getPluginUiModel(d)&&u.removeConnectorPlugin(d),u.isDesktopConnector(e.name)?l?x=h.connectors[e.name].supported.template_plugin_id_select:x=h.connectors[e.name].supported.template_plugin_id:x=l?"my_files_select":"my_files",c.push({id:s,base_url:o.getBaseUrl(x),config:o.getConfig(x),selector_label:i,is_removable:f,connector_name:e.name,tooltip:e.tooltip}),o.addPluginsConfig(s,l?p.file_selection_dlg:p.home_views),o.registerPluginsUiModel(s,a),u.setConnectorPluginRoot(s,r),u.setConnectorPluginName(s,e.name)}var i=this.options,s=i.appApi,o=s.pluginsApi,u=s.connectorsApi,a=r.pluginsUiModel,f,l=r.inFileSelectionDlg,c=[],h=u.getConnectorsUiHelpers(),p,d={},v,m,g,y,b,w=[],E=e.opFactory,S,x,T,N,C,k,L=u.getTunerPreferences(),A;_.each(u.getConnectors(),function(e){v=e.name,m=d[v],m||(m=d[v]=[]),m.push(e)}),p=l?h.order_for_file_sel_dlg:h.order_for_left_rail,_.each(p,function(e){v=e.name,m=d[v],m&&m.length>0?(_.each(m,O),delete d[v]):e.alwaysAppear&&O(e)}),_.each(d,function(e){_.each(e,O)}),T=_.map(l?h.order_for_file_sel_dlg:h.order_for_left_rail,function(e){return e.name});for(y=0;y<c.length;y+=1){N=_.first(T,_.indexOf(T,c[y].connector_name)),g=a.get("plugins"),C=g.length-1;for(b=g.length-1;b>=0;b-=1){k=g.at(b).get("connector_name");if(k===c[y].connector_name||_.indexOf(N,k)!==-1){C=b+1;break}}n.isCEF()&&(S={readerContextModel:i.readerContextModel}),g.add(c[y],{at:C}),f=o.getPluginUiModel(c[y].id),f&&(w.push(E.create("InstantiatingSelectorOp",_.extend(i,{pluginContext:S})).run(f)),w.push(E.create("InstantiatingPluginOp",_.extend(i,{pluginContext:S})).run(f)))}return A=$.when.apply($,w),n.isCEF()&&!this._hasStartedListeningForConnector&&(this._hasStartedListeningForConnector=!0,A.done(function(){E.create("ListeningForConnectorEvents",i).run()})),A}}),e.InstantiatingConnectorsOp}),define("core/dev/ops/connectors/instantiating-one-connector-op",["core/ac-core","plugins-common/ac-plugins","i18n!core/nls/ui-strings","core/utils/util","core/ops/op"],function(e,t,n,r){return e.InstantiatingOneConnectorOp=e.Op.extend({run:function(i){var s=this.options,o=s.appApi.pluginsApi,u=t.types,a=i.pluginsUiModel,f,l=i.inFileSelectionDlg,c,h,p,d=e.opFactory,v=[],m=s.appApi.connectorsApi,g=s.appApi.folderApi,y,b,w=n.ACROBAT_DOT_COM_FILES,E,S,x=m.getTunerPreferences();return x.disable_document_cloud?this._getResolvedPromise():(c=m.getConnectorPluginId("root",undefined,l),y=l?"my_files_select":"my_files",E=m.getConnectorsUiHelpers("root"),E&&(w=E.label),h={id:c,base_url:o.getBaseUrl(y),config:o.getConfig(y),selector_label:w,is_removable:!1,connector_name:"root"},o.addPluginsConfig(c,l?u.file_selection_dlg:u.home_views),o.registerPluginsUiModel(c,a),m.setConnectorPluginRoot(c,g.getRootFolderId()),m.setConnectorPluginName(c,"root"),f=a.get("plugins"),r.isCEF()?S=f.length-1:S=0,f.add(h,{at:S}),r.isCEF()&&(b={readerContextModel:s.readerContextModel}),p=f.at(S),v.push(d.create("InstantiatingSelectorOp",_.extend(s,{pluginContext:b})).run(p)),v.push(d.create("InstantiatingPluginOp",_.extend(s,{pluginContext:b})).run(p)),$.when.apply($,v))}}),e.InstantiatingOneConnectorOp}),define("core/dev/ops/connectors/removing-connector-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.RemovingConnectorOp=e.Op.extend({run:function(n){var r=this.options,i,s,o,u,a;return!n||!n.pluginId?this._getRejectedPromise():(a=Ac.baseCloudUrisModel.getApiUri()+"connector/disconnect?"+t.getClientIdQueryParam(),o="POST",i=n.pluginId,s=r.appApi.connectorsApi.getConnectorPluginRoot(i),s?(u={root_id:s},r.appApi.networkApi.throttledAjax(a,{type:o,headers:t.getRequestHeadersNoClientId(o),data:JSON.stringify(u),dataType:"json"}).then(function(){return e.opFactory.create("GettingSystemFoldersOp",_.extend(r,{global:!0})).run()})):this._getResolvedPromise())}}),e.RemovingConnectorOp}),define("core/dev/ops/connectors/removing-connector-plugin-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.RemovingConnectorPluginOp=e.Op.extend({run:function(t){var n=this.options,r=n.appApi,i,s,o,u,a=r.pluginsApi,f=r.connectorsApi,l,c;return!t||!t.pluginId?this._getRejectedPromise():(i=t.pluginId,s=a.getPluginsUiModel(i),s?(o=s.get("plugins"),l=f.getConnectorPluginName(i),u=e.opFactory.create("RemovingConnectorOp",n),!f.isConnectorRemovable(l)||f.isDesktopConnector(l)?c=this._getResolvedPromise():c=u.run(t),c.then(function(){var e=s.getSelectedId(),t,n;n=a.removePlugin(i,s),i===e&&(t=o.at(n).id,s.setSelectedId(t))})):this._getResolvedPromise())}}),e.RemovingConnectorPluginOp}),define("core/dev/ops/connectors/removing-connector-plugins-op",["core/ac-core","core/ops/op"],function(e){return e.RemovingConnectorPluginsOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.connectorsApi,n=e.appApi.pluginsApi,r=n.getPluginsUiModel("add_account"),i=[],s;r.get("plugins").each(function(e){var n=e.id,r=t.getConnectorPluginName(n);t.isConnectorPlugin(n)&&!t.isDesktopConnector(r)&&r!=="root"&&!t.alwaysAppearInLeftRail(r)&&i.push(n)});for(s=i.length-1;s>=0;s-=1)t.removeConnectorPlugin(i[s]);return this._getResolvedPromise()}}),e.RemovingConnectorPluginsOp}),define("core/dev/ops/creating/creating-folder-op",["core/ac-core","core/utils/util","core/utils/http-util","core/ops/op"],function(e,t,n){return e.CreatingFolderOp=e.Op.extend({run:function(){var r=this.options,i=r.name,s,o,u;return s=e.modelFactory.create("FolderModel",r),o="POST",i=t.compressQuestionMarks(i),u={name:i,on_dup_name:"auto_rename"},r.appApi.networkApi.throttledAjax(s.url(),{type:o,headers:n.getRequestHeadersNoClientId(o),data:JSON.stringify(u),dataType:"json"})}}),e.CreatingFolderOp}),define("core/dev/ops/dialogs/renaming-item-from-dlg-op",["core/ac-core","core/ops/op"],function(e){return e.RenamingItemFromDlgOp=e.Op.extend({run:function(){var t=this.options,n=t.id,r,i,s,o=$.Deferred();return r=t.dialogUiModel,i=e.opFactory.create("ValidatingNameOp",t),s=e.opFactory.create("RenamingItemOp",_.extend({},t,{name:t.newName})),i.run().then(function(){s.run().then(function(e){e&&e.renamed_to?r.set("error",_.extend(e,{id:n})):(r.set("close",!0),t.collectionsUiModel.set("scroll_id_into_view",n)),o.resolve()},function(){r.set("close",!1),o.reject()})},function(e){r.set("error",e),o.reject()}),o.promise()}}),e.RenamingItemFromDlgOp}),define("core/dev/templates/move-dlg-template",[],function(){return'<ul class="move-dlg-folder-tree unselectable"      role="tree" aria-multiselectable="false"></ul> <div class="move-dlg-btns">    <input type="button"           class="control-button dialog-control-button                  move-dlg-cancel-btn button-grey ui-theme theme-text"           id="move-dlg-cancel-btn"           aria-label="<%= cancel %>"           value="<%= cancel %>" />    <input type="button"           class="control-button dialog-control-button                  move-dlg-move-btn disabled theme-button theme-button-label"           id="move-dlg-move-btn"           aria-label="<%= move %>"           value="<%= move %>"           disabled="disabled" /></div>'}),define("core/dev/templates/folder-tree-node-template",[],function(){return'<li class="folder-tree-node" role="treeitem"       aria-expanded="false"       aria-selected="false"       id="folder-tree-node-<%= id %>"       aria-owns="folder-tree-node-children-<%= id %>"       aria-labelledby="folder-tree-node-name-<%= id %>"       tabindex="-1">    <span class="folder-tree-node-element theme-list-item">        <span class="folder-tree-node-element-content">            <span class="folder-tree-node-expand-btn"></span>            <span class="folder-tree-node-info-container">                <span class="folder-tree-node-thumb"></span>                <span class="folder-tree-node-name theme-list-item-text"                      id="folder-tree-node-name-<%= id %>">                    <%- name %>                </span>            </span>        </span>    </span>    <ul class="folder-tree-node-children" role="presentation"        id="folder-tree-node-children-<%= id %>"         aria-labelledby="folder-tree-node-name-<%= id %>"        aria-hidden="true"></ul></li>'}),define("core/dev/views/view-events",["core/ac-core"],function(e){e.ViewEvents={SELECT_ITEM:"core:select-item",CLEAR_SELECTION:"core:clear-selection",SELECTION_CHANGE:"core:selection-change",SELECTION_COMMIT:"core:selection-commit",OPEN_COLLECTION_ITEM:"core:open-collection-item",OPEN_SELECTED_COLLECTION_ITEMS:"core:open-selected-collection-items",SAVEAS_SELECTED_COLLECTION_ITEMS:"core:save-as-selected-collection-items",DOWNLOAD:"core:download",DOWNLOAD_ZIP:"core:download-zip",DELETE:"core:delete",RENAME:"core:rename",MOVE:"core:move",SELECTION_ACTION_ITEM_CLICK:"core:selection-action-item-click",RENAME_ITEM_FROM_DLG:"core:rename-item-from-dlg",MOVE_DLG_MOVE:"core:move-dlg-move",MENU_CLOSED:"core:menu-closed",SHARE_ITEM_FROM_PANEL:"core:share-item-from-panel",SHOW_REPORT_ABUSE_DLG:"core:show-report-abuse-dlg",REPORT_ABUSE:"core:reporting-abuse",DUP_DLG_DELETE_EXISTING:"core:dup-dlg-delete-existing",DUP_DLG_RENAME_ADDED:"core:dup-dlg-rename-added",INVALIDATE_WIDTH:"core:invalidate-width",GET_FOLDER_ITEMS:"core:get-folder-items",COLLECTION_RENDER_BEGIN:"core:collection-render-begin",COLLECTION_RENDER_END:"core:collection-render-end",VIEW_BY:"core:view-by",SORT:"core:sort",GET_HOVER_PREVIEW_METADATA:"core:get-hover-preview-metadata",GET_RHP_PREVIEW_METADATA:"core:get-rhp-preview-metadata",ADD_SEARCH_FIELD_QUERY:"core:add-search-field-query",REMOVE_SEARCH_FIELD_QUERY:"core:remove-search-field-query",REMOVE_LAST_FIELD_QUERY:"core:remove-last-field-query",REMOVE_REMOVABLE_QUERIES:"core:remove-removable-queries",SEARCH_FIELD_CLICKED:"core:search-field-clicked",SEARCH_IN_FOLDER:"core:search-in-folder",SHOW_QUOTA_WARNING_DLG:"core:show-quota-warning-dlg",LAUNCH_FOOTER_URL_IN_BROWSER:"core:launch-url-in-browser",OPEN_DOC_IN_READER_START:"core:open-doc-in-reader-start",OPEN_DOC_IN_READER_END:"core:open-doc-in-reader-end",SELECTION_ACTION_ATTACH_TO_EMAIL:"core:selection-action-attach-to-email",SELECTION_ACTION_SEND_AND_TRACK:"core:selection-action-send-and-track"}}),define("core/dev/views/folder-tree-node-view",["core/ac-core","core/templates/folder-tree-node-template","core/utils/css-util","core/views/view","core/views/view-events"],function(e,t,n){e.FolderTreeNodeView=e.View.extend({options:{indentLevel:0},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addModelEventListeners(),this._addUiModelEventListeners()},render:function(){var t=this.options.uiModel,n;this.$node||(e.View.prototype.render.call(this),n=this.model.get("id"),this.$el.append(this._template({name:this._getName(),id:n})),this.$node=this.$el.children().last(),this.$node.data("id",n),this._initWrappers(),this.$elementContent.css("margin-left",this.options.indentLevel*this.options.treeUiModel.get("level_indent")+"px"),this._addDomEventListeners()),this.isExpanded()?(this._renderChildNodes(),this.$node.addClass("expanded").filter("[aria-expanded]").attr("aria-expanded",!0),this.$expandBtn.addClass("expanded")):(this.$node.removeClass("expanded").filter("[aria-expanded]").attr("aria-expanded",!1),this.$expandBtn.removeClass("expanded")),t.get("selected")?(this.$element.addClass("selected"),this.$node.attr({"aria-selected":!0,tabindex:0})):(this.$element.removeClass("selected"),this.$node.attr({"aria-selected":!1})),this.$el.filter(".folder-tree-node-children").removeAttr("aria-hidden")},isExpanded:function(){return this.options.uiModel.get("expanded")},expand:function(){this.options.uiModel.set("expanded",!0)},collapse:function(){this.options.uiModel.set("expanded",!1)},select:function(){this.options.uiModel.set("selected",!0)},deselect:function(){this.options.uiModel.set("selected",!1)},toggleSelect:function(){this.options.uiModel.get("selected")?this.deselect():this.select()},getContentWidth:function(){return this.$name.offset().left-this.$node.offset().left+this.$name.width()+n.getPaddingWidth(this.$name)},setWidth:function(e){this.$node.width(e)},stopListening:function(t,n,r){e.View.prototype.stopListening.call(this,t,n,r),this._removeDomEventListeners()},_initWrappers:function(){this.$element=this.$node.children(".folder-tree-node-element"),this.$elementContent=this.$element.children(".folder-tree-node-element-content"),this.$expandBtn=this.$elementContent.children(".folder-tree-node-expand-btn"),this.$infoContainer=this.$elementContent.children(".folder-tree-node-info-container"),this.$name=this.$infoContainer.children(".folder-tree-node-name"),this.$children=this.$node.children(".folder-tree-node-children")},_isRootFolder:function(){return this.model.get("id")===this.options.rootId},_isFetched:function(){return this.model.get("members")},_getName:function(){return this.model.get("name")},_getSelectedId:function(){return this.options.uiModel.get("selected")?this.model.id:undefined},_hasChildFolder:function(){return this.model.get("items").any(function(e){return e.isFolder()})},_showChildren:function(t){if(!this._isFetched())return;t?(this.render(),this.$children.slideDown("fast",_.bind(function(){this._triggerViewEvent(e.ViewEvents.INVALIDATE_WIDTH)},this))):this.$children.slideUp("fast",_.bind(function(){this.render(),this._triggerViewEvent(e.ViewEvents.INVALIDATE_WIDTH)},this))},_renderChildNodes:function(){var t,n,r,i,s,o;t=this.model.get("items");if(!t||t.length===0)return;t.each(_.bind(function(t){if(!t.isFolder())return!0;n=t.id,r=this.getChildViewById(n),r||(i=e.modelFactory.create("FolderModel",{id:n,name:t.get("name")}),s=e.uiModelFactory.create("FolderTreeNodeUiModel"),o=_.extend({},this.options,{el:this.$children,model:i,uiModel:s,indentLevel:this.options.indentLevel+1}),r=new e.FolderTreeNodeView(o),this.addChildView(r,n)),r.render()},this))},_addDomEventListeners:function(){this.$element.on("click",this._onElementClick).on("dblclick",this._onElementDoubleClick),this.$node.on("click",this._onElementClick).on("keydown",this._onNodeKeyDown),this.$expandBtn.on("click",this._onExpandButtonClick)},_removeDomEventListeners:function(){this.$element.off("click",this._onElementClick).off("dblclick",this._onElementDoubleClick),this.$node.off("click",this._onElementClick).off("keydown",this._onNodeKeyDown),this.$expandBtn.off("click",this._onExpandButtonClick)},_onElementClick:function(t){t.stopPropagation(),!t.ctrlKey&&!t.metaKey?(this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION),this.select()):(this.options.uiModel.get("selected")||this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION),this.toggleSelect())},_onElementDoubleClick:function(){var t=this.model.get("child_folder_count");t&&t>0?this.expand():(this.select(),this._triggerViewEvent(e.ViewEvents.SELECTION_COMMIT,{id:this._getSelectedId()}))},_onExpandButtonClick:function(e){e.stopPropagation(),this.isExpanded()?this.collapse():this.expand()},_focusTimeout:null,_onNodeKeyDown:function(t){var n=$(t.target),r=this.$el,i=!1,s=r.closest("[role=tree]"),o=s.find(":focusable"),u,a=o.index(n),f=this;if(n.closest(r).length===0)return!0;clearInterval(this._focusTimeout);switch(t.which){case 13:this._getSelectedId()?this.isExpanded()?!t.ctrlKey&&!t.metaKey?(this.select(),this._triggerViewEvent(e.ViewEvents.SELECTION_COMMIT,{id:this._getSelectedId()})):this._onElementClick(t):this._onElementDoubleClick():this._onElementClick(t),i=!0;break;case 35:u=o.last(),i=!0;break;case 36:u=o.first(),i=!0;break;case 37:this.isExpanded()?this.collapse():this._isRootFolder()||(u=r.closest(":focusable")),i=!0;break;case 38:u=o.filter(":lt("+a+"):last"),i=!0;break;case 39:this.isExpanded()||(this.expand(),this._isFetched()?u=this.$node.find(":focusable:first"):this._focusTimeout=_.delay(function(){u=f.$node.find(":focusable:first"),u.length>0&&(u.focus().trigger("click"),clearInterval(f._focusTimeout))},100)),i=!0;break;case 40:u=o.filter(":gt("+a+"):first"),i=!0}i&&this._consumeEvent(t),u&&u.length>0&&u.focus().trigger("click")},_addModelEventListeners:function(){var e=this.model;this.listenTo(e,"change:members",this._onFolderMembersChange).listenTo(e,"change:child_object_types",this._onChildObjectTypesChange)},_onFolderMembersChange:function(){this._showChildren(this.isExpanded())},_getRootFolderChildCount:function(){var e=0,t=this.model.get("items");return t&&t.length>0&&t.each(function(t){t.isFolder()&&(e+=1)}),e},_onChildObjectTypesChange:function(e,t){e.set("child_folder_count",this._getFolderChildCount(t,"folder"))},_getFolderChildCount:function(e,t){var n=0;return e&&_.each(e,function(e){if(e.value===t)return n=e.count,!1}),n},_addUiModelEventListeners:function(){var e=this.options.uiModel;this.listenTo(e,"change:expanded",this._onExpandedChange).listenTo(e,"change:selected",this._onSelectedChange)},_onExpandedChange:function(t,n){n?this._isFetched()?this._showChildren(!0):(this.render(),this._triggerViewEvent(e.ViewEvents.GET_FOLDER_ITEMS,{folderModel:this.model,modal:!1})):this._showChildren(!1)},_onSelectedChange:function(){this.render(),this._triggerViewEvent(e.ViewEvents.SELECTION_CHANGE,{id:this._getSelectedId()})}})}),define("core/dev/views/folder-tree-view",["core/ac-core","i18n!core/nls/ui-strings","core/utils/view-util","core/views/view","core/views/folder-tree-node-view","core/views/view-events"],function(e,t,n){e.FolderTreeView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener()},render:function(){e.View.prototype.render.call(this),this._renderRootNode()},_renderRootNode:function(){var n=this.options,r=this._rootNodeView,i,s,o;r||(n.pluginId==="scan_files"?(i=n.folderModel.scanId,s=e.modelFactory.create("FolderModel",{id:i,name:n.folderModel.scanFolderName})):(i=n.appApi.folderApi.getRootFolderId(n.pluginId),s=e.modelFactory.create("FolderModel",{id:i,name:t.HOME})),o=e.uiModelFactory,n=_.extend({},n,{model:s,rootId:i,treeUiModel:o.create("FolderTreeUiModel"),uiModel:o.create("FolderTreeNodeUiModel")}),r=this._rootNodeView=new e.FolderTreeNodeView(n),this.addChildView(r),r.expand(),r.select())},_onViewEvent:function(t,n){t===e.ViewEvents.INVALIDATE_WIDTH?_.defer(this._updateTreeWidth):(t===e.ViewEvents.CLEAR_SELECTION?this._clearTreeSelection():this.trigger(t,n),this._updateActiveDescendant())},_updateTreeWidth:function(){function t(t){var n=t.getContentWidth();n>e&&(e=n)}function r(t){t.setWidth(e)}var e=this.$el.width();n.isVerticalScrollBarPresent(this.$el)&&(e-=n.getScrollBarWidth()),this._rootNodeView.applyRecursively(t),this._rootNodeView.applyRecursively(r)},_clearTreeSelection:function(){function e(e){e.deselect()}this._rootNodeView.applyRecursively(e)},_onFocusIn:function(e){var t=$(e.target);if(!t.closest(".folder-tree-node").length)return;this._scrollNodeIntoView(e.target),this._updateActiveDescendant(e.target)},_scrollNodeIntoView:function(e){var t=this.$el.offset().top,n=this.$el.height(),r=$(e),i=r.find(".folder-tree-node-element"),s=i.length?i.offset().top:r.offset().top,o=i.length?i.height():r.height(),u=s-t,a=this.$el.scrollTop(),f;if(u<0||u+o>n)f=u<0?u:u+o-n,this.$el.scrollTop(Math.max(a+f,0))},_updateActiveDescendant:function(e){var t=this.$(".folder-tree-node"),n=e?$(e):this.$(".folder-tree-node[aria-selected=true]"),r=n.attr("id");n.length&&(this.$el.attr({"aria-activedescendant":r,tabindex:0}),t.not(n).attr({tabindex:-1}))}})}),define("core/dev/views/move-dlg-view",["core/ac-core","core/templates/move-dlg-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/util","core/utils/view-util","core/utils/sc-analytics","core/views/dialog-view","core/views/folder-tree-view"],function(e,t,n,r,i,s,o){e.MoveDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .move-dlg-move-btn":"_onMoveClick","click .move-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.DialogView.prototype.render.call(this),this._logSiteCatalystEvent(o.SHOWN),this._appendToDialog(this._template({move:n.MOVE,cancel:n.CANCEL})),this._setTitle(this._getTitle()),this._initWrappers(),this._center(),i.isWindows()&&s.swapChildElements(this.$dlgControlBtns),this._truncateText(),this._initTabLimits(),this._renderChildViews(),this._updateControls(),this},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$tree=this.$(".move-dlg-folder-tree"),this.$dlgControlBtns=this.$(".move-dlg-btns"),this.$moveBtn=this.$(".move-dlg-move-btn"),this.$cancelBtn=this.$(".move-dlg-cancel-btn")},_getTitle:function(){var e,t,r,i;return t=this.options.selectionUiModel.getSelectionCountByType(),r=t.numFiles,i=t.numFolders,r===0?i===1?e=n.MOVE_FOLDER_TO:e=n.MOVE_FOLDERS_TO:r===1?i===0?e=n.MOVE_FILE_TO:i===1?e=n.MOVE_FILE_AND_FOLDER_TO:e=n.MOVE_FILE_AND_FOLDERS_TO:i===0?e=n.MOVE_FILES_TO:i===1?e=n.MOVE_FILES_AND_FOLDER_TO:e=n.MOVE_FILES_AND_FOLDERS_TO,e},_truncateText:function(){r.truncateButtonLabel(this.$moveBtn),r.truncateButtonLabel(this.$cancelBtn)},_updateControls:function(){s.enableInput(this.$moveBtn,this._selectedFolderId),this.$tree.attr("aria-labelledby",this.$dialogTitle.attr("id")),s.descendantHasFocus(this.$el)||this.$tree.find(":focusable:first").focus(),this._initTabLimits()},_renderChildViews:function(){this._renderChildView("_folderTreeView",e.FolderTreeView,this.$tree)},_getSiteCatalystContext:function(){return o.MOVE_DLG},_onMoveClick:function(){var t=this.options,n=[],r=e.Util;this.close(),n=r.addToArray(n,t.scContext),n=r.addToArray(n,this._getSiteCatalystContext()),t.parentView._triggerViewEvent(e.ViewEvents.MOVE_DLG_MOVE,{id:this._selectedFolderId,scContext:n})},_onCancelClick:function(){this.close(!1)},_onViewEvent:function(t,n){t===e.ViewEvents.SELECTION_CHANGE?this._onFolderTreeSelectionChange(n):t===e.ViewEvents.SELECTION_COMMIT?this._onFolderTreeSelectionCommit(n):this.trigger(t,n)},_onFolderTreeSelectionChange:function(e){this._selectedFolderId=e.id,this._updateControls()},_onFolderTreeSelectionCommit:function(e){this._onFolderTreeSelectionChange(e),this._onMoveClick()}})}),define("core/dev/ops/dialogs/showing-move-dlg-op",["core/ac-core","core/ops/op","core/views/move-dlg-view"],function(e){return e.ShowingMoveDlgOp=e.Op.extend({run:function(){var t;return t=new e.MoveDlgView(_.extend({},this.options,{folderUiModel:e.uiModelFactory.create("FolderUiModel")})),t.open()}}),e.ShowingMoveDlgOp}),define("core/dev/templates/quota-warning-dlg-template",[],function(){return'<div class="quota-warning-dlg-para quota-warning-dlg-msg">    <%- msg %></div> <div class="quota-warning-dlg-para quota-warning-dlg-upgrade_msg">   <%- upgradeMsg %></div> <div class="quota-warning-dlg-btns">    <input class="control-button button-grey dialog-control-button ui-theme theme-text                  quota-warning-dlg-ok-btn"           type="button" id="quota-warning-dlg-ok-btn"           aria-label="<%= okBtn %>"           value="<%= okBtn %>"/>     <input class="control-button dialog-control-button                  quota-warning-dlg-learn-more-btn"           type="button" id="quota-warning-dlg-learn-more-btn"           aria-label="<%= learnMoreBtn %>"           value="<%= learnMoreBtn %>"/></div>'}),define("core/dev/views/quota-warning-dlg-view",["core/ac-core","core/templates/quota-warning-dlg-template","core/utils/util","core/utils/view-util","i18n!core/nls/ui-strings","core/utils/truncate","core/views/dialog-view"],function(e,t,n,r,i,s){e.QuotaWarningDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .quota-warning-dlg-ok-btn":"_onOkClick","click .quota-warning-dlg-learn-more-btn":"_onLearnMoreClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this._template=_.template(t)},render:function(){var t=this.options;return e.DialogView.prototype.render.call(this),this._appendToDialog(this._template({msg:t.msg,upgradeMsg:t.upgradeMsg,learnMoreBtn:t.actionBtn,okBtn:i.CLOSE})),this._initWrappers(),t.actionBtn===""&&this.$actionBtn.hide(),this._center(),n.isWindows()&&r.swapChildElements(this.$dlgControlBtns),this._truncateText(),this.$okBtn.focus(),this},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$title=this.$(".about-dlg-title"),this.$dlgControlBtns=this.$(".quota-warning-dlg-btns"),this.$okBtn=this.$(".about-dlg-ok-btn"),this.$actionBtn=this.$(".quota-warning-dlg-learn-more-btn")},_truncateText:function(){s.truncateElementText(this.$title),s.truncateButtonLabel(this.$okBtn)},_onOkClick:function(){this.close()},_onLearnMoreClick:function(){this._triggerViewEvent(e.ViewEvents.MANAGE_SUB_CLICK),this.close()}})}),define("core/dev/ops/dialogs/showing-quota-warning-dlg-op",["core/ac-core","i18n!core/nls/ui-strings","core/utils/num-util","core/ops/op","core/views/quota-warning-dlg-view"],function(e,t,n){return e.ShowingQuotaWarningDlgOp=e.Op.extend({run:function(){var r=this.options,i,s,o=r.storageQuotaModel,u,a,f,l,c,h,p,d,v=r.quotaDlgUiModel,m=e.QuotaDlgUiModel;i=o.get("storage_used"),s=o.get("storage_quota");if(s===0)return this._getResolvedPromise();h=i/s,c=n.formatSize(s*n.GB),l=n.formatSize(i*n.GB),a=t.QUOTA_WARNING_DLG_TITLE_EXCEEDED,p=t.LEARN_MORE,d=t.QUOTA_WARNING_DLG_MSG_UPGRADE;if(r.uploading)f=_.template(t.QUOTA_WARNING_DLG_MSG_UPLOAD_EXCEEDED,{allotment:c}),s===m.MAX_POSSIBLE_QUOTA_GB&&(p="",d=t.QUOTA_WARNING_DLG_MSG_YOU_WILL_NEED);else if(h>m.ERROR_THRESHOLD)f=_.template(t.QUOTA_WARNING_DLG_MSG_LOGIN_EXCEEDED,{using:l,allotment:c}),p=t.UPGRADE,d=t.QUOTA_WARNING_DLG_MSG_YOU_MAY_VIEW;else if(h>m.WARNING_THRESHOLD){a=t.QUOTA_WARNING_DLG_TITLE_RUNNING_OUT,f=_.template(t.QUOTA_WARNING_DLG_MSG_RUNNING_OUT,{using:l,allotment:c});if(!(!v.get("running_out_shown")&&h<m.ERROR_THRESHOLD))return this._getResolvedPromise();v.set("running_out_shown",!0),r.appApi.usersMeApi.saveCommonPrefs()}return u=new e.QuotaWarningDlgView(_.extend({},r,{title:a,msg:f,upgradeMsg:d,actionBtn:p})),u.open()}}),e.ShowingQuotaWarningDlgOp}),define("core/dev/templates/rename-dlg-template",[],function(){return'<div role="alert" class="rename-dlg-error theme-text"></div> <div class="rename-dlg-name-container">    <input class="rename-dlg-name <%= locale %> ui-theme theme-container theme-text" type="text"           title="<%- title %>"           value="<%- name %>" /></div> <div class="dialog-buttons">    <input class="rename-dlg-cancel-btn control-button                  dialog-control-button                  button-grey ui-theme theme-text"           type="button"           id="rename-dlg-cancel-btn"           aria-label="<%= cancel %>"           value="<%= cancel %>" />    <input class="rename-dlg-rename-btn control-button                  dialog-control-button disabled theme-button theme-button-label"           type="button"           id="rename-dlg-rename-btn"           aria-label="<%= rename %>"           value="<%= rename %>"           disabled="disabled" /></div>'}),define("core/dev/views/rename-dlg-view",["core/ac-core","core/templates/rename-dlg-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/util","core/utils/view-util","core/utils/sc-analytics","core/views/dialog-view"],function(e,t,n,r,i,s,o){e.RenameDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"keydown .rename-dlg-name":"_onNameKeyDown","keyup   .rename-dlg-name":"_onNameKeyUp","paste   .rename-dlg-name":"_onNamePaste","click   .rename-dlg-rename-btn":"_onRenameClick","click   .rename-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this._template=_.template(t),this._addUiModelEventListeners()},render:function(){var t=this._getName(),r=this._getTitle();return e.DialogView.prototype.render.call(this),this.options.addedId||this._logSiteCatalystEvent(o.SHOWN),this._appendToDialog(this._template({name:t,rename:n.RENAME,cancel:n.CANCEL,title:r,locale:e.Locale.getLocale()})),this._setTitle(r),this._initWrappers(),s.setElementFontByLocale(this.$el,"input"),this._center(),i.isWindows()&&s.swapChildElements(this.$dlgControlBtns),this._initTabLimits(),_.defer(this._selectName),this._truncateText(),this._updateControls(),this},open:function(){var t=e.DialogView.prototype.open.call(this);return this._origName=this._getName(),t},close:function(t,n){var r=this.options,i=r.appApi.manipulationApi,s=this._origName,o,u;u=_.bind(function(){e.DialogView.prototype.close.call(this,t,n)},this),t?u():(o=this._getMovedFrom(),o?i.moveToFolderAs(_.extend(r,{noScEvent:!0}),r.id,r.object_type,o,this._getExistingName()).always(u):r.addedId?i.deleteItem(_.extend(r,{noScEvent:!0}),r.id,r.object_type).always(u):this._getCurrentName().then(_.bind(function(t){t.name!==s?e.opFactory.create("RenamingItemOp",_.extend({},r,{name:s,noScEvent:!0})).run().always(u):u()},this),function(){u()}))},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$error=this.$(".rename-dlg-error"),this.$name=this.$(".rename-dlg-name"),this.$dlgControlBtns=this.$(".dialog-buttons"),this.$renameBtn=this.$(".rename-dlg-rename-btn"),this.$cancelBtn=this.$(".rename-dlg-cancel-btn")},_isTargetFile:function(){return this.options.object_type==="file"},_getTitle:function(){return this._isTargetFile()?n.RENAME_FILE:n.RENAME_FOLDER},_getName:function(){return this.options.name},_setName:function(e){this.options.name=e,this.$name.val(e)},_getExistingName:function(){return this.options.existingName},_getMovedFrom:function(){return this.options.movedFrom},_getNewName:function(){return $.trim(this.$name.val())},_getCurrentName:function(){var t;return this._isTargetFile()?t="GettingAssetMetadataOp":t="GettingFolderMetadataOp",e.opFactory.create(t,_.extend({},this.options,{modal:!1})).run()},_truncateText:function(){r.truncateButtonLabel(this.$renameBtn),r.truncateButtonLabel(this.$cancelBtn)},_updateControls:function(){var e=this._getNewName(),t;t=e.length>0&&e!==this._getExistingName()&&!this._isRenaming,s.enableInput(this.$renameBtn,t),this._initTabLimits()},_selectName:function(){var e=this.$name,t,n;t=e.val(),n=t.lastIndexOf("."),n>0&&this._isTargetFile()?s.selectText(e.get(0),0,n):e.select(),e.focus()},_maybeRename:function(){var t=this._getNewName(),n=this._dialogUiModel,r;if(t.length===0)return;if(t===this._getName()){n&&(r=n.get("error"),(!r||r.renamed_details)&&this._logSiteCatalystEvent(o.SUCCESS)),this.close(!0);return}this._triggerViewEvent(e.ViewEvents.RENAME_ITEM_FROM_DLG,{newName:t,dialogUiModel:this._dialogUiModel,scContext:this._getFullScContext()})},_showDuplicateNameError:function(e,t,r){e?(this.$error.text(_.template(n.RENAME_NAME_IN_USE,{existingType:r?n.FILE:n.FOLDER,name:t,renamedType:this._isTargetFile()?n.FILE:n.FOLDER})),this.$error.slideDown("fast")):this.$error.slideUp("fast",_.bind(function(){this.$error.hide()},this))},_showIllegalNameError:function(e){var t=this.$error;e?(t.text(_.template(n.RENAME_ILLEGAL_NAME,{renamedType:this._isTargetFile()?n.FILE:n.FOLDER})),t.slideDown("fast")):(t.slideUp("fast",function(){t.hide()}),this._dialogUiModel.set("error",undefined,{silent:!0}))},_getSiteCatalystContext:function(){return this.options.scContext&&_.indexOf(this.options.scContext,o.DUP_FILE_NAME_DLG)!==-1?o.RENAME_FILE:o.RENAME_DLG},_onNameKeyDown:function(e){this._showDuplicateNameError(!1),this._showIllegalNameError(!1),e.which===13&&s.isInputEnabled(this.$renameBtn)&&this._maybeRename()},_onNameKeyUp:function(){this._updateControls()},_onNamePaste:function(){_.defer(this._updateControls)},_onRenameClick:function(e){var t=$(e.currentTarget);if(!s.isInputEnabled(t))return;this._maybeRename()},_onCancelClick:function(){this.close(!1)},_addUiModelEventListeners:function(){var t=e.uiModelFactory.create("DialogUiModel");this._dialogUiModel=t,this.listenTo(t,"change:close",this._onCloseChange).listenTo(t,"change:error",this._onErrorChange)},_onCloseChange:function(e,t){this.close(t)},_onErrorChange:function(t,n){var r=n.renamed_details,i,s,u,a,f=e.ErrorUiModel;if(r)i=r.duplicate_of;else{u=n.error;if(u){a=u.code;if(a===f.CODE_ILLEGAL_NAME||a===f.CODE_INVALID_PARAMETER){this._showIllegalNameError(!0),this._selectName();return}}}if(!r||!i){this.close();return}this._isTargetFile()?this._logSiteCatalystEvent([o.ERROR,o.FILE_EXISTS]):this._logSiteCatalystEvent([o.ERROR,o.FOLDER_EXISTS]),s=r.original_name,this._showDuplicateNameError(!0,s,i.object_type==="file"),this._setName(n.renamed_to||n.renamed_details.original_name),this._selectName()}})}),define("core/dev/ops/dialogs/showing-rename-dlg-op",["core/ac-core","core/ops/op","core/views/rename-dlg-view"],function(e){return e.ShowingRenameDlgOp=e.Op.extend({run:function(){var t=this.options,n;return n=new e.RenameDlgView(t),n.open(t.parentView)}}),e.ShowingRenameDlgOp}),define("core/dev/ops/downloading/downloading-asset-if-exists-op",["core/ac-core","core/utils/util","core/utils/file-types","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,n,r){return e.DownloadingAssetIfExistsOp=e.Op.extend({run:function(){var i=this.options,s=e.opFactory,o,u=this._logFormScEvent,a,f,l,c,h,p=!1;return c=_.extend({},i,{async:t.isIE9orBelow()}),t.isCEF()&&i.itemModel&&i.itemModel.get("content_type")==="application/pdf"?s.create("OpeningDocInReaderOp",i).run():(f=s.create("DownloadingAssetOp",c),h=s.create("DownloadingFormOp",c),a=s.create("GettingDownloadTicketOp",c),o=s.create("GettingAssetMetadataOp",c),l=s.create("ExecutingPluginsPreDownloadOp",_.extend({},i,{pluginsUiModel:i.fullPreviewOverlaysUiModel})),l.run().then(function(){o.run().then(function(e){return n.isFormMimeType(e.content_type)?h.run():i.numForms>0?(u(null,null,"Tools:FSS:Form:Output:WarnDlg:FilesTab:MultiNoDwnld:Shown"),i.appApi.dialogApi.displayHtmlAlert(i.appApi.dialogApi.SEVERITY_WARNING,r.DOWNLOAD_FORM_TITLE,r.DOWNLOAD_FORMS_EXCLUDED_MESSAGE,r.CONTINUE,r.CANCEL).then(function(){return $.Deferred().resolve(i.id,!1).promise()},function(){return $.Deferred().reject().promise()})):$.Deferred().resolve(i.id,!1).promise()}).then(function(e,t){i.id=e,p=t,a.run(!1,i.id).then(function(e){f.options.id=i.id,f.run(e.download_ticket,p)})})}))}}),e.DownloadingAssetIfExistsOp}),define("core/dev/ops/downloading/downloading-asset-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.DownloadingAssetOp=e.Op.extend({run:function(n,r){var i,s,o;return i=e.modelFactory.create("AssetModel",this.options),r?s=i.getUnmanagedDownloadUrl(n):s=i.getDownloadUrl(n),t.isTouchDevice()?(o=window.onbeforeunload,window.onbeforeunload=function(){window.onbeforeunload=o},window.open(s)):$("#download-iframe").attr("src",s),this._getResolvedPromise()}}),e.DownloadingAssetOp}),define("core/dev/ops/downloading/downloading-form-op",["core/ac-core","core/utils/http-util","plugins-common/ac-plugins","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,n,r){var i="Tools:FSS:Form:Output:",s=i+"WarnDlg:FilesTab:DwnldPDF:Shown",o=i+"SavePDF:1-Started:FilesTab",u=i+"SavePDF:2-Completed:FilesTab",a=i+"Completed",f=i+"SavePDF:Error",l=i+"SavePDF:Error:";return e.DownloadingFormOp=e.Op.extend({run:function(){var e,i,c=this.options,h,p=this._logFormScEvent,d,v="ServerError",m=$.Deferred(),g=c.appApi,y=g.pluginsApi,b=g.dialogApi,w=g.networkApi;return e=y.getBaseUrl(n.FILLSIGN)+"/api/createpdf",i="POST",h=_.extend({},t.getRequestHeaders(i),{"Content-Type":"application/json"}),c=_.extend({},c,{type:i,headers:h,dataType:"json",modal:!0,async:!0,data:JSON.stringify({formID:c.id,locale:g.localeApi.getLocale()})}),p(null,null,s),b.displayHtmlAlert(b.SEVERITY_WARNING,r.DOWNLOAD_FORM_TITLE,r.DOWNLOAD_FORM_MESSAGE,r.CONTINUE,r.CANCEL).then(function(){p(null,o,o),w.throttledAjax(e,c).then(function(e){_.has(e,"assetID")?(p(a,u,u),m.resolve(e.assetID,!0)):m.reject()},function(e,t){try{if(t==="timeout")v="TimeOut";else{d=JSON.parse(e.responseText);switch(d.error.code){case"Timeout":v="TimeOut";break;case"RestrictedEditPermission":v="PermSet"}}}catch(n){}p(f,l+v,l+v+":FilesTab"),m.reject()})},function(){m.reject()}),m.promise()}}),e.DownloadingFormOp}),define("core/dev/ops/downloading/downloading-zip-op",["core/ac-core","core/utils/util","core/utils/http-util","core/ops/op"],function(e,t,n){return e.DownloadingZipOp=e.Op.extend({run:function(e){var r,i,s;return i=new Date,s=i.getTimezoneOffset(),r=this.options.appApi.baseFilesUrisApi.getDownloadUri()+"archive/zip/ticket?dlticket="+encodeURIComponent(e)+"&tzo="+encodeURIComponent(s)+"&html_errors=true&"+n.getClientIdQueryParam(),t.isTouchDevice()?window.open(r):$("#download-iframe").attr("src",r),this._getResolvedPromise()}}),e.DownloadingZipOp}),define("core/dev/models/rna/rna-model",["core/ac-core","core/constants/odm-constants","core/utils/date-util"],function(e,t,n){return e.RNAModel=Backbone.Model.extend({shouldCache:!0,readerContext:"avAppCtx",initialize:function(e,n){var r=new $.Deferred;Backbone.Model.prototype.initialize.call(this,e,n);switch(this.url){case"pdm":this._contextPromise=r.promise(),window.odm.createContext("processType=p5:",this._onContextCreation,r,this);break;case"reader":this._contextPromise=r.promise(),window.odm.createContext("processType=p6:",this._onContextCreation,r,this,this.shouldCache,this.readerContext);break;case"cefBrowser":this._contextPromise=r.promise(),window.odm.createContext("processType=p3:",this._onContextCreation,r,this);break;default:if(n._proxy){var i,s=0;this.models||(this.models={}),n.shouldCache!==undefined&&(this.shouldCache=n.shouldCache),this._proxy=n._proxy,this._contextId=this._proxy._context,this._proxy._addEventListener("all",this._onProxyEvent,null,this);if(this._proxy._type===t.MAP_PROXY){i=this._proxy._getProps();for(s=0;s<i.length;s++)this.set(i[s],this._proxy[i[s]])}else if(this._proxy._type===t.VECTOR_PROXY){i=this._proxy._size;for(s=0;s<i;s++)this.set(s,this._proxy[s])}this.id=this._proxy._id}n._pproxy&&(this._pproxy=n._pproxy)}},hasProperty:function(e){return this._proxy?typeof this._proxy=="string"?undefined:this._proxy._hasProperty(e):Backbone.Model.prototype.get.call(this,e)},has:function(e){if(!this._proxy)return Backbone.Model.prototype.get.call(this,e)},get:function(e){var n,r;return this._proxy?(n=Backbone.Model.prototype.get.call(this,e),undefined===n?(n=this.fetchProp(e),n):null===n?n:(n._type===t.PRIMITIVE_PROXY?n=n._value:n._type!==t.MAP_PROXY&&(n._type===t.VECTOR_PROXY?n._isPrimitiveArray()&&(r=n.toJSON(),n=r):n._type===t.FUNCTION_PROXY),this.shouldCache===!1&&(n._type===t.PRIMITIVE_PROXY||n._type===t.MAP_PROXY||n._type===t.VECTOR_PROXY)&&this._proxy[e],n)):Backbone.Model.prototype.get.call(this,e)},set:function(n,r,i){var s,o,u,a;i||(i={});if(!this._proxy||!r||i.localAttr)return i.unset&&!i.localAttr&&(a=Backbone.Model.prototype.get.call(this,n)),Backbone.Model.prototype.set.call(this,n,r,i);s=this.has(n),s?(a=Backbone.Model.prototype.get.call(this,n),o=a._type):o=r._type,r._id?u=!0:u=!1,o===t.PRIMITIVE_PROXY?u?(Backbone.Model.prototype.set.call(this,n,r,i),r._addEventListener("all",this._onProxyEvent,n,this)):this._proxy[n]._set(r):o===t.MAP_PROXY||o===t.VECTOR_PROXY?(this.models[n]||(this.models[n]=o===t.MAP_PROXY?e.RNAModel:e.RNACollection),s||u&&this.models[n]&&(r=new this.models[n](undefined,_.extend(i,{_proxy:r,_pproxy:this._proxy,shouldCache:this.shouldCache}))),u?Backbone.Model.prototype.set.call(this,n,r,i):this._proxy[n]._set(r)):o===t.FUNCTION_PROXY},fetchProp:function(e){var t=new $.Deferred,n,r;return this._proxy?(n=Backbone.Model.prototype.get.call(this,e),undefined===n?(n=t.promise(),r=this._proxy[e],r._done(this._onLazyPropFetchSuccess,this,{deferred:t,attr:e}),r._fail(this._onLazyPropFetchFailure,this,{deferred:t})):n=t.resolve(e,this.get(e)).promise(),n):t.reject().promise()},on:function(e,t,n){if(!this._proxy)return;return Backbone.Model.prototype.on.call(this,e,t,n)},off:function(e,t,n){if(!this._proxy)return;return Backbone.Model.prototype.off.call(this,e,t,n)},invoke:function(e,t){var n=new $.Deferred,r=[],i,s;for(i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t=r,this._proxy?(s=this._proxy[e]._invoke.apply(undefined,t),s._done(function(e,t){e===0?n.resolve(t):n.reject(t)}),s._fail(function(e,t){n.reject(t)}),n.promise()):n.reject().promise()},_pproxy:undefined,_proxy:undefined,_type:t.MAP_PROXY,_contextId:undefined,_contextPromise:undefined,_onProxyEvent:function(e,n,r){switch(e){case t.ADD_EVENT:if(!this.has(n.key)){var i=n.key;this.set(i,n.property)}break;case t.REMOVE_EVENT:var i=n.key,s=n.property;this.unset(i,s);break;case t.REPLACE_EVENT:var i=n.key,o=n.newVal;this.set(i,o);break;case t.CHANGE_EVENT:r&&this.trigger("change:"+r,this,n.newVal);break;default:this.trigger(e,this,n)}},_onLazyPropFetchSuccess:function(e,t,n,r){this._onProxyEvent("addProperty",{key:r.attr,property:n},null),r.deferred.resolve(r.attr,this.get(r.attr))},_onLazyPropFetchFailure:function(e,t,n,r){r.deferred.reject()},_onContextCreation:function(e,t,r,i){var s;n.logElapsedTime("after CreateContextResponse received from remote process "),this._proxy=t,this._contextId=t,_.each(r,_.bind(function(e,t){this.set(t,e)},this)),i&&i.resolve()}}),e.RNAModel}),define("core/dev/models/rna/rna-notification-model",["core/ac-core","core/models/rna/rna-model"],function(e,t){return e.RnaNotificationModel=t.extend({initialize:function(e,n){t.prototype.initialize.call(this,e,n)}},{NOTIFICATION_STATES:{NOT_STARTED:-1,FAILED:0,IN_PROGRESS:1,COMPLETED:2,DOWNLOADED:3,DONE:4},NOTIFICATION_OPERATIONS:{UPLOAD:"upload",CONVERT:"convert",DOWNLOAD:"download",PROCESS:"process"},DOWNLOAD_LINK_CLICK_ACTION:{SAVE_FILE:"saveFile",OPEN_FILE:"openFile"}}),e.RnaNotificationModel}),define("core/dev/ops/downloading/downloading-zip-start-op",["core/ac-core","core/utils/util","i18n!core/nls/ui-strings","core/models/rna/rna-notification-model","core/ops/op"],function(e,t,n,r){return e.DownloadingZipStartOp=e.Op.extend({run:function(){var i=this.options,s=i.appApi,o=s.dialogApi,u=$.Deferred(),a=this._logFormScEvent,f=e.opFactory,l,c,h,p,d;return p=_.extend({},i,{async:t.isIE9orBelow()}),t.isCEF()?(c=f.create("DownloadingZipFileOp",i),d=i.notificationObj):c=f.create("DownloadingZipOp",p),l=f.create("GettingDownloadTicketOp",p),h=f.create("ExecutingPluginsPreDownloadOp",_.extend({},i,{pluginsUiModel:i.fullPreviewOverlaysUiModel})),h.run().then(function(){return i.id_list.length===0?(a(null,null,"Tools:FSS:Form:Output:WarnDlg:FilesTab:MultiNoDwnld:Shown"),o.displayHtmlAlert(s.dialogApi.SEVERITY_ERROR,n.DOWNLOAD_FORM_TITLE,n.DOWNLOAD_FORMS_MESSAGE,n.OK).then(function(){return u.reject().promise()})):i.numForms>0?(a(null,null,"Tools:FSS:Form:Output:WarnDlg:FilesTab:MultiNoDwnld:Shown"),o.displayHtmlAlert(o.SEVERITY_WARNING,n.DOWNLOAD_FORM_TITLE,n.DOWNLOAD_FORMS_EXCLUDED_MESSAGE,n.CONTINUE,n.CANCEL).then(function(){return u.resolve().promise()},function(){return u.reject().promise()})):u.resolve().promise()}).then(function(){return l.run(!1,i.id_list)}).then(function(e){var n;return t.isCEF()?(n=c.run(e.download_ticket),n[1].done(function(e){if(d){var t=d.get("userData"),n={};try{n=JSON.parse(t)}catch(i){}e.errorSet?s.rnaApi.done(function(e){e.notificationAPI.removeNotification(d.get("notificationID"))}):(e.downloadedFileName&&(n.downloadedFileName=e.downloadedFileName),d.invoke("setProperty",{operationType:r.NOTIFICATION_OPERATIONS.DOWNLOAD,userData:JSON.stringify(n)}))}}),n[0]):c.run(e.download_ticket)})}}),e.DownloadingZipStartOp}),define("core/dev/ops/getting/getting-asset-metadata-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingAssetMetadataOp=e.Op.extend({run:function(n){var r=this.options,i,s;return n&&(r=_.extend({},r,{id:n})),i=e.modelFactory.create("AssetModel",r),s="GET",r.appApi.networkApi.throttledAjax(i.getMetadataUrl(),_.extend({type:s,headers:t.getRequestHeadersNoClientId(s),dataType:"json"},r))}}),e.GettingAssetMetadataOp}),define("core/dev/ops/getting/getting-base-cloud-uris-op",["core/ac-core","core/ops/op"],function(e){return e.GettingBaseCloudUrisOp=e.Op.extend({run:function(){var t=Ac.baseCloudUrisModel,n;return t&&!_.isEmpty(t.attributes)?$.Deferred().resolve(t).promise():(Ac.baseCloudUrisModel=t=this.options.baseCloudUrisModel,_.each(Ac.Core,function(e){e.baseCloudUrisModel=t}),n=t.fetch({modal:!1}).done(function(){e.buildTaggedVersion=n.getResponseHeader("X-Server")}),n)}}),e.GettingBaseCloudUrisOp}),define("core/dev/ops/getting/getting-base-files-uris-op",["core/ac-core","core/ops/op"],function(e){return e.GettingBaseFilesUrisOp=e.Op.extend({run:function(){var e=Ac.baseFilesUrisModel,t;return e&&!_.isEmpty(e.attributes)?$.Deferred().resolve(e).promise():(Ac.baseFilesUrisModel=e=this.options.baseFilesUrisModel,_.each(Ac.Core,function(t){t.baseFilesUrisModel=e}),t=e.fetch({modal:!1}).done(function(){e.set("server_version",t.getResponseHeader("X-Server"))}),t)}}),e.GettingBaseFilesUrisOp}),define("core/dev/ops/getting/getting-common-limits-op",["core/ac-core","core/ops/op"],function(e){return e.GettingCommonLimitsOp=e.Op.extend({run:function(){return this.options.commonLimitsModel.fetch({modal:!1})}}),e.GettingCommonLimitsOp}),define("core/dev/ops/getting/getting-connectors-ui-helpers-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.GettingConnectorsUiHelpersOp=e.Op.extend({run:function(){var e=this.options,n=e.connectorsUiHelpersModel,r,i,s;return n?t.isCEF()?(r=$.Deferred(),i=!!e.forceFresh,s=!!e.useReaderSyncMode,e.appApi.rnaApi.done(function(e){var t=e.getConnectorsUIHelperData(i,s);t.done(function(){r.resolve()}).fail(function(){r.reject()})}),r.promise()):n.fetch({global:!1}):this._getRejectedPromise()}}),e.GettingConnectorsUiHelpersOp}),define("core/dev/ops/getting/getting-document-cloud-storage-info-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.GettingDocumentCloudStorageInfoOp=e.Op.extend({run:function(){var e=!1,n=this.options,r=$.Deferred(),i=!1;return t.isCEF()?n.appApi.rnaApi.done(function(t){t.rnaServicesAPI.isEnterpriseUser()&&(e=!t.rnaServicesAPI.isPDFServicesEnabled(),i=!t.rnaServicesAPI.isEncryptionKeyValid()),e?r.reject({errorString:"NoAccessToPdfServices"}):i?r.reject({errorString:"NoAccessToPdfServices",errorCode:"UserEncrypted"}):r.resolve()}):r.resolve(),r.promise()}}),e.GettingDocumentCloudStorageInfoOp}),define("core/dev/ops/getting/getting-download-ticket-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingDownloadTicketOp=e.Op.extend({run:function(e,n){var r,i,s,o,u,a;return r=this.options.sessionModel.getDownloadTicketUrl(),e?(i="GET",s=_.extend({},this.options,{type:i,headers:t.getRequestHeaders(i),dataType:"json"}),u=s.data={id:n},e&&(u.public=!0),a=s.appApi.networkApi.throttledAjax(r,s)):(i="POST",o={id:n},e&&(o.public=!0),s=_.extend({},this.options,{type:i,headers:t.getRequestHeaders(i),data:JSON.stringify(o),dataType:"json"}),a=s.appApi.networkApi.throttledAjax(r,s)),a}}),e.GettingDownloadTicketOp}),define("core/dev/ops/getting/getting-folder-items-op",["core/ac-core","core/ops/op"],function(e){var t={};return e.GettingFolderItemsOp=e.Op.extend({run:function(e,n){var r=this.options,i=r.folderModel,s,o=!1,u,a=r.inFileSelectionDlg;return e=e||r.id,e&&i.set("id",e),n&&(o=!!n.excludeEtag),s=r.sortUiModel,s&&(r=_.extend({},r,{data:{orderby:s.get("order_by"),orderdirection:s.getOrderDirection()}})),r.limitedApi&&!o&&!a&&(r.etag=t[e]),i.fetch(r).then(function(n,r,i){var s;n&&(s=n.headers),s?u=s.ETag:u=i.getResponseHeader("ETag"),u&&!a&&(t={},t[e]=u)})}}),e.GettingFolderItemsOp}),define("core/dev/ops/getting/getting-folder-metadata-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingFolderMetadataOp=e.Op.extend({run:function(){var n=this.options,r,i;return r=e.modelFactory.create("FolderModel",n),i="GET",n.appApi.networkApi.throttledAjax(r.getMetadataUrl(),_.extend({type:i,headers:t.getRequestHeadersNoClientId(i),dataType:"json"},n))}}),e.GettingFolderMetadataOp}),define("core/dev/ops/getting/getting-system-folder-metadata-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingSystemFolderMetadataOp=e.Op.extend({run:function(n){var r=this.options,i,s;return r.id=n,i=e.modelFactory.create("SystemFoldersModel",r),s="GET",r.appApi.networkApi.throttledAjax(i.getMetadataUrl(n),_.extend({type:s,headers:t.getRequestHeadersNoClientId(s),dataType:"json"},r))}}),e.GettingSystemFolderMetadataOp}),define("core/dev/ops/getting/getting-folder-op",["core/ac-core","core/ops/op"],function(e){return e.GettingFolderOp=e.Op.extend({run:function(t,n){var r=this.options,i,s=e.opFactory,o,u,a=[];return t=t||r.id,n&&(i=n.force,_.isUndefined(n.ignoreErrors)||(a=n.ignoreErrors)),t!==r.folderModel.id||i?(o=s.create("GettingFolderItemsOp",r),u=s.create("GettingFolderPathOp",_.extend({},r,{ignoreErrors:a})),$.when(o.run(t),u.run(t))):this._getResolvedPromise()}}),e.GettingFolderOp}),define("core/dev/ops/getting/getting-folder-path-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingFolderPathOp=e.Op.extend({run:function(n){var r=this.options,i,s,o,u;return n&&(r=_.extend({},r,{id:n})),i=e.modelFactory.create("FolderModel",r),s="GET",r.appApi.networkApi.throttledAjax(i.getPathUrl(),_.extend({},r,{type:s,headers:t.getRequestHeadersNoClientId(s),dataType:"json",global:_.isUndefined(r.global)?!0:r.global,ignoreErrors:_.isUndefined(r.ignoreErrors)?[]:r.ignoreErrors})).done(function(e){return u=e.path,o=r.folderUiModel,o&&o.set("path",u),$.Deferred().resolve(u).promise()})}}),e.GettingFolderPathOp}),define("core/dev/ops/getting/getting-root-op",["core/ac-core","core/ops/op"],function(e){return e.GettingRootOp=e.Op.extend({run:function(){return this.options.rootModel.fetch()}}),e.GettingRootOp}),define("core/dev/ops/getting/getting-site-catalyst-base-file-op",["core/ac-core","core/ops/op"],function(e){e.GettingSiteCatalystBaseFileOp=e.Op.extend({run:function(){var e=this.options.appApi.networkConnectivityApi;return this._waitTime=2e3,this._maxWaitTime=36e5,this._deferred=$.Deferred(),window.s_adobe?this._deferred.resolve().promise():(e.isOnline()?this._loadSiteCatalystBaseFile():e.addNetworkOnlineChangeCallback(this._onIsOnlineChange),this._deferred.promise())},_onIsOnlineChange:function(e){e&&!window.s_adobe&&this._loadSiteCatalystBaseFile()},_loadSiteCatalystBaseFile:function(){var e,t=this.options.appApi;window.s_adobe?this._deferred.resolve():t.rnaApi.done(function(n){n.isSignedInReader()?(e=document.createElement("script"),e.src=Ac.config.getSiteCatalystUri(),e.type="text/javascript",document.getElementsByTagName("body")[0].appendChild(e)):t.sessionApi.addSignedInChangeCallback(this._loadSiteCatalystBaseFile)})}})}),define("core/dev/ops/getting/getting-sso-uri-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.GettingSsoUriOp=e.Op.extend({run:function(e){var n=this.options,r,i,s=Ac.baseCloudUrisModel.getApiUri();return _.isEmpty(s)?this._getRejectedPromise():(s+="session/sso_uri",r="GET",i=t.getRequestHeaders(r,n,!1),e&&(e.charAt(0)==="/"&&(e=e.substr(1)),s=s+"?path=/"+e),n.appApi.networkApi.throttledAjax(s,{type:r,headers:i}))}}),e.GettingSsoUriOp}),define("core/dev/ops/getting/getting-storage-quota-op",["core/ac-core","core/ops/op"],function(e){return e.GettingStorageQuotaOp=e.Op.extend({run:function(){return this.options.storageQuotaModel.fetch({modal:!1})}}),e.GettingStorageQuotaOp}),define("core/dev/ops/getting/getting-system-folders-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.GettingSystemFoldersOp=e.Op.extend({run:function(){var e=this.options,n=e.systemFoldersModel,r,i,s;return n?t.isCEF()?(r=$.Deferred(),i=!!e.forceFresh,s=!!e.useReaderSyncMode,e.appApi.rnaApi.done(function(e){var t=e.getSystemFoldersData(i,s);t.done(function(){r.resolve()}),t.fail(function(){r.reject()})}),r.promise()):n.fetch({global:e.global===!0}):this._getRejectedPromise()}}),e.GettingSystemFoldersOp}),define("core/dev/ops/getting/getting-users-me-cohorts-op",["core/ac-core","core/ops/op"],function(e){return e.GettingUsersMeCohortsOp=e.Op.extend({run:function(){return this.options.usersMeCohortsModel.fetch()}}),e.GettingUsersMeCohortsOp}),define("core/dev/ops/listening/listening-for-key-events-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.ListeningForKeyEventsOp=e.Op.extend({run:function(){var e=$.Deferred();return $("body").on("keydown",this._onKeyDown).on("keypress",this._onKeyPress).on("keyup",this._onKeyUp),this._deferred=e,e.promise()},_processKeyEvent:function(e,n){var r=this.options.keyHandlers,i,s;for(i=r.length-1;i>=0;i-=1)if(r[i][e]&&r[i][e](n)){s=$(n.target),!s.is("input")&&!s.is("textarea")&&n.preventDefault();break}t.isCEF()&&i<0&&n.which===8&&!$(n.target).is("input")&&!$(n.target).is("textarea")&&n.preventDefault()},_onKeyDown:function(e){this._processKeyEvent("_onKeyDown",e)},_onKeyPress:function(e){this._processKeyEvent("_onKeyPress",e)},_onKeyUp:function(e){this._processKeyEvent("_onKeyUp",e)}}),e.ListeningForKeyEventsOp}),define("core/dev/ops/listening/listening-for-focus-events-op",["core/ac-core","core/ops/op"],function(e){return e.ListeningForFocusEventsOp=e.Op.extend({run:function(){var e=$.Deferred();return $("body").on("focusin",this._onFocusIn).on("focusout",this._onFocusOut),this._deferred=e,e.promise()},_processFocusEvent:function(e,t){var n=this.options.focusHandlers,r;for(r=n.length-1;r>=0;r-=1)if(!(n[r]instanceof Backbone.View)||$(t.target).closest(n[r].$el).length===1)if(n[r][e]&&n[r][e](t))break},_onFocusIn:function(e){this._processFocusEvent("_onFocusIn",e)},_onFocusOut:function(e){this._processFocusEvent("_onFocusOut",e)}}),e.ListeningForFocusEventsOp}),define("core/dev/ops/manipulation/deleting-existing-dup-op",["core/ac-core","core/ops/op"],function(e){return e.DeletingExistingDupOp=e.Op.extend({run:function(){var t=e.opFactory,n=this.options,r,i;return r=t.create("DeletingItemOp",_.extend({},n,{id:n.existingId,object_type:n.existingType,noScEvent:!0})),i=t.create("RenamingItemOp",_.extend({},n,{id:n.addedId,object_type:n.addedType,name:n.existingName})),r.run().then(function(){return i.run().always(function(){n.appApi.folderApi.refreshCurrentFolder(n)})})}}),e.DeletingExistingDupOp}),define("core/dev/ops/manipulation/deleting-form-op",["core/ac-core","core/utils/http-util","plugins-common/ac-plugins","core/ops/op"],function(e,t,n){return e.DeletingFormOp=e.Op.extend({run:function(e){var r,i,s=this.options,o=s.appApi,u,a=o.pluginsApi,f=o.networkApi;return u=a.getBaseUrl(n.FILLSIGN),r=u+"/api/form/"+e,i="DELETE",s=_.extend({},s,{type:i,headers:t.getRequestHeaders(i)}),f.throttledAjax(r,s),this._getResolvedPromise()}}),e.DeletingFormOp}),define("core/dev/ops/manipulation/deleting-item-op",["core/ac-core","core/utils/sc-analytics","core/ops/op"],function(e,t){return e.DeletingItemOp=e.Op.extend({run:function(){var n=this.options,r;return r=e.modelFactory.create("CollectionItemModel",n),r.destroy().done(_.bind(function(){n.searchUiModel.invalidate(),n.noScEvent||this._logSiteCatalystEvent(t.SUCCESS)},this))}}),e.DeletingItemOp}),define("core/dev/ops/manipulation/deleting-selection-if-confirmed-op",["core/ac-core","i18n!core/nls/ui-strings","core/utils/util","core/utils/sc-analytics","core/ops/op"],function(e,t,n,r){return e.DeletingSelectionIfConfirmedOp=e.Op.extend({run:function(){var i=this.options,s,o,u,a,f=i.appApi,l=f.dialogApi,c=f.errorApi,h=[],p=this._logSiteCatalystEvent,d=_.bind(function(t,n){var i,s=c.getErrorStrings({type:e.ErrorUiModel.ERROR_TYPE_AJAX,data:t});c.isDeleteNonEmptyFolderError(t)?i=r.FOLDER_NOT_EMPTY:i=r.OTHER,this._logSiteCatalystEvent([i,r.OP]),this._logSiteCatalystEvent([r.ERROR_DLG,r.SHOWN]),l.displayTextAlert(l.SEVERITY_ERROR,s.title,s.msg,s.btn1,undefined,{scContext:n})},this);return this._logSiteCatalystEvent(r.SHOWN),s=i.selectionUiModel,o=s.getNumSelectedItems(),o===1?u=t.CONFIRM_DELETE_MSG_ONE_ITEM:u=_.template(t.CONFIRM_DELETE_MSG_N_ITEMS,{numItems:o}),a=t.CONFIRM_DELETE_TITLE,h=n.addToArray(h,i.scContext),h=n.addToArray(h,this._getSiteCatalystContext()),l.displayTextAlert(l.SEVERITY_WARNING,a,u,t.DELETE,t.CANCEL,{scContext:h}).then(function(){return i=_.extend({},i,{global:!1,scContext:h}),e.opFactory.create("DeletingSelectionOp",i).run().then(function(){p(r.SUCCESS),s.clearSelection(),f.folderApi.refreshCurrentFolder(i)},function(e){d(e,h)})})},_getSiteCatalystContext:function(){return r.DELETE_DLG}}),e.DeletingSelectionIfConfirmedOp}),define("core/dev/ops/manipulation/deleting-selection-op",["core/ac-core","core/ops/op"],function(e){return e.DeletingSelectionOp=e.Op.extend({run:function(){var t=this.options,n,r,i,s=[],o,u=e.opFactory;return n=t.selectionUiModel,r=n.get("selected_item_models"),i=n.get("selected_item_ui_models"),o=u.create("DeletingFormOp",_.extend({},t,{async:!0})),_.each(r,function(e){var r=e.id,u=i[r],a;u.set("masked",!0),a=e.destroy(_.extend({},t,{wait:!0})).then(function(){n.deselectItem(r,!0),t.searchUiModel.invalidate(),e.isForm()&&o.run(r)},function(e){return u.set("masked",!1),e}),s.push(a)}),$.when.apply($,s)}}),e.DeletingSelectionOp}),define("core/dev/ops/manipulation/moving-item-op",["core/ac-core","core/utils/http-util","core/utils/sc-analytics","core/ops/op"],function(e,t,n){return e.MovingItemOp=e.Op.extend({run:function(){var e=this.options,r,i,s;return r=Ac.baseFilesUrisModel.getApiUri()+(e.objectType==="file"?"assets/":"folders/")+encodeURIComponent(e.id)+"/metadata/parent_id?"+t.getClientIdQueryParam(),i="PUT",s={value:e.destFolderId,on_dup_name:"auto_rename"},e.appApi.networkApi.throttledAjax(r,{type:i,headers:t.getRequestHeadersNoClientId(i),data:JSON.stringify(s),dataType:"json"}).done(_.bind(function(){e.noScEvent||this._logSiteCatalystEvent(n.SUCCESS)},this))}}),e.MovingItemOp}),define("core/dev/ops/manipulation/moving-items-op",["core/ac-core","core/ops/op"],function(e){return e.MovingItemsOp=e.Op.extend({run:function(){var t;return t=_.omit(this.options,"folderUiModel"),e.opFactory.create("GettingFolderPathOp",t).run().then(_.bind(function(e){return this._doMove(e.path)},this))},_doMove:function(t){function l(e){return _.any(t,function(t){return t.id===e})}var n=this.options,r,i,s,o,u=[],a,f={};i=n.selectionUiModel,s=i.get("selected_item_models"),o=this.options.id;if(s.length===0||_.isEmpty(s))return;if(_.values(s)[0].get("parent_id")===o)return;_.each(s,function(t){var s=t.id,c;if(l(s))return!0;c=t.get("object_type"),f[s]=c,r=_.extend({},n,{id:s,objectType:c,destFolderId:o}),a=e.opFactory.create("MovingItemOp",r).run(),a.done(function(e){e&&e.renamed_to&&e.renamed_details.duplicate_of&&(e.id=s,e.object_type=f[s],e.moved_from=n.folderModel.id,n.errorUiModel.enqueueDupError(e)),i.deselectItem(s,!0)}),u.push(a)});if(u.length===0)return;return $.when.apply(null,u).then(function(){n.appApi.folderApi.refreshCurrentFolder(n)})}}),e.MovingItemsOp}),define("core/dev/ops/manipulation/renaming-added-dup-op",["core/ac-core","core/ops/op","core/views/rename-dlg-view"],function(e){return e.RenamingAddedDupOp=e.Op.extend({run:function(){var t,n=this.options;return t=new e.RenameDlgView(_.extend({},n,{id:n.addedId,object_type:n.addedType,name:n.addedName})),t.open()}}),e.RenamingAddedDupOp}),define("core/dev/ops/manipulation/renaming-item-op",["core/ac-core","core/utils/util","core/utils/http-util","core/utils/sc-analytics","core/ops/op"],function(e,t,n,r){return e.RenamingItemOp=e.Op.extend({run:function(){var i=this.options,s=i.appApi,o=i.name,u=i.searchUiModel,a=i.model,f,l,c;return a||(a=e.modelFactory.create("CollectionItemModel",i)),f="PUT",l=a.getRenameUrl(i.name),o=t.compressQuestionMarks(o),c={value:o,on_dup_name:"auto_rename"},s.networkApi.throttledAjax(l,{type:f,headers:n.getRequestHeadersNoClientId(f),data:JSON.stringify(c),dataType:"json"}).done(_.bind(function(e){var t;e&&(t=e.renamed_to),t||(t=i.name,i.noScEvent||this._logSiteCatalystEvent(r.SUCCESS)),a.set("name",t),s.folderApi.refreshCurrentFolder(i),u.invalidate(),u.isSearching()&&(i.selectionUiModel.clearSelection(),u.triggerFieldQueriesChange(!0))},this))}}),e.RenamingItemOp}),define("core/dev/ops/manipulation/setting-asset-metadata-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.SettingAssetMetadataOp=e.Op.extend({run:function(){var n=this.options,r,i,s,o;return r=e.modelFactory.create("AssetModel",n),i=r.getMetadataUrl(n.key),s="PUT",o={value:n.value},n.appApi.networkApi.throttledAjax(i,_.extend({},n,{type:s,headers:t.getRequestHeadersNoClientId(s),data:JSON.stringify(o),dataType:"json"}))}}),e.SettingAssetMetadataOp}),define("core/dev/ops/misc/checking-storage-quota-on-startup-op",["core/ac-core","core/ops/op","core/views/quota-warning-dlg-view"],function(e){return e.CheckingStorageQuotaOnStartupOp=e.Op.extend({run:function(){var t=this.options,n=t.storageQuotaModel,r,i;return e.opFactory.create("GettingStorageQuotaOp",t).run().done(function(){r=n.get("storage_used"),i=n.get("storage_quota");if(i===0)return this._getResolvedPromise();e.Features.isFeatureEnabled("quota_ui")&&(r/i>e.QuotaDlgUiModel.WARNING_THRESHOLD?t.parentView._triggerViewEvent(e.ViewEvents.SHOW_QUOTA_WARNING_DLG,t):(t.quotaDlgUiModel.set("running_out_shown",!1),t.appApi.usersMeApi.saveCommonPrefs()))})}}),e.CheckingStorageQuotaOnStartupOp}),define("core/dev/ops/misc/handling-collection-render-begin-op",["core/ac-core","core/ops/op"],function(e){return e.HandlingCollectionRenderBeginOp=e.Op.extend({run:function(){var e;return e=this.options.collectionView.options.collectionUiModel,e.unset("item_count",{silent:!0}),e.set("show_empty",!1),this._getResolvedPromise()}}),e.HandlingCollectionRenderBeginOp}),define("core/dev/ops/misc/handling-collection-render-end-op",["core/ac-core","core/ops/op"],function(e){return e.HandlingCollectionRenderEndOp=e.Op.extend({run:function(){var e=this.options,t,n,r,i;return t=e.collectionView,n=t.options,i=n.collectionUiModel,r=t.$el.children().length,i.set("item_count",r),i.set("show_empty",r===0),this._getResolvedPromise()}}),e.HandlingCollectionRenderEndOp}),define("core/dev/ops/misc/loading-framework-version-op",["core/ac-core","core-unmapped/dev/utils/app-api-mgr","core/ops/op"],function(e,t){return e.LoadingFrameworkVersionOp=e.Op.extend({run:function(n){var r=this.options;return!n||t.hasAppApi(n)?this._getResolvedPromise():e.opFactory.create("LoadingModuleOp",r).run({displayName:"Framework version "+n,url:"versions/framework-"+n}).then(function(){r.appApi.createAppApiVersion(n)})}}),e.LoadingFrameworkVersionOp}),define("core/dev/ops/misc/sending-log-event-op",["core/ac-core","core/utils/ajax-util","core/ops/op"],function(e,t){var n=1e3;return e.SendingLogEventOp=e.Op.extend({run:function(e){var r=this.options,i,s,o,u;return r.appApi.sessionApi.isSignedIn()?(o={global:!1,throttleOn:!0,beforeSend:t.beforeSend},s=LOG.INFO,_.isObject(e)?(i=e.message,_.isNumber(e.severity)&&(s=e.severity),_.extend(o,e.ajaxOptions)):i=e.toString(),i.length>n&&(i=i.substr(0,n)),u=r.sendLogEventModel,u.clear(),u.save({level:s,message:i},o)||$.Deferred().reject("AcCore.SendingLogEventOp.run: validation error").promise()):this._getResolvedPromise()}}),e.SendingLogEventOp}),define("core/dev/ac-core-config",["core/ac-core"],function(e){var t={APP_NAME:"Acrobat.com",APP_NAME_DC:"Adobe Document Cloud",COOKIE_DOMAIN:"acrobat.com",LANGUAGE_COOKIE:"adotcomLang",PREFERENCES_COOKIE_PREFIX:"prefs_",BRB_URL:"https://brb.acrobat.com",ADOBE_URL:"https://www.adobe.com/",FORUM_URL:"https://helpx.adobe.com/<%= locale %>/document-cloud.html",SUPPORT_URL:"https://helpx.adobe.com/<%= locale %>/support.html",PRIVACY_URL:"https://www.adobe.com/privacy.html",TERMS_URL:"https://www.adobe.com/legal/general-terms.html",COOKIES_URL:"https://www.adobe.com/privacy/cookies.html",PRIVACY_URL_LOC:"https://www.adobe.com/<%= locale %>/privacy.html",TERMS_URL_LOC:"https://www.adobe.com/<%= locale %>/legal/general-terms.html",COOKIES_URL_LOC:"https://www.adobe.com/<%= locale %>/privacy/cookies.html",TOU_URL_PATH:"misc/terms.html",PRIVACY_URL_PATH:"privacy.html",THIRD_PARTY_URL:"https://www.adobe.com/go/thirdparty",THIRD_PARTY_URL_TEMPLATE:"https://www.adobe.com/go/thirdparty_<%= loc %>",MANAGE_SUBSCRIPTION_URI:"/redir/manage_subscription"};return _.extend(e,{Config:t}),e.Config}),define("core/dev/ops/misc/validating-base-uris-op",["core/ac-core","core/ac-core-config","core/ops/op"],function(e,t){return e.ValidatingBaseUrisOp=e.Op.extend({run:function(){var e=this.options,n=e.appApi,r=$.Deferred();return n.baseFilesUrisApi.getApiUri()?r.resolve():(window.location=t.BRB_URL,r.reject()),r.promise()}}),e.ValidatingBaseUrisOp}),define("core/dev/ops/misc/validating-name-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.ValidatingNameOp=e.Op.extend({run:function(){var e=this.options,n=e.newName||e.name,r=$.Deferred(),i=e.appApi.networkApi,s=Ac.baseFilesUrisModel.getApiUri()+"name_validator?"+t.getClientIdQueryParam(),o,u;return n?(o="POST",u={name:n},i.throttledAjax(s,_.extend({},e,{type:o,headers:t.getRequestHeadersNoClientId(o),dataType:"json",data:JSON.stringify(u),global:!1})).then(function(){r.resolve()},function(e){r.reject(e.responseJSON)}),r.promise()):this._getRejectedPromise()}}),e.ValidatingNameOp}),define("core/dev/ops/notifications/creating-notifications-endpoints-op",["core/ac-core","core/ops/op"],function(e){return e.CreatingNotificationsEndpointsOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi,n,r;return n=e.notificationModel,r=e.notificationUiModel,n.clear(),n.save({updates:r.get("updates"),timeout:r.get("timeout")},{global:!1}).fail(function(e){e.status===401&&t.sessionApi.signedOut()})||$.Deferred().reject("AcCore.CreatingNotificationsEndpointsOp.run: Validation error").promise()}}),e.CreatingNotificationsEndpointsOp}),define("core/dev/ops/notifications/enabling-folder-notifications-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.EnablingFolderNotificationsOp=e.Op.extend({run:function(e){var n=this.options,r=n.appApi,i=n.notificationUiModel,s,o;return s="PUT",o=n.notificationModel.get("update_url"),o?(o+="?"+t.getClientIdQueryParam(),i.unset("timestamp"),r.networkApi.throttledAjax(o,{type:s,headers:t.getRequestHeadersNoClientId(s),data:JSON.stringify(e),dataType:"json",global:!1}).then(function(){i.set("is_monitoring",!0).triggerPoll()})):(LOG.info("AcCore.EnablingFolderNotificationsOp.run no 'update_url' for PUT",{logConsole:r.displayApi.isDebugLogging(),logServer:!0}),this._getResolvedPromise())}}),e.EnablingFolderNotificationsOp}),define("core/dev/ops/notifications/getting-folder-notifications-op",["core/ac-core","core/utils/http-util","core/utils/util","core/ops/op"],function(e,t,n){return e.GettingFolderNotificationsOp=e.Op.extend({run:function(){return this._addModelEventListeners(),this._addUiModelEventListeners(),this._poll(),$.Deferred().promise()},_url:function(){var e=this.options,n,r;return n=e.notificationModel.get("get_url"),n?(r=e.notificationUiModel.get("timestamp"),r&&(n+="?timestamp="+encodeURIComponent(r)),n+=n.indexOf("?")<0?"?":"&",n+=t.getClientIdQueryParam(),n):n},_poll:function(){function f(e){return _.isBoolean(e)&&s.set("is_polling",e),s.get("is_polling")}var e=this.options,r=e.appApi,i=e.notificationModel,s=e.notificationUiModel,o,u="GET",a;if(!s.get("is_monitoring")||e.appApi.inactivityApi.isIdle())return;o=this._url();if(!o){this._stopPolling();return}if(f())return;f(!0),r.networkApi.throttledAjax(o,{type:u,headers:t.getRequestHeadersNoClientId(u,{excludeAccessToken:!n.isCEF()}),dataType:"json",global:!1}).always(function(){f(!1)}).then(_.bind(function(e){e.timestamp&&(r.notificationApi.distributeNotifications(e.updates),s.set("timestamp",e.timestamp)),this._pollAgain()},this),_.bind(function(e){a=e.status,a===401?r.sessionApi.signedOut():a===404?o.indexOf(i.get("get_url"))>=0?s.triggerResubscribe():LOG("AcCore.GettingFolderNotificationsOp._poll "+a+" "+o+" ignored"):a>0&&(LOG("AcCore.GettingFolderNotificationsOp._poll "+a+" "+o),this._pollLater())},this))},_pollAgain:function(){var e=this.options.notificationUiModel;e.isLongPollingEnabled()?this._poll():this._pollLater()},_pollLater:function(){var e=this.options.notificationUiModel;e.set("timeout_id",_.delay(this._poll,e.get("poll_interval")))},_stopPolling:function(){this.options.notificationUiModel.clearTimeout()},_addModelEventListeners:function(){this.listenTo(this.options.notificationModel,"change:get_url",this._onGetUrlChange)},_onGetUrlChange:function(e,t){t?this._pollAgain():this._stopPolling()},_addUiModelEventListeners:function(){this.listenTo(this.options.notificationUiModel,"change:poll_trigger",this._onPollTriggerChange)},_onPollTriggerChange:function(e,t){t&&this._pollAgain()}}),e.GettingFolderNotificationsOp}),define("core/dev/ops/notifications/stopping-notifications-op",["core/ac-core","core/utils/http-util","core/utils/util","core/ops/op"],function(e,t,n){return e.StoppingNotificationsOp=e.Op.extend({run:function(){var e=this.options,r=e.appApi,i,s=e.notificationUiModel,o,u="DELETE";return s.set("is_monitoring",!1),s.clearTimeout(),i=e.notificationModel,o=i.get("update_url"),o?(o+="?"+t.getClientIdQueryParam(),i.unset("update_url").unset("get_url"),r.networkApi.throttledAjax(o,{type:u,headers:t.getRequestHeadersNoClientId(u),dataType:"json",global:!1})):(LOG.info("AcCore.StoppingNotificationsOp.run no 'update_url' to DELETE",{logConsole:r.displayApi.isDebugLogging(),logServer:!n.isCEF()}),this._getResolvedPromise())}}),e.StoppingNotificationsOp}),define("core/dev/ops/plugins/executing-plugins-predownload-op",["core/ac-core","core/ops/op"],function(e){return e.ExecutingPluginsPreDownloadOp=e.Op.extend({run:function(){function f(){u===o.length&&a.resolve()}function l(){u+=1,f()}function c(e,t){var n=e.get("plugin_api");return r.callPluginApiMethod(n,"runPreDownloadOp",t,undefined,!0)}var e=this.options,t=e.pluginsUiModel,n,r,i,s,o=[],u=0,a=$.Deferred();return t?(n=t.get("plugins"),r=e.appApi.pluginsApi,i=e.id,n.each(_.bind(function(e){e.get("plugin_api")&&(s=c(e,i),o.push(s),s.always(l))},i)),f(),a.promise()):a.resolve().promise()}}),e.ExecutingPluginsPreDownloadOp}),define("core/dev/ops/plugins/instantiating-plugin-op",["core/ac-core","core-unmapped/dev/utils/app-api-mgr","core/utils/util","core/utils/date-util","core/ops/op"],function(e,t,n,r){return e.InstantiatingPluginOp=e.Op.extend({run:function(i){var s=this.options,o=i.id,u,a,f=i.get("plugin_api"),l=s.appApi,c=l.pluginsApi,h,p,d=this._getResolvedPromise();n.isCEF()&&(r.logElapsedTime("Finished Loading Plugin"),r.logElapsedTime("Start Instantiating Plugin"));if(!f)try{return u=n.getClassFromName(i.get("config").plugin_class),a=s.pluginContext||{},f=new u(_.extend({},a,{pluginId:o})),i.set("plugin_api",f),c.addPluginApi(o,f,s.pluginsUiModel),p=c.callPluginApiMethod(f,"getAppApiVersion"),h=e.opFactory.create("LoadingFrameworkVersionOp",s),h.run(p).then(function(){return c.callPluginApiMethod(f,"setAppApi",t.getAppApi(p)),c.callPluginApiMethod(f,"initPlugin",undefined,d)})}catch(v){return LOG.error("AcCore.InstantiatingPluginOp.run "+o+": "+(v.stack||v.message)),i.set("show_plugin",!1),this._getRejectedPromise()}return d}}),e.InstantiatingPluginOp}),define("core/dev/ops/plugins/instantiating-selector-op",["core/ac-core","core-unmapped/dev/utils/app-api-mgr","core/ops/op"],function(e,t){return e.InstantiatingSelectorOp=e.Op.extend({run:function(n){var r=this.options,i,s,o=n.id,u=n.get("selector_api"),a=r.appApi,f=a.pluginsApi,l,c;i=n.get("config").selector_class;if(!i)return this._getResolvedPromise();if(!u)try{return s=e.Util.getClassFromName(i),u=new s({pluginId:o}),n.set("selector_api",u),f.addSelectorApi(o,u,r.pluginsUiModel),c=f.callPluginApiMethod(u,"getAppApiVersion"),l=e.opFactory.create("LoadingFrameworkVersionOp",r),l.run(c).then(function(){f.callPluginApiMethod(u,"setAppApi",t.getAppApi(c))})}catch(h){return LOG(0,"AcCore.InstantiatingSelectorOp.run: "+(h.stack||h.message)),n.set("show_plugin",!1),this._getRejectedPromise()}return this._getResolvedPromise()}}),e.InstantiatingSelectorOp}),define("core/dev/ops/plugins/loading-module-op",["core/ac-core","core/ops/op"],function(e){return e.LoadingModuleOp=e.Op.extend({run:function(e){var t=this.options,n=$.Deferred(),r,i;return _.isString(e)?r=e:r=e.url,r?(require([r],function(){n.resolve()},function(s){LOG.error("AcCore.LoadingModuleOp.run "+r+": "+(s.stack||s.message)),i=t.appApi,i&&i.errorApi.moduleNotLoaded(e.displayName||r),n.reject()}),n.promise()):n.resolve().promise()}}),e.LoadingModuleOp}),define("core/dev/ops/plugins/loading-plugin-list-op",["core/ac-core","core/ops/op"],function(e){return e.LoadingPluginListOp=e.Op.extend({run:function(t){var n=this.options,r=e.opFactory,i=[];return _.each(t,function(e){i.push(r.create("LoadingPluginOp",n).run(e))}),$.when.apply($,i)}}),e.LoadingPluginListOp}),define("core/dev/ops/plugins/loading-plugin-op",["core/ac-core","core/utils/util","core/utils/date-util","core/ops/op"],function(e,t,n){return e.LoadingPluginOp=e.Op.extend({run:function(r){var i=this.options,s=i.appApi.pluginsApi,o,u,a;if(!s.isGroupConfigLoaded(r))return this._getResolvedPromise();o=s.getPluginsUiModel(r);if(!o)return LOG("AcCore.LoadingPluginOp.run: '"+r+"' not yet "+"associated with UI model for its plugin type"),this._getResolvedPromise();u=o.getPluginUiModel(r);if(!u)return LOG("AcCore.LoadingPluginOp.run: '"+r+"' not yet "+"associated with UI model for this plugin"),this._getResolvedPromise();if(u.isPluginLoaded())return this._getResolvedPromise();u.set("load_plugin",!0);if(s.isPluginOfThisType(r,"full_preview")||s.isPluginOfThisType(r,"full_preview_rhp")||s.isPluginOfThisType(r,"full_preview_overlays"))a=i;return t.isCEF()&&(a=_.extend({},a,{readerContextModel:i.readerContextModel}),n.logElapsedTime("Start Loading Plugin")),e.opFactory.create("LoadingPluginsOp",_.extend({pluginContext:a,pluginsConfig:s.getPluginsConfig(r),pluginsUiModel:o,pluginId:r},_.pick(i,"appApi"))).run()}}),e.LoadingPluginOp}),define("core/dev/ops/plugins/loading-plugins-op",["core/ac-core","core/utils/css-util","core/utils/util","core/ops/op"],function(e,t,n){return e.LoadingPluginsOp=e.Op.extend({run:function(){function E(){g===v.length&&y.resolve()}function S(){g+=1,E()}function x(e,n){var r=n==="selector",i;d=e.id,r&&(i=f.getGroupSelectorCssUrl(d)),i||(i=f.getGroupCssUrl(d)),i||(i=r?e.getSelectorCssUrl():e.getPluginCssUrl()),i&&t.loadCss(i)}function T(e,t){var n=t==="selector",i;return d=e.id,n&&(i=f.getGroupSelectorModuleUrl(d)),i||(i=f.getGroupModuleUrl(d)),i||(i=t==="selector"?e.getSelectorModuleUrl():e.getPluginModuleUrl()),h.create("LoadingModuleOp",r).run({displayName:e.id+" "+t,url:i})}function N(e){return h.create("InstantiatingPluginOp",r).run(e)}function C(e){return h.create("InstantiatingSelectorOp",r).run(e)}function k(e){e.set("show_plugin",!1)}function L(e){var t;d=e.id;if(!f.isGroupConfigLoaded(d))return;x(e,"selector"),t=T(e,"selector"),v.push(t),t.then(function(){return e.set("selector_loaded",!0),C(e).fail(function(){k(e)}).always(function(){S()})},function(){k(e),S()})}function A(e){var t;d=e.id;if(!f.isGroupConfigLoaded(d))return;x(e,"plugin"),t=T(e,"plugin"),v.push(t),t.then(function(){if(c)return e.set("plugin_loaded",!0),N(e).fail(function(){k(e)}).always(function(){S()});e.set("plugin_loaded",!0),S()},function(){k(e),S()})}var r=this.options,i=r.pluginsConfig,s=r.pluginsUiModel,o=i.plugin_ids,u=i.default_plugin_id,a=o.length,f=r.appApi.pluginsApi,l=s.get("plugins"),c=s.get("instantiate_on_load"),h=e.opFactory,p,d,v=[],m=[],g=0,y=$.Deferred(),b,w=r.actualPluginIds;if(l.length===0){f.registerPluginsUiModel(i,s),s.set(_.pick(i,"default_plugin_id","ignore_selection","no_selectors")),u&&_.indexOf(o,u)<0&&LOG("AcCore.LoadingPluginsOp.run Default plugin '"+u+"' not listed in 'plugin_ids' for its plugin type");for(p=0;p<a;p+=1){d=o[p],b=o[p],w&&w.length===a&&(b=w[p]);try{l.add({id:b,base_url:f.getBaseUrl(d),group_css_url:f.getGroupCssUrl(d),group_module_url:f.getGroupModuleUrl(d),group_selector_css_url:f.getGroupSelectorCssUrl(d),group_selector_module_url:f.getGroupSelectorModuleUrl(d),config:f.getConfig(d)},{at:p})}catch(O){LOG("AcCore.LoadingPluginsOp.run ERROR loading plugin '"+d+"': "+(O.stack||O.message))}}}return this._markDependenciesToBeLoaded(l,m),l.each(function(e){e.isSelectorLoaded()||(!n.isCEF()||!f.isPluginOfThisType(e.id,"tools")||e.get("load_plugin")||e.id===s.get("default_plugin_id"))&&L(e)}),l.each(function(e){e.get("load_plugin")&&!e.isPluginLoaded()&&A(e)}),m.length>0&&v.push(h.create("LoadingPluginListOp",r).run(m).always(S)),E(),y.promise()},_markDependenciesToBeLoaded:function(e,t){var n,r,i;r=_.bind(function(r){var i=e.get(r);if(!i){_.indexOf(t,r)<0&&t.push(r);return}i.get("load_plugin")||(i.set("load_plugin",!0),n=!0)},this),i=function(e,t){(t.get("config").load==="force"||e||t.get("load_plugin"))&&!t.isPluginLoaded()&&(t.get("load_plugin")||(t.set("load_plugin",!0),n=!0),_.each(t.getDependencies(),r))};do n=!1,e.each(_.partial(i,this.options.force));while(n)}}),e.LoadingPluginsOp}),define("core/dev/ops/plugins/loading-selection-actions-op",["core/ac-core","core/ops/op"],function(e){e.LoadingSelectionActionsOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi.pluginsApi;return e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:n.getPluginTypeConfig("file_selection_actions"),actualPluginIds:t.actualPluginIds,pluginsUiModel:t.selectionActionsPluginsUiModel},_.pick(t,"appApi","pluginId"))).run()}})}),define("core/dev/ops/plugins/selecting-plugin-op",["core/ac-core","core/utils/util","core/utils/date-util","core/ops/op"],function(e,t,n){return e.SelectingPluginOp=e.Op.extend({run:function(r,i){function w(e){o.appApi.rnaApi.done(function(t){t.servicesTestApi({methodName:"logEventAPI",methodArgs:e})})}function E(){f=v.get("plugin_api");if(!f){s.reject();return}try{l.callPluginApiMethod(f,"setElement",v.get("content_elem"),undefined),l.callPluginApiMethod(f,"setPreviewEls",v.get("preview_elems"),undefined,!0),h||p.setSelectedId(r,{silent:c}),t.isCEF()&&(n.logElapsedTime("Finished instantiating Plugin"),n.logElapsedTime("Starting Selecting Plugin")),l.callPluginApiMethod(f,"selectPlugin",i,y).then(function(){t.isCEF()&&(n.logElapsedTime("Finished Selecting Plugin"),w({name:"SELECT_PLUGIN_SUCCESS",plugin_id:l.getPluginId(f)})),document.activeElement||$("body").focus(),s.resolve()},function(){t.isCEF()&&(n.logElapsedTime("Finished Selecting Plugin"),w({name:"SELECT_PLUGIN_FAILURE",plugin_id:l.getPluginId(f)})),s.reject()})}catch(e){LOG("AcCore.SelectingPluginOp.run.select id="+r+" "+(e.stack||e.message)),s.reject()}}var s=$.Deferred(),o=this.options,u,a,f,l=o.appApi.pluginsApi,c,h,p,d,v,m,g,y=this._getRejectedPromise(),b;_.isObject(r)&&(i=r,r=undefined),r||(r=o.pluginId),i&&(c=i.noHistoryEffect,h=i.noSelectionEffect),p=l.getPluginsUiModel(r);if(!p)return LOG("AcCore.SelectingPluginOp.run: No UI model for '"+r+"' plugin"),s.reject();d=p.get("plugins"),m=p.get("ignore_selection"),g=p.get("no_selectors");if(!r||!d.get(r))r=p.getSelectedId();return u=p.get("selected_plugin_id"),u&&u!==r&&!g&&!c&&(f=p.getPluginApi(u),f&&(l.callPluginApiMethod(f,"deselectPlugin"),a=!0)),v=d.get(r),v&&!g&&!m&&(!v.isPluginShown()||v.isPluginLoaded()&&!v.isPluginEnabled())&&(r=p.getFirstEnabledId(),v=d.get(r)),v?v.isPluginLoaded()?a?_.delay(E,p.get("deselect_delay")):E():(v.set("load_plugin",!0),t.isCEF()&&(b={readerContextModel:o.readerContextModel}),e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:l.getPluginsConfig(r),pluginContext:b,pluginsUiModel:p},_.pick(o,"appApi","pluginId"))).run().then(E)):s.reject(),s.promise()}}),e.SelectingPluginOp}),define("core/dev/ops/plugins/selecting-selection-action-item-op",["core/ac-core","core/ops/op"],function(e){e.SelectingSelectionActionItemOp=e.Op.extend({run:function(){var t=this.options;return e.opFactory.create("SelectingPluginOp",t).run()}})}),define("core/dev/ops/selection/clearing-selection-op",["core/ac-core","core/ops/op"],function(e){return e.ClearingSelectionOp=e.Op.extend({run:function(){return this.options.selectionUiModel.clearSelection(),this._getResolvedPromise()}}),e.ClearingSelectionOp}),define("core/dev/ops/selection/selecting-collection-item-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.SelectingCollectionItemOp=e.Op.extend({run:function(){var t=this.options,n=t.itemView,r=this._multipleSelection(),i,s=e.SelectionUiModel;switch(t.selectType){case s.SELECT_ALL:i=this._selectAll(!0);break;case s.SELECT_NONE:i=this._selectAll(!1);break;case s.SELECT_DESELECT:i=this._selectItem(n,!1);break;case s.SELECT_EXTEND:i=this._extendSelectItem(n);break;case s.SELECT_SELECT:i=this._selectItem(n);break;case s.SELECT_TOGGLE:i=this._toggleSelectItem(n);break;case s.SELECT_NEXT:i=this._selectNext();break;case s.SELECT_PREVIOUS:i=this._selectPrevious();break;case s.SELECT_UP:i=this._selectUp();break;case s.SELECT_DOWN:i=this._selectDown();break;case s.SELECT_FIRST:i=this._selectFirst();break;case s.SELECT_FIRST_IN_ROW:i=this._selectFirstInRow();break;case s.SELECT_LAST:i=this._selectLast();break;case s.SELECT_LAST_IN_ROW:i=this._selectLastInRow();break;case s.EXTEND_SELECT_NEXT:i=this._selectNext(r);break;case s.EXTEND_SELECT_PREVIOUS:i=this._selectPrevious(r);break;case s.EXTEND_SELECT_UP:i=this._selectUp(r);break;case s.EXTEND_SELECT_DOWN:i=this._selectDown(r)}return i&&t.selectionUiModel.triggerSelectionChange(),this._getResolvedPromise()},_selectItemView:function(e,t){var n,r=this.options;if(!e){LOG("AcCore.SelectingCollectionItemOp._selectItemView no view!");return}return r.collectionUiModel=e.options.collectionUiModel,n=this._getTargetIndex(),n&&r.selectionUiModel.set("index_last_selected",n),this._selectChild(e.$el,t)},_selectAll:function(t){var n=this.options,r=n.collectionItemsView,i=[],s,o={selectAll:!0};r&&(i=this._getChildren());if(t&&i.length>1&&!this._multipleSelection())return;return t?(_.each(i,_.bind(function(e){this._selectChild(e,t,o)&&(s=!0)},this)),s):(e.opFactory.create("ClearingSelectionOp",this.options).run(),s=!0,s)},_extendSelectItem:function(e){var t,n,r,i;return this._suppressHoverPreview(),this._multipleSelection()||this._selectAll(!1)&&(i=!0),this._selectItemView(e,!0)&&(i=!0),t=this._getTargetIndex(),n=this._getClosestSelectedIndex(t,!1),n>0?(this._selectRange(!0,t,n)&&(i=!0),this._selectRange(!1,0,t-1)&&(i=!0)):(r=this._getClosestSelectedIndex(t,!0),r>=0?this._selectRange(!0,r,t)&&(i=!0):this._selectItem(e)&&(i=!0)),i},_selectItem:function(e){var n,r=this.options;return this._suppressHoverPreview(),(t.isCEF()&&!r.collectionsUiModel.get("checkbox")||!this._multipleSelection())&&this._selectAll(!1)&&(n=!0),this._selectItemView(e,!0)&&(n=!0),n},_toggleSelectItem:function(e){var t,n;if(!e)return;return t=e.options.itemUiModel.get("selected"),this._multipleSelection()||this._selectAll(!1)&&(n=!0),t||this._suppressHoverPreview(),this._selectItemView(e,!t)&&(n=!0),n},_deselectAll:function(){return this.options.selectionUiModel.getNumSelectedItems()>0?(this._selectAll(!1),!0):!1},_selectExtendChildAt:function(e,t){var n,r,i;return this._suppressHoverPreview(),this._multipleSelection()?(r=this._getSelectionStart(),i=this._getSelectionEnd(),e>=0&&e<r?this._selectRange(!0,e,i)&&(n=!0):e<this._getChildCount()&&e>i?this._selectRange(!0,r,e)&&(n=!0):e>=r&&e<=i&&(t?(this._selectAll(!1)&&(n=!0),this._selectRange(!0,r,e)&&(n=!0)):(this._selectAll(!1)&&(n=!0),this._selectRange(!0,e,i)&&(n=!0))),n):(this._selectAll(!1)&&(n=!0),this._selectChildAt(e)&&(n=!0),n)},_selectNext:function(e){var t=this.options.selectionUiModel,n=t.get("index_last_selected"),r=this._getNextSelectable(n,!1),i;if(n>=0&&!e&&!this._deselectAll())return;return e?i=this._selectExtendChildAt(r,!1):i=this._selectChildAt(r),i&&t.set("index_last_selected",r),i},_selectPrevious:function(e){var t=this.options.selectionUiModel,n=t.get("index_last_selected"),r=this._getNextSelectable(n,!0),i;if(!e&&!this._deselectAll())return;return e?i=this._selectExtendChildAt(r,!0):i=this._selectChildAt(r),i&&t.set("index_last_selected",r),i},_selectUpOrDown:function(e,t,n){var r=this.options.selectionUiModel,i,s;s=this._getNextInColumn(e,t);if(s<0)return;if(e>=0&&!n&&!this._deselectAll())return;return n?i=this._selectExtendChildAt(s,t):i=this._selectChildAt(s),i&&r.set("index_last_selected",s),i},_selectUp:function(e){var t=this.options.selectionUiModel.get("index_last_selected");return this._selectUpOrDown(t,!0,e)},_selectDown:function(e){var t=this.options.selectionUiModel.get("index_last_selected");return this._selectUpOrDown(t,!1,e)},_selectFirst:function(){var e;if(!this._deselectAll())return;e=this._getNextSelectable(-1,!1);if(e>=0)return this._selectChildAt(e,!0)},_selectLast:function(){var e;if(!this._deselectAll())return;e=this._getNextSelectable(this._getChildCount(),!0);if(e>=0)return this._selectChildAt(e,!0)},_selectStartOrEnd:function(e,t){var n;if(!this._deselectAll())return;return n=this._getFirstInRow(e,t),n>=0&&(e=n),this._selectChildAt(e)},_selectFirstInRow:function(){return this._selectStartOrEnd(this._getSelectionStart(),!0)},_selectLastInRow:function(){return this._selectStartOrEnd(this._getSelectionEnd(),!1)},_multipleSelection:function(){var e=this.options;return t.isCEF()&&e.appApi.saveAsApi.isRunningInFileSaveAs()?!1:e.selectionUiModel.get("multiple_selection")},_getTargetId:function(){var e=this.options.itemView,t,n;return e&&(t=e.model,t&&(n=t.id)),n},_getTargetIndex:function(){var e,t,n;return t=this._getTargetId(),n=this._getChildren(),n.each(function(n,r){if($(r).data("id")===t)return e=n,!1}),e},_getClosestSelectedIndex:function(e,t){var n=this.options.collectionUiModel,r,i,s,o,u;r=this._getChildren(),i=r.length,s=-1,u=function(e){return n.getItemUiModel(r.eq(e)).get("selected")};if(t){for(o=e-1;o>=0;o-=1)if(u(o)){s=o;break}}else for(o=e+1;o<i;o+=1)if(u(o)){s=o;break}return s},_getSelectionIndex:function(e){function a(e){return r=n.eq(e),u.isItemSelected(r.data("id"))}var t=this.options,n,r,i,s,o,u=t.selectionUiModel;n=this._getChildren(),i=n.length,o=-1;if(e){for(s=0;s<i;s+=1)if(a(s)){o=s;break}}else for(s=i-1;s>=0;s-=1)if(a(s)){o=s;break}return o},_getSelectionStart:function(){return this._getSelectionIndex(!0)},_getSelectionEnd:function(){return this._getSelectionIndex(!1)},_selectRange:function(e,t,n){var r,i,s=!1;r=this.options.collectionItemsView.$el.children();for(i=t;i<=n;i+=1)this._selectChild(r.eq(i),e)&&(s=!0);return s},_isChildAtSelectable:function(e){return this._isChildSelectable(this._getChildAt(e))},_isChildSelectable:function(e){var t=e.data("model");return!this.options.noFolderSelection||!t.isFolder()},_selectChild:function(e,t,n){var r=this.options,i=r.selectionUiModel,s,o,u=!1,a=!1;if(!e)return;return e=$(e),s=e.data("model"),o=r.collectionUiModel.getItemUiModel(e),n&&(u=!!n.scrollIntoView,a=!!n.selectAll),u&&r.collectionsUiModel.set("scroll_id_into_view",s.id),!this._isChildSelectable(e)&&s.collection.length>1&&(a||i.getNumSelectedItems()>0)&&(t=!1),i.selectItem(s,o,t)},_selectChildAndScroll:function(e,t){return this._selectChild(e,t,{scrollIntoView:!0})},_selectChildAt:function(e,t,n){return _.isUndefined(t)&&(t=!0),this._selectChildAndScroll(this._getChildAt(e),t,n)},_getItemViewAt:function(e,t,n){var r=t.eq(n),i=$(r).data("id");return e.getChildViewById(i)},_getChildren:function(){return this.options.collectionItemsView.$el.children()},_getChildCount:function(){return this._getChildren().length},_getChildAt:function(e){var t=this._getChildren();return e<0||e>=t.length?undefined:t.eq(e)},_getNextSelectable:function(e,t){return t?Math.max(e-1,0):Math.min(this._getChildCount()-1,e+1)},_getNextInColumn:function(e,t){var n=this._getChildAt(e),r=this._getChildCount(),i,s,o=-1,u,a,f,l;i=_.bind(function(e){return n=this._getChildAt(e),this._isChildSelectable(n)&&n.position().left===a},this),s=_.bind(function(e){return n=this._getChildAt(e),this._isChildSelectable(n)&&n.position().top===f},this);if((t&&e>0||e>=0)&&n){u=n.position();if(u){a=u.left,f=u.top;if(t){for(l=e-1;l>=0;l-=1)if(i(l)){o=l;break}}else{for(l=e+1;l<r;l+=1)if(i(l)){o=l;break}l===r&&!s(r-1)&&(o=r-1)}}}else!t&&e<0&&(o=0);return o},_getFirstInRow:function(e,t){var n=this._getChildAt(e),r=this._getChildCount(),i,s,o,u,a;i=_.bind(function(e){return n=this._getChildAt(e),this._isChildSelectable(n)&&n.position().top===u},this);if(n){o=n.position();if(o){u=o.top;if(t)for(a=e-1;a>=0;a-=1){if(!i(a))break;s=a}else for(a=e+1;a<r;a+=1){if(!i(a))break;s=a}}}return s},_suppressHoverPreview:function(){var e=this.options,t=this._getTargetId();t&&e.hoverPreviewUiModel.suppress(t)}}),e.SelectingCollectionItemOp}),define("core/dev/ops/session/deleting-session-op",["core/ac-core","core/ops/op"],function(e){return e.DeletingSessionOp=e.Op.extend({run:function(){var e=this.options.sessionModel;return e.set("id","_"),e.destroy({global:!1,includeCsrf:!0})||$.Deferred().reject("AcCore.DeletingSessionOp.run: validation error").promise()}}),e.DeletingSessionOp}),define("core/dev/ops/session/refreshing-session-initially-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){return e.RefreshingSessionInitiallyOp=e.Op.extend({run:function(){var n=this.options,r=e.opFactory;return t.isCEF()?r.create("RNARefreshingSessionOp",_.extend({},n,{initialRefresh:!0})).run():t.getCookie("csrftoken")?r.create("RefreshingSessionOp",_.extend({},n,{initialRefresh:!0})).run():this._getRejectedPromise()}}),e.RefreshingSessionInitiallyOp}),define("core/dev/ops/session/refreshing-session-later-op",["core/ac-core","core/utils/num-util","core/utils/util","core/ops/op"],function(e,t,n){return e.RefreshingSessionLaterOp=e.Op.extend({run:function(){var r=this.options,i=$.Deferred(),s,o,u=e.opFactory,a,f;return s=r.sessionUiModel,o=s.get("refresh_timer_id"),o&&clearTimeout(o),n.isCEF()?a=u.create("RNARefreshingSessionOp",r):a=u.create("RefreshingSessionOp",r),f=s.get("expiration_time")*1e3*s.get("refresh_expiration_fraction"),f=Math.min(f,t.MAX_INT32),o=_.delay(function(){a.run().done(function(){i.resolve()})},f),s.set("refresh_timer_id",o),i.promise()}}),e.RefreshingSessionLaterOp}),define("core/dev/ops/session/refreshing-session-op",["core/ac-core","core/ops/op"],function(e){return e.RefreshingSessionOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi,r,i;return n.inactivityApi.isIdle()?$.Deferred().reject().promise():(r=t.refreshSessionModel,i=t.sessionUiModel,r.clear({silent:!0}),r.save(undefined,{global:!1,excludeAccessToken:!0,includeCsrf:!0}).then(function(r){_.each(Ac.Core,function(e){e.HttpUtil.setSessionAttrs(i,r)}),t.signInUiModel.set("is_signed_in",!0),e.opFactory.create("RefreshingSessionLaterOp",_.omit(t,"initialRefresh")).run(),t.initialRefresh||n.usersMeApi.refreshUserInfo()},function(e){_.each(Ac.Core,function(e){e.HttpUtil.clearSessionAttrs(i)}),e.status===401&&n.sessionApi.signedOut()})||$.Deferred().reject("AcCore.RefreshingSessionLaterOp.run: validation error").promise())}}),e.RefreshingSessionOp}),define("core/dev/ops/session/rna-refreshing-session-op",["core/ac-core","core/ops/op"],function(e){return e.RNARefreshingSessionOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi,r=t.appApi.rnaApi,i,s,o;return n.inactivityApi.isIdle()?$.Deferred().reject().promise():n.networkConnectivityApi.isOnline()?(i=t.sessionUiModel,r.then(function(n){return n.logIn(!1).then(function(n){o=t.sessionRNAModel=n,_.each(Ac.Core,function(e){e.HttpUtil.setSessionAttrs(i,o.attributes)}),e.opFactory.create("RefreshingSessionLaterOp",_.omit(t,"initialRefresh")).run(),t.initialRefresh||t.appApi.usersMeApi.refreshUserInfo().then(function(){t.signInUiModel.set("is_signed_in",!0)})},function(){_.each(Ac.Core,function(e){e.HttpUtil.clearSessionAttrs(i)})})})):$.Deferred().reject().promise()}}),e.RNARefreshingSessionOp}),define("core/dev/ops/session/starting-session-op",["core/ac-core","core/ops/op"],function(e){return e.StartingSessionOp=e.Op.extend({run:function(t,n){var r=this.options,i,s;return i=r.sessionModel,s=r.sessionUiModel,i.clear({silent:!0}),i.save({code:t,client:n||e.Util.getClientType()},{global:!1}).then(function(t){_.each(Ac.Core,function(e){e.HttpUtil.setSessionAttrs(s,t)}),e.opFactory.create("RefreshingSessionLaterOp",r).run()},function(e){_.each(Ac.Core,function(e){e.HttpUtil.clearSessionAttrs(s)})})||$.Deferred().reject("AcCore.StartingSessionOp.run: validation error").promise()}}),e.StartingSessionOp}),define("core/dev/ops/session/rna-starting-session-op",["core/ac-core","core/ops/op"],function(e){return e.RNAStartingSessionOp=e.Op.extend({run:function(){var t=this.options,n,r,i;return n=t.sessionRNAModel,r=t.sessionUiModel,n?(_.each(Ac.Core,function(e){e.HttpUtil.setSessionAttrs(r,n.attributes)}),e.opFactory.create("RefreshingSessionLaterOp",t).run(),this._getResolvedPromise()):(_.each(Ac.Core,function(e){e.HttpUtil.clearSessionAttrs(r)}),$.Deferred().reject("AcCore.RNAStartingSessionOp.run: validation error").promise())}}),e.RNAStartingSessionOp}),define("core/dev/ops/session/starting-susi-session-op",["core/ac-core","core/utils/ajax-util","core/utils/util","core/ops/op"],function(e,t,n){return e.StartingSusiSessionOp=e.Op.extend({run:function(){function l(){var e=s.getHashParams(),t=e.code;return t?i.create("StartingSessionOp",r).run(t,e.clt):u}function c(){var e=s.getQueryParams(),t=e.device_token,n=e.code;return t||n?(s.clearQueryParams(),r.appApi.rnaApi.then(function(e){return e.parseRedirectionUrl(window.location.href).then(function(){return i.create("RNAStartingSessionOp",r).run()},function(){return a})})):u}var r=this.options,i=e.opFactory,s=r.appApi.routerApi,o,u=this._getResolvedPromise(),a=this._getRejectedPromise(),f;return n.isCEF()?(f=c,o=this._getResolvedPromise()):(f=l,o=i.create("ValidatingBaseUrisOp",r).run()),o.then(function(){return f().then(function(){return t.setContextOptions(r),i.create("RefreshingSessionInitiallyOp",r).run()})})}}),e.StartingSusiSessionOp}),define("core/dev/ops/session/stopping-session-op",["core/ac-core","core/ops/op"],function(e){return e.StoppingSessionOp=e.Op.extend({run:function(){var e;return e=this.options.signOutModel,e.clear({silent:!0}),e.save(undefined,{modal:!1})||$.Deferred().reject("AcCore.StoppingSessionOp.run: validation error").promise()}}),e.StoppingSessionOp}),define("core/dev/ops/sharing/sharing-item-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.SharingItemOp=e.Op.extend({run:function(){var e=this.options,n,r,i,s,o,u=e.model;return n="PUT",r={"public":e.isPublic},o=e.global,o===undefined&&(o=!1),$.ajax(u.getSharingURL(),{type:n,headers:t.getRequestHeadersNoClientId(n),data:JSON.stringify(r),dataType:"json",global:o}).done(function(e){i=e.preview_url,i!==undefined&&(s=i&&!0,u.set({preview_url:i,shared:s}))})}}),e.SharingItemOp}),define("core/dev/ops/rna/creating-window-op",["core/ac-core","core/ops/op"],function(e){e.CreatingWindowOp=e.Op.extend({run:function(){var t=this.options,n=new $.Deferred,r=t.cefContextModel,i;return r?(i=r.get("browserWindowManager"),i&&t.windowType?(i.invoke("createWindow",t.windowType,[0,0,window.innerWidth,window.innerHeight]).done(function(r){t.nativeWindowModel=e.rnaModelFactory.create("NativeWindowModel",undefined,{_proxy:r}),t.nativeWindowModel.invoke("getPlatformHandle").done(function(e){t.nativeWindowModel.set("platformHandle",e,{localAttr:!0}),n.resolve()}).fail(function(e){n.reject()})}).fail(function(e){n.reject()}),n.promise()):n.reject().promise()):n.reject().promise()}})}),define("core/dev/ops/rna/downloading-file-op",["core/ac-core","core/ops/op"],function(e){return e.DownloadingFileOp=e.Op.extend({run:function(){var t=this.options,n=$.Deferred(),r,i;return t.appApi.rnaApi?(_.isEmpty(t.assetId)?i={itemModelProxy:t.itemModelProxy,fileName:t.fileName||"",fileExtension:e.Util.getExtension(t.fileName)||""}:(i={assetId:t.assetId,assetType:t.assetType||"managed",fetchMetadata:t.fetchMetadata||!1,fileName:t.fileName||"",fileExtension:e.Util.getExtension(t.fileName)||""},t.fileObj&&(i=_.extend(i,{fileObj:t.fileObj}))),t.appApi.rnaApi.then(_.bind(function(s){_.isEmpty(t.assetId)?r=s.fileApi({methodName:"saveAsWithDownloadProgress",methodArgs:i}):r=s.assetApi({methodName:"downloadFile",methodArgs:i}),r.done(function(r){var i;r.errorSet?n.reject(r.errorCode):(i={progressObj:r.progressObj,downloadResultPromise:n},e.opFactory.create("ListenForFileDownloadProgressOp",_.extend(t,i)).run())}).fail(function(e){n.reject()})},this)),[n,r]):this._getRejectedPromise()}}),e.DownloadingFileOp}),define("core/dev/ops/rna/initializing-cef-op",["core/ac-core","core/ops/op"],function(e){return e.InitializingCEFOp=e.Op.extend({run:function(){var t,n=this.options;return t=e.rnaModelFactory,_.extend(n,{cefContextModel:t.create("CefContextModel")}),n.cefContextModel._contextPromise?n.cefContextModel._contextPromise:this._getResolvedPromise()}}),e.InitializingCEFOp}),define("core/dev/ops/rna/initializing-pdm-op",["core/ac-core","core/ops/op"],function(e){return e.InitializingPDMOp=e.Op.extend({run:function(){var t=e.rnaModelFactory;return _.extend(this.options,{pdmContextModel:t.create("PDMContextModel")}),this.options.pdmContextModel._contextPromise?this.options.pdmContextModel._contextPromise:this._getResolvedPromise()}}),e.InitializingPDMOp}),define("core/dev/ops/rna/initializing-reader-op",["core/ac-core","core/utils/date-util","core/ops/op"],function(e,t){return e.InitializingReaderOp=e.Op.extend({run:function(){var n,r=this.options,i=r.cefContextModel,s=i.get("browserCEFManager"),o=s.get("browser"),u=o.get("readerAddress"),a=$.Deferred(),f,l;return _.extend(r,{readerContextModel:a.promise()}),f=function(){var r,i;n=e.rnaModelFactory,t.logElapsedTime("before CreatingReaderContext"),r=n.create("ReaderContextModel"),r._contextPromise&&(i=r._contextPromise,i.done(function(){t.logElapsedTime("after CreatingReaderContext"),a.resolve(r)}),i.fail(function(){a.reject(r)}))},l=function(){u=o.get("readerAddress"),u.length>0&&(t.logElapsedTime("after WaitingForReaderUp"),f(),o.off("change:readerAddress",l))},u.length>0?(t.logElapsedTime("ReaderIsAlreadyUp"),l()):(t.logElapsedTime("before WaitingForReaderUp"),o.on("change:readerAddress",l)),a.promise()}}),e.InitializingReaderOp}),define("core/dev/ops/rna/launch-footer-url-in-browser-op",["core/ac-core","core/ops/op"],function(e){return e.LaunchFooterUrlInBrowserOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.pluginsApi,n,r=!0;return n=e.pluginId,t.callPluginMethod(n,"getFilesFooterUrl",undefined,this._getResolvedPromise(),!0).done(_.bind(function(t){if(!t)return $.Deferred().resolve().promise();e.isDesktopConnectorPlugin&&(r=!1),e.appApi.rnaApi.done(_.bind(function(e){e.connectorsAPI({methodName:"openConnectorUrlInBrowser",methodArgs:[t.uri,r]})},this))},this))}}),e.LaunchFooterUrlInBrowserOp}),define("core/dev/ops/rna/listening-for-actions-op",["core/ac-core","core/utils/date-util","core/ops/op"],function(e,t){var n,r,i;return e.ListeningForActions=e.Op.extend({initialize:function(){var t=this.options,n=t.actionsUiModel;e.Op.prototype.initialize.call(this),n.addCallback("uiThemeChanged",this._onUIThemeChanged),n.addCallback("selectPlugin",this._selectPlugin),n.addCallback("navigateTo",this._navigateTo),n.addCallback("selectConnectorPlugin",this._selectConnectorPlugin),n.addCallback("clickedOutsideAiCview",this._clickedOutsideAiCview),n.addCallback("selectPluginInFileSelDlg",this._selectPluginInFileSelDlg),n.addCallback("selectConnectorPluginInFileSelDlg",this._selectConnectorPluginInFileSelDlg),n.addCallback("directInk",this._selectApplyButtonInDigSig)},run:function(){var n=$.Deferred(),r=this.options,i,s=!1,o=this,u;return u=function(e){s||(s=i.hasProperty("actionMgr"),s&&(this._actionManager=i.get("actionMgr"),t.logElapsedTime("after WaitingForViewData"),i.off("change:actionMgr",u),o._listenForActionEvents(this._actionManager)))},r.readerContextModel.done(_.bind(function(a){i=a.get("rna"),i?(s=i.hasProperty("actionMgr"),s?(t.logElapsedTime("AlreadyHasViewData"),this._actionManager=i.get("actionMgr"),o._listenForActionEvents(this._actionManager)):(t.logElapsedTime("before WaitingForViewData"),i.on("change:actionMgr",u)),e.opFactory.create("GettingSiteCatalystBaseFileOp",r).run()):n.reject()},this)),this._deferred=n,n.promise()},tearDown:function(){this._actionManager&&this._actionManager.off("custom:onAction",this._executeAction)},_executeAction:function(e,t){var n=t.params,r=n.actionId,i=n.params;this.options.actionsUiModel.triggerAction(r,i)},_listenForActionEvents:function(t){t&&t instanceof e.RNAModel?(t.on("custom:onAction",this._executeAction),t.invoke("flush")):t&&$.isFunction(t.then)&&t.then(_.bind(function(){this.options.readerContextModel.done(_.bind(function(t){var n=t.get("rna"),r;n&&n.hasProperty("actionMgr")&&(r=n.get("actionMgr")),r&&r instanceof e.RNAModel&&(this._actionManager=r,r.on("custom:onAction",this._executeAction),r.invoke("flush"))},this))},this))},_onUIThemeChanged:function(e,t){this.options.appApi.displayApi.applyUIThemeStyles()},_selectPlugin:function(e,t){var i=this.options,s=i.appApi.pluginsApi,o=i.appApi.rnaApi;if(i.appApi.displayApi.isModal()&&!this.options.appApi.displayApi.isModalAjax()&&s.isPluginOfThisType(t.id,"home_views")&&s.getSelectedPluginId("home_views")!==t.id){o.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&e.invokeMethod({methodName:"logASTestReportAPI",methodArgs:["CefViewLoadingSteps","Inside _selectPlugin","Returning from selectPlugin because modal is true."]})});return}i.runningInFull=!0,document.title=window.location.host+"/"+t.id,o.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&e.invokeMethod({methodName:"logASTestReportAPI",methodArgs:["CefViewLoadingSteps","Cef Renderer title",document.title]})}),s.isPluginOfThisType(t.id,"home_views")?(n=t.id,r=undefined,s.selectPluginIfNotSelected(Ac.Plugins.HOME).then(_.bind(function(){r||s.selectPlugin(n).then(_.bind(function(){t.nextAction&&this._executeAction(null,{params:t.nextAction})},this))},this))):s.selectPlugin(t.id).then(_.bind(function(){t.nextAction&&this._executeAction(null,{params:t.nextAction})},this)),t.leftRailId&&i.appApi.rnaApi.done(function(e){e.invokeMethod({methodName:"selectPluginSuccess",methodArgs:t.leftRailId})})},_selectConnectorPlugin:function(t,s){var o=this.options,u,a=o.appApi.pluginsApi,f=o.appApi.connectorsApi,l=o.appApi.sessionApi,c=this._getResolvedPromise(),h=o.appApi.rnaApi;o.runningInFull=!0;if(!s.connectorKey)return;u=f.getConnectorPluginId(s.connectorKey,s.connectorId);if(o.appApi.displayApi.isModal()&&!this.options.appApi.displayApi.isModalAjax()&&a.getSelectedPluginId("home_views")!==u){h.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&e.invokeMethod({methodName:"logASTestReportAPI",methodArgs:["CefViewLoadingSteps","Inside _selectPlugin","Returning from selectPlugin because modal is true."]})});return}r=s.connectorKey,i=s.connectorId,n=u,document.title=window.location.href+"/"+n,h.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&e.invokeMethod({methodName:"logASTestReportAPI",methodArgs:["CefViewLoadingSteps","Cef Renderer title",document.title]})}),a.getPluginUiModel(f.getConnectorPluginId(r,i))||(c=$.when(e.opFactory.create("GettingConnectorsUiHelpersOp",o).run(),e.opFactory.create("GettingSystemFoldersOp",o).run())),c.then(_.bind(function(){if(!r)return;n=f.getConnectorPluginId(r,i),a.selectPluginIfNotSelected(Ac.Plugins.HOME).then(_.bind(function(){r&&a.selectPlugin(n).then(_.bind(function(){s.nextAction&&this._executeAction(null,{params:s.nextAction})},this))},this))},this)),s.leftRailId&&o.appApi.rnaApi.done(function(e){e.invokeMethod({methodName:"selectPluginSuccess",methodArgs:s.leftRailId})})},_navigateTo:function(t,n){var r={},i=e.opFactory.create("GettingSiteCatalystBaseFileOp",this.options);n.queryParams&&(r=this.options.appApi.routerApi.parseQueryParams(n.queryParams),r.env&&Ac.config.setEnvironment(r.env),r.locale&&(Ac.Locale.setLocale(r.locale),require.config({config:{i18n:{locale:Ac.Locale.getLocale()}}}))),n.url&&(i.run(),this.options.appApi.routerApi.navigate(n.url,{trigger:!0}))},_clickedOutsideAiCview:function(e,t){var n=this.options,r=n.appApi.pluginsApi,i;r.getSelectedPluginId("tools")==="home"&&n.appApi.selectionApi.isRunningInFull()&&(i=r.getSelectedPluginId("home_views"),r.callPluginMethod(i,"clickedOutsideAiCview",undefined,this._getResolvedPromise(),!0))},_selectPluginInFileSelDlg:function(t,n){var r=this.options,i=r.appApi,s=i.pluginsApi,o,u=this._getResolvedPromise();r.runningInFileSelection&&(o=n.id,u=$.when(e.opFactory.create("GettingConnectorsUiHelpersOp",r).run(),e.opFactory.create("GettingSystemFoldersOp",r).run()),u.done(function(){i.selectionApi.triggerPluginSelectorClick(o,r.fileSelectionDlgOptions)}))},_selectApplyButtonInDigSig:function(e,t){var n=this.options,r=n.appApi,i=r.pluginsApi,s,o=i.getSelectedPluginId("tools"),u={val:0,signInfo:"",fillSignApplyStatus:-1};t["isBlank"]==1&&(u.val=1);var a=t.signInfo;u.val||(u.signInfo=a);var f=t.activateApply;f==0||f==1?u.fillSignApplyStatus=f:u.fillSignApplyStatus=-1,i.callPluginMethod(o,"directInkSignature",u,this._getResolvedPromise(),!0)},_selectConnectorPluginInFileSelDlg:function(t,n){var r="",i="",s,o=this.options,u=o.appApi,a=u.connectorsApi,f=u.pluginsApi,l=this._getResolvedPromise();if(!a)return;if(!f)return;n&&(r=n.connectorId,i=n.accountId),o.runningInFileSelection&&(s=a.getConnectorPluginId(r,i,!0),l=$.when(e.opFactory.create("GettingConnectorsUiHelpersOp",o).run(),e.opFactory.create("GettingSystemFoldersOp",o).run()),l.done(function(){u.selectionApi.triggerPluginSelectorClick(s,o.fileSelectionDlgOptions)}))}}),e.ListeningForActions}),define("core/dev/ops/rna/listening-for-connector-events-op",["core/ac-core","core/utils/util","core/ops/op"],function(e,t){var n=null,r=null;return e.ListeningForConnectorEvents=e.Op.extend({run:function(){var e=$.Deferred(),i=this.options,s=this,o=null;return this._deferred=e,n=i.appApi.connectorsApi,r=i.appApi.rnaApi,t.isCEF()?(i.readerContextModel.done(_.bind(function(t){var n=t.get("rna"),r,i;if(n){n.hasProperty("rnaAPI")&&(r=n.get("rnaAPI"),r.hasProperty("leftRailAPI")&&(i=r.get("leftRailAPI"),i.hasProperty("leftRailItems")&&(o=i.get("leftRailItems"))));if(!o){e.reject();return}o.off("add"),o.off("remove"),o.off("change"),o.on("add",this._onLeftRailItemAdded),o.on("remove",this._onLeftRailItemRemoved),o.on("change",this._onLeftRailItemChanged),e.resolve()}else e.reject()},this)),e.promise()):e.resolve().promise()},_onLeftRailItemAdded:function(e,t){var i="",s="";if(!n)return;if(!r)return;e.hasProperty("connectorId")&&(i=e.get("connectorId")),e.hasProperty("accountId")&&(s=e.get("accountId")),r.done(_.bind(function(e){var t=e.getConnectorsUIHelperData(!1,!1),r=e.getSystemFoldersData(!1,!1),o=$.when(t,r);o.done(_.bind(function(){var e,t=n.getConnectorPluginId(i,s,this.options.appApi.selectionApi.isRunningInFileSelection());t&&(e={connectorName:i},n.addConnectorPlugin(t,e))},this))},this))},_onLeftRailItemRemoved:function(e,t){var i="",s="";if(!n)return;if(!r)return;e.hasProperty("connectorId")&&(i=e.get("connectorId")),e.hasProperty("accountId")&&(s=e.get("accountId")),r.done(_.bind(function(e){var t=e.getConnectorsUIHelperData(!1,!1),r=e.getSystemFoldersData(!1,!1),o=$.when(t,r);o.done(_.bind(function(){var e,t=n.getConnectorPluginId(i,s,this.options.runningInFileSelection);t&&(e={pluginId:t},n.removeConnectorPlugin(t,e))},this))},this))},_onLeftRailItemChanged:function(e,t){}}),e.ListeningForConnectorEvents}),define("core/dev/ops/rna/listening-for-file-download-progress-op",["core/ac-core","core/ops/op"],function(e){return e.ListenForFileDownloadProgressOp=e.Op.extend({run:function(){var e=this.options,t=e.progressObj,n=e.progressCB,r=e.downloadResultPromise;t._addEventListener("custom:downloadFinished",function(e,t,n){!t.params||t.params.errorCode!=0?r.reject(t.params.errorCode):r.resolve(t.params)})}}),e.ListenForFileDownloadProgressOp}),define("core/dev/ops/rna/listening-for-file-upload-progress-op",["core/ac-core","core/ops/op"],function(e){return e.ListenForFileUploadProgressOp=e.Op.extend({run:function(){var e=this.options,t=e.progressObj,n=e.progressCB,r=e.uploadResultPromise,i=e.fileNumber;this._fileNumber=i,t._addEventListener("custom:uploadBegin",function(e,t,n){}),t._addEventListener("custom:uploadProgress",_.bind(function(e,t,i){t.params||r.reject(),n&&n(t.params.bytesWritten,t.params.bytesTotal,this._fileNumber)},this)),t._addEventListener("custom:uploadFinished",function(e,t,n){var i,s,o=t.params.httpRespCode;!t.params||t.params.errorCode!=0?r.reject():o>=200&&o<400?(i=JSON.parse(t.params.respBody),s=t.params.httpRespCode,r.resolve(i,s)):r.reject()})}}),e.ListenForFileUploadProgressOp}),define("core/dev/ops/rna/listening-for-stop-file-upload-op",["core/ac-core","core/ops/op"],function(e){return e.ListenForStopFileUploadOp=e.Op.extend({run:function(){var e=this.options,t=e.notificationObj,n={uploadRequest:e.uploadRequestObj},r=function(){e.appApi.rnaApi.then(function(e){e.assetApi({methodName:"stopFileUpload",methodArgs:n}),t.off("custom:stopFileUpload",r),e.notificationAPI.removeNotification(t.get("notificationID"))})};t&&t.on("custom:stopFileUpload",r)}}),e.ListenForStopFileUploadOp}),define("core/dev/ops/rna/opening-doc-in-reader-op",["core/ac-core","core/ops/op"],function(e){e.OpeningDocInReaderOp=e.Op.extend({run:function(){var t=this.options,n=new $.Deferred,r,i=[],s;return t.rootView&&t.rootView._triggerViewEvent(e.ViewEvents.OPEN_DOC_IN_READER_START),t.appApi.rnaApi.done(function(e){var o,u;t.itemModel&&t.itemModel.get("fileURI")?r=e.invokeMethod("openDoc",t.itemModel.get("fileURI")):!t.itemModel||t.itemModel.get("source")!=="sharepoint"&&t.itemModel.get("source")!=="desktopConnector"?t.id?(s=t.folderUiModel.get("path"),i.push(_.last(s).id),r=e.assetApi({methodName:"openFile",methodArgs:[t.id,i]})):t.localFileModel&&(o=_.isUndefined(t.needSave)?!1:t.needSave,u=_.isUndefined(t.updateRecentFilesAndFolders)?!0:t.updateRecentFilesAndFolders,r=e.fileApi({methodName:"openFile",methodArgs:[t.localFileModel,t.displayName,o,u]})):(s=t.folderUiModel.get("path"),_.each(s,function(e){i.push(e.id)}),r=e.fileApi({methodName:"openFile",methodArgs:[t.itemModel._proxy,"",!1,!0,i]})),r.done(function(){n.resolve()}).fail(function(e){n.reject(e)})}).fail(function(){n.reject()}),n.always(function(){t.rootView&&t.rootView._triggerViewEvent(e.ViewEvents.OPEN_DOC_IN_READER_END)}),n.promise()}})}),define("core/dev/ops/rna/opening-doc-in-pdm-op",["core/ac-core","core/ops/op"],function(e){e.OpeningDocInPDMOp=e.Op.extend({run:function(){var e=this.options,t=new $.Deferred,n,r;return r=e.pdmContextModel.get("pdm"),n=r.get("pdmPreview"),n&&e.nativeWindowModel&&e.itemModel?(n.invoke("showFilePreview",e.nativeWindowModel.get("platformHandle"),e.itemModel.get("fileURI"),0,0,window.innerWidth,window.innerHeight).done(function(n){e.nativeWindowModel.invoke("show"),t.resolve()}).fail(function(e){t.reject()}),t.promise()):t.reject().promise()}})}),define("core/dev/ops/rna/save-as-file-op",["core/ac-core","core/ops/op"],function(e){return e.SaveAsFileOp=e.Op.extend({run:function(){var e=this.options,t=$.Deferred(),n;return e.file?(n=[e.file,e.fileName,e.fileExtn],e.appApi.rnaApi.then(_.bind(function(e){e.fileApi({methodName:"saveAs",methodArgs:n}).then(function(e){e.errorSet?t.reject():t.resolve()},function(e){t.reject()})},this)),t):this._getRejectedPromise()}}),e.SaveAsFileOp}),define("core/dev/ops/rna/uploading-file-op",["core/ac-core","core/ops/op"],function(e){return e.UploadingFileOp=e.Op.extend({run:function(){var t=this.options,n=t.rnaFile,r=t.fileNo,i=t.notificationObj,s=t.progressCB,o=t.onDuplicateName||"",u=t.ignoreContentType||!1,a=t.showBezel||!1,f=t.parentID,l=t.fileName,c=$.Deferred(),h,p;if(!n||!this.options.appApi.rnaApi)return this._getRejectedPromise();if(!t.mimeType){if(!u)return this._getRejectedPromise();t.mimeType="application/octet-stream"}return this._fileNumber=r,p={file:n,uploadType:t.uploadType,mimeType:t.mimeType,on_dup_name:o,ignore_content_type:u,show_bezel:a},f&&(p=_.extend({},p,{parentID:f})),l&&(p=_.extend({},p,{fileName:l})),t.appApi.rnaApi.then(_.bind(function(n){h=n.assetApi({methodName:"uploadFile",methodArgs:p}),h.done(_.bind(function(n){var r,o,u;if(n.errorSet)c.reject();else{r={progressObj:n.progressObj,progressCB:s,uploadResultPromise:c},isNaN(this._fileNumber)||(r.fileNumber=this._fileNumber),e.opFactory.create("ListenForFileUploadProgressOp",_.extend(t,r)).run();if(i){try{o=JSON.parse(i.get("userData"))}catch(a){}o&&o.canUploadBeCancelled&&(u={notificationObj:i,uploadRequestObj:n.uploadRequestObj},e.opFactory.create("ListenForStopFileUploadOp",_.extend(t,u)).run())}}},this)).fail(function(e){c.reject()})},this)),c}}),e.UploadingFileOp}),define("core/dev/ops/rna/apply-ui-theme-style-op",["core/ac-core","core/ops/op"],function(e){return e.ApplyUIThemeStyleOp=e.Op.extend({run:function(){var e=this.options,t=e.colorPalette,n={};return _.isUndefined(t)?this._getResolvedPromise():(_.each(t.attributes,_.bind(function(e,t){var r=this._convertColorDecToHex(e._value);n[t]="#"+r},this)),this._findUIThemeStyleSheet(),this._updateThemeTextElemColor(n.RegularText_normal),this._updateThemeHeaderTextElemColor(n.HeaderText_normal),this._updateThemeHyperlinkElemColor(n.Hyperlink_normal),this._updateThemeDisabledTextElemColor(n.RegularText_disabled),this._updateThemeButtonElemLabelColor(n.PushButtonText_normal),this._updateThemeGrayButtonElemLabelColor(n.RegularText_normal),this._updateThemeButtonElemBackgroundColor(n.PushButtonBackground_normal),this._updateThemeButtonElemBackgroundColorDisabled(n.PushButtonBackground_disabled),this._updateThemeButtonElemBorderColor(n.ButtonBorder_normal),this._updateThemeButtonHoverColor(n.PushButtonBackground_hover),this._updateThemeContainerBackgroundColor(n.RegularBackground_normal),this._updateThemeContainerProminentBackgroundColor(n.ProminentBackground_normal),this._updateThemeFrameColor(n.RegularBackground_normal),this._updateThemeSelectableContentColor(n.ListItemText_checked),this._updateThemeSelectableContentBackgroundColor(n.ListItemBackground_checked),this._updateThemeSelectableContentFocusColor(n.ListItemBackground_normal),this._updateThemeSelectableContentHoverColor(n.ListItemBackground_normal),this._updateThemeHoverableContentColor(n.VerticalTabText_hover),this._updateThemeHoverableContentBackgroundColor(n.VerticalTabBackground_hover),this._updateThemeFocusColor(n.RegularText_normal),this._updateThemePlaceholderColor(n.TextEditGrayText_normal),this._updateThemeBorderColor(n.Border_normal),this._updateThemeListItemSubTextElemColor(n.ListItemSubText_normal),this._updateThemeListItemTextElemColor(n.ListItemText_normal),this._updateThemeListItemTextElemHoverColor(n.ListItemText_hover),this._updateThemeListItemTextElemCheckedColor(n.ListItemText_checked),this._updateThemeListitemBackgroundColor(n.ListItemBackground_normal),this._updateThemeListitemHoverColor(n.ListItemBackground_hover),this._updateThemeListitemCheckedColor(n.ListItemBackground_checked),this._updateThemeVerticalTabTextElemColor(n.VerticalTabText_normal),this._updateThemeVerticalTabTextElemHoverColor(n.vVerticalTabText_hover),this._updateThemeVerticalTabTextCheckedElemColor(n.VerticalTabText_checked),this._updateThemeVerticalTabBackgroundColor(n.VerticalTabBackground_normal),this._updateThemeVerticalTabHoverColor(n.VerticalTabBackground_hover),this._updateThemeVerticalTabCheckedColor(n.VerticalTabBackground_checked),this._updateThemeWalkthroughElemBackgroundColor(n.WalkthroughViewBackground_normal),this._updateThemeWalkthroughTextColor(n.WalkthroughViewText_normal),this._updateDocumentBackgroundColor(n.DocumentBackground_normal),this._updateInputBoxBackgroundColor(n.InputBoxBackground_normal),this._updateImageURLs(t.get("iconSet")),this._getResolvedPromise())},_findUIThemeStyleSheet:function(){this._ThemeStyleSheet=_.find(document.styleSheets,function(e){return!_.isUndefined(e.href)&&e.href.indexOf("main-cef-ui-theme.css")!==-1})},_convertColorDecToHex:function(e){var t,n=e.toString(16),r=n.length,i="";for(t=r;t<6;t++)i+="0";return i+=n,i},_updateCssSelectorStyle:function(e,t,n){if(this._ThemeStyleSheet){var r=this._ThemeStyleSheet,i=_.find(r.cssRules,function(t){return t.selectorText&&t.selectorText.toLowerCase()===e});_.isUndefined(i)||i.style.setProperty(t,n,"important")}},_getThemeNameFromIconSet:function(e){var t;return t=e.slice(0,e.toLowerCase().indexOf("icons")).toLowerCase(),t},_hasImageExtension:function(e){var t,n;t=[".png",".gif",".svg",".ico",".cur",".jpg"];for(n=0;n<t.length;++n)if(e.indexOf(t[n])>=0)return!0;return!1},_containsImageURL:function(e){return e.indexOf("url")>=0&&this._hasImageExtension(e)?!0:!1},_shouldURLbeChanged:function(e,t){if(e.indexOf("themeless")>-1)return!1;var n="/themes/dark/";return t=="dark"?e.indexOf(n)>-1?!1:!0:e.indexOf(n)>-1?!0:!1},_getContentOrBackground:function(e){var t,n,r;return t=undefined,_.isUndefined(e)||_.isUndefined(e.content)&&_.isUndefined(e.backgroundImage)?undefined:(n=e.content,r=e.backgroundImage,!_.isUndefined(r)&&this._containsImageURL(r)&&(t="backgroundImage"),!_.isUndefined(n)&&this._containsImageURL(n)&&(t="content"),t)},_processRule:function(e,t){var n,r,i,s,o,u;if(e.type===CSSRule.STYLE_RULE)r=e.style,n=this._getContentOrBackground(r),!_.isUndefined(n)&&!_.isUndefined(r)&&(i=r[n],t=="dark"?this._shouldURLbeChanged(i,t)&&(i=i.split("/"),i.splice(i.length-1,0,"themes",t),i=i.join("/"),r[n]=i):this._shouldURLbeChanged(i,t)&&(i=i.replace("/themes/dark",""),r[n]=i));else if(e.type===CSSRule.MEDIA_RULE){s=e.cssRules;for(u=0;u<s.length;++u)o=s[u],this._processRule(o,t)}else this._processStyleSheet(e.styleSheet,t)},_processStyleSheet:function(e,t){var n,r,i;if(_.isUndefined(e))return;n=e.cssRules;if(!_.isUndefined(n))for(r=0;r<n.length;++r){i=n[r];if(_.isUndefined(i))continue;this._processRule(i,t)}},_updateImageURLs:function(e){var t,n,r,i;if(_.isUndefined(e))return;r="light",i=this._getThemeNameFromIconSet(e);if(_.isUndefined(i)||_.isNull(i))return;t=document.styleSheets;for(n=0;n<t.length;++n)this._processStyleSheet(t[n],i)},_updateDocumentBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-document-background","background-color",e)},_updateInputBoxBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-input-box","background-color",e)},_updateThemeTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-text","color",e)},_updateThemeHeaderTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-header-text","color",e)},_updateThemeHyperlinkElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-hyperlink","color",e)},_updateThemeDisabledTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-disabled-text","color",e)},_updateThemeButtonElemLabelColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button-label","color",e)},_updateThemeGrayButtonElemLabelColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button-gray-label","color",e)},_updateThemeButtonElemBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button","background-color",e),this.options.appApi.rnaApi.then(_.bind(function(e){e.isHighContrastEnabled()&&(this._updateCssSelectorStyle(".ui-theme .theme-button","border-width","2px"),this._updateCssSelectorStyle(".ui-theme .theme-button","border-style","solid"))},this))},_updateThemeButtonElemBackgroundColorDisabled:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button:disabled","background-color",e)},_updateThemeButtonElemBorderColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button","border-color",e)},_updateThemeButtonHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-button:hover","background-color",e)},_updateThemeContainerBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme.theme-container","background-color",e)},_updateThemeContainerProminentBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme.theme-container-prominent","background-color",e)},_updateThemeFrameColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-frame","border-color",e)},_updateThemeSelectableContentColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-selectable","color",e)},_updateThemeSelectableContentBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-selectable","background-color",e)},_updateThemeSelectableContentFocusColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-selectable:hover","background-color",e)},_updateThemeSelectableContentHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-selectable:focus","background-color",e)},_updateThemeHoverableContentColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-hoverable:hover","color",e),this._updateCssSelectorStyle(".ui-theme .theme-hoverable:focus","color",e),this._updateCssSelectorStyle(".ui-theme .theme-hoverable:hover div","color",e)},_updateThemeHoverableContentBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-hoverable:hover","background-color",e),this._updateCssSelectorStyle(".ui-theme .theme-hoverable:focus","background-color",e),this._updateCssSelectorStyle(".ui-theme .theme-hoverable:hover div","background-color",e)},_updateThemeFocusColor:function(e){this._updateCssSelectorStyle("li:focus > span","outline-color",e),this._updateCssSelectorStyle(":focus","outline-color",e),this._updateCssSelectorStyle(":focus","outline-style","dotted"),this._updateCssSelectorStyle(":focus","outline-width","1px")},_updateThemeBorderColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-border","border-color",e)},_updateThemeListItemSubTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item-sub-text","color",e)},_updateThemeListItemTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item-text","color",e)},_updateThemeListItemTextElemHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item:hover .theme-list-item-text","color",e)},_updateThemeListItemTextElemCheckedColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item.selected .theme-list-item-text","color",e),this._updateCssSelectorStyle(".ui-theme .theme-list-item:focus .theme-list-item-text","color",e)},_updateThemeListitemBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item","background-color",e)},_updateThemeListitemHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item:hover","background-color",e)},_updateThemeListitemCheckedColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-list-item.selected","background-color",e),this._updateCssSelectorStyle(".ui-theme .theme-list-item:focus","background-color",e)},_updateThemeVerticalTabTextElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab-text","color",e)},_updateThemeVerticalTabTextElemHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab:hover .theme-vertical-tab-text","color",e),this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab:focus .theme-vertical-tab-text","color",e)},_updateThemeVerticalTabTextCheckedElemColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab.selected .theme-vertical-tab-text","color",e)},_updateThemeVerticalTabBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab","background-color",e)},_updateThemeVerticalTabHoverColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab:hover","background-color",e),this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab:focus","background-color",e)},_updateThemeVerticalTabCheckedColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-vertical-tab.selected","background-color",e)},_updateThemeWalkthroughElemBackgroundColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-walkthrough","background-color",e)},_updateThemeWalkthroughTextColor:function(e){this._updateCssSelectorStyle(".ui-theme .theme-walkthrough-text","color",e)},_updateThemePlaceholderColor:function(e){this._updateCssSelectorStyle(".ui-theme::-webkit-input-placeholder","color",e)}}),e.ApplyUIThemeStyleOp}),define("core/dev/ops/op-factory",["core/ac-core","core/ops/connectors/adding-connector-op","core/ops/connectors/adding-connector-plugin-op","core/ops/connectors/instantiating-connectors-by-cohort-op","core/ops/connectors/instantiating-connectors-op","core/ops/connectors/instantiating-one-connector-op","core/ops/connectors/removing-connector-op","core/ops/connectors/removing-connector-plugin-op","core/ops/connectors/removing-connector-plugins-op","core/ops/creating/creating-folder-op","core/ops/dialogs/renaming-item-from-dlg-op","core/ops/dialogs/showing-move-dlg-op","core/ops/dialogs/showing-quota-warning-dlg-op","core/ops/dialogs/showing-rename-dlg-op","core/ops/downloading/downloading-asset-if-exists-op","core/ops/downloading/downloading-asset-op","core/ops/downloading/downloading-form-op","core/ops/downloading/downloading-zip-op","core/ops/downloading/downloading-zip-start-op","core/ops/getting/getting-asset-metadata-op","core/ops/getting/getting-base-cloud-uris-op","core/ops/getting/getting-base-files-uris-op","core/ops/getting/getting-common-limits-op","core/ops/getting/getting-connectors-ui-helpers-op","core/ops/getting/getting-document-cloud-storage-info-op","core/ops/getting/getting-download-ticket-op","core/ops/getting/getting-folder-items-op","core/ops/getting/getting-folder-metadata-op","core/ops/getting/getting-system-folder-metadata-op","core/ops/getting/getting-folder-op","core/ops/getting/getting-folder-path-op","core/ops/getting/getting-root-op","core/ops/getting/getting-site-catalyst-base-file-op","core/ops/getting/getting-sso-uri-op","core/ops/getting/getting-storage-quota-op","core/ops/getting/getting-system-folders-op","core/ops/getting/getting-users-me-cohorts-op","core/ops/listening/listening-for-key-events-op","core/ops/listening/listening-for-focus-events-op","core/ops/manipulation/deleting-existing-dup-op","core/ops/manipulation/deleting-form-op","core/ops/manipulation/deleting-item-op","core/ops/manipulation/deleting-selection-if-confirmed-op","core/ops/manipulation/deleting-selection-op","core/ops/manipulation/moving-item-op","core/ops/manipulation/moving-items-op","core/ops/manipulation/renaming-added-dup-op","core/ops/manipulation/renaming-item-op","core/ops/manipulation/setting-asset-metadata-op","core/ops/misc/checking-storage-quota-on-startup-op","core/ops/misc/handling-collection-render-begin-op","core/ops/misc/handling-collection-render-end-op","core/ops/misc/loading-framework-version-op","core/ops/misc/sending-log-event-op","core/ops/misc/validating-base-uris-op","core/ops/misc/validating-name-op","core/ops/notifications/creating-notifications-endpoints-op","core/ops/notifications/enabling-folder-notifications-op","core/ops/notifications/getting-folder-notifications-op","core/ops/notifications/stopping-notifications-op","core/ops/plugins/executing-plugins-predownload-op","core/ops/plugins/instantiating-plugin-op","core/ops/plugins/instantiating-selector-op","core/ops/plugins/loading-module-op","core/ops/plugins/loading-plugin-list-op","core/ops/plugins/loading-plugin-op","core/ops/plugins/loading-plugins-op","core/ops/plugins/loading-selection-actions-op","core/ops/plugins/selecting-plugin-op","core/ops/plugins/selecting-selection-action-item-op","core/ops/preview/getting-hover-preview-metadata-op","core/ops/preview/getting-rhp-folder-child-counts-op","core/ops/preview/getting-rhp-preview-metadata-op","core/ops/selection/clearing-selection-op","core/ops/selection/selecting-collection-item-op","core/ops/session/deleting-session-op","core/ops/session/refreshing-session-initially-op","core/ops/session/refreshing-session-later-op","core/ops/session/refreshing-session-op","core/ops/session/rna-refreshing-session-op","core/ops/session/starting-session-op","core/ops/session/rna-starting-session-op","core/ops/session/starting-susi-session-op","core/ops/session/stopping-session-op","core/ops/sharing/sharing-item-op","core/ops/rna/creating-window-op","core/ops/rna/downloading-file-op","core/ops/rna/initializing-cef-op","core/ops/rna/initializing-pdm-op","core/ops/rna/initializing-reader-op","core/ops/rna/launch-footer-url-in-browser-op","core/ops/rna/listening-for-actions-op","core/ops/rna/listening-for-connector-events-op","core/ops/rna/listening-for-file-download-progress-op","core/ops/rna/listening-for-file-upload-progress-op","core/ops/rna/listening-for-stop-file-upload-op","core/ops/rna/opening-doc-in-reader-op","core/ops/rna/opening-doc-in-pdm-op","core/ops/rna/save-as-file-op","core/ops/rna/uploading-file-op","core/ops/rna/apply-ui-theme-style-op"],function(e){return e.OpFactory=e.Op.extend({create:function(t,n){var r=e[t];if(!!r)return new r(n);LOG(0,"AcCore.OpFactory.create: Unrecognized class: "+t)}}),e.OpFactory}),define("core/dev/ops/while-signed-in-op",["core/ac-core","core/ops/op"],function(e){return e.WhileSignedInOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this.options.isDesktopConnectorPlugin||this.options.appApi.sessionApi.addSignedInChangeCallback(this._onSignedInChange)},_onSignedInChange:function(e,t){t||this._disableOperation()},_disableOperation:function(){this.stopListening(),this._isDisabled=!0},_isOperationDisabled:function(){return this._isDisabled}}),e.WhileSignedInOp}),define("core/dev/ops/rna/selection-action-attach-to-email-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.SelectionActionAttachToEmailOp=e.Op.extend({run:function(){var e=this.options.selectionUiModel,t=e.getSelectedItemModels(),n=[],r={},i=[];if(t){_.each(t,function(e){e.isFolder()||(_.isEmpty(e.id)?i.push(e._proxy):n.push(e.id))});if(i.length>0)return this.options.appApi.rnaApi.done(_.bind(function(e){return r.selectedItemModels=i,e.stApi.attachToEmail(r)},this));if(n.length>0)return this.options.appApi.rnaApi.done(_.bind(function(e){return r.selectedAssetIds=n,e.stApi.attachToEmail(r)},this))}return this._getRejectedPromise()}}),e.SelectionActionAttachToEmailOp}),define("core/dev/ops/rna/downloading-zip-file-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.DownloadingZipFileOp=e.Op.extend({run:function(n){var r=this.options,i=$.Deferred(),s,o,u,a,f;return a=new Date,f=a.getTimezoneOffset(),u=r.appApi.baseFilesUrisApi.getDownloadUri()+"archive/zip/"+encodeURIComponent(r.id_list)+"?dlticket="+encodeURIComponent(n)+"&tzo="+encodeURIComponent(f)+"&x-api-client-id="+t.REQUEST_HEADER_CLIENT_ID,o={assetType:r.assetType||"managed",fetchMetadata:!1,urlString:u,fileName:r.fileName||"",fileExtension:e.Util.getExtension(r.fileName)||""},r.appApi.rnaApi.then(_.bind(function(t){s=t.assetApi({methodName:"downloadFile",methodArgs:o}),s.done(function(t){var n;t.errorSet?i.reject():(n={progressObj:t.progressObj,downloadResultPromise:i},e.opFactory.create("ListenForFileDownloadProgressOp",_.extend(r,n)).run())}).fail(function(e){i.reject()})},this)),[i,s]}}),e.DownloadingZipFileOp}),define("core/dev/ops/rna/selection-action-launch-send-track-app-op",["core/ac-core","core/utils/http-util","core/ops/op"],function(e,t){return e.SelectionActionLaunchSendAndTrackAppOp=e.Op.extend({run:function(){var e=this.options.selectionUiModel,t=e.getSelectedItemModels(),n=[],r=[],i={};if(t)return _.each(t,function(e){_.isEmpty(e.id)?r.push(e._proxy):n.push(e.id)}),this.options.appApi.rnaApi.done(_.bind(function(e){return i.selectedParcelId="",i.selectedAssetIds=n,i.selectedModels=r,e.stApi.launchSendTrackApp(i)},this));this._getResolvedPromise()}}),e.SelectionActionLaunchSendAndTrackAppOp}),define("core/dev/ops/getting/getting-sharing-info-op",["core/ac-core","core/ops/op"],function(e){return e.GettingSharingInfoOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.usersMeApi.getUserCohorts();return(!t||t["ts-use-sharing-metadata"]!=="enabled")&&e.appApi.folderApi.addFilesCollectionCallback(this._onFilesCollectionChange),$.Deferred().promise()},_onFilesCollectionChange:function(){var e=this.options;e.appApi.folderApi.getFilesCollection()&&(e.sharingInfoModel.reset(e.appApi.folderApi.getFilesCollection()),this._doChunk())},_doChunk:function(){var e=this.options,t,n,r=e.sharingInfoModel,i=e.sharingInfoModel.get("models");r.moreChunks()&&r.fetch({global:!1}).done(_.bind(function(e){var s;for(s=r.get("chunk_start");s<=r.get("chunk_end");s+=1)t=i[s],t&&(n=t.id,e[n]&&e[n].length>0&&t.set("shared",!0));this._doChunk()},this))}}),e.GettingSharingInfoOp}),define("core/dev/ops/misc/showing-manage-sub-op",["core/ac-core","core/ops/op"],function(e){return e.ShowingManageSubOp=e.Op.extend({run:function(){return window.location=e.Config.MANAGE_SUBSCRIPTION_URI,this._getResolvedPromise()}}),e.ShowingManageSubOp}),define("core/dev/ops/listening/listening-for-parcel-notifications-op",["core/ac-core","core/ops/op"],function(e){return e.ListeningForParcelNotificationsOp=e.Op.extend({run:function(){var e=$.Deferred(),t=this.options.appApi.usersMeApi.getUserCohorts();return(!t||t["ts-use-sharing-metadata"]!=="enabled")&&this._startNotifications(),this._deferred=e,e.promise()},_startNotifications:function(){var t=this.options;e.modelFactory.create("SharingRootModel",t).fetch({global:!1}).done(_.bind(function(e){t.appApi.notificationApi.addFolderNotificationCallback(e.folder,this._onPseudoFolderNotification)},this))},_onPseudoFolderNotification:function(e){var t,n;for(t=0;t<e.length;t+=1)n=e[t],n.object_type==="parcel"&&this._updateSharingIndicator(n.operation,n.files)},_updateSharingIndicator:function(e,t){var n,r,i=this.options.appApi.folderApi.getFilesCollection(),s=e==="created"?!0:!1,o;if(!i)return;for(n=0;n<i.length;n+=1)for(r=0;r<t.length;r+=1){o=i[n];if(t[r]===o.id){o.set("shared",s);break}}}}),e.ListeningForParcelNotificationsOp}),define("core/dev/collections/ui/ui-collection",["core/ac-core"],function(e){return e.UiCollection=Backbone.Collection.extend({UiCollectionException:function(e){this.name="AcCore.UiCollection.Exception",this.message=e},fetch:function(){throw new this.UiCollectionException("AcCore.UiCollection.fetch should never be called!")},create:function(){throw new this.UiCollectionException("AcCore.UiCollection.create should never be called!")}}),e.UiCollection}),define("core/dev/models/ui/search-ui-model",["core/ac-core","i18n!core/nls/ui-strings","core/utils/date-util","core/utils/file-types","core/models/ui/ui-model","core/collections/ui/ui-collection-factory"],function(e,t,n,r){var i="cpdf2-document-converter",s="document-converter",o=r.MimeType,u=r.UiName,a={};return a[o.ADOBE_FILL_SIGN]=u.ADOBE_FILL_SIGN,a[o.ADOBE_ILLUSTRATOR]=u.ADOBE_ILLUSTRATOR,a[o.ADOBE_INDESIGN]=u.ADOBE_INDESIGN,a[o.ADOBE_PDF]=u.ADOBE_PDF,a[o.ADOBE_PHOTOSHOP]=u.ADOBE_PHOTOSHOP,a[o.HTML]=u.HTML,a[o.IMAGE]=t.IMAGE,a[o.MS_EXCEL]=u.MS_EXCEL,a[o.MS_POWERPOINT]=u.MS_POWERPOINT,a[o.MS_WORD]=u.MS_WORD,a[o.TEXT]=t.TEXT,a[o.VIDEO]=t.VIDEO,a[o.ZIP]=u.ZIP,e.SearchUiModel=e.UiModel.extend({recognized:{field_queries:{type:"object",optional:!1},focus_in_search_field:{type:"boolean",optional:!1},search_control_height:{type:"number",optional:!0},status:{type:"string",optional:!1,choices:["pending","succeeded","failed","closed"]},invalid:{type:"boolean",optional:!1},mru_query:{type:"object",optional:!0},mru_filter:{type:"object",optional:!0},keydown_debounce_delay:{type:"number",optional:!1},render_debounce_delay:{type:"number",optional:!1},pagesize:{type:"number",optional:!0},route:{type:"string",optional:!0},should_show_folders:{type:"boolean",optional:!0},should_show_navigate_root:{type:"boolean",optional:!0},current_folder_id:{type:"string",optional:!0},is_locked:{type:"boolean",optional:!0},max_query_boxes:{type:"number",optional:!1},too_many_query_boxes:{type:"boolean",optional:!1},max_paste_length:{type:"number",optional:!1}},defaults:{focus_in_search_field:!1,status:"closed",invalid:!1,keydown_debounce_delay:500,render_debounce_delay:10,route:"files",should_show_folders:!1,should_show_navigate_root:!1,current_folder_id:undefined,is_locked:!1,max_query_boxes:5,too_many_query_boxes:!1,max_paste_length:100},initialize:function(){var t,n=e.Features,r,i;e.UiModel.prototype.initialize.call(this),t=e.uiCollectionFactory.create("FieldQueriesUiCollection"),this.set("field_queries",t,{silent:!0}),n.isFeatureEnabled("query_boxes_use_alt_max")?r=n.getFeature("query_boxes_alt_max"):r=n.getFeature("query_boxes_default_max"),this.set("max_query_boxes",r||this.defaults.max_query_boxes),n.isFeatureEnabled("use_alt_keydown_debounce_delay")?i=n.getFeature("keydown_debounce_delay_alt"):i=n.getFeature("keydown_debounce_delay_default"),this.set("keydown_debounce_delay",i||this.defaults.keydown_debounce_delay)},getSearchPath:function(){return this.get("route")+$.trim(this.getFieldQueriesPath())},appendRootPath:function(e,t){var n;return t?e.indexOf("files")!==0?e:(n="?root="+encodeURIComponent(t),e.indexOf(n)<0?e+n:e):e},getFieldQueryCount:function(){return this.get("field_queries").length},hasFieldQueries:function(){return this.getFieldQueryCount()>0},getRemovableFieldQueryCount:function(){return this.get("field_queries").reduce(function(e,t){return t.get("removable")?e+1:e},0)},hasRemovableFieldQueries:function(){return this.getRemovableFieldQueryCount()>0},getVisibleFieldQueryCount:function(e){var t=e&&e.queryBoxesOnly;return this.get("field_queries").reduce(function(e,n){if(n.get("query_box_visible"))if(!t||n.get("commit_query_box"))return e+1;return e},0)},getLastVisibleFieldQuery:function(){var e=this.get("field_queries"),t=e.length,n,r;if(t>0)for(n=t-1;n>=0;n-=1){r=e.at(n);if(r.get("query_box_visible"))break}return r},hasVisibleFieldQueries:function(){return this.getVisibleFieldQueryCount()>0},hasQueryBox:function(){return this.getVisibleFieldQueryCount({queryBoxesOnly:!0})>0},updateTooManyQueryBoxes:function(){this.set("too_many_query_boxes",this.getVisibleFieldQueryCount({queryBoxesOnly:!0})>this.get("max_query_boxes"))},showFolders:function(e){return this.get("should_show_folders")&&(e===!0||this.isSearching())&&!this.hasVisibleFieldQueries()},showNavigationAtRoot:function(){return this.showFolders()&&this.get("should_show_navigate_root")},getFieldQueries:function(){var e=[];return this.get("field_queries").each(function(t){e.push(t.getFieldQueryRequest())}),this._compressList(e)},getFilters:function(){var e=[],t;return this.get("field_queries").each(function(n){t=n.getFieldQueryFilter(),t&&e.push(t)}),this._compressList(e)},addFieldQuery:function(e,t){var n=e.id,r=this.get("field_queries"),i,s;return this.expandFieldQueryFilter(e),e.queryLabel||(e.queryLabel=this.getFieldQueryLabel(e)),n||(n=e.id=this.getFieldQueryId(e)),i=r.get(n),i||(s=n.indexOf(":"),s>0&&(i=r.get(n.substring(0,s)))),i&&r.remove(i),r.add(e),this.updateTooManyQueryBoxes(),this.triggerFieldQueriesChange((!t||!t.silent)&&(!i||i.get("value")!==e.value)),e.commitQueryBox&&this.resetFocus(),this},expandFieldQueryFilter:function(e){var t=e.field,n=e.filter,r,o;t==="created_by_client"&&n&&!n.$or&&(r=[],o={},o[s]=n,r.push(o),o={},o[i]=n,r.push(o),e.filter={$or:r})},getFieldQueriesPath:function(){var e="",t;return this.get("field_queries").each(function(n){t=n.getFieldQueryPath(),t&&(e+="/"+t)},this),e},setFieldQueriesPath:function(e){var t,n,r,i,s;if(!e)return;t=this.splitFieldQueriesPath(e),s=t.length,this.removeRemovableFieldQueries();for(i=0;i<s;i+=1)n=t[i].split("="),n.length===2&&(r={field:n[0],value:n[1],commitQueryBox:!0},this.translateFieldQueryPath(r).expandFieldQueryFilter(r),r.queryLabel=this.getFieldQueryLabel(r),this.addFieldQuery(r,{silent:!0}));this.triggerFieldQueriesChange(!0)},splitFieldQueriesPath:function(e){var t=[],n,r=e,i;do i=r.search(/\w\//),i>0?(n=r.substr(0,i+1),r=r.slice(i+2)):n=r,n=n.replace(/\\\//,"/"),t.push(n);while(i>0);return t},translateFieldQueryPath:function(e){var t=e.field,n=e.value;return t==="created_by_client"&&(n==="createpdf"||n==="exportpdf"||n==="combinepdf"?(e.filter="sc_worker_"+n,e.value="api_cpdf"):n==="fillsign"&&(e.value="api_fillsign")),this},removeFieldQuery:function(e){var t=this.get("field_queries"),n=t.get(e);return n&&(t.remove(n),this.updateTooManyQueryBoxes(),this.triggerFieldQueriesChange(!0),n.get("commitQueryBox")&&this.resetFocus()),this},removeLastFieldQuery:function(){var e=this.get("field_queries"),t=e.length,n;return t>0&&(n=this.getLastVisibleFieldQuery(),n.get("removable")&&(e.remove(n),this.updateTooManyQueryBoxes(),this.triggerFieldQueriesChange(!0))),this},removeRemovableFieldQueries:function(){var e=this.get("field_queries"),t=[];e.each(function(e){return e.get("removable")&&t.push(e),!0}),t.length>0&&(_.each(t,function(t){e.remove(t)}),this.updateTooManyQueryBoxes(),this.triggerFieldQueriesChange(!0))},removeAllFieldQueries:function(){var e=this.get("field_queries");return e.length>0?(e.reset(),this.updateTooManyQueryBoxes(),!0):!1},closeSearch:function(){return this.set("status","closed"),this.removeAllFieldQueries()&&this.triggerFieldQueriesChange(!0),this},triggerFieldQueriesChange:function(e){var t="change:field_queries";e&&(t+=" change:field_queries_request"),this.trigger(t,this,this.get("field_queries"))},getFieldQueryId:function(e){var t=e.field,n=e.queryLabel;return e.commitQueryBox&&n&&(t+=":"+n),t},getFieldQueryLabel:function(e){var n,r=e.value;switch(e.field){case"all":n="";break;case"name":n=t.FILE_NAME_CONTAINS;break;case"content":n=t.FILE_CONTENT;break;case"content_type":n=t.FILE_TYPE_IS,r=this.getFileTypeString(r);break;case"modified":n=t.DATE_LAST_MODIFIED,r=this.getDateUiString(r);break;case"last_access":n=t.DATE_LAST_VIEWED,r=this.getDateUiString(r);break;case"created":n=t.DATE_ADDED,r=this.getDateUiString(r);break;case"created_by_client":n=t.FILE_ADDED_BY,r=this.getFileAddedByValue(e);break;case"min_size":n=t.MIN_SIZE;break;case"max_size":n=t.MAX_SIZE}return n?_.template(t.FILTER_DISPLAY_VALUE,{field:n,value:r}):r},getFileTypeString:function(e){return a[e]||e},getFileAddedByValue:function(e){var n=e.value,r=e.filter,i;return r&&r.$or?(r=r.$or[0],i=_.values(r)[0].substr("sc_worker_".length),i==="createpdf"?n=t.CREATE_PDF:i==="exportpdf"?n=t.EXPORT_PDF:i==="combinepdf"&&(n=t.COMBINE_PDF)):n==="api_fillsign"?n=t.FILL_SIGN:n==="api_acrobat*"?n=t.ADOBE_ACROBAT:n==="api_reader_mobile*,api_acrobat_mobile*"?n=t.ADOBE_READER_MOBILE:n==="api_reader*"&&(n=t.ADOBE_READER),n},getDateUiString:function(e){var r=e;switch(e){case n.TODAY:r=t.TODAY;break;case n.YESTERDAY:r=t.YESTERDAY;break;case n.WITHIN_LAST_WEEK:r=t.WITHIN_LAST_WEEK;break;case n.WITHIN_LAST_MONTH:r=t.WITHIN_LAST_MONTH;break;case n.ONE_TO_TWO_MONTHS_AGO:r=t.ONE_TO_TWO_MONTHS_AGO;break;case n.TWO_TO_THREE_MONTHS_AGO:r=t.TWO_TO_THREE_MONTHS_AGO;break;case n.THREE_TO_FOUR_MONTHS_AGO:r=t.THREE_TO_FOUR_MONTHS_AGO;break;case n.FOUR_TO_FIVE_MONTHS_AGO:r=t.FOUR_TO_FIVE_MONTHS_AGO;break;case n.FIVE_TO_SIX_MONTHS_AGO:r=t.FIVE_TO_SIX_MONTHS_AGO;break;case n.SIX_TO_TWELVE_MONTHS_AGO:r=t.SIX_TO_TWELVE_MONTHS_AGO;break;case n.MORE_THAN_ONE_YEAR_AGO:r=t.MORE_THAN_ONE_YEAR_AGO}return r},isSearching:function(){return this.get("status")!=="closed"},isSearchPending:function(){return this.get("status")==="pending"},hasSearchSucceeded:function(){return this.get("status")==="succeeded"},isSearchClosed:function(){return this.get("status")==="closed"},invalidate:function(){this.isSearching()&&(this.set("invalid",!0),this.set("invalid",!1,{silent:!0}))},resetFocus:function(){this.set("focus_in_search_field",!0).set("focus_in_search_field",!1,{silent:!0})},_compressList:function(e){var t;return e.length>1?t={$and:e}:t=e[0],t}},{FIELD_ALL:"all",FIELD_FILE_NAME:"name",FIELD_FILE_CONTENT:"content",FIELD_FILE_TYPE:"content_type",FIELD_FILE_ADDED_BY:"created_by_client",FIELD_FILE_SIZE:"size",FIELD_FILE_MIN_SIZE:"min_size",FIELD_FILE_MAX_SIZE:"max_size",FIELD_FILE_PARENT:"parent_id",FIELD_FILE_OBJECT_TYPE:"object_type",FIELD_DATE_ADDED:"created",FIELD_DATE_MODIFIED:"modified",FIELD_DATE_LAST_ACCESS:"last_access",CLIENT_ID_CPDF:"api_cpdf",SC_WORKER_:"sc_worker_",CREATEPDF:"createpdf",EXPORTPDF:"exportpdf",COMBINEPDF:"combinepdf",API_FILLSIGN:"api_fillsign",FILLSIGN:"fillsign",FILTER_CPDF2_DOCUMENT_CONVERTER:"cpdf2-document-converter",FILTER_DOCUMENT_CONVERTER:"document-converter",STATUS_PENDING:"pending",STATUS_SUCCEEDED:"succeeded",STATUS_FAILED:"failed",STATUS_CLOSED:"closed"}),e.SearchUiModel}),define("core/dev/models/ui/field-query-ui-model",["core/ac-core","core/utils/date-util","core/models/ui/ui-model","core/models/ui/search-ui-model"],function(e,t){return e.FieldQueryUiModel=e.UiModel.extend({recognized:{field:{type:"string",optional:!1},value:{type:"string",optional:!1},filter:{type:"object",optional:!0},commit_query_box:{type:"boolean",optional:!0},query_box_visible:{type:"boolean",optional:!1},query_label:{type:"string",optional:!0},removable:{type:"boolean",optional:!1}},defaults:{query_box_visible:!0,removable:!0},initialize:function(){var t,n,r=this.defaults;e.UiModel.prototype.initialize.call(this),t=this.get("queryBoxVisible"),n=function(){return _.isUndefined(t)?r.query_box_visible:t},this.set({commit_query_box:this.get("commitQueryBox"),query_box_visible:n(),query_label:this.get("queryLabel")})},getFieldQueryRequest:function(){var n={},r=this.get("field"),i=this.get("value"),s=e.SearchUiModel,o,u,a;return r===s.FIELD_ALL?(i=this.addWildcards(i),n[r]=i):(r===s.FIELD_FILE_NAME?i=this.addWildcards(i):r===s.FIELD_FILE_TYPE?i=this.getFieldQueryFileTypeValue(i):r===s.FIELD_DATE_ADDED||r===s.FIELD_DATE_MODIFIED||r===s.FIELD_DATE_LAST_ACCESS?i===t.ALL_TIME?i="*":(o=t.getDateRange(i),i={$gte:o.begin,$lte:o.end}):r===s.FIELD_FILE_MIN_SIZE?(r=s.FIELD_FILE_SIZE,u={},u.$gte=i,i=u):r===s.FIELD_FILE_MAX_SIZE?(r=s.FIELD_FILE_SIZE,a={},a.$lte=i,i=a):r===s.FIELD_FILE_ADDED_BY&&(r="$or",i=this.getFieldQueryCreatedByClientValue(i)),n[r]=i),n},getFieldQueryFileTypeValue:function(e){var t,n;return e=e.replace(/\+/g,"/"),n=e.split(","),_.each(n,function(e,t){n[t]=$.trim(e)}),n.length===1?t=n[0]:t={$in:n},t},getFieldQueryCreatedByClientValue:function(t){var n=[],r,i;return r=t.split(","),_.each(r,function(t){i={},i[e.SearchUiModel.FIELD_FILE_ADDED_BY]=t,n.push(i)}),n},getFieldQueryPath:function(){var t=this.get("field"),n=this.get("value"),r=this.get("filter"),i,s,o=e.SearchUiModel;if(!this.get("commit_query_box"))return"";if(t===o.FIELD_FILE_ADDED_BY){r&&(s=_.values(r.$or[0])[0]);if(s){i=s.substr(o.SC_WORKER_.length);if(i===o.CREATEPDF||i===o.EXPORTPDF||i===o.COMBINEPDF)n=i}else n===o.API_FILLSIGN&&(n=o.FILLSIGN)}return t+"="+encodeURIComponent(n)},getFieldQueryFilter:function(){return this.get("filter")},addWildcards:function(e){var t=e,n=e.length,r="*";return n>0&&t.indexOf(" ")<0&&(t.charAt(n-1)!==r&&(t+=r),t.charAt(0)!==r&&(t=r+t)),t}}),e.FieldQueryUiModel}),define("core/dev/collections/ui/field-queries-ui-collection",["core/ac-core","core/collections/ui/ui-collection","core/models/ui/field-query-ui-model"],function(e){e.FieldQueriesUiCollection=e.UiCollection.extend({model:e.FieldQueryUiModel})}),define("core/dev/models/ui/plugin-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.PluginUiModel=e.UiModel.extend({recognized:{id:{type:"string",optional:!1},base_url:{type:"string",optional:!0},group_css_url:{type:"string",optional:!0},group_module_url:{type:"string",optional:!0},group_selector_css_url:{type:"string",optional:!0},group_selector_module_url:{type:"string",optional:!0},config:{type:"object",optional:!1},selector_elem:{type:"object",optional:!0},content_elem:{type:"object",optional:!0},preview_elems:{type:"array",optional:!0},selector_loaded:{type:"boolean",optional:!1},selector_api:{type:"object",optional:!1},selector_label:{type:"string",optional:!0},is_removable:{type:"boolean",optional:!0},connector_name:{type:"string",optional:!0},load_plugin:{type:"boolean",optional:!1},plugin_loaded:{type:"boolean",optional:!1},plugin_api:{type:"object",optional:!0},show_plugin:{type:"boolean",optional:!1},enable_plugin:{type:"boolean",optional:!0}},defaults:{selector_loaded:!1,load_plugin:!1,plugin_loaded:!1,show_plugin:!0,enable_plugin:!0,preview_elems:[],is_removable:!1,connector_name:""},getDependencies:function(){return this.get("config").dependencies},getSelectorCssUrl:function(){return this._getFullUrlFor("selector_css_url")},getSelectorModuleUrl:function(){var e=this.get("config"),t=e.selector_module_url;return e.plugin_version&&(t=this._getVersionedModuleUrl(e,t)),t},getPluginCssUrl:function(){return this._getFullUrlFor("plugin_css_url")},getPluginModuleUrl:function(){var e=this.get("config"),t=e.plugin_module_url;return e.plugin_version&&(t=this._getVersionedModuleUrl(e,t)),t},isPluginShown:function(){var e=this.get("selector_api"),t;if(this.get("preview_elems").length>0)return!0;if(this.get("show_plugin")&&e){t=e.getSelectorLabel();if(_.isString(t)&&t.length>0)return!0}return this.set("show_plugin",!1),!1},isPluginEnabled:function(){var e=this.get("plugin_api"),t;return e&&(t=e.isEnabled),this.get("enable_plugin")&&(!t||t())},isPluginLoaded:function(){return this.get("plugin_loaded")},isSelectorLoaded:function(){return this.get("selector_loaded")},_getFullUrlFor:function(e){var t=this.get("config"),n=this.get("base_url"),r=t[e],i=t.plugin_base_module_url,s=t.plugin_base_css_url,o=t.plugin_version,u="";return r?(n&&(n.charCodeAt(n.length-1)!==47&&(n+="/"),u+=n),e.search("css")!==-1?(s&&(u+=s+"/"),o&&(u+=o+"/")):(i&&(u+=i+"/"),o&&(u+=o+"/")),u+r):r},_getVersionedModuleUrl:function(e,t){var n=e.plugin_version,r=e.plugin_base_module_url,i;return i=r+"/"+n+"/"+t,i}}),e.PluginUiModel}),define("core/dev/collections/ui/plugins-ui-collection",["core/ac-core","core/collections/ui/ui-collection","core/models/ui/plugin-ui-model"],function(e){e.PluginsUiCollection=e.UiCollection.extend({model:e.PluginUiModel})}),define("core/dev/collections/ui/ui-collection-factory",["core/ac-core","core/models/model","core/collections/ui/field-queries-ui-collection","core/collections/ui/plugins-ui-collection"],function(e){e.UiCollectionFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.UiCollectionFactory.create: Unrecognized class: "+t)}})}),define("core/dev/models/collection-item-model",["core/ac-core","core/utils/file-types","core/utils/util","core/utils/http-util","core/models/model"],function(e,t,n,r){return e.CollectionItemModel=e.Model.extend({initialize:function(t,n){e.Model.prototype.initialize.call(this),n&&n.sharingField&&!this.sharingField&&(this.sharingField=n.sharingField)},url:function(){return this._getBaseUrl()+"?"+this._getClientIdQueryParam()},getSharingURL:function(){return Ac.baseFilesUrisModel.getApiUri()+"assets/"+encodeURIComponent(this.get("id"))+"/sharing?"+this._getClientIdQueryParam()},getRenditionUrl:function(e,t,n){var i=Ac.baseFilesUrisModel.getRenditionUri()+"assets/"+encodeURIComponent(this.get("id"))+"/"+e;return i+="?"+r.getClientIdQueryParam(),t&&(i+="&page="+t),n===!1&&(i+="&markup=false"),i},getNGDocUrl:function(e){return this.getRenditionUrl("svg_html",e)},getRenameUrl:function(){return this._getBaseUrl()+"/metadata/name?"+this._getClientIdQueryParam()},isFile:function(){return this.get("object_type")==="file"},isFolder:function(){return this.get("object_type")==="folder"||this.isRoot()},isNative:function(){var e=this.get("source");return e==="native"},isForm:function(){var e=this.get("content_type");return this.isFile()&&t.isFormMimeType(e)},isPDF:function(){var e=this.get("content_type");return this.isFile()&&e==="application/pdf"},isBlacklisted:function(e){var t;return n.isCEF()?(t=n.getExtension(this.get("name")),this.isFile()&&!this.isPDF()&&(!t||e.indexOf(t)!==-1)):!1},getPublicUrl:function(){var e,t=this.get("preview_url");return t&&t!=="false"?e=t:e="",e},isPublic:function(){return this.get(this.sharingField)?!0:!1},isRoot:function(){var e=this.get("object_type");return _.isUndefined(e)||e==="root"||e==="connector"},_getBaseUrl:function(){var e=Ac.baseFilesUrisModel.getApiUri(),t;return t=this.isFile()?"assets":"folders",e+=t+"/"+encodeURIComponent(this.get("id")),e}}),e.CollectionItemModel}),define("core/dev/collections/collection",["core/ac-core","core/utils/http-util","core/models/collection-item-model"],function(e,t){e.Collection=Backbone.Collection.extend({model:e.CollectionItemModel,fetch:function(e){return e=this.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},customizeOptions:function(e,n){return t.customizeOptions(e,_.extend({},n,{excludeClientId:!0}))}})}),define("core/dev/collections/collection-factory",["core/ac-core","core/collections/collection"],function(e){e.CollectionFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.CollectionFactory.create: Unrecognized class: "+t)}})}),define("core/dev/models/asset-model",["core/ac-core","core/utils/http-util","core/models/collection-item-model"],function(e,t){return e.AssetModel=e.CollectionItemModel.extend({url:function(){return this._getBaseUrl()+"?"+this._getClientIdQueryParam()},getMetadataUrl:function(e){var t=this._getBaseUrl()+"/metadata";return e&&(t+="/"+e),t+"?"+this._getClientIdQueryParam()},getDownloadUrl:function(e){return Ac.baseFilesUrisModel.getDownloadUri()+"assets/"+encodeURIComponent(this.get("id"))+"?dlticket="+encodeURIComponent(e)+"&html_errors=true&"+this._getClientIdQueryParam()},getUnmanagedDownloadUrl:function(e){return Ac.baseFilesUrisModel.getDownloadUri()+"unmanaged/"+encodeURIComponent(this.get("id"))+"?dlticket="+encodeURIComponent(e)+"&html_errors=true&"+this._getClientIdQueryParam()},_getBaseUrl:function(){return Ac.baseFilesUrisModel.getApiUri()+"assets/"+encodeURIComponent(this.get("id"))}}),e.AssetModel}),define("core/dev/models/base-uris-model",["core/ac-core","core/models/model"],function(e){return e.BaseUrisModel=e.Model.extend({getApiUri:function(){return this.get("api")},getDownloadUri:function(){return this.get("download")},getImsUri:function(){return this.get("ims")},getRenditionUri:function(){return this.get("rendition")},getUploadUri:function(){return this.get("upload")},getAlternateUploadUri:function(){return this.get("upload_alternate")},getSendApiUri:function(){return this.get("send_api")},getUiHelpersUri:function(){return this.get("ui_helpers")},getConnectorUri:function(){return this.get("connector")}}),e.BaseUrisModel}),define("core/dev/models/base-cloud-uris-model",["core/ac-core","core/models/base-uris-model"],function(e){return e.BaseCloudUrisModel=e.BaseUrisModel.extend({url:function(){return e.getBaseCloudUrl()+"api/base_uris?"+this._getClientIdQueryParam()},getCpdfUri:function(){return this.get("cpdf")},getExplodePdfUri:function(){return this.get("explodepdf")}}),e.BaseCloudUrisModel}),define("core/dev/models/base-files-uris-model",["core/ac-core","core/models/base-uris-model"],function(e){return e.BaseFilesUrisModel=e.BaseUrisModel.extend({url:function(){return e.getBaseFilesUrl()+"api/base_uris?"+this._getClientIdQueryParam()}}),e.BaseFilesUrisModel}),define("core/dev/models/common-limits-model",["core/ac-core","core/models/model"],function(e){return e.CommonLimitsModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"users/me/limits/common?"+this._getClientIdQueryParam()}}),e.CommonLimitsModel}),define("core/dev/models/connectors-ui-helpers-model",["core/ac-core","core/models/model"],function(e){return e.ConnectorsUiHelpersModel=e.Model.extend({url:function(){return Ac.baseCloudUrisModel.getUiHelpersUri()+"ui_helpers/connectors?"+this._getClientIdQueryParam()}}),e.ConnectorsUiHelpersModel}),define("core/dev/models/file-upload-model",["core/ac-core","core/models/model"],function(e){return e.FileUploadModel=e.Model.extend({url:function(){var t=Ac.baseFilesUrisModel.getUploadUri()+"assets";return this.hasAjaxFileUpload()||(t+="?redirect_uri="+encodeURIComponent(e.getBaseCloudUrl()+"complete_file_upload")),t+=t.indexOf("?")<0?"?":"&",t+=this._getClientIdQueryParam(),t},hasAjaxFileUpload:function(){var t=e.Util;return(!t.isIE()||!t.isIE9orBelow())&&!t.isFirefox36()},getWidgetOptions:function(t){var n={url:this.url(),paramName:"file",singleFileUploads:!1,limitMultiFileUploads:1,xhrFields:{withCredentials:!0}},r=e.Util;t||(n.dropZone=null);if(r.isIpad()||r.isIphone())n.sequentialUploads=!0;return n},getFormData:function(t,n){var r=JSON.stringify({name:t.files[0].name,parent_id:n,on_dup_name:"auto_rename",ignore_content_type:!0});return[{name:"csrftoken",value:e.Util.getCookie("csrftoken")},{name:"created_by_client",value:e.HttpUtil.REQUEST_HEADER_CLIENT_ID},{name:"metadata",value:r}]}}),e.FileUploadModel}),define("core/dev/models/folder-model",["core/ac-core","core/utils/http-util","core/utils/string-util","core/models/model"],function(e,t,n){return e.FolderModel=e.Model.extend({defaults:{orderby:"name",orderdirection:"ascending",metadata:"name,content_type,created,modified,parent_id,size,last_pagenum,last_access,source,ts_sent,created_by_client"},initialize:function(){var t;e.Model.prototype.initialize.call(this),t=e.collectionFactory.create("Collection"),this.set("items",t),t.comparator="index"},url:function(){return this._getBaseUrl()+"?"+this._getClientIdQueryParam()},getPathUrl:function(){return this._getBaseUrl()+"/path?"+this._getClientIdQueryParam()},getMetadataUrl:function(e){var t=this._getBaseUrl()+"/metadata";return e&&(t+="/"+e),t+"?"+this._getClientIdQueryParam()},fetch:function(n){var r;return n=n||{},this.sharingField="ts_sent",n.data=_.extend({},{orderby:this.get("orderby"),orderdirection:this.get("orderdirection"),metadata:this.get("metadata"),"x-api-client-id":t.REQUEST_HEADER_CLIENT_ID},n.data),n.limitedApi&&(this._useLimitedApi=!0),r=e.Model.prototype.fetch.call(this,n),n.limitedApi&&(this._useLimitedApi=!1),r},parse:function(e){var t=this.get("items"),n,r;if(!e)return;if(e.status===304)return;return n=e.body,r=n?n.members:e.members,_.each(r,function(e,t){e.index=t}),t.set(r,{silent:!0,sharingField:this.sharingField}),t.trigger("add"),e},isRoot:function(){var e=this.get("object_type");return _.isUndefined(e)||e==="root"||e==="connector"},getFolderItems:function(){return this.get("items")},getFolderItemsCount:function(){return this.getFolderItems().length},allFolders:function(){var e,t=this.getFolderItems().models;for(e=0;e<t.length;e+=1)if(!t[e].isFolder())return!1;return!0},getChildFoldersCount:function(){return this.getFolderItems().reduce(function(e,t){return t.isFolder()&&(e+=1),e},0)},getChildFilesCount:function(){return this.getFolderItems().reduce(function(e,t){return t.isFile()&&(e+=1),e},0)},_getBaseUrl:function(){var e=Ac.baseFilesUrisModel.getApiUri()+"folders/"+encodeURIComponent(this.get("id"));return this._useLimitedApi&&(e=n.getLimitedUrl(e)),e}}),e.FolderModel}),define("core/dev/models/network-connectivity-model",["core/ac-core","core/models/model"],function(e){return e.NetworkConnectivityModel=e.Model.extend({recognized:{is_connected:{type:"boolean",optional:!1},ajax_status:{type:"boolean",optional:!1}},defaults:{is_connected:navigator.onLine,ajax_status:navigator.onLine},resetNetworkStatusToOnline:function(e){var t=!0;!_.isUndefined(e)&&e.silent===!1&&(t=!1),this.set({is_connected:!0,ajax_status:!0},{silent:t})},resetNetworkStatus:function(e){var t=!0;!_.isUndefined(e)&&e.silent===!1&&(t=!1),this.set({is_connected:navigator.onLine,ajax_status:navigator.onLine},{silent:t})}}),e.NetworkConnectivityModel}),define("core/dev/models/notification-model",["core/ac-core","core/models/model"],function(e){return e.NotificationModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"monitor?"+this._getClientIdQueryParam()}}),e.NotificationModel}),define("core/dev/models/refresh-session-model",["core/ac-core","core/models/model"],function(e){return e.RefreshSessionModel=e.Model.extend({url:function(){return Ac.baseCloudUrisModel.getApiUri()+"session/refresh?"+this._getClientIdQueryParam()}}),e.RefreshSessionModel}),define("core/dev/models/root-model",["core/ac-core","core/models/model"],function(e){return e.RootModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"root?"+this._getClientIdQueryParam()}}),e.RootModel}),define("core/dev/models/search-model",["core/ac-core","core/models/model"],function(e){return e.SearchModel=e.Model.extend({defaults:{metadata:["id","name","content_type","created","modified","object_type","parent_id","size","last_pagenum","cpdf2-document-converter","document-converter","last_access","source","ts_sent"]},initialize:function(t,n){var r="ts_sent";e.Model.prototype.initialize.call(this),this.set("items",e.collectionFactory.create("Collection",{},{sharingField:r}))},url:function(){return Ac.baseFilesUrisModel.getApiUri()+"search?"+this._getClientIdQueryParam()},getSearchResultCount:function(){return this.get("items").length},resetSearchResults:function(e){this.get("items").reset(undefined,e)}}),e.SearchModel}),define("core/dev/models/send-log-event-model",["core/ac-core","core/models/model"],function(e){return e.SendLogEventModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"send_log_event?"+this._getClientIdQueryParam()}}),e.SendLogEventModel}),define("core/dev/models/session-model",["core/ac-core","core/models/model"],function(e){return e.SessionModel=e.Model.extend({url:function(){return this._getBaseUrl()+"?"+this._getClientIdQueryParam()},getSignOutUrl:function(){return this._getBaseUrl()+"sign_out?"+this._getClientIdQueryParam()},getDownloadTicketUrl:function(){return this._getBaseFilesUrl()+"download_ticket"},_getBaseUrl:function(){return Ac.baseCloudUrisModel.getApiUri()+"session/"},_getBaseFilesUrl:function(){return Ac.baseFilesUrisModel.getApiUri()+"session/"}}),e.SessionModel}),define("core/dev/models/sharing-info-model",["core/ac-core","core/models/model"],function(e){return e.SharingInfoModel=e.Model.extend({recognized:{chunk_start:{type:"number",optional:!1},chunk_end:{type:"number",optional:!1},chunk_size:{type:"number",optional:!1}},defaults:{chunk_start:0,chunk_end:-1,chunk_size:20},initialize:function(){e.Model.prototype.initialize.call(this)},reset:function(e){var t;this.set({chunk_start:0,chunk_end:-1,chunk_size:20,models:e}),this._allFolders=!0;for(t=0;t<e.length;t+=1)if(!e[t].isFolder()){this._allFolders=!1;break}},url:function(){var e,t,n=this.get("models"),r,i=!0,s;e=Ac.baseFilesUrisModel.getSendApiUri()+"tracked_files/";while(i){this.set("chunk_start",this.get("chunk_end")+1),this.get("chunk_start")+this.get("chunk_size")>=n.length?r=n.length-this.get("chunk_start"):r=this.get("chunk_size");if(r<=0)break;this.set("chunk_end",this.get("chunk_end")+r);for(t=this.get("chunk_start");t<=this.get("chunk_end");t+=1)s=n[t],s.isFolder()||(e+=s.get("id")+";",i=!1)}return e=e.slice(0,e.length-1),e+="?active_only=true&ids_only=true",e+="&"+this._getClientIdQueryParam(),e},moreChunks:function(){return!this._allFolders&&this.get("models").length>this.get("chunk_end")+1}}),e.SharingInfoModel}),define("core/dev/models/sharing-root-model",["core/ac-core","core/models/model"],function(e){return e.SharingRootModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getSendApiUri()+"root?"+this._getClientIdQueryParam()}}),e.SharingRootModel}),define("core/dev/models/sign-out-model",["core/ac-core","core/models/model"],function(e){return e.SignOutModel=e.Model.extend({url:function(){return Ac.baseCloudUrisModel.getApiUri()+"session/sign_out?"+this._getClientIdQueryParam()}}),e.SignOutModel}),define("core/dev/models/storage-quota-model",["core/ac-core","core/models/model"],function(e){return e.StorageQuotaModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"users/me/quotas/storage?"+this._getClientIdQueryParam()}}),e.StorageQuotaModel}),define("core/dev/models/system-folders-model",["core/ac-core","core/utils/http-util","core/utils/string-util","core/models/model"],function(e,t,n){return e.SystemFoldersModel=e.Model.extend({url:function(){return Ac.baseFilesUrisModel.getApiUri()+"system_folders?"+this._getClientIdQueryParam()},getMetadataUrl:function(e){var t=this._getBaseUrl();return t+="?metadata=name,created_by_client,members",t},customizeOptions:function(t,n){return e.Model.prototype.customizeOptions.call(this,t,_.extend({},n,{bhAcceptVersion:2}))},defaults:{orderby:"name",orderdirection:"ascending",metadata:"name,content_type,created,modified,parent_id,size,last_pagenum,last_access,source,ts_sent,created_by_client,members"},initialize:function(){var t;e.Model.prototype.initialize.call(this),t=e.collectionFactory.create("Collection"),this.set("items",t),t.comparator="index"},getPathUrl:function(){return this._getBaseUrl()+"/path?"+this._getClientIdQueryParam()},fetch:function(n){var r;return n=n||{},this.sharingField="ts_sent",n.data=_.extend({},{orderby:this.get("orderby"),orderdirection:this.get("orderdirection"),metadata:this.get("metadata"),"x-api-client-id":t.REQUEST_HEADER_CLIENT_ID},n.data),n.limitedApi&&(this._useLimitedApi=!0),r=e.Model.prototype.fetch.call(this,n),n.limitedApi&&(this._useLimitedApi=!1),r},parse:function(e){var t=this.get("items"),n,r;if(!e)return;if(e.status===304)return;return n=e.body,r=n?n.members:e.members,_.each(r,function(e,t){e.index=t}),t.set(r,{silent:!0,sharingField:this.sharingField}),e},_getBaseUrl:function(){var e=Ac.baseFilesUrisModel.getApiUri()+"folders/"+encodeURIComponent(this.get("id"));return this._useLimitedApi&&(e=n.getLimitedUrl(e)),e}}),e.SystemFoldersModel}),define("core/dev/models/users-me-cohorts-model",["core/ac-core","core/models/model"],function(e){e.UsersMeCohortsModel=e.Model.extend({url:function(){return Ac.baseCloudUrisModel.getApiUri()+"users/me/cohorts?"+this._getClientIdQueryParam()}})}),define("core/dev/models/model-factory",["core/ac-core","core/models/model","core/models/asset-model","core/models/base-cloud-uris-model","core/models/base-files-uris-model","core/models/collection-item-model","core/models/common-limits-model","core/models/connectors-ui-helpers-model","core/models/file-upload-model","core/models/folder-model","core/models/network-connectivity-model","core/models/notification-model","core/models/refresh-session-model","core/models/root-model","core/models/search-model","core/models/send-log-event-model","core/models/session-model","core/models/sharing-info-model","core/models/sharing-root-model","core/models/sign-out-model","core/models/storage-quota-model","core/models/system-folders-model","core/models/users-me-cohorts-model"],function(e){return e.ModelFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.ModelFactory.create: Unrecognized class: "+t)}}),e.ModelFactory}),define("core/dev/models/ui/actions-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.ActionsUiModel=e.UiModel.extend({recognized:{callbacks_by_action_id:{type:"object",optional:!1}},defaults:{callbacks_by_action_id:{}},addCallback:function(e,t){var n=this.get("callbacks_by_action_id"),r=n[e];r||(n[e]=r=[]),_.indexOf(r,t)<0&&r.push(t)},removeCallback:function(e,t){var n=this.get("callbacks_by_action_id"),r=n[e],i;if(!r||!t)return;i=_.indexOf(r,t),i>=0&&(r.splice(i,1),r.length===0&&delete n[e])},triggerAction:function(e,t){var n=this.get("callbacks_by_action_id"),r=n[e],i=0,s,o;if(!r)return;s=r.length;for(i=0;i<s;i+=1)o=r[i],o&&o(e,t)}}),e.ActionsUiModel}),define("core/dev/models/ui/bar-graph-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.BarGraphUiModel=e.UiModel.extend({recognized:{current_value:{type:"number",optional:!1},total_value:{type:"number",optional:!1}}}),e.BarGraphUiModel}),define("core/dev/models/ui/collection-item-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.CollectionItemUiModel=e.UiModel.extend({recognized:{selected:{type:"boolean",optional:!1},masked:{type:"boolean",optional:!1}},defaults:{selected:!1,masked:!1}}),e.CollectionItemUiModel}),define("core/dev/models/ui/collection-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.CollectionUiModel=e.UiModel.extend({recognized:{is_active:{type:"boolean",optional:!1},is_mouse_over:{type:"boolean",optional:!1},show_empty:{type:"boolean",optional:!1},is_item_excluded:{type:"function",optional:!0},item_count:{type:"number",optional:!0},has_vertical_scrollbar:{type:"boolean",optional:!1},item_ui_models:{type:"object",optional:!1}},defaults:{is_active:!0,is_mouse_over:!1,show_empty:!1,has_vertical_scrollbar:!1,item_ui_models:{}},clearItemUiModels:function(){this.set("item_ui_models",{})},getItemUiModel:function(t){var n=t.data("id"),r,i=this.get("item_ui_models");return r=i[n],r||(r=i[n]=e.uiModelFactory.create("CollectionItemUiModel")),r}}),e.CollectionUiModel}),define("core/dev/models/ui/collections-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.CollectionsUiModel=e.UiModel.extend({recognized:{checkbox:{type:"boolean",optional:!1},data_render_delay:{type:"number",optional:!1},scroll_duration:{type:"number",optional:!1},scroll_id_into_view:{type:"string",optional:!0},scroll_render_delay:{type:"number",optional:!1},scroll_listen_delay:{type:"number",optional:!1},scroll_recheck_delay:{type:"number",optional:!1},scroll_listen_timer_id:{type:"number",optional:!0},view:{type:"string",optional:!1,choices:["list","thumbnail"]},folders_only:{type:"boolean",optional:!1},filter_by_extension:{type:"array",optional:!1},force_empty:{type:"boolean",optional:!0},force_empty_msg:{type:"string",optional:!0},last_active_row_index:{type:"number",optional:!1}},defaults:{checkbox:!0,data_render_delay:10,scroll_duration:250,scroll_render_delay:250,scroll_listen_delay:250,scroll_recheck_delay:750,folders_only:!1,filter_by_extension:[],force_empty:!1,force_empty_msg:"",last_active_row_index:-1},isListView:function(){return this.get("view")==="list"},isThumbnailView:function(){return this.get("view")==="thumbnail"},hasViewQueryParam:function(e){return!_.isUndefined(e.view)}},{VIEW_LIST:"list",VIEW_THUMBNAIL:"thumbnail"}),e.CollectionsUiModel}),define("core/dev/models/ui/dialogs-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.DialogsUiModel=e.UiModel.extend({recognized:{open:{type:"array",optional:!1}},defaults:{open:[]},initialize:function(){e.UiModel.prototype.initialize.call(this),this.set("open",[])},pushDialog:function(e){var t=this.get("open"),n=t.length;if(n===0||t[n-1]!==e)n=t.push(e);return this.trigger("change:open",t),n},popDialog:function(e){var t=this.get("open"),n=t.length,r;for(r=n-1;r>=0;r-=1)if(e===t[r]){t.splice(r,1);break}return this.trigger("change:open",t),e},getDialogCount:function(){return this.get("open").length},closeAll:function(){var e=this.get("open"),t=e.length,n,r;for(n=t-1;n>=0;n-=1)r=e[n],r?r.close(!1,{noAnimation:!0,noHistoryEffect:!0}):e.splice(n,1);this.trigger("change:open",e)}}),e.DialogsUiModel}),define("core/dev/models/ui/error-ui-model",["core/ac-core","i18n!core/nls/ui-strings","core/utils/util","core/models/ui/ui-model"],function(e,t,n){return e.ErrorUiModel=e.UiModel.extend({recognized:{modules_not_loaded:{type:"array",optional:!1},error:{type:"object",optional:!0}},defaults:{modules_not_loaded:[]},initialize:function(){e.UiModel.prototype.initialize.call(this),this._ajaxErrorQueue=[],this._dupErrorQueue=[],this._quotaErrorQueue=[],this._miscErrorQueue=[]},moduleNotLoaded:function(e){this.get("modules_not_loaded").push(e)},getModulesNotLoaded:function(){return this.get("modules_not_loaded")},getStatusErrorStrings:function(t){var n=e.ErrorUiModel;return n.HTTP_ERROR_STRINGS[t]||n.DEFAULT_ERROR_STRINGS},getErrorStrings:function(t){var n,r=t.type;return r===e.ErrorUiModel.ERROR_TYPE_AJAX?n=this.getAjaxErrorStrings(t):r===e.ErrorUiModel.ERROR_TYPE_DUP?n={}:r===e.ErrorUiModel.ERROR_TYPE_MISC?n=this.getMiscErrorStrings(t):(LOG(0,"AcCore.ErrorUiModel.getErrorStrings: Unrecognized error type: "+r),n={}),n},getAjaxErrorStrings:function(e){var n,r=e.data,i=r.status;return i===0?n={title:t.ERROR,msg:r.statusText,btn1:t.OK}:i===403?n=this.getAjax403ErrorStrings(e.data):n=this.getStatusErrorStrings(i),n},getMiscErrorStrings:function(e){return{title:e.data.title,msg:e.data.msg,btn1:t.CLOSE}},getAjax403ErrorStrings:function(e){var r;return this.isQuotaExceededError(e)?r={title:n.isCEF()?t.HTTP_STATUS_403_QUOTA_TITLE_CEF:t.HTTP_STATUS_403_QUOTA_TITLE,msg:t.HTTP_STATUS_403_QUOTA_MSG,btn1:t.CLOSE}:this.isDeleteNonEmptyFolderError(e)?r={title:n.isCEF()?t.HTTP_STATUS_403_DEL_FOLDER_TITLE_CEF:t.HTTP_STATUS_403_DEL_FOLDER_TITLE,msg:t.HTTP_STATUS_403_DEL_FOLDER_MSG,btn1:t.CLOSE}:this.isUnsupportedSharingMimeTypeError(e)?r={title:n.isCEF()?t.HTTP_STATUS_403_NO_SHARING_TITLE_CEF:t.HTTP_STATUS_403_NO_SHARING_TITLE,msg:t.HTTP_STATUS_403_NO_SHARING_MSG,btn1:t.CLOSE}:this.isVirusDetectedError(e)?r={title:n.isCEF()?t.HTTP_STATUS_403_VIRUS_TITLE_CEF:t.HTTP_STATUS_403_VIRUS_TITLE,msg:t.HTTP_STATUS_403_VIRUS_MSG,btn1:t.CLOSE}:this.isUserEncryptedError(e)?r={title:n.isCEF()?t.HTTP_STATUS_403_ENCRYPTION_TITLE_CEF:t.HTTP_STATUS_403_ENCRYPTION_TITLE,msg:t.HTTP_STATUS_403_ENCRYPTION_MSG,btn1:t.CLOSE}:r={title:n.isCEF()?t.HTTP_STATUS_403_TITLE_CEF:t.HTTP_STATUS_403_TITLE,msg:t.HTTP_STATUS_403_MSG,btn1:t.CLOSE},r},clearQueue:function(){this._ajaxErrorQueue=[],this._dupErrorQueue=[],this._quotaErrorQueue=[],this.dequeueError()},enqueueAjaxError:function(t){var n={type:e.ErrorUiModel.ERROR_TYPE_AJAX,data:t};if(t.status===0)return;this.get("error")?this._ajaxErrorQueue.push(n):this.set("error",n)},enqueueDupError:function(t,n){var r={type:e.ErrorUiModel.ERROR_TYPE_DUP,data:t};n||this.get("error")?this._dupErrorQueue.push(r):this.set("error",r)},enqueueQuotaError:function(){var t={type:e.ErrorUiModel.ERROR_TYPE_QUOTA};this._quotaErrorQueue.push(t)},enqueueMiscError:function(t,n){var r={type:e.ErrorUiModel.ERROR_TYPE_MISC,data:{title:t,msg:n}};this.get("error")?this._miscErrorQueue.push(r):this.set("error",r)},dequeueError:function(){var e=this._dequeueAjaxError()||this._dequeueDupError()||this._dequeueQuotaError()||this._dequeueMiscError();e?this.set("error",e):this.unset("error")},dequeueQuotaError:function(){if(!this.get("error")){this.set("error",this._dequeueQuotaError());if(this.get("error"))return!0}return!1},dequeueDupError:function(){if(!this.get("error")){this.set("error",this._dequeueDupError());if(this.get("error"))return!0}return!1},isQuotaExceededError:function(t){return this._isResponseOfType(t,403,e.ErrorUiModel.CODE_QUOTA_EXCEEDED)},isDeleteNonEmptyFolderError:function(t){return this._isResponseOfType(t,403,e.ErrorUiModel.CODE_FOLDER_NOT_EMPTY)},isUnsupportedSharingMimeTypeError:function(t){return this._isResponseOfType(t,403,e.ErrorUiModel.CODE_UNSUPPORTED_SHARING_MIMETYPE)},isVirusDetectedError:function(t){return this._isResponseOfType(t,403,e.ErrorUiModel.CODE_VIRUS_DETECTED)},isUserEncryptedError:function(t){return this._isResponseOfType(t,403,e.ErrorUiModel.CODE_USER_ENCRYPTED)},_dequeueAjaxError:function(){var e,t,n;e=this._ajaxErrorQueue;if(e.length===0)return undefined;t=this.get("error").data,n=e.shift();while(n&&n.data.status===t.status)n=e.shift();return n},_dequeueDupError:function(){var e=this._dupErrorQueue;if(e.length>0)return e.shift()},_dequeueQuotaError:function(){var e=this._quotaErrorQueue;if(e.length>0)return e.shift()},_dequeueMiscError:function(){var e=this._miscErrorQueue;if(e.length>0)return e.shift()},_isResponseOfType:function(e,t,n){var r;try{r=JSON.parse(e.responseText).error.code===n}catch(i){}return e.status===t&&e.responseText&&r}},{ERROR_TYPE_AJAX:"ajax",ERROR_TYPE_DUP:"dup",ERROR_TYPE_QUOTA:"quota",ERROR_TYPE_MISC:"misc",CODE_QUOTA_EXCEEDED:"QuotaExceeded",CODE_FOLDER_NOT_EMPTY:"FolderNotEmpty",CODE_UNSUPPORTED_SHARING_MIMETYPE:"UnsupportedSharingMimeType",CODE_VIRUS_DETECTED:"VirusDetected",CODE_ILLEGAL_NAME:"IllegalName",CODE_INVALID_PARAMETER:"InvalidParameter",CODE_USER_ENCRYPTED:"UserEncrypted",DUP_TYPE_MOVE:"dup_move",DUP_TYPE_UPLOAD:"dup_upload",DEFAULT_ERROR_STRINGS:{title:t.HTTP_STATUS_DEFAULT_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_DEFAULT_MSG,btn1:t.OK},HTTP_ERROR_STRINGS:{0:{title:t.HTTP_STATUS_DEFAULT_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_DEFAULT_MSG,btn1:t.OK},400:{title:n.isCEF()?t.HTTP_STATUS_400_TITLE_CEF:t.HTTP_STATUS_400_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_400_MSG,btn1:t.OK},401:{title:n.isCEF()?t.HTTP_STATUS_401_TITLE_CEF:t.HTTP_STATUS_401_TITLE,msg:n.isCEF()?t.HTTP_STATUS_401_MSG_CEF:t.HTTP_STATUS_401_MSG,btn1:t.SIGN_IN},403:{title:n.isCEF()?t.HTTP_STATUS_403_TITLE_CEF:t.HTTP_STATUS_403_TITLE,msg:t.HTTP_STATUS_403_MSG,btn1:t.OK},404:{title:n.isCEF()?t.HTTP_STATUS_404_TITLE_CEF:t.HTTP_STATUS_404_TITLE,msg:t.HTTP_STATUS_404_MSG,btn1:t.OK},405:{title:n.isCEF()?t.HTTP_STATUS_405_TITLE_CEF:t.HTTP_STATUS_405_TITLE,msg:t.HTTP_STATUS_405_MSG,btn1:t.OK},406:{title:n.isCEF()?t.HTTP_STATUS_406_TITLE_CEF:t.HTTP_STATUS_406_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_406_MSG,btn1:t.OK},415:{title:n.isCEF()?t.HTTP_STATUS_415_TITLE_CEF:t.HTTP_STATUS_415_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_415_MSG,btn1:t.OK},500:{title:n.isCEF()?t.HTTP_STATUS_500_TITLE_CEF:t.HTTP_STATUS_500_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_500_MSG,btn1:t.OK},501:{title:n.isCEF()?t.HTTP_STATUS_501_TITLE_CEF:t.HTTP_STATUS_501_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_501_MSG,btn1:t.OK},503:{title:n.isCEF()?t.HTTP_STATUS_503_TITLE_CEF:t.HTTP_STATUS_503_TITLE,msg:n.isCEF()?t.HTTP_STATUS_DEFAULT_MSG_CEF:t.HTTP_STATUS_503_MSG,btn1:t.OK}}}),e.ErrorUiModel}),define("core/dev/models/ui/file-upload-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.FileUploadUiModel=e.UiModel.extend({recognized:{is_listening:{type:"boolean",optional:!1},is_uploading:{type:"boolean",optional:!1},jq_xhr:{type:"object",optional:!0},start_listening:{type:"boolean",optional:!1},post_upload_default_delay:{type:"number",optional:!1},post_upload_alt_delay:{type:"number",optional:!1},post_upload_use_alt_delay:{type:"boolean",optional:!1}},defaults:{is_listening:!1,is_uploading:!1,start_listening:!1},startListening:function(){this.set("start_listening",!0).set("start_listening",!1,{silent:!0})},getPostUploadDelay:function(){return this.get("post_upload_use_alt_delay")?this.get("post_upload_alt_delay"):this.get("post_upload_default_delay")},getPostUploadAltDelay:function(){return this.get("post_upload_alt_delay")}}),e.FileUploadUiModel}),define("core/dev/models/ui/folder-tree-node-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.FolderTreeNodeUiModel=e.UiModel.extend({recognized:{selected:{type:"boolean",optional:!1},expanded:{type:"boolean",optional:!1}},defaults:{selected:!1,expanded:!1}}),e.FolderTreeNodeUiModel}),define("core/dev/models/ui/folder-tree-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.FolderTreeUiModel=e.UiModel.extend({recognized:{level_indent:{type:"number",optional:!1}},defaults:{level_indent:30}}),e.FolderTreeUiModel}),define("core/dev/models/ui/folder-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.FolderUiModel=e.UiModel.extend({recognized:{breadcrumbs:{type:"boolean",optional:!1},path:{type:"array",optional:!1},route_folder_id:{type:"string",optional:!0}},defaults:{breadcrumbs:!0,path:[]}}),e.FolderUiModel}),define("core/dev/models/ui/full-preview-ui-model",["core/ac-core","core/utils/view-util","core/models/ui/ui-model"],function(e,t){return e.FullPreviewUiModel=e.UiModel.extend({recognized:{item_model:{type:"object",optional:!0},standalone:{type:"boolean",optional:!1},read_only:{type:"boolean",optional:!1},page_count:{type:"number",optional:!0},current_page:{type:"number",optional:!0},align_current_page:{type:"boolean",optional:!1},loaded_page:{type:"number",optional:!0},view_format:{type:"string",optional:!1,choices:["scroll_pages","fit_page_width","fit_full_page"]},got_current_scroll_page:{type:"boolean",optional:!1},got_rendition_load_error:{type:"boolean",optional:!1},scroll_pages_chunk:{type:"number",optional:!1},scroll_debounce_delay:{type:"number",optional:!1},preview_elem:{type:"object",optional:!1},scroll_bar_width:{type:"number",optional:!1},show_info:{type:"boolean",optional:!1},show_rhp:{type:"boolean",optional:!1},toggle_rhp_duration:{type:"number",optional:!1},is_hud_dismissed:{type:"boolean",optional:!1},show_action_menu:{type:"boolean",optional:!1},loaded_fitandfull_page:{type:"number",optional:!0},loaded_scroll_pages:{type:"object",optional:!0},prev_non_preview_path:{type:"string",optional:!0},prev_document_title:{type:"string",optional:!0},restore_focus_delay:{type:"number",optional:!1},enable_ngdoc:{type:"boolean",optional:!1},ngdoc_job_id:{type:"string",optional:!0},ngdoc_job_status:{type:"string",optional:!0,choices:["not_started","in_progress","completed","failed"]},ngdoc_timer_id:{type:"number",optional:!0},ngdoc_timer_delay:{type:"number",optional:!0},view_type:{type:"string",optional:!1,choices:["bitmap","ngdoc"]},zoom_factor:{type:"number",optional:!0},aspect_ratio_pages:{type:"object",optional:!0}},defaults:{standalone:!1,read_only:!1,align_current_page:!0,view_format:"scroll_pages",scroll_pages_chunk:10,scroll_debounce_delay:100,show_info:!1,show_rhp:!0,toggle_rhp_duration:500,show_action_menu:!1,enable_ngdoc:!1,ngdoc_job_id:undefined,ngdoc_job_status:"not_started",ngdoc_timer_id:undefined,ngdoc_timer_delay:2e3,view_type:"bitmap",is_hud_dismissed:!1,zoom_factor:1,aspect_ratio_pages:{},restore_focus_delay:500},initialize:function(){e.UiModel.prototype.initialize.call(this),this.set("scroll_bar_width",t.getScrollBarWidth())},init:function(e,t){e=e||{},this.set(_.extend({page_count:undefined,current_page:0,loaded_page:undefined,got_current_scroll_page:!1,got_rendition_load_error:!1,align_current_page:!0,view_format:"scroll_pages",show_action_menu:!1,show_info:!1,loaded_fitandfull_page:undefined,loaded_scroll_pages:undefined,enable_ngdoc:!1,ngdoc_job_id:undefined,ngdoc_job_status:"not_started",ngdoc_timer_delay:2e3,view_type:"bitmap",zoom_factor:1,aspect_ratio_pages:{}},e),{silent:t})},close:function(e){var t={silent:e};this.unset("item_model",t),this.unset("page_count",t),this.init(undefined,e)},getFileName:function(){var e=this.get("item_model");return e?e.get("name"):""},isFileOpen:function(e){var t=this.get("item_model"),n=!_.isUndefined(t);return e?n&&t.id===e:n},getViewFormat:function(){return this.get("view_format")},isScrollPagesView:function(){return this.getViewFormat()==="scroll_pages"},isFitPageWidthView:function(){return this.getViewFormat()==="fit_page_width"},isFitFullPageView:function(){return this.getViewFormat()==="fit_full_page"},isNGDocView:function(){return this.get("enable_ngdoc")&&this.get("view_type")==="ngdoc"},ngdocJobStarted:function(){this.set("ngdoc_job_status","in_progress")},ngdocJobCompleted:function(){this.set("ngdoc_job_status","completed")},isNGDocJobRunning:function(){return this.get("ngdoc_job_status")==="in_progress"},isNGDocJobComplete:function(){return this.get("ngdoc_job_status")==="completed"}}),e.FullPreviewUiModel}),define("core/dev/models/ui/hover-preview-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.HoverPreviewUiModel=e.UiModel.extend({recognized:{enabled:{type:"boolean",optional:!1},suppressed_id:{type:"string",optional:!0},show_delay:{type:"number",optional:!1},item_leave_delay:{type:"number",optional:!1},preview_leave_delay:{type:"number",optional:!1},item_view:{type:"object",optional:!0},collection_items_view:{type:"object",optional:!0},page_count:{type:"number",optional:!0},current_page:{type:"number",optional:!1},width:{type:"number",optional:!1},min_width_name:{type:"number",optional:!1},min_width_nav:{type:"number",optional:!1}},defaults:{enabled:!0,show_delay:200,item_leave_delay:400,preview_leave_delay:400,current_page:0,width:0,min_width_name:250,min_width_nav:160},init:function(e){e=e||{},this.set(_.extend({current_page:0,page_count:undefined,width:0},e))},getItemId:function(){var e=this.get("item_view"),t;return e?(t=e.model,t?t.id:undefined):undefined},close:function(){this.unset("item_view"),this.init()},suppress:function(e){this.close(),this.set("suppressed_id",e)},isSuppressed:function(e){return this.get("suppressed_id")===e},unsuppress:function(){this.unset("suppressed_id")}}),e.HoverPreviewUiModel}),define("core/dev/models/ui/inactivity-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.InactivityUiModel=e.UiModel.extend({recognized:{is_active:{type:"boolean",optional:!1},is_idle:{type:"boolean",optional:!1},timeout_id:{type:"number",optional:!0},idle_timeout:{type:"number",optional:!1},restart_debounce_delay:{type:"number",optional:!1}},defaults:{is_active:!0,is_idle:!1,idle_timeout:36e5,restart_debounce_delay:1e3}}),e.InactivityUiModel}),define("core/dev/models/ui/key-ui-model",["core/ac-core","core-unmapped/dev/utils/app-api-mgr","core/models/ui/ui-model"],function(e,t){return e.KeyUiModel=e.UiModel.extend({pushKeyHandler:function(e){return this._getKeyApi().pushKeyHandler(e)},popKeyHandler:function(e){return this._getKeyApi().popKeyHandler(e)},pushKeyConsumer:function(){this._getKeyApi().pushKeyConsumer()},popKeyConsumer:function(){this._getKeyApi().popKeyConsumer()},_getKeyApi:function(){return t.getAppApi("dev").keyApi}}),e.KeyUiModel}),define("core/dev/models/ui/left-rail-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.LeftRailUiModel=e.UiModel.extend({recognized:{is_editing:{type:"boolean",optional:!1}},defaults:{is_editing:!1}}),e.LeftRailUiModel}),define("core/dev/models/ui/menus-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.MenusUiModel=e.UiModel.extend({recognized:{close_animation_delay:{type:"number",optional:!1},focus_delay:{type:"number",optional:!1},focus_timeout_id:{type:"number",optional:!0}},defaults:{close_animation_delay:100,focus_delay:300}}),e.MenusUiModel}),define("core/dev/models/ui/network-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.NetworkUiModel=e.UiModel.extend({recognized:{is_ajax_request_active:{type:"boolean",optional:!1}},defaults:{is_ajax_request_active:!1}}),e.NetworkUiModel}),define("core/dev/models/ui/notification-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.NotificationUiModel=e.UiModel.extend({recognized:{is_restarting:{type:"boolean",optional:!1},is_monitoring:{type:"boolean",optional:!1},is_polling:{type:"boolean",optional:!1},callbacks_by_folder_id:{type:"object",optional:!1},is_long_polling_enabled:{type:"boolean",optional:!1},poll_interval:{type:"number",optional:!1},poll_trigger:{type:"boolean",optional:!1},restart_500_debounce_delay:{type:"number",optional:!1},timeout:{type:"number",optional:!1},timeout_id:{type:"number",optional:!0},timestamp:{type:"number",optional:!0},updates:{type:"boolean",optional:!1},resubscribe_timeout:{type:"number",optional:!1},resubscribe_timeout_id:{type:"number",optional:!0},resubscribe_trigger:{type:"boolean",optional:!1}},defaults:{is_restarting:!1,is_monitoring:!1,is_polling:!1,callbacks_by_folder_id:{},is_long_polling_enabled:!1,poll_interval:3e3,poll_trigger:!1,restart_500_debounce_delay:6e4,timeout:50,updates:!0,resubscribe_timeout:225e3,resubscribe_trigger:!1},isLongPollingEnabled:function(){return this.get("timeout")>0},addCallback:function(e,t){var n=this.get("callbacks_by_folder_id"),r=n[e];r||(n[e]=r=[],this.trigger("change:callbacks_by_folder_id")),_.indexOf(r,t)<0&&r.push(t)},removeCallback:function(e,t){var n=this.get("callbacks_by_folder_id"),r=n[e],i;if(!r)return;if(!t){delete n[e],this.trigger("change:callbacks_by_folder_id");return}i=_.indexOf(r,t),i>=0&&(r.splice(i,1),r.length===0&&(delete n[e],this.trigger("change:callbacks_by_folder_id")))},getFolderIds:function(){return _.keys(this.get("callbacks_by_folder_id"))},clearTimeout:function(){var e=this.get("timeout_id");e&&(window.clearTimeout(e),this.unset("timeout_id"))},triggerResubscribe:function(){this.triggerBooleanAttr("resubscribe_trigger")},triggerPoll:function(){this.triggerBooleanAttr("poll_trigger")}}),e.NotificationUiModel}),define("core/dev/models/ui/plugin-groups-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.PluginGroupsUiModel=e.UiModel.extend({recognized:{groups:{type:"object",optional:!1},group_config_loaded:{type:"object",optional:!1},group_id_by_plugin_id:{type:"object",optional:!1}},defaults:{group_config_loaded:{},group_id_by_plugin_id:{}},init:function(e){var t=e.groups,n,r=this.get("group_config_loaded"),i=this.get("group_id_by_plugin_id");this.set("groups",t),_.each(t,function(e,t){n=e.config_url,n&&(_.isBoolean(r[t])||(r[t]=!1)),_.each(e,function(e,n){_.isObject(e)&&(i[n]=t)})})},getPluginGroupByGroupId:function(e){return this.get("groups")[e]},getPluginGroupConfigUrl:function(e){var t=this.getPluginGroupByGroupId(e);return t?t.config_url:""},getPluginGroupAnalyticsUrl:function(e){return this.getPluginGroupByGroupId(e).analytics_url},getPluginGroupBaseUrl:function(e){return this.getPluginGroupByGroupId(e).base_url},setPluginGroupConfigLoaded:function(e,t){this.get("group_config_loaded")[e]=t},isPluginGroupConfigLoaded:function(e){var t=this.get("group_config_loaded")[this.get("group_id_by_plugin_id")[e]];return _.isBoolean(t)?t:!0},getPluginGroup:function(e){return this.get("groups")[this.get("group_id_by_plugin_id")[e]]},setPluginGroupId:function(e,t){this.get("group_id_by_plugin_id")[e]=t},getPluginGroupId:function(e){return this.get("group_id_by_plugin_id")[e]},getPluginBaseUrl:function(e){var t=this.getPluginGroup(e);return t?t.base_url:""},getPluginGroupCssUrl:function(e){var t=this.getPluginGroup(e);return t?t.group_css_url:""},getPluginGroupModuleUrl:function(e){var t=this.getPluginGroup(e);return t?t.group_module_url:""},getPluginGroupSelectorCssUrl:function(e){var t=this.getPluginGroup(e);return t?t.group_selector_css_url:""},getPluginGroupSelectorModuleUrl:function(e){var t=this.getPluginGroup(e);return t?t.group_selector_module_url:""},getPluginConfig:function(e){var t=this.getPluginGroup(e);return t?t[e]:{}}}),e.PluginGroupsUiModel}),define("core/dev/models/ui/plugins-ui-model",["core/ac-core","core/utils/util","core/models/ui/ui-model"],function(e,t){return e.PluginsUiModel=e.UiModel.extend({recognized:{selected_plugin_id:{type:"string",optional:!0},pending_plugin_id:{type:"string",optional:!0},default_plugin_id:{type:"string",optional:!1},ignore_selection:{type:"boolean",optional:!1},no_selectors:{type:"boolean",optional:!1},instantiate_on_load:{type:"boolean",optional:!1},plugins:{type:"object",optional:!1},deselect_delay:{type:"number",optional:!1},expanded_plugin_id:{type:"string",optional:!0}},defaults:{ignore_selection:!1,no_selectors:!1,instantiate_on_load:!0,deselect_delay:250},initialize:function(){e.UiModel.prototype.initialize.call(this),this.set("plugins",e.uiCollectionFactory.create("PluginsUiCollection")),t.isCEF()&&this.set("deselect_delay",0)},getAllIds:function(){return this.get("plugins").pluck("id")},setSelectedId:function(e,t){this.get("ignore_selection")||((!t||!t.silent)&&this.unset("selected_plugin_id",{silent:!0}),this.set("selected_plugin_id",e,t))},getSelectedId:function(){var e,t;return this.get("ignore_selection")||(e=this.get("selected_plugin_id")||this.get("default_plugin_id"),t=this.get("plugins"),t.get(e)||(e=this.getFirstEnabledId())),e},pluginsChanged:function(){this.trigger("change:plugins",this)},getFirstEnabledId:function(){var e=this.get("plugins").find(function(e){var t=e.get("plugin_api"),n;return e.get("show_plugin")?t?(n=t.isEnabled,!_.isFunction(n)||n()):!0:!1});return e?e.id:undefined},getShownPluginCount:function(){return this.get("plugins").reduce(function(e,t){return t.get("show_plugin")?e+1:e},0)},getPluginUiModel:function(e){return e||(e=this.getSelectedId()),this.get("plugins").get(e)},getBaseUrl:function(e){return this.getPluginUiModel(e).get("config").base_url},getSelectorApi:function(e){return this.getPluginUiModel(e).get("selector_api")},getPluginApi:function(e){return this.getPluginUiModel(e).get("plugin_api")}}),e.PluginsUiModel}),define("core/dev/models/ui/quota-dlg-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.QuotaDlgUiModel=e.UiModel.extend({recognized:{running_out_shown:{type:"boolean",optional:!1}},defaults:{running_out_shown:!1}},{WARNING_THRESHOLD:.8,ERROR_THRESHOLD:1,MAX_POSSIBLE_QUOTA_GB:100}),e.QuotaDlgUiModel}),define("core/dev/models/ui/rhp-preview-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.RhpPreviewUiModel=e.UiModel.extend({recognized:{item_model:{type:"object",optional:!0},page_count:{type:"number",optional:!0},current_page:{type:"number",optional:!1},fade_out_duration:{type:"number",optional:!1},focus_delay:{type:"number",optional:!1},max_image_width:{type:"number",optional:!1},max_image_height:{type:"number",optional:!1},min_image_height:{type:"number",optional:!1},properties_expanded:{type:"boolean",optional:!1},file_path:{type:"object",optional:!0},connector_info:{type:"object",optional:!0},actions_expanded:{type:"boolean",optional:!1},total_files:{type:"number",optional:!0}},defaults:{current_page:0,fade_out_duration:50,focus_delay:50,max_image_width:170,max_image_height:250,min_image_height:180,properties_expanded:!1,actions_expanded:!1},init:function(e){this.set({item_model:e,current_page:0,page_count:undefined,file_path:undefined,total_files:undefined})},expandProperties:function(e){this.set({properties_expanded:!0,actions_expanded:!1},{silent:e})},expandActions:function(e){this.set({actions_expanded:!0,properties_expanded:!1},{silent:e})}}),e.RhpPreviewUiModel}),define("core/dev/models/ui/saveas-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.SaveAsUiModel=e.UiModel.extend({recognized:{filename:{type:"string",optional:!1},isvalid:{type:"boolean",optional:!1},currentFolderId:{type:"string",optional:!1},replaceFileId:{type:"string",optional:!1},replaceFileObj:{type:"object",optional:!1},showExportOptions:{type:"boolean",optional:!1},allowSettingsButton:{type:"boolean",optional:!0},allowViewResult:{type:"boolean",optional:!0},reduceFileSize:{type:"boolean",optional:!0},restrictEditing:{type:"boolean",optional:!0},reduceFileSizeEnabled:{type:"boolean",optional:!0},restrictEditingEnabled:{type:"boolean",optional:!0},reduceFileSizeVisible:{type:"boolean",optional:!0},restrictEditingVisible:{type:"boolean",optional:!0},currentFolderProxy:{type:"object",optional:!0},canSave:{type:"boolean",optional:!1},error:{type:"object",optional:!0},sourceKey:{type:"string",optional:!0},accountId:{type:"string",optional:!0}},defaults:{filename:"",isvalid:!1,currentFolderId:"",replaceFileId:"",replaceFileObj:undefined,showExportOptions:!1,canSave:!1,sourceKey:"",accountId:""},initialize:function(){e.UiModel.prototype.initialize.call(this)}},{}),e.SaveAsUiModel}),define("core/dev/models/ui/selection-ui-model",["core/ac-core","core/utils/file-types","core/models/ui/ui-model"],function(e,t){return e.SelectionUiModel=e.UiModel.extend({recognized:{selected_local_files:{type:"array",optional:!1},selected_item_models:{type:"object",optional:!1},selected_item_ui_models:{type:"object",optional:!1},multiple_selection:{type:"boolean",optional:!1},is_selection_complete:{type:"boolean",optional:!1},commit_selection:{type:"boolean",optional:!1},index_last_selected:{type:"number",optional:!0}},defaults:{selected_local_files:[],selected_item_models:{},selected_item_ui_models:{},multiple_selection:!0,is_selection_complete:!1,commit_selection:!1,index_last_selected:-1},initialize:function(){e.UiModel.prototype.initialize.call(this),this.clearSelection()},addLocalFiles:function(e){var n=this.get("selected_local_files"),r;return _.each(e,function(e){if(t.isFolder(e))return!0;n.push(e),r=!0}),r&&this.trigger("change:selected_local_files",this,n),this},removeLocalFile:function(e){var t=this.get("selected_local_files"),n=_.indexOf(t,e);return n>=0&&(t.splice(n,1),this.trigger("change:selected_local_files",this,t)),this},addLocalFileInput:function(e){var t=this.indexOfLocalFileInput(e),n;return t<0&&(n=this.get("selected_local_files"),n.push([e]),this.trigger("change:selected_local_files",this,n)),this},removeLocalFileInput:function(e){var t=this.indexOfLocalFileInput(e),n;return t>=0&&(n=this.get("selected_local_files"),n.splice(t,1),this.trigger("change:selected_local_files",this,n)),this},indexOfLocalFileInput:function(){var e=-1;return _.each(this.get("selected_local_files"),function(t,n){e<0&&_.isArray(t)&&t[0]===t&&(e=n)}),e},selectItem:function(e,t,n,r){var i=e.id,s,o=this.get("selected_item_models"),u=o[i],a=this.get("selected_item_ui_models");return n?u||(o[i]=e,a[i]=t,s=!0):u&&(delete o[i],delete a[i],s=!0),t&&t.set("selected",n),r&&s&&this.trigger("change:selected_item_models",this,o),s},selectItemById:function(e,t,n){var r=this.get("selected_item_models")[e];return r?this.selectItem(r,this.get("selected_item_ui_models")[e],t,n):!1},deselectItem:function(e,t){var n=this.get("selected_item_models")[e];return n?this.selectItem(n,this.get("selected_item_ui_models")[e],!1,t):!1},deselectAllExcept:function(e,t){var n=_.keys(this.getSelectedItemModels());_.each(n,_.bind(function(n){n!==e&&this.deselectItem(n,t)},this))},triggerSelectionChange:function(){this.trigger("change:selected_item_models",this,this.get("selected_item_models"))},getSelectedItemModels:function(){return this.get("selected_item_models")},isItemSelected:function(e){var t=this.getSelectedItemModels();return e?!_.isUndefined(t[e]):_.keys(t).length>0},getNumSelectedItems:function(){return _.keys(this.getSelectedItemModels()).length},getNumSelectedItemsByType:function(e){var t=this.getSelectedItemModels();return _.reduce(t,function(t,n){return e?n.isFile()&&(t+=1):n.isFolder()&&(t+=1),t},0)},getNumSelectedFiles:function(){return this.getNumSelectedItemsByType(!0)},getNumSelectedFolders:function(){return this.getNumSelectedItemsByType(!1)},getNumSelectedForms:function(){return this.getSelectionCountByType().numForms},getSingleSelectedItemModel:function(){var e=_.values(this.getSelectedItemModels());return e.length===1?e[0]:undefined},getSelectionCount:function(){return _.keys(this.getSelectedItemModels()).length},getSelectionCountByType:function(){var e=0,t=0,n=0,r=0,i=0;return _.each(this.getSelectedItemModels(),function(s){s.isFile()?(e+=1,s.isForm()?n+=1:s.isPDF()||(i+=1)):s.isFolder()&&(t+=1),s.isNative()||(r+=1)}),{numFiles:e,numFolders:t,numExternal:r,numForms:n,numNonPDFs:i}},isSelectionMasked:function(e){var t=this.get("selected_item_ui_models"),n;return e?(n=t[e],!!n&&!!n.get("masked")):!_.isUndefined(_.find(t,function(e){return e.get("masked")}))},clearSelection:function(e){return _.each(_.values(this.get("selected_item_ui_models")),function(t){t.set({selected:!1,masked:!1},{silent:e})}),this.set({selected_local_files:[],selected_item_models:{},selected_item_ui_models:{},is_selection_complete:!1,index_last_selected:-1},{silent:e})},completeSelection:function(){this.set("is_selection_complete",!0)},isSelectionComplete:function(){return this.get("is_selection_complete")},commitSelection:function(){var e="commit_selection";this.set(e,!1,{silent:!0}).set(e,!0)},isSingleSelectionMode:function(){return!this.get("multiple_selection")}},{SELECT_ALL:"all",SELECT_DESELECT:"deselect",SELECT_EXTEND:"extend",SELECT_SELECT:"select",SELECT_TOGGLE:"toggle",SELECT_DOWN:"down",SELECT_FIRST:"first",SELECT_FIRST_IN_ROW:"first_in_row",SELECT_LAST:"last",SELECT_LAST_IN_ROW:"last_in_row",SELECT_NEXT:"next",SELECT_PREVIOUS:"previous",SELECT_UP:"up",EXTEND_SELECT_DOWN:"extend_down",EXTEND_SELECT_NEXT:"extend_next",EXTEND_SELECT_PREVIOUS:"extend_previous",EXTEND_SELECT_UP:"extend_up"}),e.SelectionUiModel}),define("core/dev/models/ui/session-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.SessionUiModel=e.UiModel.extend({recognized:{primary_token:{type:"string",optional:!0},expiration_time:{type:"number",optional:!1},refresh_timer_id:{type:"number",optional:!0},refresh_expiration_fraction:{type:"number",optional:!1}},defaults:{refresh_expiration_fraction:.6}}),e.SessionUiModel}),define("core/dev/models/ui/sort-ui-model",["core/ac-core","core/models/ui/ui-model"],function(e){return e.SortUiModel=e.UiModel.extend({recognized:{order_by:{type:"string",optional:!1,choices:["name","ext","size","created","modified","last_access","object_type"]},order_direction:{type:"object",optional:!1},mru_date_order:{type:"string",optional:!1,choices:["created","modified","last_access"]},is_locked:{type:"boolean",optional:!0}},defaults:{order_by:"name",mru_date_order:"created",is_locked:!1},initialize:function(){e.UiModel.prototype.initialize.call(this),this.set({order_direction:{name:"ascending",ext:"ascending",size:"ascending",created:"descending",modified:"descending",last_access:"descending",object_type:"descending"}})},setOrder:function(e,t){var n=this.get("order_direction");this.set("order_by",e),this.isDateSort()&&this.set("mru_date_order",e),t&&t!==n[e]&&(n[e]=t,this.trigger("change:order_direction"))},getOrderDirection:function(e){return e=e||this.get("order_by"),this.get("order_direction")[e]},isAscending:function(){return this.getOrderDirection()==="ascending"},isDateSort:function(){var e=this.get("order_by");return e==="created"||e==="modified"||e==="last_access"},setSortFromQueryParams:function(e){var t=_.escape(e.order_by);if(t)try{this.setOrder(t,_.escape(e.order_direction))}catch(n){LOG("AcCore.SortUiModel.setSortFromQueryParams: "+n.message)}},hasSortQueryParam:function(e){return!_.isUndefined(e.order_by)}},{ORDER_BY_FILE_NAME:"name",ORDER_BY_FILE_TYPE:"ext",ORDER_BY_FILE_SIZE:"size",ORDER_BY_DATE_ADDED:"created",ORDER_BY_DATE_MODIFIED:"modified",ORDER_BY_DATE_LAST_ACCESS:"last_access",ORDER_BY_OBJECT_TYPE:"object_type",ORDER_ASCENDING:"ascending",ORDER_DESCENDING:"descending"}),e.SortUiModel}),define("core/dev/models/ui/ui-model-factory",["core/ac-core","core/models/model","core/models/ui/actions-ui-model","core/models/ui/bar-graph-ui-model","core/models/ui/collection-item-ui-model","core/models/ui/collection-ui-model","core/models/ui/collections-ui-model","core/models/ui/dialog-ui-model","core/models/ui/dialogs-ui-model","core/models/ui/error-ui-model","core/models/ui/file-upload-ui-model","core/models/ui/folder-tree-node-ui-model","core/models/ui/folder-tree-ui-model","core/models/ui/folder-ui-model","core/models/ui/full-preview-ui-model","core/models/ui/hover-preview-ui-model","core/models/ui/inactivity-ui-model","core/models/ui/key-ui-model","core/models/ui/left-rail-ui-model","core/models/ui/menus-ui-model","core/models/ui/network-ui-model","core/models/ui/notification-ui-model","core/models/ui/plugin-groups-ui-model","core/models/ui/plugin-ui-model","core/models/ui/plugins-ui-model","core/models/ui/quota-dlg-ui-model","core/models/ui/rhp-preview-ui-model","core/models/ui/saveas-ui-model","core/models/ui/search-ui-model","core/models/ui/selection-ui-model","core/models/ui/session-ui-model","core/models/ui/sort-ui-model"],function(e){return e.UiModelFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.UiModelFactory.create: Unrecognized class: "+t)}}),e.UiModelFactory}),define("core/dev/models/rna/cef-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.CEFModel=e.RNAModel.extend({}),e.CEFModel}),define("core/dev/collections/rna/rna-collection",["core/ac-core","core/constants/odm-constants"],function(e,t){return e.RNACollection=Backbone.Collection.extend({shouldCache:!0,initialize:function(t,n){var r=[],i;Backbone.Collection.prototype.initialize.call(this,t,n),n._proxy&&(this.model instanceof e.RNAModel||(this.model=e.RNAModel),n.shouldCache!==undefined&&(this.shouldCache=n.shouldCache),this._proxy=n._proxy,this._contextId=this._proxy._context,r=this._prepareModels(n),this.set(r,n),this._proxy._addEventListener("all",this._onProxyEvent,null,this),n._pproxy&&(this._pproxy=n._pproxy))},add:function(e,t){var n,r,i,s,o=this._proxy?this._proxy._size:0;if(t.fromODM)return Backbone.Collection.prototype.add.call(this,e,t);e=_.isArray(e)?e.slice():[e],t||(t={});for(n=0,r=e.length;n<r;n++)this.invoke("insertAt",o+n,e[n])},remove:function(e,t){var n,r,i,s;if(t.fromODM)return Backbone.Collection.prototype.remove.call(this,e,t);e=_.isArray(e)?e.slice():[e],t||(t={});for(n=0,r=e.length;n<r;n++)this.invoke("removeAt",this.indexOf(e[n]))},at:function(e){return this.shouldCache===!1&&this._proxy&&this._proxy[e],Backbone.Collection.prototype.at.call(this,e)},on:function(e,t,n){return Backbone.Collection.prototype.on.call(this,e,t,n)},off:function(e,t,n){return Backbone.Collection.prototype.off.call(this,e,t,n)},invoke:function(e,t){var n=new $.Deferred,r=[],i,s;for(i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t=r,this._pproxy?(s=this._pproxy[e]._invoke.apply(undefined,t),s._done(function(e,t){e===0?n.resolve(t):n.reject(t)}),s._fail(function(e,t){n.reject(t)}),n.promise()):n.reject().promise()},toJSON:function(e){var t=[],n=0;if(!this._isPrimitiveArray())return Backbone.Collection.prototype.toJSON.call(this,e);for(n=0;n<this._proxy._size;n++)t[n]=this._proxy[n]._value;return t},_pproxy:undefined,_proxy:undefined,_type:t.VECTOR_PROXY,_contextId:undefined,_isPrimitiveArray:function(){var e=!1,n=this._proxy;return n&&n._size>0&&n[0]._type===t.PRIMITIVE_PROXY&&(e=!0),e},_prepareModels:function(e){var n=[],r;for(r=0;r<this._proxy._size;r++)this._proxy[r]._type===t.MAP_PROXY?n[r]=new this.model(undefined,{_proxy:this._proxy[r],_pproxy:this._proxy,shouldCache:this.shouldCache}):this._proxy[r]._type===t.PRIMITIVE_PROXY&&this._proxy[r]._addEventListener("all",this._onProxyEvent,r,this);return n},_addInternal:function(e,n){var r;e._type===t.MAP_PROXY?(r=new this.model(undefined,{_proxy:e,_pproxy:this._proxy,shouldCache:this.shouldCache}),Backbone.Collection.prototype.add.call(this,[r],{at:n})):e._type===t.PRIMITIVE_PROXY&&e._addEventListener("all",this._onProxyEvent,n,this)},_removeInternal:function(e,n){var r=this.at(n);r&&e._type===t.MAP_PROXY?Backbone.Collection.prototype.remove.call(this,[r]):e._removeEventListener("all",this._onProxyEvent,n,this)},_replaceInternal:function(e,n,r){var i;r._type===t.MAP_PROXY?(i=new this.model(undefined,{_proxy:r,_pproxy:this._proxy,shouldCache:this.shouldCache}),Backbone.Collection.prototype.add.call(this,[i],{at:e,merge:!0})):proxyObject._type===t.PRIMITIVE_PROXY&&(n._removeEventListener("all",this._onProxyEvent,e,this),r._addEventListener("all",this._onProxyEvent,e,this))},_onProxyEvent:function(e,n,r){var i=[],s=0;switch(e){case t.ADD_EVENT:var o=n.key,u=n.property;this._addInternal(u,o);break;case t.REMOVE_EVENT:var o=n.key,a=n.property;this._removeInternal(a,o);break;case t.REPLACE_EVENT:var o=n.key,f=n.newVal,l=n.oldVal;this._replaceInternal(o,l,f);break;case t.CHANGE_EVENT:r?this.trigger("change",r,n.newVal):(i=this._prepareModels({}),this.reset(i,{fromODM:!0}));break;default:}}}),e.RNACollection}),define("core/dev/collections/rna/local-folder-collection",["core/ac-core","core/collections/rna/rna-collection"],function(e){return e.LocalFolderCollection=e.RNACollection.extend({initialize:function(t,n){return this.model=e.LocalItemModel,e.RNACollection.prototype.initialize.call(this,t,n)}}),e.LocalFolderCollection}),define("core/dev/models/rna/local-item-model",["core/ac-core","core/collections/rna/local-folder-collection","core/models/rna/rna-model"],function(e){return e.LocalItemModel=e.RNAModel.extend({initialize:function(t,n){return this.models={list:e.LocalFolderCollection},e.RNAModel.prototype.initialize.call(this,t,n)},get:function(t){return t==="items"&&(t="list"),t==="id"?this.id:e.RNAModel.prototype.get.call(this,t)},isFolder:function(){return this.get("object_type")==="folder"},isRoot:function(){return this.get("object_type")==="root"},isFile:function(){return this.get("object_type")==="file"},getFolderItemsCount:function(){return this.get("items").length},getSharingURL:function(){return""},getRenditionUrl:function(e,t){return""},getRenameUrl:function(){return""},getPublicUrl:function(){return""},getPathUrl:function(){return this.get("fileURI")},isPublic:function(){return!1}}),e.LocalItemModel}),define("html_sanitizer",[],function(){var e={};e.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},e.atype=e.atype,e.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},e.ATTRIBS=e.ATTRIBS,e.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},e.eflags=e.eflags,e.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},e.ELEMENTS=e.ELEMENTS,e.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},e.ELEMENT_DOM_INTERFACES=e.ELEMENT_DOM_INTERFACES,e.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},e.ueffects=e.ueffects,e.URIEFFECTS={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},e.URIEFFECTS=e.URIEFFECTS,e.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},e.ltypes=e.ltypes,e.LOADERTYPES={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},e.LOADERTYPES=e.LOADERTYPES;if("I".toLowerCase()!=="i")throw"I/i problem";var t=function(e){function f(e){if(i.hasOwnProperty(e))return i[e];var t=e.match(s);if(t)return String.fromCharCode(parseInt(t[1],10));if(!(t=e.match(o))){if(a&&u.test(e)){a.innerHTML="&"+e+";";var n=a.textContent;return i[e]=n,n}return"&"+e+";"}return String.fromCharCode(parseInt(t[1],16))}function l(e,t){return f(t)}function h(e){return e.replace(c,"")}function v(e){return e.replace(p,l)}function E(e){return(""+e).replace(m,"&amp;").replace(y,"&lt;").replace(b,"&gt;").replace(w,"&#34;")}function S(e){return e.replace(g,"&amp;$1").replace(y,"&lt;").replace(b,"&gt;")}function C(e){var t={cdata:e.cdata||e.cdata,comment:e.comment||e.comment,endDoc:e.endDoc||e.endDoc,endTag:e.endTag||e.endTag,pcdata:e.pcdata||e.pcdata,rcdata:e.rcdata||e.rcdata,startDoc:e.startDoc||e.startDoc,startTag:e.startTag||e.startTag};return function(e,n){return L(e,t,n)}}function L(e,t,n){var r,i,s,o=M(e),u={noMoreGT:!1,noMoreEndComments:!1};O(t,o,0,u,n)}function A(e,t,n,r,i){return function(){O(e,t,n,r,i)}}function O(t,n,r,i,s){try{t.startDoc&&r==0&&t.startDoc(s);var o,u,a;for(var f=r,l=n.length;f<l;){var c=n[f++],h=n[f];switch(c){case"&":d.test(h)?(t.pcdata&&t.pcdata("&"+h,s,k,A(t,n,f,i,s)),f++):t.pcdata&&t.pcdata("&amp;",s,k,A(t,n,f,i,s));break;case"</":(o=/^([-\w:]+)[^\'\"]*/.exec(h))?o[0].length===h.length&&n[f+1]===">"?(f+=2,a=o[1].toLowerCase(),t.endTag&&t.endTag(a,s,k,A(t,n,f,i,s))):f=_(n,f,t,s,k,i):t.pcdata&&t.pcdata("&lt;/",s,k,A(t,n,f,i,s));break;case"<":if(o=/^([-\w:]+)\s*\/?/.exec(h))if(o[0].length===h.length&&n[f+1]===">"){f+=2,a=o[1].toLowerCase(),t.startTag&&t.startTag(a,[],s,k,A(t,n,f,i,s));var p=e.ELEMENTS[a];if(p&N){var v={name:a,next:f,eflags:p};f=H(n,v,t,s,k,i)}}else f=D(n,f,t,s,k,i);else t.pcdata&&t.pcdata("&lt;",s,k,A(t,n,f,i,s));break;case"<!--":if(!i.noMoreEndComments){for(u=f+1;u<l;u++)if(n[u]===">"&&/--$/.test(n[u-1]))break;if(u<l){if(t.comment){var m=n.slice(f,u).join("");t.comment(m.substr(0,m.length-2),s,k,A(t,n,u+1,i,s))}f=u+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",s,k,A(t,n,f,i,s));break;case"<!":if(!/^\w/.test(h))t.pcdata&&t.pcdata("&lt;!",s,k,A(t,n,f,i,s));else{if(!i.noMoreGT){for(u=f+1;u<l;u++)if(n[u]===">")break;u<l?f=u+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",s,k,A(t,n,f,i,s))}break;case"<?":if(!i.noMoreGT){for(u=f+1;u<l;u++)if(n[u]===">")break;u<l?f=u+1:i.noMoreGT=!0}i.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",s,k,A(t,n,f,i,s));break;case">":t.pcdata&&t.pcdata("&gt;",s,k,A(t,n,f,i,s));break;case"":break;default:t.pcdata&&t.pcdata(c,s,k,A(t,n,f,i,s))}}t.endDoc&&t.endDoc(s)}catch(g){if(g!==k)throw g}}function M(e){var t=/(<\/|<\!--|<[!?]|[&<>])/g;e+="";if(T)return e.split(t);var n=[],r=0,i;while((i=t.exec(e))!==null)n.push(e.substring(r,i.index)),n.push(i[0]),r=i.index+i[0].length;return n.push(e.substring(r)),n}function _(e,t,n,r,i,s){var o=B(e,t);return o?(n.endTag&&n.endTag(o.name,r,i,A(n,e,t,s,r)),o.next):e.length}function D(e,t,n,r,i,s){var o=B(e,t);return o?(n.startTag&&n.startTag(o.name,o.attrs,r,i,A(n,e,o.next,s,r)),o.eflags&N?H(e,o,n,r,i,s):o.next):e.length}function H(t,n,r,i,s,o){var u=t.length;P.hasOwnProperty(n.name)||(P[n.name]=new RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));var a=P[n.name],f=n.next,l=n.next+1;for(;l<u;l++)if(t[l-1]==="</"&&a.test(t[l]))break;l<u&&(l-=1);var c=t.slice(f,l).join("");if(n.eflags&e.eflags.CDATA)r.cdata&&r.cdata(c,i,s,A(r,t,l,o,i));else{if(!(n.eflags&e.eflags.RCDATA))throw new Error("bug");r.rcdata&&r.rcdata(S(c),i,s,A(r,t,l,o,i))}return l}function B(t,n){var r=/^([-\w:]+)/.exec(t[n]),i={};i.name=r[1].toLowerCase(),i.eflags=e.ELEMENTS[i.name];var s=t[n].substr(r[0].length),o=n+1,u=t.length;for(;o<u;o++){if(t[o]===">")break;s+=t[o]}if(u<=o)return void 0;var a=[];while(s!==""){r=x.exec(s);if(!r)s=s.replace(/^[\s\S][^a-z\s]*/,"");else{if(r[4]&&!r[5]||r[6]&&!r[7]){var f=r[4]||r[6],l=!1,c=[s,t[o++]];for(;o<u;o++){if(l){if(t[o]===">")break}else 0<=t[o].indexOf(f)&&(l=!0);c.push(t[o])}if(u<=o)break;s=c.join("");continue}var h=r[1].toLowerCase(),p=r[2]?j(r[3]):"";a.push(h,p),s=s.substr(r[0].length)}}return i.attrs=a,i.next=o+1,i}function j(e){var t=e.charCodeAt(0);if(t===34||t===39)e=e.substr(1,e.length-2);return v(h(e))}function F(t){var n,r,i=function(e,t){r||t.push(e)};return C({startDoc:function(e){n=[],r=!1},startTag:function(i,s,o){if(r)return;if(!e.ELEMENTS.hasOwnProperty(i))return;var u=e.ELEMENTS[i];if(u&e.eflags.FOLDABLE)return;var a=t(i,s);if(!a){r=!(u&e.eflags.EMPTY);return}if(typeof a!="object")throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in a))throw new Error("tagPolicy gave no attribs");s=a.attribs;var f,l;"tagName"in a?(l=a.tagName,f=e.ELEMENTS[l]):(l=i,f=u);if(u&e.eflags.OPTIONAL_ENDTAG){var c=n[n.length-1];c&&c.orig===i&&(c.rep!==l||i!==l)&&o.push("</",c.rep,">")}u&e.eflags.EMPTY||n.push({orig:i,rep:l}),o.push("<",l);for(var h=0,p=s.length;h<p;h+=2){var d=s[h],v=s[h+1];v!==null&&v!==void 0&&o.push(" ",d,'="',E(v),'"')}o.push(">"),u&e.eflags.EMPTY&&!(f&e.eflags.EMPTY)&&o.push("</",l,">")},endTag:function(t,i){if(r){r=!1;return}if(!e.ELEMENTS.hasOwnProperty(t))return;var s=e.ELEMENTS[t];if(!(s&(e.eflags.EMPTY|e.eflags.FOLDABLE))){var o;if(s&e.eflags.OPTIONAL_ENDTAG)for(o=n.length;--o>=0;){var u=n[o].orig;if(u===t)break;if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG))return}else for(o=n.length;--o>=0;)if(n[o].orig===t)break;if(o<0)return;for(var a=n.length;--a>o;){var f=n[a].rep;e.ELEMENTS[f]&e.eflags.OPTIONAL_ENDTAG||i.push("</",f,">")}o<n.length&&(t=n[o].rep),n.length=o,i.push("</",t,">")}},pcdata:i,rcdata:i,cdata:i,endDoc:function(e){for(;n.length;n.length--)e.push("</",n[n.length-1].rep,">")}})}function q(e,t,n,r,i){if(!i)return null;try{var s=URI.parse(""+e);if(s)if(!s.hasScheme()||I.test(s.getScheme())){var o=i(s,t,n,r);return o?o.toString():null}}catch(u){return null}return null}function R(e,t,n,r,i){n||e(t+" removed",{change:"removed",tagName:t});if(r!==i){var s="changed";r&&!i?s="removed":!r&&i&&(s="added"),e(t+"."+n+" "+s,{change:s,tagName:t,attribName:n,oldValue:r,newValue:i})}}function U(e,t,n){var r;return r=t+"::"+n,e.hasOwnProperty(r)?e[r]:(r="*::"+n,e.hasOwnProperty(r)?e[r]:void 0)}function z(t,n){return U(e.ATTRIBS,t,n)}function W(t,n){return U(e.LOADERTYPES,t,n)}function X(t,n){return U(e.URIEFFECTS,t,n)}function V(r,i,s,o,u){for(var a=0;a<i.length;a+=2){var f=i[a],l=i[a+1],c=l,h=null,p;if((p=r+"::"+f,e.ATTRIBS.hasOwnProperty(p))||(p="*::"+f,e.ATTRIBS.hasOwnProperty(p)))h=e.ATTRIBS[p];if(h!==null)switch(h){case e.atype.NONE:break;case e.atype.SCRIPT:l=null,u&&R(u,r,f,c,l);break;case e.atype.STYLE:if("undefined"==typeof t){l=null,u&&R(u,r,f,c,l);break}var d=[];t(l,{declaration:function(t,r){var i=t.toLowerCase();n(i,r,s?function(t){return q(t,e.ueffects.SAME_DOCUMENT,e.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},s)}:null),r.length&&d.push(i+": "+r.join(" "))}}),l=d.length>0?d.join(" ; "):null,u&&R(u,r,f,c,l);break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:l=o?o(l):l,u&&R(u,r,f,c,l);break;case e.atype.URI:l=q(l,X(r,f),W(r,f),{TYPE:"MARKUP",XML_ATTR:f,XML_TAG:r},s),u&&R(u,r,f,c,l);break;case e.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),l=o?o(l):l,l!==null&&l!==void 0&&(l="#"+l)):l=null,u&&R(u,r,f,c,l);break;default:l=null,u&&R(u,r,f,c,l)}else l=null,u&&R(u,r,f,c,l);i[a+1]=l}return i}function $(t,n,r){return function(i,s){if(!(e.ELEMENTS[i]&e.eflags.UNSAFE))return{attribs:V(i,s,t,n,r)};r&&R(r,i,undefined,undefined,undefined)}}function J(e,t){var n=[];return F(t)(e,n),n.join("")}function K(e,t,n,r){var i=$(t,n,r);return J(e,i)}var t,n,r;"undefined"!=typeof window&&(t=window.parseCssDeclarations,n=window.sanitizeCssProperty,r=window.cssSchema);var i={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:" "},s=/^#(\d+)$/,o=/^#x([0-9A-Fa-f]+)$/,u=/^[A-Za-z][A-za-z0-9]+$/,a="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,c=/\0/g,p=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,d=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,m=/&/g,g=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,y=/[<]/g,b=/>/g,w=/\"/g,x=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),T="a,b".split(/(,)/).length===3,N=e.eflags.CDATA|e.eflags.RCDATA,k={},P={},I=/^(?:https?|mailto)$/i,Q={};return Q.escapeAttrib=Q.escapeAttrib=E,Q.makeHtmlSanitizer=Q.makeHtmlSanitizer=F,Q.makeSaxParser=Q.makeSaxParser=C,Q.makeTagPolicy=Q.makeTagPolicy=$,Q.normalizeRCData=Q.normalizeRCData=S,Q.sanitize=Q.sanitize=K,Q.sanitizeAttribs=Q.sanitizeAttribs=V,Q.sanitizeWithPolicy=Q.sanitizeWithPolicy=J,Q.unescapeEntities=Q.unescapeEntities=v,Q}(e);return t}),define("core/dev/models/rna/rna-ipm-model",["core/ac-core","html_sanitizer","core/models/rna/rna-model"],function(e,t){e.RNAIPMModel=e.RNAModel.extend({initialize:function(t,n){return this.models={},e.RNAModel.prototype.initialize.call(this,t,n)},get:function(n){var r=e.RNAModel.prototype.get.call(this,n);return r=t.sanitize(_.unescape(r)),r}})}),define("core/dev/models/rna/native-window-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.NativeWindowModel=e.RNAModel.extend({}),e.NativeWindowModel}),define("core/dev/models/rna/pdm-preview-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.PDMPreviewModel=e.RNAModel.extend({}),e.PDMPreviewModel}),define("core/dev/models/rna/pdm-model",["core/ac-core","core/models/rna/local-item-model","core/models/rna/pdm-preview-model","core/models/rna/rna-model"],function(e){return e.PDMModel=e.RNAModel.extend({initialize:function(t,n){return this.models={myDocuments:e.LocalItemModel,pdmPreview:e.PDMPreviewModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.PDMModel}),define("core/dev/models/rna/acrocef-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.AcrocefModel=e.RNAModel.extend({initialize:function(t,n){return this.models={},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.AcrocefModel}),define("core/dev/models/rna/reader-api-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.ReaderAPIModel=e.RNAModel.extend({initialize:function(t,n){return this.models={analyticsAPI:e.RNAModel,bhClientAPI:e.RNAModel,esAPI:e.RNAModel,fileAPI:e.RNAModel,fillSignSendAPI:e.RNAModel,leftRailAPI:e.RNAModel,notificationAPI:e.RNAModel,pluginsAPI:e.RNAModel,recentFilesAPI:e.RNAModel,servicesAPI:e.RNAModel,sessionAPI:e.RNAModel,stAPI:e.RNAModel,registryAPI:e.RNAModel,sharePointAPI:e.RNAModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.ReaderAPIModel}),define("core/dev/models/rna/reader-model",["core/ac-core","core/models/rna/local-item-model","core/models/rna/reader-api-model","core/models/rna/rna-model"],function(e){return e.ReaderModel=e.RNAModel.extend({initialize:function(t,n){return this.models={myDocuments:e.LocalItemModel,rnaAPI:e.ReaderAPIModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.ReaderModel}),define("core/dev/models/rna/test-model",["core/ac-core","core/models/rna/rna-model"],function(e){return e.TestModel=e.RNAModel.extend({initialize:function(t,n){return this.models={mapObject:e.RNAModel,lazyMapObject:e.RNAModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.TestModel}),define("core/dev/models/rna/reader-context-model",["core/ac-core","core/models/rna/rna-model","core/models/rna/reader-model","core/models/rna/acrocef-model","core/models/rna/test-model"],function(e){return e.ReaderContextModel=e.RNAModel.extend({url:"reader",shouldCache:!0,readerContext:"avAppCtx",initialize:function(t,n){return this.models={rna:e.ReaderModel,acrocef:e.AcrocefModel,testModel:e.TestModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.ReaderContextModel}),define("core/dev/models/rna/cef-context-model",["core/ac-core","core/models/rna/rna-model","core/models/rna/cef-model"],function(e){return e.CefContextModel=e.RNAModel.extend({url:"cefBrowser",initialize:function(t,n){return this.models={browserWindowManager:e.CEFModel,browserCEFManager:e.CEFModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.CefContextModel}),define("core/dev/models/rna/pdm-context-model",["core/ac-core","core/models/rna/rna-model","core/models/rna/pdm-model"],function(e){return e.PDMContextModel=e.RNAModel.extend({url:"pdm",initialize:function(t,n){return this.models={pdm:e.PDMModel},e.RNAModel.prototype.initialize.call(this,t,n)}}),e.PDMContextModel}),define("core/dev/models/rna/rna-model-factory",["core/ac-core","core/models/model","core/models/rna/rna-model","core/models/rna/cef-model","core/models/rna/local-item-model","core/models/rna/rna-ipm-model","core/models/rna/native-window-model","core/models/rna/pdm-model","core/models/rna/pdm-preview-model","core/models/rna/acrocef-model","core/models/rna/reader-model","core/models/rna/reader-context-model","core/models/rna/cef-model","core/models/rna/cef-context-model","core/models/rna/pdm-context-model","core/models/rna/rna-notification-model","core/models/rna/test-model"],function(e){return e.RNAModelFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.RNAModelFactory.create: Unrecognized class: "+t)}}),e.RNAModelFactory}),define("core/dev/collections/rna/rna-collection-factory",["core/ac-core","core/models/model","core/collections/rna/rna-collection","core/collections/rna/local-folder-collection"],function(e){e.RNACollectionFactory=e.Model.extend({create:function(t,n,r){var i=e[t];if(!!i)return new i(n,r);LOG(0,"AcCore.RNACollectionFactory.create: Unrecognized class: "+t)}})}),define("core/dev/ac-core-init",["core/ac-core","core/utils/util","core/ac-core-config","core/collections/ui/ui-collection-factory","core/collections/collection-factory","core/models/model-factory","core/models/ui/ui-model-factory","core/models/rna/rna-model-factory","core/collections/rna/rna-collection-factory","core/ops/op-factory"],function(e,t){return _.extend(e,{Locale:Ac.Locale,Features:Ac.Features,uiCollectionFactory:new e.UiCollectionFactory,collectionFactory:new e.CollectionFactory,modelFactory:new e.ModelFactory,uiModelFactory:new e.UiModelFactory,opFactory:new e.OpFactory}),t.isCEF()&&(_.extend(e,{rnaModelFactory:new e.RNAModelFactory,rnaCollectionFactory:new e.RNACollectionFactory}),e.Config.APP_NAME="Adobe Acrobat/Reader"),e}),define("core/dev/views/plugin-view",["core/ac-core","core/views/view"],function(e){return e.PluginView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this)},getAppApiVersion:function(){return"dev"},setAppApi:function(e){this.options.appApi=e},getPluginApiVersion:function(){return""},getPluginVersionList:function(){return $.Deferred().resolve().promise(["Not implemented"])},initPlugin:function(){return this._getResolvedPromise()},selectPlugin:function(){return LOG(0,"AcCore.PluginView.selectPlugin must be implemented by subclass"),this._getResolvedPromise()},deselectPlugin:function(){return undefined},setPluginOptions:function(e){this._pluginOptions=e},getPluginOptions:function(){return this._pluginOptions},getPreferences:function(){return undefined},setPreferences:function(){return undefined},getSelectionUiModel:function(){return undefined},removeStatusHistory:function(){return undefined},releasePlugin:function(){this.applyMethodRecursively("stopListening"),this.applyMethodRecursively("_removeKeyEventListener"),this.removeAllChildViews()},getSiteCatalystName:function(){return LOG(0,"AcCore.PluginView.getSiteCatalystName must be implemented by subclass"),""},setPreviewEls:function(e){this.options.previewEls=e},runPreDownloadOp:function(){return this._getResolvedPromise()},getFilesFooterUrl:function(){return this._getResolvedPromise()},doesFileExists:function(e){return undefined}}),e.PluginView}),define("core/dev/views/plugin-content-view",["core/ac-core","core/views/plugin-view"],function(e){return e.PluginContentView=e.PluginView.extend({initialize:function(t){t&&_.extend(this.options,t),e.PluginView.prototype.initialize.call(this),_.extend(this.options,{rootView:this})},render:function(){e.PluginView.prototype.render.call(this)}}),e.PluginContentView}),define("core/dev/views/home-view-view",["core/ac-core","core/views/plugin-content-view"],function(e){return e.HomeViewView=e.PluginContentView.extend({initialize:function(){e.PluginContentView.prototype.initialize.call(this),LOG.warn("'core/views/home-view-view' is deprecated. Use 'core/views/plugin-selector-view' instead.")}}),e.HomeViewView}),define("core/dev/templates/selection-action-item-template",[],function(){return'<button class="selection-action-btn plugin-selector"     title="<%= title %>" tabindex="-1">    <div class="selection-action-label theme-hyperlink"><%= label %></div></button>'}),define("core/dev/views/plugins-selector-view",["core/ac-core","core/utils/sc-analytics","core/utils/view-util","core/views/view"],function(e,t,n){e.PluginsSelectorView=e.View.extend({events:{"click .plugin-selector":"_onPluginSelectorClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addFocusEventListener()},render:function(){var t=this.options,n=t.pluginsUiModel,r=this.$el,i,s,o,u,a,f;e.View.prototype.render.call(this),r.children(".plugin-selector").remove(),s=_.template(this._getSelectorTemplate()),n.get("plugins").each(_.bind(function(e){u=e.id;if(this._getSectionName&&e.get("config").section!==this._getSectionName())return!0;o=e.get("selector_api");if(!o)return!0;this.options.appApi.pluginsApi.addSelectorApi(u,o),o.setElement(r),o.setTemplateFunction(s);var t=e.get("tooltip");t&&o.setToolTip(t),a=e.get("selector_label"),a&&o.setSelectorLabel(a),f=e.get("is_removable"),f&&o.setRemovable(f),delete o.$item;if(!e.isPluginShown())return!0;o.render(),i=r.children().last(),i.data("id",u),i.attr("id",u+"-selector"),e.isPluginEnabled()||i.addClass("disabled").attr({disabled:"disabled","aria-disabled":!0}),document.getElementById(u+"-plugin")&&i.attr({"aria-controls":u+"-plugin"}),e.set("selector_elem",i),o.setElement(i)},this)),this._initWrappers(),this._dimDisabledItems(),this._unhighlightSelection(),this._highlightSelection()},selectPlugin:function(e){this.$lastActiveElement=$(document.activeElement),this._triggerViewEvent(this._getSelectorViewEvent(),{pluginId:e})},_getSelectorTemplate:function(){LOG.warning("AcCore.PluginsSelectorView._getSelectorTemplate must be overridden by subclass")},_getSelectorViewEvent:function(){LOG.warning("AcCore.PluginsSelectorView._getSelectorViewEvent must be overridden by subclass")},_initWrappers:function(){this.$selectors=this.$(".plugin-selector")},_getSelectedUiModel:function(){var e=this.options.pluginsUiModel,t,n;return t=e.get("selected_plugin_id"),t&&(n=e.get("plugins").get(t)),n},_getSelectedSelectorElement:function(){var e=this._getSelectedUiModel();return e?e.get("selector_elem"):undefined},_getSelectedSelectorApi:function(){var e=this._getSelectedUiModel();return e?e.get("selector_api"):undefined},_dimDisabledItems:function(){var e=this.options,t=e.pluginsUiModel,n=e.appApi.pluginsApi,r,i;t.get("plugins").each(function(e){r=e.get("plugin_api"),i=e.get("selector_elem");if(!r||!i)return!0;n.callPluginApiMethod(r,"isEnabled",undefined,e.isPluginEnabled(),!0)?i.removeClass("disabled").removeAttr("disabled aria-disabled"):i.addClass("disabled").attr({disabled:"disabled","aria-disabled":!0})})},_unhighlightSelection:function(){this.$selectors.removeClass("selected").filter("[aria-pressed]").attr({"aria-pressed":!1}),this.$selectors.filter("[aria-selected]").attr({"aria-selected":!1}),this.$selectors.filter("[aria-checked]").attr({"aria-checked":!1})},_highlightSelection:function(){var e=this._getSelectedSelectorElement();e?(this.$selectors.not(e).attr("tabindex",-1),e.addClass("selected").attr("tabindex",0).filter("[aria-pressed]").attr({"aria-pressed":!0}),e.filter("[aria-selected]").attr({"aria-selected":!0}),e.filter("[aria-checked]").attr({"aria-checked":!0}),this.$lastActiveElement&&e.attr("id")===this.$lastActiveElement.attr("id")&&e.focus()):this.$selectors.filter(":focusable").attr("tabindex",0),this.$lastActiveElement=null},_onPluginSelectorClick:function(e){var n=$(e.target),r,i,s,o,u,a,f,l=this.options;n.is(".plugin-selector")||(n=$(e.currentTarget)),r=n.data("id"),i=n.hasClass("selected"),s=n.hasClass("disabled"),l.noHistoryEffect||(f=l.pluginsUiModel,f&&f.set("pending_plugin_id",r)),!i&&!s?(o=!0,a=t.CLICKED):a=t.CLICKED_NOOP,u=this.options.appApi.pluginsApi.callSelectorMethod(r,"getSiteCatalystName",undefined,r,!0),u||(u=this.options.appApi.pluginsApi.callPluginMethod(r,"getSiteCatalystName",undefined,r,!0)),this._logSiteCatalystEvent([u,a]),o&&this.selectPlugin(r)},_onKeyDown:function(e){var t=$(e.target),r=this.$el,i,s=!1;if(!t.closest(r).length||!t.closest(".plugin-selector").length)return s;switch(e.which){case 13:case 32:t.trigger("click"),this._consumeEvent(e),s=!0;break;case 37:case 38:i=n.getNextFocusableDescendant(r,!0,!0,".plugin-selector"),s=!0;break;case 39:case 40:i=n.getNextFocusableDescendant(r,!1,!0,".plugin-selector"),s=!0}return i&&i.length===1&&(this._consumeEvent(e),i.focus(),i.is("[role='tab']")&&i.trigger("click")),s},_onFocusIn:function(e){var t=$(e.target),n=this.$selectors.filter(":focusable");t.is(".plugin-selector")&&(n.not(t).attr("tabindex",-1),t.attr("tabindex",0))},_onFocusOut:function(e){var t=$(e.target),n=this.$selectors.filter(":focusable"),r=n.filter(".selected");t.is(".plugin-selector")&&r.length&&(n.not(r).attr("tabindex",-1),r.attr("tabindex",0))}})}),define("core/dev/views/selection-actions-plugins-view",["core/ac-core","core/templates/selection-action-item-template","core/views/plugins-selector-view"],function(e,t){e.SelectionActionsPluginsView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this),this.options=_.extend({},this.options,{pluginsUiModel:this.options.selectionActionsPluginsUiModel})},render:function(){this.options.pluginsUiModel.get("plugins").each(function(e){var t=e.get("selector_elem");t&&t.hasClass("disabled")?e.set("enable_plugin",!1):e.set("enable_plugin",!0)}),e.PluginsSelectorView.prototype.render.call(this),this._updateButtons()},_highlightSelection:function(){this.$selectors.filter(":focusable").attr("tabindex","-1")},_getSelectorTemplate:function(){return t},_getSelectorViewEvent:function(){return e.ViewEvents.SELECTION_ACTION_ITEM_CLICK},_onPluginSelectorClick:function(t){var n=this.options,r=n.appApi;r.pluginsApi.callPluginMethodForEachIfEnabled(n.selectionActionsPluginsUiModel.getAllIds(),"deselectPlugin",undefined,undefined,!0),_.delay(_.bind(function(){e.PluginsSelectorView.prototype._onPluginSelectorClick.call(this,t)},this),n.selectionActionsPluginsUiModel.get("deselect_delay"))},_onKeyDown:function(){return!1},_updateButtons:function(){var e=this.options,t=e.appApi;t.pluginsApi.callSelectorMethodForEach(e.selectionActionsPluginsUiModel.getAllIds(),"updateSelector",e,undefined,!0)}})}),define("core/dev/templates/home-views-selector-template",[],function(){return'<div class="home-view-selector plugin-selector  theme-vertical-tab"        role="button"        aria-checked="false" tabindex="0">    <div class="home-view-selector-label unselectable theme-vertical-tab-text" aria-label= "     <%= label %>     <%= title %>      "><%= label %>    </div>    <button class="home-view-selector-icon                   unselectable" aria-hidden="true" disabled>    </button></div>'}),define("core/dev/templates/sectioned-plugins-selector-template",[],function(){return'<div class="home-views-section"        role="group" aria-labelledby="section-label-<%= viewId %>"><div role="heading" aria-level="3">    <div class="home-views-section section-label theme-list-item-text unselectable"         id="section-label-<%= viewId %>">        <%= sectionLabel %></div>        <button class="home-views-section section-status                       unselectable" aria-hidden="true" disabled>        </button>    </div></div>'}),define("core/dev/views/sectioned-plugins-selector-view",["core/ac-core","core/utils/util","core/templates/sectioned-plugins-selector-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/css-util","core/utils/view-util","core/views/plugins-selector-view"],function(e,t,n,r,i,s,o){return e.SectionedPluginsSelectorView=e.PluginsSelectorView.extend({events:{"click .plugin-selector":"_onPluginSelectorClick","click .home-view-selector-icon":"_onPluginSelectorDelete"},initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this),this._template=_.template(n)},render:function(){this.$item||(this.$el.append(this._template({sectionLabel:this.options.sectionLabel,viewId:this.options.viewId})),this.$item=this.$el.children().last(),this.setElement(this.$item),this._section=this.options.section,this._selectorTemplate=this.options.selectorTemplate,this._selectorClickEvent=this.options.clickEvent,this._selectorDeleteEvent=this.options.deleteEvent,this._scContext=this.options.scContext,this._enableEditing=this.options.enableEditing&&this._getSectionName()==="STORAGE",this._initWrappers(),this._enableEditing&&(this._addDomEventListeners(),this._addUiModelEventListeners())),e.PluginsSelectorView.prototype.render.call(this),this._updateSectionStatus(),this._updateSectionEditVisibility()},_getSelectorTemplate:function(){return this._selectorTemplate},_getSelectorViewEvent:function(){return this._selectorClickEvent},_getSiteCatalystContext:function(){return this._scAnalyticsEvent},_getSectionName:function(){return this._section},_initWrappers:function(){this.$sectionLabel=this.$(".section-label"),this.$sectionStatus=this.$(".section-status"),e.PluginsSelectorView.prototype._initWrappers.call(this)},_markRemovableItems:function(){var e=this.options,t=e.pluginsUiModel,n=e.appApi.pluginsApi,i,s,o,u;t.get("plugins").each(_.bind(function(e){i=e.get("selector_api"),s=e.get("selector_elem"),o=e.get("config");if(!i||!s)return;if(o.section!==this._getSectionName())return;u=s.children(),n.callPluginApiMethod(i,"isRemovable",undefined,!0,!0)?u.addClass("editing").filter(".home-view-selector-icon").removeAttr("aria-hidden").prop("disabled",!1).attr({title:r.REMOVE_ACCOUNT,"aria-label":r.REMOVE_ACCOUNT+": "+e.get("selector_label")}):u.removeClass("editing").filter(".home-view-selector-icon").attr("aria-hidden",!0).prop("disabled",!0)},this))},_updateSectionStatus:function(){var e=this.options,t=e.appApi.connectorsApi,n=this.$sectionStatus,i=e.leftRailUiModel,s=this.$selectors;if(!this._enableEditing){n.remove(),s.children(".home-view-selector-icon").remove(),this._truncateToFit();return}t.hasAnyRemovableConnectors()?n.removeAttr("aria-hidden").removeAttr("disabled").prop("disabled",!1):n.attr("aria-hidden",!0).prop("disabled",!0),i.get("is_editing")?(n.addClass("shown editing").text(r.DONE).removeAttr("title").removeAttr("aria-label"),this._markRemovableItems()):(n.removeClass("shown editing").text("").attr({title:r.EDIT_ACCOUNTS,"aria-label":r.EDIT_ACCOUNTS}),s.children().removeClass("editing").filter(".home-view-selector-icon").attr("aria-hidden",!0).prop("disabled",!0)),this._truncateToFit()},_updateSectionEditVisibility:function(n){var r=this.options,i=r.appApi,s=i.connectorsApi,o=i.routerApi,u=this.$sectionStatus,a=r.leftRailUiModel,f=this.$selectors,l;if(!this._enableEditing)return;if(!t.isCEF()&&e.Features.isFeatureEnabled("no_collection_item_checkbox")&&o.hasQueryParam("allow_left_rail_editing","1")){this._removeDomEventListeners(),this._addDomEventListeners();return}s.hasAnyRemovableConnectors()?(u.removeAttr("aria-hidden").removeAttr("disabled").prop("disabled",!1),this._removeDomEventListeners(),this._addDomEventListeners()):(u.removeClass("shown editing").text("").attr("aria-hidden",!0).prop("disabled",!0),f.children().removeClass("editing"),this._removeDomEventListeners(),a.set("is_editing",!1,{silent:!0})),n==="remove"&&(this._lastActiveElement&&this._lastActiveElement.is(":focusable")?(l=this._lastActiveElement,this._lastActiveElement=null):this.$sectionStatus.is(":tabbable")?l=this.$sectionStatus:l=this.$el.closest("[role=menubar]").find(".plugin-selector.selected"),l&&l.length&&_.defer(function(){l.is("[id]")&&(l=$("#"+l.attr("id"))),l.focus()}))},_truncateToFit:function(){var e=this.$sectionLabel,t=this.$sectionStatus,n;e.text(this.options.sectionLabel),n=s.getFullWidth(e)-s.getExtraWidth(e)-s.getFullWidth(t)-s.getExtraWidth(t),i.truncateElementText(e,n,{truncateFromRight:!0})},_onSectionEditClick:function(e){var t=this.options.leftRailUiModel,n=t.get("is_editing");t.set("is_editing",!n),this._consumeEvent(e)},_lastActiveElement:null,_onPluginSelectorDelete:function(e){var t=$(e.currentTarget),n=t.parent().data("id");this.$sectionStatus.hasClass("editing")&&(this._lastActiveElement=this.$(document.activeElement),this._triggerViewEvent(this._selectorDeleteEvent,{pluginId:n}),this._consumeEvent(e))},_addDomEventListeners:function(){var e=this.$sectionStatus;this.$sectionLabel.mouseenter(function(){e.addClass("shown")}).mouseleave(function(){e.removeClass("shown")}),e.mouseenter(function(){e.addClass("shown")}).mouseleave(function(){e.removeClass("shown")}),e.click(this._onSectionEditClick)},_removeDomEventListeners:function(){var e=this.$sectionStatus,t=this.$sectionLabel;e.off("mouseenter mouseleave click"),t.off("mouseenter mouseleave")},_addUiModelEventListeners:function(){var e=this.options,t;e.leftRailUiModel.on("change:is_editing",this._updateSectionStatus),e.homeViewsUiModel&&(t=e.homeViewsUiModel.get("plugins"),t&&(t.on("add",function(){this._updateSectionEditVisibility("add")},this),t.on("remove",function(){this._updateSectionEditVisibility("remove")},this)))},_onKeyDown:function(e){var t=$(e.target),n=this.$el,r,i,s=!1,u=t.closest(".plugin-selector"),a;if(!t.closest(n).length||!u.length)return s;r=n.parent(),a=t.is(u);switch(e.which){case 13:case 32:t.trigger("click"),this._consumeEvent(e),s=!0;break;case 37:case 38:a?i=o.getNextFocusableDescendant(r,!0,!0,".plugin-selector"):i=u,s=!0;break;case 39:case 40:a||u.focus(),i=o.getNextFocusableDescendant(r,!1,!0,".plugin-selector"),s=!0}return i&&i.length===1&&(this._consumeEvent(e),i.focus(),i.is("[role='tab']")&&i.trigger("click")),s},_onFocusOut:function(t){var n=$(t.target);n.is(".plugin-selector")&&n.attr("tabindex","-1"),e.PluginsSelectorView.prototype._onFocusOut.call(this,t)}}),e.SectionedPluginsSelectorView}),define("core/dev/views/left-rail-view",["core/ac-core","core/utils/util","core/templates/home-views-selector-template","i18n!core/nls/ui-strings","core/utils/truncate","core/views/view","core/views/sectioned-plugins-selector-view"],function(e,t,n,r,i){return e.LeftRailView=e.View.extend({render:function(){var t,i=this.options,s;e.View.prototype.render.call(this),this.$el.children().length===0&&(t=_.uniq(_.pluck(this.options.pluginsUiModel.get("plugins").pluck("config"),"section")),_.each(t,_.bind(function(t){s=0,_.each(i.pluginsUiModel.get("plugins").models,function(e){e.get("config").section===t&&e.get("show_plugin")&&s++});if(s){var o=new e.SectionedPluginsSelectorView(_.extend({},this.options,{section:t,sectionLabel:r[t],clickEvent:this._getSelectorClickEvent(),deleteEvent:this._getSelectorDeleteEvent(),scContext:this._getSiteCatalystContext(),enableEditing:this._enableEditing(),selectorTemplate:n}));this.addChildView(o)}},this)),this.$el.click(this._onLeftRailClick),this.options.appApi.selectionApi.isRunningInFileSelection()&&this.options.appApi.rnaApi.done(function(e){e.logAnayticsCustomOpenSave("Time_To_Load_Left_Rail")}),this.options.appApi.selectionApi.isSelectingFiles()&&this.options.appApi.rnaApi.done(function(e){e.rnaServicesTestAPI.invokeMethod({methodName:"isViewerInTestMode"}).then(function(t){if(t){var n=window.performance;if(n){var r=n.getEntries();if(r.length>0){var i="",s=0,o,u="resource",a="0.0";for(s=0;s<r.length;s++)o=r[s].toJSON(),o.name&&(u=o.name.toString()),o.duration&&(a=o.duration.toString()),i=i+" Name : "+u+" Duration : "+a/100+"\n";e.logPerformanceEvent(i)}}}})})),this._renderChildViews(),this._truncateText(),this._scrollSelectedItemIntoView()},_renderChildViews:function(){var t=this.getChildViews();_.each(t,function(t){t instanceof e.SectionedPluginsSelectorView&&t.render()},this)},_getSelectorClickEvent:function(){LOG.warning("AcCore.LeftRailView._getSelectorClickEvent must be overridden by subclass")},_getSelectorDeleteEvent:function(){LOG.warning("AcCore.LeftRailView._getSelectorDeleteEvent must be overridden by subclass")},_enableEditing:function(){LOG.warning("AcCore.LeftRailView._enableEditing must be overridden by subclass")},_onLeftRailClick:function(e){var n=this.options,r=n.appApi,i;e.target===this.$el.get(0)&&(i=r.pluginsApi.callPluginMethod(n.pluginsUiModel.get("selected_plugin_id"),"hasCollectionItemCheckbox",undefined,!t.isCEF(),!0),i||r.selectionApi.clearSelection()),n.leftRailUiModel.set("is_editing",!1)},_truncateText:function(){var e=this.$(".home-view-selector-label"),t=this.options,n=t.pluginsUiModel;_.each(e,function(e){i.truncateElementText($(e),undefined,{truncateFromRight:!0})}),n.get("plugins").each(_.bind(function(e){var t=e.get("selector_elem");if(!t)return;var n=$(t).find(".home-view-selector-label").attr("title"),r=e.get("tooltip");_.isUndefined(n)?_.isUndefined(r)||$(t).attr("title",r):($(t).find(".home-view-selector-label").removeAttr("title"),_.isUndefined(r)?$(t).attr("title",n):$(t).attr("title",n+"\n"+r)),e.set("selector_elem",$(t))},this))},_scrollSelectedItemIntoView:function(){var e,t,n,r,i,s,o;e=this.$el,t=$(_.find(e.children().children(),function(e){return $(e).attr("aria-checked")==="true"}));if(_.isUndefined(t)||!t.length)return;n=t.position().top,r=t.height(),i=e.height(),s=e.scrollTop(),n<0||n+r>i?(o=n-(i-r)/2,this.$el.scrollTop(Math.max(s+o,0))):n<s&&(o=n+(i-r)/2,this.$el.scrollTop(Math.max(s-o,0)))}}),e.LeftRailView}),define("core/dev/templates/query-box-template",[],function(){return'<div class="query-box" role="listitem">    <button class="query-box-remove-btn"            title="<%= remove %> <%- label %>"            aria-label="<%= remove %> <%- label %>">    </button>    <div class="query-box-label"><%- label %></div></div>'}),define("core/dev/views/query-box-view",["core/ac-core","core/templates/query-box-template","core/utils/truncate","core/utils/css-util","i18n!files/nls/ui-strings","core/utils/sc-analytics","core/views/view"],function(e,t,n,r,i,s){return e.QueryBoxView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this)},render:function(){var n=this.$el,s=this.$item,o,u,a,f,l,c,h=this.options.searchFieldQuery;return e.View.prototype.render.call(this),s||(o=_.template(t)({remove:i.REMOVE_FILTER,label:h.get("query_label")}),n.append(o),s=n.children().last(),h.get("query_box_visible")||s.hide(),this.$item=s,this._initWrappers(),this._addDomEventListeners()),u=this.$removeBtn,a=this.$label,h.get("removable")||(u.hide(),s.addClass("no-remove-btn"),a.addClass("no-remove-btn")),s.css("max-width",n.css("width")),f=u.css("display")!=="none"?u.width():0,l=s.position(),c=l?l.left:0,a.css("max-width",n.width()-f-c-r.getExtraWidth(s)-r.getExtraWidth(a)+"px"),this._truncateText(),this},remove:function(){return this.$item.remove(),this.stopListening(),this},_initWrappers:function(){var e=this.$item;this.$removeBtn=e.find(".query-box-remove-btn"),this.$label=e.find(".query-box-label")},_truncateText:function(){var e=this.$label;n.truncateElementText(e,r.getCssNum(e,"max-width"))},_addDomEventListeners:function(){this.$removeBtn.on("click",this._onRemoveClick)},_onRemoveClick:function(t){var n=this.options;this._consumeEvent(t),this._logSiteCatalystEvent([s.KEYWORD,s.CLEARED]),this._triggerViewEvent(e.ViewEvents.REMOVE_SEARCH_FIELD_QUERY,{searchFieldQuery:n.searchFieldQuery})}}),e.QueryBoxView}),define("core/dev/views/plugins-content-view",["core/ac-core","core/views/view"],function(e){e.PluginsContentView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this)},render:function(){var t=this.$el,n,r,i=this.options,s=i.appApi.pluginsApi,o=i.pluginsUiModel,u=o.get("plugins"),a,f,l,c,h=o.get("no_selectors");e.View.prototype.render.call(this),n=_.template(this._getContentTemplate()),t.children().length===0&&(u&&u.each(function(e){t.append(n()),f=e.id,c=s.getPluginSelectorId(f),r=t.children().last(),r.attr({id:f+"-plugin","aria-labelledby":c}).data("id",f),e.set("content_elem",r)}),this._initWrappers(),h&&(this.$contents.addClass("selected no-selectors"),u.each(function(e){s.selectPlugin(e.id)})),this._addUiModelEventListeners()),this.$contents||this._initWrappers(),h?(l=o.get("expanded_plugin_id"),l?u.each(function(e){r=e.get("content_elem"),l===e.id?r.show():r.hide()}):u.each(function(e){e.get("content_elem").show()})):(this.$contents.removeClass("selected"),f=o.getSelectedId(),a=u.get(f),a&&a.get("content_elem").addClass("selected"))},_getContentTemplate:function(){LOG(0,"AcCore.PluginsContentView._getContentTemplate must be overridden by subclass")},_addUiModelEventListeners:function(){var e=this.options.pluginsUiModel;this.listenTo(e,"change:expanded_plugin_id",this._onExpandedPluginIdChange),this.listenTo(e.get("plugins"),"add",this._onPluginAdd),this.listenTo(e.get("plugins"),"remove",this._onPluginRemove)},_onExpandedPluginIdChange:function(){this.render()},_onPluginAdd:function(e){var t=this.$el,n,r;r=_.template(this._getContentTemplate()),_.isUndefined(e.get("content_elem"))&&(t.append(r()),n=t.children().last(),n.attr("id",e.id+"-plugin"),e.set("content_elem",n),this._initWrappers(),this.render())},_onPluginRemove:function(e){e.get("content_elem").remove(),this._initWrappers(),this.render()},_initWrappers:function(){this.$contents=this.$el.children(".plugin-content")}})}),define("core/dev/templates/collection-header-template",[],function(){return'<div role="columnheader">    <input type="checkbox" aria-checked="false"           class="collection-header-checkbox"            title="<%= selectAll %>"/>    <span class="collection-header-checkbox-checkmark"          aria-hidden="true"></span></div><div role="presentation" class="collection-header-info-container ui-theme theme-container">    <button role="columnheader"            class="collection-header-name                   collection-header-column-header"         data-test-name="collection-header-name" tabindex="-1">        <div class="collection-header-column-title theme-header-text"><%= name %></div>        <div class="collection-header-column-sort hidden"             data-test-name="collection-header-name-sort"></div>    </button>    <button role="columnheader"            class="collection-header-size                   collection-header-column-header"         data-test-name="collection-header-size" tabindex="-1">        <div class="collection-header-column-title theme-header-text"><%= size %></div>        <div class="collection-header-column-sort hidden"             data-test-name="collection-header-size-sort"></div>    </button>    <button role="columnheader"            class="collection-header-date                   collection-header-column-header"        data-test-name="collection-header-date" tabindex="-1">        <div class="collection-header-column-title theme-header-text"></div>        <div class="collection-header-column-sort hidden"             data-test-name="collection-header-date-sort"></div>    </button></div>'}),define("core/dev/views/collection-header-view",["core/ac-core","core/templates/collection-header-template","i18n!core/nls/ui-strings","core/utils/css-util","core/utils/view-util","core/utils/sc-analytics","core/views/view","core/views/view-events"],function(e,t,n,r,i,s){e.CollectionHeaderView=e.View.extend({events:{"click .collection-header-checkbox":"_onCheckboxClick","click .collection-header-name":"_onNameClick","click .collection-header-size":"_onSizeClick","click .collection-header-date":"_onDateClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners()},render:function(){var s=this.$el,o=this.options;e.View.prototype.render.call(this);if(i.isElementEmpty(s)){s.html(_.template(t)({name:n.NAME,size:n.SIZE,selectAll:n.SELECT_ALL})),this._initWrappers();if(o.appApi.acrobatApi.isInAcrobat()||!o.selectionUiModel.get("multiple_selection"))r.addClass(this.$checkbox,"hidden"),r.addClass(this.$infoCn,"no-checkbox"),this.$checkbox.attr({"aria-hidden":"true",disabled:"disabled",tabindex:"-1"}),this.$checkboxCell.attr("aria-hidden","true"),this.$name.attr("tabindex","0")}return this.$dateTitle.text(this._getDateTitle()),this._updateSortIcon(),o.sortUiModel.get("is_locked")?this.$colHeaders.addClass("locked").attr("disabled","disabled"):this.$colHeaders.removeClass("locked").removeAttr("disabled"),this.$infoCn.css("right",o.collectionUiModel.get("has_vertical_scrollbar")?i.getScrollBarWidth()+"px":0),this._updateCheckbox(),this._adjustIE8Layout(),this},_initWrappers:function(){this.$colHeaders=this.$(".collection-header-column-header"),this.$checkbox=this.$(".collection-header-checkbox"),this.$checkboxCell=this.$checkbox.closest("[role='columnheader']"),this.$infoCn=this.$(".collection-header-info-container"),this.$name=this.$(".collection-header-name"),this.$size=this.$(".collection-header-size"),this.$date=this.$(".collection-header-date"),this.$dateTitle=this.$(".collection-header-date .collection-header-column-title"),this.$nameSortIcon=this.$(".collection-header-name .collection-header-column-sort"),this.$sizeSortIcon=this.$(".collection-header-size .collection-header-column-sort"),this.$dateSortIcon=this.$(".collection-header-date .collection-header-column-sort")},_isItemSelectable:function(e){return!this.options.noFolderSelection||!e.isFolder()},_isItemSelected:function(e){return this.options.selectionUiModel.isItemSelected(e.id)},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(t){this._isItemSelectable(t)&&(e+=1)},this)),e},_getNumSelected:function(){var e=0;return this.options.collection.each(_.bind(function(t){this._isItemSelected(t)&&(e+=1)},this)),e},_updateCheckbox:function(){var t=this.$checkbox,n=this.$infoCn,r=this._getNumSelected(),s=this.options;s.collectionsUiModel.get("checkbox")?(t.removeClass("dash check hidden").removeAttr("aria-checked checked disabled").prop({checked:!1,indeterminate:!1,disabled:!1}),n.removeClass("no-checkbox"),r>0?r===this._getNumSelectable()?t.addClass("check").attr({"aria-checked":"true",checked:"checked"}).prop({checked:!0,indeterminate:!1}):t.addClass("dash").attr("aria-checked","mixed").removeAttr("checked").prop({checked:!1,indeterminate:!0}):s.collection.length===0&&t.attr("disabled","disabled").prop("disabled",!0)):(t.addClass("hidden").attr("disabled","disabled"),n.addClass("no-checkbox")),e.Util.isIE8()&&i.detachAndReattachElement(t.next())},_getDateTitle:function(){var t=this.options.sortUiModel.get("mru_date_order"),r=e.SortUiModel,i;switch(t){case r.ORDER_BY_DATE_ADDED:i=n.CREATED_DATE;break;case r.ORDER_BY_DATE_MODIFIED:i=n.MODIFIED_DATE;break;case r.ORDER_BY_DATE_LAST_ACCESS:i=n.VIEWED_DATE}return i},_updateSortIcon:function(){var t,n=this.options.sortUiModel,r=e.SortUiModel,i,s;this.$colHeaders.removeAttr("aria-sort"),this.$(".collection-header-column-sort").addClass("hidden").removeClass("descending"),i=n.get("order_by");switch(i){case r.ORDER_BY_FILE_SIZE:s=this.$size,t=this.$sizeSortIcon;break;case r.ORDER_BY_DATE_ADDED:case r.ORDER_BY_DATE_MODIFIED:case r.ORDER_BY_DATE_LAST_ACCESS:s=this.$date,t=this.$dateSortIcon;break;case r.ORDER_BY_FILE_NAME:s=this.$name,t=this.$nameSortIcon}if(!t)return;t.removeClass("hidden"),n.getOrderDirection()===r.ORDER_DESCENDING?(t.addClass("descending"),s.attr("aria-sort","descending")):s.attr("aria-sort","ascending")},_adjustIE8Layout:function(){if(e.Util.isIE8()){var t=$(window).width();this.$size.css("display",t>720?"block":"none"),this.$date.css("display",t>650?"block":"none")}},_onCheckboxClick:function(){var t=e.SelectionUiModel,n;n=this._getNumSelected()>0?t.SELECT_NONE:t.SELECT_ALL,this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend({},this.options,{selectType:n}))},_onNameClick:function(){var t,n=this.options;if(n.sortUiModel.get("is_locked"))return;t=this._onColumnHeaderClick("name"),n.appApi.siteCatalystApi.logScEvent([s.FILE_LIST,s.SORT_COLUMN,t===e.SortUiModel.ORDER_ASCENDING?s.NAME_UP:s.NAME_DOWN])},_onSizeClick:function(){var t,n=this.options;if(n.sortUiModel.get("is_locked"))return;t=this._onColumnHeaderClick("size"),n.appApi.siteCatalystApi.logScEvent([s.FILE_LIST,s.SORT_COLUMN,t===e.SortUiModel.ORDER_ASCENDING?s.SIZE_UP:s.SIZE_DOWN])},_onDateClick:function(){var t,n=this.options,r=n.sortUiModel;if(r.get("is_locked"))return;t=this._onColumnHeaderClick(r.get("mru_date_order")),n.appApi.siteCatalystApi.logScEvent([s.FILE_LIST,s.SORT_COLUMN,t===e.SortUiModel.ORDER_ASCENDING?s.DATE_UP:s.DATE_DOWN])},_onColumnHeaderClick:function(t){var n=this.options.sortUiModel,r=e.SortUiModel,i=r.ORDER_ASCENDING,s=r.ORDER_DESCENDING,o;return t!==n.get("order_by")?o=n.getOrderDirection(t):(o=n.getOrderDirection(),o===i?o=s:o=i),this._triggerViewEvent(e.ViewEvents.SORT,{orderBy:t,orderDirection:o}),o},_onFocusIn:function(e){var t=$(e.target);return this.$(":focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0),!0},_onFocusOut:function(){var e=this.options.collectionItemsView,t=e.$el;return t.find(":tabbable").length>0&&this.$(":focusable").attr("tabindex",-1),!0},_onKeyDown:function(e){var t=this.$el,n,r=e.which,s=r===37,o=!1;if(!i.descendantHasFocus(t))return o;switch(r){case 37:case 39:n=i.getNextFocusableDescendant(t,s,!0)}return n&&n.length===1&&(o=!0,n.focus()),o},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.collectionUiModel,"change:has_vertical_scrollbar",this._onHasVerticalScrollbarChange).listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange).listenTo(e.sortUiModel,"change",this._onSortUiModelChange)},_onHasVerticalScrollbarChange:function(){this.render()},_onSelectedItemModelsChange:function(){this.render()},_onSortUiModelChange:function(){this.render()}})}),define("core/dev/views/plugin-selector-view",["core/ac-core","core/views/plugin-view"],function(e){return e.PluginSelectorView=e.PluginView.extend({initialize:function(){e.PluginView.prototype.initialize.call(this)},render:function(){var t=this.$el;return e.PluginView.prototype.render.call(this),this.$item||(t.append(this.options.template({label:this.getSelectorLabel(),title:this.getSelectorTooltip()})),this.$item=t.children().last(),this.$item.find(".plugin-selector-icon").addClass(this.getSelectorIconClass())),this},getSiteCatalystName:function(){return LOG(0,"AcCore.SelectorView.getSiteCatalystName must be implemented by subclass"),""},setTemplateFunction:function(e){return this.options.template=e,this},setSelectorLabel:function(e){this._label=e},setToolTip:function(e){this._tooltip=e},getSelectorLabel:function(){return this._label||""},getSelectorIconClass:function(){return""},getSelectorTooltip:function(){return this._tooltip||""},setRemovable:function(e){this._removable=e},isRemovable:function(){return this._removable===!0},showSelector:function(e){var t=this.$item;if(!t)return;e?t.show():t.hide()}}),e.PluginSelectorView}),define("core/dev/views/toolbar-item-view",["core/ac-core","core/views/plugin-selector-view"],function(e){return e.ToolbarItemView=e.PluginSelectorView.extend({initialize:function(){e.PluginSelectorView.prototype.initialize.call(this),LOG.warn("'core/views/toolbar-item-view' is deprecated. Use 'core/views/plugin-selector-view' instead.")}}),e.ToolbarItemView}),define("core/dev/views/input-placeholder-view",["core/ac-core","core/views/view"],function(e){e.InputPlaceholderView=e.View.extend({events:{focus:"_onFocus",blur:"_onBlur"},initialize:function(){e.View.prototype.initialize.call(this),this._placeholder=this.$el.attr("placeholder"),this._isPromptEnabled=!0},getText:function(){return this.$el.val()},setText:function(e){this.$el.val(e)},hasText:function(){return this.getText().length>0},enablePrompt:function(e){return this._isPromptEnabled=e,this._hidePlaceholder(!e||this._hasFocus()),this},_hidePlaceholder:function(e){e||!this._isPromptEnabled?this.$el.removeAttr("placeholder"):this.$el.attr("placeholder",this._placeholder)},_onKeyUp:function(){return this.hasText()?this._hidePlaceholder(!1):this._hidePlaceholder(this._hasFocus()),!1},_onFocus:function(){this.hasText()||this._hidePlaceholder(!0)},_onBlur:function(){this._hidePlaceholder(!1)}})}),define("core/dev/views/input-search-view",["core/ac-core","core/utils/string-util","core/utils/view-util","core/utils/util","core/utils/sc-analytics","core/views/input-placeholder-view"],function(e,t,n,r,i){e.InputSearchView=e.InputPlaceholderView.extend({options:{clearOnEsc:!0},initialize:function(){e.InputPlaceholderView.prototype.initialize.call(this),this._oldText="",this._addDomEventListeners(),this._addKeyEventListener()},clearText:function(e){return this.$el.val(""),(!e||!e.silent)&&this._commitTextOnlyIfChanged(),this},commitText:function(){this._commitTextQueryBox()},_commitText:function(n,r){var s=$.trim(n),o=" ",u,a,f,l=this.options.searchField;if(t.beginsWithQuote(s)){if(s.length===1)return;if(this._unmatchedOpenQuote)return}t.isQuoted(s)?(s=t.stripQuotes(s),r=!0):this._unmatchedOpenQuote||(u=s.indexOf(o),u>0&&(a=s.split(o),s=a[0],r=!0,f=a[1],this.setText(f))),r&&!f&&this.clearText({silent:!0}),r&&this._logSiteCatalystEvent([i.SEARCH_TEXT_ENTERED]),this._triggerViewEvent(e.ViewEvents.ADD_SEARCH_FIELD_QUERY,{searchFieldQuery:{field:l,value:s,commitQueryBox:r,queryLabel:s}}),f&&this._triggerViewEvent(e.ViewEvents.ADD_SEARCH_FIELD_QUERY,{searchFieldQuery:{field:l,value:f,commitQueryBox:!1,queryLabel:f}})},_commitTextIfChanged:function(e,t){var n=this.getText(),r;if(n!==this._oldText||e)this._unmatchedOpenQuote&&(r=String.fromCharCode(this._unmatchedOpenQuote),n.indexOf(r)<0&&delete this._unmatchedOpenQuote),this._oldText=n,this._commitText(n,t)},_commitTextOnlyIfChanged:function(){this._commitTextIfChanged(!1,!1)},_commitTextQueryBox:function(){this._commitTextIfChanged(!0,!0)},_isQuotedString:function(e){var n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t.isQuoteCharCode(n)&&n===r},_addDomEventListeners:function(){this.$el.on("paste",this._onPaste)},_onPaste:function(){var e=this.$el,t=this.getText(),r,i;_.defer(_.bind(function(){if(!t||n.isAllTextSelected(e))r=$.trim(this.getText()),i=this.options.searchUiModel.get("max_paste_length"),r.length>i&&(r=r.substr(0,i)),this._isQuotedString(r)?this._commitText(r,!0):r.indexOf(" ")>0&&this._commitText('"'+r+'"')},this))},_onKeyDown:function(t){var i=!1,s=t.which,o=this.options.appApi,u=o.usersMeApi;return n.descendantHasFocus(this.$el)?(s===8?this.hasText()||(this._triggerViewEvent(e.ViewEvents.REMOVE_LAST_FIELD_QUERY),i=!0):s===9?this.hasText()&&(this._consumeEvent(t),this._commitTextQueryBox(),i=!0):s===13?(this.hasText()&&t.stopImmediatePropagation(),r.isIE()&&(this._consumeEvent(t),this.hasText()&&this._commitTextQueryBox()),i=!0):!r.isCEF()&&e.Features.isFeatureEnabled("javascript_console_logging")&&(this.hasText()||s===32&&(t.shiftKey?this.options.appApi.siteCatalystApi.toggleConsoleLogging():t.ctrlKey&&(u.setUserPrefs("common",{}),u.setUserPrefs("files",{}),LOG("AcCore.InputSearchView._onKeyDown: Cleared 'common' and 'files' preferences")))),i):i},_onKeyPress:function(e){var r=!1,i=e.which,s;return n.descendantHasFocus(this.$el)?(i===13?(this._commitTextQueryBox(),r=!0):t.isQuoteCharCode(i)&&(s=this._unmatchedOpenQuote,s&&this.getText().charCodeAt(0)===s?s===i&&(delete this._unmatchedOpenQuote,this._commitQueryBoxOnKeyUp=!0,r=!0):this._unmatchedOpenQuote=i),r):r},_onKeyUp:function(t){var r=!1,i=t.which;return n.descendantHasFocus(this.$el)?(r=e.InputPlaceholderView.prototype._onKeyUp.call(this,t),r?r:(this._onDebouncedKeyUp||(this._onDebouncedKeyUp=_.debounce(_.bind(function(){this._commitTextOnlyIfChanged()},this),this.options.searchUiModel.get("keydown_debounce_delay"))),i===27?this.options.clearOnEsc&&(this.clearText(),r=!0):i===32?!this._unmatchedOpenQuote&&e.Locale.getLocale()!=="ja-jp"&&(this._commitTextQueryBox(),r=!0):this._commitQueryBoxOnKeyUp?(this._commitTextQueryBox(),this._commitQueryBoxOnKeyUp=!1):this._onDebouncedKeyUp(t),r)):r}})}),define("core/dev/views/account-menu-item-view",["core/ac-core","core/views/plugin-selector-view"],function(e){return e.AccountMenuItemView=e.PluginSelectorView.extend({initialize:function(){e.PluginSelectorView.prototype.initialize.call(this),LOG.warn("'core/views/account-menu-item-view' is deprecated. Use 'core/views/plugin-selector-view' instead.")}}),e.AccountMenuItemView}),define("core/dev/templates/hover-preview-hud-template",[],function(){return'<div class="hover-preview-hud-prev hover-preview-control               hover-preview-nav-btn"     id="hover-preview-hud-prev">    <div class="hover-preview-nav-btn-img hover-preview-img-prev">    </div></div><div class="hover-preview-hud-name-container hover-preview-control">    <div class="hover-preview-hud-checkbox"         id="hover-preview-hud-checkbox"></div>    <div class="hover-preview-hud-name collection-item-name"></div></div><div class="hover-preview-hud-next hover-preview-control            hover-preview-nav-btn"     id="hover-preview-hud-next">    <div class="hover-preview-nav-btn-img hover-preview-img-next"></div></div>'}),define("core/dev/views/hover-preview-hud-view",["core/ac-core","core/templates/hover-preview-hud-template","core/utils/truncate","core/utils/css-util","core/utils/sc-analytics","core/views/view"],function(e,t,n,r,i){return e.HoverPreviewHudView=e.View.extend({events:{"click .hover-preview-hud-prev":"_onPrevPageClick","click .hover-preview-hud-next":"_onNextPageClick","click .hover-preview-hud-checkbox":"_onCheckboxClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addUiModelEventListeners()},render:function(){e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template()),this._initWrappers()),this.$hudName.text(this._getItemName()),this._updateNameAndCheckbox(),this._updatePageNavButtons(),this._truncateFileName()},_initWrappers:function(){this.$hudPrev=this.$(".hover-preview-hud-prev"),this.$hudNext=this.$(".hover-preview-hud-next"),this.$hudNameContainer=this.$(".hover-preview-hud-name-container"),this.$hudCheckbox=this.$(".hover-preview-hud-checkbox"),this.$hudName=this.$(".hover-preview-hud-name")},_getItemView:function(){return this.options.hoverPreviewUiModel.get("item_view")},_getItemName:function(){var e=this._getItemView();return e?e.model.get("name"):""},_isItemSelected:function(){var e=this.options,t=this._getItemView();return t&&e.selectionUiModel.isItemSelected(t.model.get("id"))},_show:function(e){e?this.$el.removeClass("hidden"):this.$el.addClass("hidden")},_updateNameAndCheckbox:function(){var e,t,n;e=this.options.hoverPreviewUiModel,t=e.get("width")<e.get("min_width_name"),n=this.options.collectionsUiModel.isListView(),n||t?this.$hudNameContainer.addClass("hidden"):(this.$hudNameContainer.removeClass("hidden"),this._updateCheckbox())},_updatePageNavButtons:function(){var e,t,n,r,i;e=this.options.hoverPreviewUiModel,t=e.get("width")<e.get("min_width_nav"),n=e.get("current_page"),r=e.get("page_count"),i=_.isUndefined(r),i||r===1||t?(this.$hudPrev.addClass("hidden"),this.$hudNext.addClass("hidden")):(this.$hudPrev.removeClass("hidden"),this.$hudNext.removeClass("hidden"));if(i)return;n===0?this.$hudPrev.addClass("disabled"):this.$hudPrev.removeClass("disabled"),n===r-1?this.$hudNext.addClass("disabled"):this.$hudNext.removeClass("disabled")},_updateCheckbox:function(){this._isItemSelected()?this.$hudCheckbox.addClass("selected"):this.$hudCheckbox.removeClass("selected")},_truncateFileName:function(){var e,t,i;e=r.getCssNum(this.$hudNameContainer,"padding-right"),t=this.$hudNameContainer.width()-e-r.getCssNum(this.$hudName,"left"),i=_.bind(function(){return n.getTextSize(this.$hudName).width-t},this),t>0&&n.truncateToFit(this.$hudName,i)},_onPrevPageClick:function(e){this._onPageNavClick(e,!1)},_onNextPageClick:function(e){this._onPageNavClick(e,!0)},_onPageNavClick:function(e,t){var n,r,s,o;e&&e.stopPropagation();if(e&&$(e.currentTarget).hasClass("disabled"))return;this.options.appApi.siteCatalystApi.logScEvent([i.FILE_LIST,i.SMALL_PREVIEW,t?i.NEXT_PAGE:i.PREV_PAGE]),n=this.options.hoverPreviewUiModel,r=s=n.get("current_page"),o=n.get("page_count"),t?s=Math.min(r+1,o-1):s=Math.max(r-1,0),n.set("current_page",s),this._updatePageNavButtons()},_goToPage:function(e){var t=this.options.hoverPreviewUiModel;t.set("current_page",Math.min(Math.max(0,e),t.get("page_count")-1))},_onCheckboxClick:function(t){var n,r,i;t.stopPropagation(),t.shiftKey?this._isItemSelected()?i=e.SelectionUiModel.SELECT_DESELECT:i=e.SelectionUiModel.SELECT_EXTEND:i=e.SelectionUiModel.SELECT_TOGGLE,n=this.options.hoverPreviewUiModel,r={collectionItemsView:n.get("collection_items_view"),itemView:n.get("item_view"),selectType:i},this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,r),this._updateCheckbox()},_onKeyUp:function(e){var t=e.which,n=this.options,r,i,s=!0;switch(t){case 27:r=n.hoverPreviewUiModel,i=r.get("item_view"),i&&(i.model&&r.suppress(i.model.id),r.unset("item_view"));break;case 37:this._onPrevPageClick();break;case 39:this._onNextPageClick();break;default:s=!1}return s},_addUiModelEventListeners:function(){var e=this.options;e.hoverPreviewUiModel.on("change:item_view",this._onItemViewChange).on("change:page_count",this._onPageCountChange).on("change:width",this._onWidthChange),e.selectionUiModel.on("change:selected_item_models",this._onSelectedItemModelsChange)},_onItemViewChange:function(e,t){this._show(t),t?this.render():this.options.appApi.keyApi.popKeyHandler(this)},_onPageCountChange:function(e,t){t&&e.get("item_view")&&(this.render(),this.options.appApi.keyApi.pushKeyHandler(this))},_onWidthChange:function(){this.render()},_onSelectedItemModelsChange:function(){this.render()}}),e.HoverPreviewHudView}),define("core/dev/templates/rhp-properties-template",[],function(){return'<div class="rhp-menu-btn-cn">    <button class="rhp-menu-btn rhp-properties-menu-btn"               tabindex="0">        <%= properties %>        <div class="rhp-menu-btn-icon"></div>    </button></div><div role="menu" class="rhp-menu rhp-properties-menu">    <div class="rhp-properties-file-menu">        <div class="rhp-menu-item rhp-properties-file-name">            <div class="rhp-menu-item-label"><%= fileName %></div>            <div class="rhp-menu-item-value                        rhp-properties-file-name-value">            </div>        </div>        <div class="rhp-menu-item rhp-properties-location">            <div class="rhp-menu-item-label"><%= location %></div>            <button class="rhp-properties-location">                <img class="rhp-properties-loc-icon" alt=""/>                <div class="rhp-properties-loc-info">                    <div class="rhp-properties-loc-connector"></div>                    <div class="rhp-properties-loc-path"></div>                </div>            </button>        </div>        <div class="rhp-menu-item rhp-properties-created">            <div class="rhp-menu-item-label"><%= created %></div>            <div class="rhp-menu-item-value                           rhp-properties-created-value">            </div>        </div>        <div class="rhp-menu-item rhp-properties-modified">            <div class="rhp-menu-item-label"><%= modified %></div>            <div class="rhp-menu-item-value                           rhp-properties-modified-value">            </div>        </div>        <div class="rhp-menu-item rhp-properties-viewed">            <div class="rhp-menu-item-label"><%= viewed %></div>            <div class="rhp-menu-item-value                           rhp-properties-viewed-value">            </div>        </div>    </div>    <div class="rhp-properties-folder-menu">        <div class="rhp-menu-item rhp-properties-folder-name">            <div class="rhp-menu-item-label"><%= folderName %></div>            <button class="rhp-menu-item-value                           rhp-properties-folder-name-value">            </button>        </div>        <div class="rhp-menu-item rhp-properties-total-files">            <div class="rhp-menu-item-label"><%= totalFiles %></div>            <button class="rhp-menu-item-value                           rhp-properties-total-files-value">            </button>        </div>    </div></div>'}),define("core/dev/templates/rhp-preview-hud-template",[],function(){return'<button type="button" tabindex="0"        class="rhp-preview-nav-btn rhp-preview-hud-prev"        id="rhp-preview-hud-prev"></button><button type="button" tabindex="0"        class="rhp-preview-nav-btn rhp-preview-hud-next"        id="rhp-preview-hud-next"></button>'}),define("core/dev/views/rhp-preview-hud-view",["core/ac-core","core/templates/rhp-preview-hud-template","core/utils/view-util","core/utils/sc-analytics","core/views/view"],function(e,t,n,r){return e.RhpPreviewHudView=e.View.extend({events:{"click .rhp-preview-hud-prev":"_onPrevPageClick","click .rhp-preview-hud-next":"_onNextPageClick",focusin:"_onHudFocusIn",focusout:"_onHudFocusOut"},initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var n;return e.View.prototype.render.call(this),n=this.$el,n.children().length===0&&(n.html(_.template(t)),this._initWrappers()),this._updatePageNavButtons(),this},_initWrappers:function(){this.$hudPrev=this.$(".rhp-preview-hud-prev"),this.$hudNext=this.$(".rhp-preview-hud-next")},_updatePageNavButtons:function(){function l(){return s=document.activeElement,{focusPrev:a.is(s),focusNext:f.is(s)}}var e,t,r,i,s,o,u,a=this.$hudPrev,f=this.$hudNext;e=this.options.rhpPreviewUiModel,t=e.get("current_page"),r=e.get("page_count"),i=_.isUndefined(r),i||r===1?(a.addClass("hidden"),f.addClass("hidden")):(a.removeClass("hidden"),f.removeClass("hidden"));if(i)return;o=l(),n.enableInput(a,t>0),n.enableInput(f,t<r-1),_.delay(function(){u=l(),o.focusPrev&&!u.focusPrev?f.focus():o.focusNext&&!u.focusNext&&a.focus()},e.get("focus_delay"))},_onPrevPageClick:function(e){this._onPageNavClick(e,!1)},_onNextPageClick:function(e){this._onPageNavClick(e,!0)},_onPageNavClick:function(e,t){var n=this.options,i=n.rhpPreviewUiModel,s,o,u;e&&e.stopPropagation();if(e&&$(e.currentTarget).hasClass("disabled"))return;n.appApi.siteCatalystApi.logScEvent([r.FILE_LIST,r.SMALL_PREVIEW,t?r.NEXT_PAGE:r.PREV_PAGE]),s=o=i.get("current_page"),u=i.get("page_count"),t?o=Math.min(s+1,u-1):o=Math.max(s-1,0),i.set("current_page",o),this._updatePageNavButtons()},_onHudFocusIn:function(){this.options.appApi.keyApi.pushKeyHandler(this)},_onHudFocusOut:function(){this.options.appApi.keyApi.popKeyHandler(this)},_onKeyUp:function(e){var t=e.which,n=!0;switch(t){case 37:this._onPrevPageClick();break;case 39:this._onNextPageClick();break;default:n=!1}return n},_addUiModelEventListeners:function(){var e=this.options.rhpPreviewUiModel;this.listenTo(e,"change:item_model",this._onItemModelChange).listenTo(e,"change:page_count",this._onPageCountChange)},_onItemModelChange:function(){this.render()},_onPageCountChange:function(e,t){t&&e.get("item_model")&&this.render()}}),e.RhpPreviewHudView}),define("core/dev/views/rhp-properties-view",["core/ac-core","core/templates/rhp-properties-template","i18n!core/nls/ui-strings","core/utils/util","core/utils/date-util","core/utils/view-util","core/utils/truncate","core/utils/sc-analytics","core/views/rhp-preview-hud-view","core/views/view"],function(e,t,n,r,i,s){return e.RhpPropertiesView=e.View.extend({events:{"click .rhp-properties-menu-btn":"_onPropertiesClick","click .rhp-properties-location":"_onFileLocationClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var r=this.$el;return e.View.prototype.render.call(this),r.children().length===0&&(r.html(_.template(t)({properties:n.PROPERTIES_UC,fileName:n.FILE_NAME,location:n.LOCATION,created:n.CREATED_DATE,modified:n.MODIFIED_DATE,viewed:n.VIEWED_DATE,folderName:n.FOLDER_NAME,totalFiles:n.TOTAL_FILES})),this._initWrappers()),this._updateFields(),this},_initWrappers:function(){this.$menuBtn=this.$(".rhp-properties-menu-btn"),this.$menu=this.$(".rhp-properties-menu"),this.$fileMenu=this.$(".rhp-properties-file-menu"),this.$fileName=this.$(".rhp-properties-file-name-value"),this.$fileLocIcon=this.$(".rhp-properties-loc-icon"),this.$fileLocConnector=this.$(".rhp-properties-loc-connector"),this.$fileLocPath=this.$(".rhp-properties-loc-path"),this.$fileCreated=this.$(".rhp-properties-created-value"),this.$fileModified=this.$(".rhp-properties-modified-value"),this.$fileViewed=this.$(".rhp-properties-viewed-value"),this.$folderMenu=this.$(".rhp-properties-folder-menu"),this.$folderName=this.$(".rhp-properties-folder-name-value"),this.$totalFiles=this.$(".rhp-properties-total-files-value")},_updateFields:function(){function g(e){return _.template(n.DATE_AND_TIME)({dateStr:i.formatDateOnly(e),timeStr:i.formatTimeOnly(e)})}function y(e){return _.reduce(e,function(e,t,r){return r===0?"/"+n.HOME:e+"/"+t.name},"")}var e=this.options,t=e.selectionUiModel,o=e.searchUiModel,u=e.rhpPreviewUiModel,a=t.getSingleSelectedItemModel(),f,l,c,h,p=this.$menuBtn,d=this.$fileLocPath,v=this.$fileMenu,m=this.$folderMenu;this._expandMenu(u.get("properties_expanded")),a?(f=a.get("name"),a.isFile()?(m.hide(),v.show(),this.$fileName.text(f),l=u.get("connector_info"),l&&(this.$fileLocConnector.text(l.label),this.$fileLocIcon.attr("src",r.isRetina()?l.icon_sm_retina:l.icon_sm)),c=u.get("file_path"),c&&d.text(y(c)),o.isSearching()?d.removeClass("inactive"):d.addClass("inactive"),this.$fileCreated.text(g(a.get("created"))),this.$fileModified.text(g(a.get("modified"))),this.$fileViewed.text(g(a.get("viewed")))):(v.hide(),m.show(),this.$folderName.text(f),h=u.get("total_files"),_.isNumber(h)&&this.$totalFiles.text(h)),s.enableInput(p,!0)):(u.expandActions(),s.enableInput(p,!1))},_expandMenu:function(e){var t=this.$menuBtn,n=this.$menu;this.options.rhpPreviewUiModel.set("properties_expanded",e),e?(t.addClass("expanded"),n.addClass("expanded")):(t.removeClass("expanded"),n.removeClass("expanded"))},_onPropertiesClick:function(){var e=this.options.rhpPreviewUiModel;e.get("properties_expanded")||e.expandProperties()},_onFileLocationClick:function(){var e=this.options,t;if(!e.searchUiModel.isSearching())return;t=e.rhpPreviewUiModel.get("item_model"),t&&e.appApi.routerApi.navigate("folder/"+encodeURIComponent(t.get("parent_id")),{trigger:!0})},_addUiModelEventListeners:function(){var e=this.options,t=e.rhpPreviewUiModel;this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange).listenTo(e.searchUiModel,"change:status",this._onSearchStatusChange).listenTo(t,"change:properties_expanded",this._onPropertiesExpandedChange).listenTo(t,"change:connector_helper",this._onConnectorHelperChange)},_onSelectedItemModelsChange:function(t){var n,r;if(t.isSelectionMasked())return;n=t.getSingleSelectedItemModel(),r=t.getNumSelectedItems(),n&&n.isFolder()&&this._triggerViewEvent(e.ViewEvents.GET_RHP_FOLDER_CHILD_COUNTS,{id:n.id,modal:!1}),r===0?this.options.rhpPreviewUiModel.expandActions(!0):r>0&&this.render()},_onSearchStatusChange:function(){this.render()},_onPropertiesExpandedChange:function(){this.render()},_onConnectorHelperChange:function(){this.render()}}),e.RhpPropertiesView}),define("core/dev/views/full-preview-plugin-view",["core/ac-core","core/views/plugin-content-view"],function(e){return e.FullPreviewPluginView=e.PluginContentView.extend({initialize:function(t){_.extend(this.options,t),e.PluginContentView.prototype.initialize.call(this)}}),e.FullPreviewPluginView}),define("core/dev/templates/collection-item-template",[],function(){return'<div role="gridcell"     class="collection-item-cell collection-item-checkbox-cell">    <input type="checkbox" class="collection-item-checkbox"           tabindex="-1" />    <span class="collection-item-checkbox-checkmark"          aria-hidden="true"></span></div><div role="presentation" class="collection-item-info-container">    <div role="rowheader"         class="collection-item-cell collection-item-info-cell">        <div role="img" class="collection-item-thumb"></div>        <img class="collection-item-thumb hidden" aria-hidden="true" />        <div class="collection-item-name theme-list-item-text" tabindex="-1">        <a class="collection-item-name-text theme-list-item-text"></a>        <img class="collection-item-name-icon" alt="" tabindex="-1"/>        </div>        <div class="collection-item-public">            <div class="collection-item-public-icon" tabindex="-1"                 title="<%= publicIconTitle %>">                <span class="collection-item-public-shared                             hidden-accessible"></span>            </div>        </div>    </div>    <div role="gridcell"         class="collection-item-cell collection-item-size-cell">        <div class="collection-item-size theme-list-item-text"></div>    </div>    <div role="gridcell"         class="collection-item-cell collection-item-date-cell">        <div class="collection-item-date theme-list-item-text"></div>    </div></div><div role="presentation" class="collection-item-mask"></div>'}),define("core/dev/views/collection-item-view",["core/ac-core","core/templates/collection-item-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/util","core/utils/css-util","core/utils/truncate","core/utils/file-types","core/utils/num-util","core/utils/date-util","core/utils/view-util","core/utils/image-loader","core/views/view"],function(e,t,n,r,i,s,o,u,a,f,l,c){e.CollectionItemView=e.View.extend({events:{"mouseenter .collection-item-name-icon":"_onIconHover"},initialize:function(){e.View.prototype.initialize.call(this),this._addModelEventListeners(),this._addUiModelEventListeners()},template:function(){return _.template(t)},render:function(){var t=this.$el;return t.children().length===0&&t.html(this.template()({publicIconTitle:this._getPublicIconTooltip()})),this._initWrappers(),this._updateIds(),this._updateFields(),this.options.noShareButton||!e.Features.isFeatureEnabled("share_ui")&&!e.Features.isFeatureEnabled("share_ui_2")?this.$publicWidget.hide():this._updatePublicStatus(),this._setCheckboxVisibility(),this._customizeByOptions(),this._updateSelectionStatus(),this._updateMask(),this.options.isInDom&&this._truncateName(),this._updateAriaAttributes(),this._adjustIE8Layout(),this},deactivate:function(){var e=this.$rendition;return e&&(e.off(),this.$mask.off()),this.stopListening(),this._clearWrappers(),this},isActive:function(){return!_.isUndefined(this.$rendition)},replaceModel:function(e){var t=this.model,n;!t||t.cid!==e.cid?(this._removeModelEventListeners(),this._configure(_.extend({},this.options,{model:e})),this._addModelEventListeners(),this.invalidate()):(n=t.changed,n.name&&this._invalidateName(),(n.created||n.modified||n.last_access)&&this._invalidateDate(),n.size&&this._invalidateSize())},invalidate:function(){this._invalidateName(),this._invalidateDate(),this._invalidateSize()},replaceUiModel:function(e){var t=this.options,n=t.itemUiModel;if(n&&n.cid===e.cid)return;this._removeUiModelEventListeners(),this._configure(_.extend({},t,{itemUiModel:e})),this._addUiModelEventListeners()},updateTruncation:function(){var e=this.$nameIcon;this._truncateName(),i.isCEF()&&this.options.rnaRecentFilesSelect&&e&&e.attr("src")===undefined&&this._getSourceIcon()},updateRendition:function(){var e=this.options,t=this.model,n,r=this.$rendition,i,s;if(!this.isActive())return;if(!e.appApi.sessionApi.isSignedIn()||!e.collectionUiModel.get("is_active"))return;if(t.isFolder()||e.itemUiModel.get("masked"))return;if(this._triedLoadingRendition()){this._updateRenditionVisibiity();return}r.hasClass("hidden")||this._updateRenditionVisibiity();if(this._isListView())return;n=t.getRenditionUrl("thumbnail",0);if(r.attr("src")===n)return;c.loadImage(r,n,undefined,!0).then(_.bind(function(){if(!l.isElementInDom(r))return;s=r.closest(".collection-item"),s.data("isRenditionLoaded",!0),r.removeClass("hidden"),i=r.parent().find("div.collection-item-thumb"),i.addClass("hidden"),this._setRenditionPosition(r),r.off("dragstart").on("dragstart",function(e){e.preventDefault()}),r.attr("src")&&t.set({imgBlob:r.attr("src")},{silent:!0})},this),function(){return})},getViewElement:function(){return this.$el},getAvailableNameWidth:function(){var e,t,n,r,i,o;if(!this._availableNameWidth){e=this.$name,t=s.getCssNum(e,"margin-right");if(this._isListView()){n=e.position().left,r=l.getNextDisplayedSibling(e);if(!r||r.length===0)r=l.getNextDisplayedSibling(e.parent());i=r&&r.length>0?r.position().left:this.$infoContainer.width(),o=i-n-t}else o=this.$infoContainer.width()-t;this._availableNameWidth=o}else o=this._availableNameWidth;return o},setAvailableNameWidth:function(e){this._availableNameWidth=e},_initWrappers:function(){var e=this.$checkbox,t=this.$(".collection-item-checkbox");if(e&&e.get(0)===t.get(0))return;this.$checkbox=t,this.$checkboxCell=this.$(".collection-item-checkbox-cell"),this.$infoContainer=this.$(".collection-item-info-container"),this.$icon=this.$("div.collection-item-thumb"),this.$rendition=this.$("img.collection-item-thumb"),this.$name=this.$(".collection-item-name"),this.$nameText=this.$(".collection-item-name-text"),this.$nameIcon=this.$(".collection-item-name-icon"),this.$size=this.$(".collection-item-size"),this.$sizeCell=this.$(".collection-item-size-cell"),this.$date=this.$(".collection-item-date"),this.$dateCell=this.$(".collection-item-date-cell"),this.$publicWidget=this.$(".collection-item-public"),this.$publicIcon=this.$(".collection-item-public-icon"),this.$publicShared=this.$(".collection-item-public-shared"),this.$mask=this.$(".collection-item-mask")},_clearWrappers:function(){delete this.$checkbox,delete this.$checkboxCell,delete this.$infoContainer,delete this.$icon,delete this.$rendition,delete this.$name,delete this.$nameText,delete this.$nameIcon,delete this.$size,delete this.$sizeCell,delete this.$date,delete this.$dateCell,delete this.$publicWidget,delete this.$publicIcon,delete this.$publicShared,delete this.$mask},_getIconClass:function(){var e=this.model,t,n;return e.isFolder()?t="folder-item":(n=u.getFileInfo(e.get("content_type"),e.get("name")),t=n.iconCls||""),t},_getIconDesc:function(){var e=this.model,t,r;return e.isFolder()?t=n.FOLDER_INITIAL_CAP:(r=u.getFileInfo(e.get("content_type"),e.get("name")),t=r.desc||""),t},_getImageSrc:function(){var e=this.model,t;return e.isFolder()?t=e.get("src"):t=e.get("imgBlob"),t},_getPublicFlag:function(){return this.model.isPublic()?n.SHARED:""},_getPublicClass:function(){return this.model.isPublic()?"":"hidden"},_getPublicIconTooltip:function(){return i.isCEF()?n.PUBLIC_ICON_TOOLTIP:""},_invalidateName:function(){this._isNameInvalid=!0,this._setPrevUntruncatedName()},_getName:function(){var e;return this._isNameInvalid?(e=i.replaceSpaceWithNbsp(this.model.get("name")),this._name=e,this._isNameInvalid=!1):e=this._name,e},_invalidateSize:function(){this._isSizeInvalid=!0},_getSize:function(){var e;return this._isSizeInvalid?(e=this.model.isFolder()?this._getFolderSummary():a.formatSize(this.model.get("size")),this._size=e,this._isSizeInvalid=!1):e=this._size,e},_getFolderSummary:function(){return"-"},_invalidateDate:function(){this._isDateInvalid=!0},_getDate:function(){var e=this.model,t,n,r;return e.isFolder()?t="-":this._isDateInvalid?(n=this.options.sortUiModel.get("mru_date_order"),r=e.get(n),r?t=f.formatDate(r):t="-",this._date=t,this._isDateInvalid=!1):t=this._date,t},_getSourceIcon:function(){var e=this.options,t=this.model,r,i,s;if(!e.rnaRecentFilesSelect)return;i=this.$nameIcon,s=this.$nameText,e.appApi.rnaApi.done(_.bind(function(s){s.determineSourceOfRecentFile(t.get("index")+1,!0).then(_.bind(function(t){t!=="unsupported"&&t!=="local"&&(r=e.connectorsCollection[t],_.isUndefined(r)||(i.attr("src",r.icon_rfl),i.css("display","inline"),i.attr("data-source",t),t==="root"?i.attr("title",""):i.attr("title",n.LOCATION+": "+r.label)))},this))},this))},_isListView:function(){return this.options.collectionsUiModel.isListView()},_setCheckboxVisibility:function(){var e=this.$checkbox,t=this.$checkboxCell,n=this.$infoContainer;this.options.checkbox?(this.model.isRoot()&&(s.addClass(e,"inactive"),s.removeClass(e,"hidden"),s.removeClass(n,"no-checkbox")),s.removeClass(e,"hidden"),s.removeClass(t,"hidden"),t.removeAttr("aria-hidden")):(s.addClass(e,"hidden"),s.addClass(this.$infoContainer,"no-checkbox"),s.addClass(t,"hidden"),t.attr("aria-hidden",!0))},_updateIds:function(){var e=this.options.viewId,t=this.$checkbox,n="collection-item-checkbox-"+e;if(t.attr("id")===n)return;this.$el.attr({id:"collection-item-"+e}),t.attr({id:n,name:n}),this.$icon.attr({id:"collection-item-icon-"+e}),this.$rendition.attr({id:"collection-item-rendition-"+e}),this.$name.attr({id:"collection-item-name-"+e}),this.$nameText.attr({id:"collection-item-name-text-"+e}),this.$nameIcon.attr({id:"collection-item-name-icon-"+e}),this.$publicShared.attr({id:"collection-item-public-shared-"+e}),this.$sizeCell.attr({id:"collection-item-size-"+e}),this.$dateCell.attr({id:"collection-item-date-"+e})},_updateAriaAttributes:function(){var e=this.$el,t=this.$checkbox,n=this.$icon,r=this.$rendition,i=this.$publicIcon,s=[],o=[],u=this._getPrevUntruncatedName()||this._getName(),a=this._getIconDesc();s.push(n.attr("id")),s.push(this.$publicShared.attr("id")),s.push(this.$sizeCell.attr("id")),s.push(this.$dateCell.attr("id")),o.push(u),o.concat(s),o=o.join(" "),s=s.join(" "),e.attr("aria-label")!==o&&e.attr("aria-label",o),e.attr("aria-describedby")!==s&&e.attr("aria-describedby",s),t.attr("title")!==u&&t.attr("title",u),n.attr("aria-label")!==a&&n.attr("aria-label",a).attr("alt",a),r.attr("alt")!==a&&r.attr("alt",a);var f=this.model.isFolder();f||this._getImageSrc()&&r.attr("src")!==this._getImageSrc()&&r.attr("src",""),i.attr("role")!=="link"&&i.attr("role","link")},_updateFields:function(){var e=this.$icon,t=this.$nameText,n=this.$publicIcon,r=this.$publicShared,i=this.$size,o=this.$date,u=this._getIconClass(),a=this._getName(),f=this._getPublicClass(),l=this._getPublicFlag(),c=this._getSize(),h=this._getDate(),p=this.model,d=p.get("id");this._isRenditionLoaded()||(e.removeClass(),e.addClass("collection-item-thumb"),s.addClass(e,u)),s.addClass(n,f),a!==this._getPrevUntruncatedName()&&t.text()!==a&&(t.text(a),this._setPrevUntruncatedName()),!this.options.noFullPreview&&(!t.attr("href")||t.attr("href").indexOf(d)===-1)&&t.attr("href","/file/"+d),r.text()!==l&&r.text(l),i.text()!==c&&i.text(c),o.text()!==h&&o.text(h)},_updatePublicStatus:function(){var e,t;e=this._getPublicFlag(),e!==this._prevPublicFlag&&(t=this.$publicIcon,this.model.isPublic()?s.removeClass(t,"hidden"):s.addClass(t,"hidden"),this.$publicShared.text(e),this._prevPublicFlag=e)},_customizeByOptions:function(){var e=this.options,t=this.model.isFolder();t?(e.noFolderSelection&&s.addClass(this.$checkbox,"hidden"),s.addClass(this.$el,"folder-item")):e.noFullPreview&&this.$name.addClass("no-full-preview").removeAttr("href").removeAttr("tabindex")},_updateSelectionStatus:function(){var e=this.$el,t=this.$checkbox;this.options.selectionUiModel.isItemSelected(this.model.id)?(s.addClass(e,"selected"),s.addClass(t,"selected"),t.prop("checked",!0),e.attr("aria-selected",!0)):(s.removeClass(e,"selected"),s.removeClass(t,"selected"),t.prop("checked",!1),e.removeAttr("aria-selected")),i.isIE8()&&l.detachAndReattachElement(t.next())},_updateMask:function(){var e=this.$mask;this.options.itemUiModel.get("masked")?(s.addClass(e,"shown"),e.off("click").on("click",function(e){e.stopPropagation()})):(s.removeClass(e,"shown"),e.off("click"))},_truncateName:function(){var e=this.$nameText,t,n,r,i=_.bind(o.getTextSize,o);if(!e)return;n=this.getAvailableNameWidth();if(isNaN(n)||n<=0)return;t=this._getName();if(n===this._prevAvailableNameWidth&&t===this._getPrevUntruncatedName())return;t!==e.text()&&e.text(t),r=o.truncateToFit(e,function(){return i(e).width-n}),r.width>0&&(this._prevAvailableNameWidth=n,this._setPrevUntruncatedName(t))},_setPrevUntruncatedName:function(e){var t=this.$el;e?t.data("prevUntruncatedName",e):t.removeData("prevUntruncatedName")},_getPrevUntruncatedName:function(){return this.$el.data("prevUntruncatedName")},_triedLoadingRendition:function(){var e=this.$rendition;return e&&e.attr("src")},_isRenditionLoaded:function(){return this.$el.data("isRenditionLoaded")},_updateRenditionVisibiity:function(){this._setRenditionVisibility(),this._setRenditionPosition()},_setRenditionVisibility:function(){this._isListView()?this._showRendition(!1):this._triedLoadingRendition()&&!this._isRenditionLoaded()?this._showRendition(!1):this._showRendition(!0)},_showRendition:function(e){var t=this.$rendition,n=this.$icon;e?(s.removeClass(t,"hidden"),s.addClass(n,"hidden")):(s.removeClass(n,"hidden"),s.addClass(t,"hidden"))},_setRenditionPosition:function(e){var t,n,r;e=e||this.$rendition,r=e.width(),t=e.parent(),n=t.width(),e.css("left",(n-r)/2-16)},_adjustIE8Layout:function(){if(i.isIE8()){var e=$(window).width();this.$size.add(this.$sizeCell).css("display",e>1020?"block":"none"),this.$date.add(this.$dateCell).css("display",e>870?"block":"none")}},_addModelEventListeners:function(){var e=this.model;if(!e)return;this.listenTo(e,"change:name",this._onNameChange).listenTo(e,"change:created",this._onDateChange).listenTo(e,"change:modified",this._onDateChange).listenTo(e,"change:last_access",this._onDateChange)},_removeModelEventListeners:function(){var e=this.model;this.stopListening(e,"change:name",this._onNameChange).stopListening(e,"change:created",this._onDateChange).stopListening(e,"change:modified",this._onDateChange).stopListening(e,"change:last_access",this._onDateChange)},_onNameChange:function(){this._invalidateName()},_onDateChange:function(){this._invalidateDate()},_addUiModelEventListeners:function(){var e=this.options.itemUiModel;this.listenTo(e,"change:selected",this._onUiModelSelectedChange).listenTo(e,"change:masked",this._onUiModelMaskedChange)},_removeUiModelEventListeners:function(){var e=this.options.itemUiModel;this.stopListening(e,"change:selected",this._onUiModelSelectedChange).stopListening(e,"change:masked",this._onUiModelMaskedChange)},_onUiModelSelectedChange:function(){this._updateSelectionStatus()},_onUiModelMaskedChange:function(){this._updateMask()},_onIconHover:function(e){var t=this.options,i;e.target.title===""&&e.target.hasAttribute("data-source")&&e.target.getAttribute("data-source")==="root"&&t.appApi.rnaApi.done(_.bind(function(s){s.determineSourceOfRecentFile(this.model.get("index")+1,!1).then(_.bind(function(s){i=t.connectorsCollection[s],e.target.title=n.LOCATION+": "+r.FILES_SIGN_OUT_TITLE,s!=="root"&&!_.isUndefined(i)&&(e.target.title=n.LOCATION+": "+i.label)},this))},this))}})}),define("core/dev/views/collection-items-view",["core/ac-core","core/utils/util","core/utils/view-util","core/utils/css-util","core/utils/date-util","core/utils/image-loader","core/utils/sc-analytics","core/views/view","core/views/collection-item-view","core/views/view-events"],function(e,t,n,r,i,s,o){var u=_.template('<div class="collection-item unselectable theme-border theme-list-item "     role="row" tabindex="-1"></div>'),a=_.has(document.createElement("div"),"onwheel")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";e.CollectionItemsView=e.View.extend({events:{click:"_onClick","click    .collection-item-public":"_onShareClick","click    .collection-item":"_onItemClick","click    .collection-item-checkbox":"_onItemCheckboxClick","click    .collection-item-mask":"_onItemMaskClick","dblclick .collection-item":"_onItemDblClick","dblclick .collection-item-checkbox":"_onItemCheckboxDblClick",mousedown:"_onMouseDown",mouseup:"_onMouseUp"},hoverPreviewEvents:{mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave",mousemove:"_onMouseMove","mouseleave .collection-item":"_onItemMouseLeave"},initialize:function(){var n,r,i=t.isCEF(),s;e.View.prototype.initialize.call(this),n=this.options,r=n.appApi,this._itemElementById={},this._itemViewById={};if(i){var o=r.connectorsApi.getConnectorsUiHelpers().connectors;_.extend(this.options,{connectorsCollection:o}),r.rnaApi.done(_.bind(function(e){var t=e.getBlacklistedExtensions();_.extend(n,{blacklistExtensions:t})},this))}n.hoverPreviewView&&!r.usersMeApi.isUserInCohort("bh-home20","enabled")&&_.extend(this.events,this.hoverPreviewEvents),s={},s[a]="_onMouseWheel",_.extend(this.events,s),n.selectionUiModel.get("multiple_selection")||n.collectionsUiModel.set("checkbox",!1),i&&n.collectionUiModel.set({is_item_excluded:function(e){return e.isForm()||e.isBlacklisted&&e.isBlacklisted(n.blacklistExtensions)}}),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners(),this._addScrollEventListeners(),e.Features.isFeatureEnabled("no_collection_item_checkbox")&&n.appApi.routerApi.hasQueryParam("no_collection_item_checkbox","1")&&n.collectionsUiModel.set("checkbox",!1)},render:function(t){var r=this.options,o=this.collection.length,u=e.ViewEvents,a=r.collectionsUiModel,f=!0;if(r.pluginId==="scan_files"){var l=r.folderModel.get("members");if(l){var c=l[0];c&&c.parent_id===r.appApi.folderApi.getRootFolderId()&&(f=!1)}}if(r.pluginId!=="scan_files"||r.pluginId==="scan_files"&&(r.folderModel.scanInstalled===!0&&r.folderModel.scanFound===!0||r.folderModel.scanFound===!0)&&f===!0){if(!this._isInDom()||this._isHidden()){this.invalidateViewsRecursively();return}e.View.prototype.render.call(this),this._triggerViewEvent(u.COLLECTION_RENDER_BEGIN,{collectionView:this}),i.logElapsedTime("collection-items-view render begin "+o),delete this._availableNameWidth,s.cancelPendingRequests(),this._renderChildViews(t),_.defer(this._updateChildViewRenditions),r.collectionUiModel.set("has_vertical_scrollbar",n.isVerticalScrollBarPresent(this.$el)),i.logElapsedTime("collection-items-view render end"),this._triggerViewEvent(u.COLLECTION_RENDER_END,{collectionView:this}),clearTimeout(a.get("scroll_listen_timer_id")),this._isMouseWheel||a.set("scroll_listen_timer_id",_.delay(this._maybeScrollIdIntoView,a.get("scroll_listen_delay")))}return this},invalidateSize:function(){delete this._availableNameWidth,delete this._childHeight,delete this._rowLen},getChildViewById:function(e){return this._itemViewById[e]},_getContainingItem:function(e){return e.closest(".collection-item")},_getHoverPreviewEventTargetItem:function(e){var t=$(e.target).closest(".collection-item-thumb, .collection-item-name");return this._getContainingItem(t)},_getEventTargetItem:function(e){return this._getContainingItem($(e.target))},_getEventTargetView:function(e){var t,n=this._getEventTargetItem(e);return n&&(t=this.getChildViewById(n.data("id"))),t},_getViewEventOptions:function(e){return{collectionItemsView:this,itemView:this._getEventTargetView(e)}},_getFocusIndex:function(){var e=-1,t,n,r;return t=document.activeElement,t&&(n=this._getContainingItem($(t)).data("id"),r=this.collection.find(function(e,t){return e.id===n}),r&&(e=this.collection.indexOf(r))),e},_restoreFocus:function(e,t){var n=this.$el,r,i=$(t),s;if(e>=0){s=n.children(),r=s.eq(e),r.length===0&&(r=s.last());if(r.length!==0){i.closest(r).length!==0?i.focus():r.focus();return}}i.focus()},_setScrollTop:function(e,t){var n=this.options.collectionsUiModel;t&&this._removeScrollEventListeners(),this.$el.scrollTop(e),t&&_.delay(this._addScrollEventListeners,n.get("scroll_listen_delay"))},_renderChildViews:function(e){var t=this.$el,n=t.parent(),r=document.activeElement,i=this._getFocusIndex(),s=t.height(),o=t.get(0).scrollHeight,u={},a=!this._isDragging,f=!this._isMouseWheel;_.isNumber(e)||(e=t.scrollTop()),this._pruneCollection(),this._genChildHeight(),a&&f&&(t=t.detach()),this._createMatchingElements(t),u=this._getDisplayRange(e,o,s),this._renderItemViewRange(t,u),a&&f&&n.append(t),this._setTabbableItem(),u.end-u.begin>0&&this._truncateItemNames(),this._restoreFocus(i,r),a&&f&&e>0&&this._setScrollTop(e,!0),this._renderScrollTop=e},_pruneCollection:function(){function o(e){var i,s,o;if(e.isFile()){if(r.get("folders_only"))return!0;i=r.get("filter_by_extension");if(i.length>0){s=t.getExtension(e.get("name"));if($.inArray(s,i)<0)return!0}}return o=n.get("is_item_excluded"),o&&o(e)?!0:!1}var e=this.options,n=e.collectionUiModel,r=e.collectionsUiModel,i=this.collection,s=[];i.each(function(e){o(e)&&s.push(e)}),i.remove(s,{silent:!0})},_isListView:function(){return this.options.collectionsUiModel.isListView()},_isThumbnailView:function(){return this.options.collectionsUiModel.isThumbnailView()},_genChildHeight:function(){var e=this.$el,t,n=1,i,s,o,a=this.collection.length;if(!this._childHeight&&a>0){e.children().length===0&&e.append(u());if(this._isThumbnailView())for(t=0,s=!1;t<a&&!s;t+=1)t>=e.children().length&&e.append(u()),o=e.children().eq(t),t===0?i=o.position().top:o.position().top===i?n+=1:s=!0;this._childHeight=r.getFullHeight(e.children().first()),this._rowLen=n,this._childHeight=r.getFullHeight(e.children().first())}_.isUndefined(this._rowLen)&&(this._rowLen=n)},_createMatchingElements:function(e){var t=this.collection,n,r=t.length,i,s=e.children(),o=0,a;n=this._itemElementById={},t.each(_.bind(function(t){a=s.eq(o),a.length===0&&(e.append(u()),a=e.children().last()),i=t.id,i!==a.data("id")&&(a.data("id",i),a.data("model",t),a.removeData("isRenditionLoaded"),a.find("img.collection-item-thumb").addClass("hidden")),n[i]=a,o+=1},this)),r<e.children().length&&e.children().slice(r).remove()},_getDisplayRange:function(e,t,n){var r=this.collection.length,i,s,o=this._rowLen;return i=Math.max(Math.floor(r*e/t)-o,0),o&&this._childHeight?s=Math.min(r,i+o*(Math.ceil(n/this._childHeight)+2)):s=i,{begin:i,end:s}},_renderItemViewRange:function(e,t){var n=e.children(),r=t.begin,i=t.end,s=i-r,o=this.getChildViews(),u=o.length,a,f=Math.max(0,s-u),l,c,h,p,d=this.collection,v,m=this.options.collectionUiModel;if(s===0)return;f>0&&(this._addItemViewCount(f),u=o.length),o=this.getChildViews(),a=this._itemViewById={};for(h=r,p=0;h<i;h+=1,p+=1)l=n.eq(h),c=o[p],v=d.at(h),a[v.id]=c,c.options.isInDom=!1,c.setElement(l),c.replaceModel(v),c.replaceUiModel(m.getItemUiModel(l)),c.render();while(p<u)o[p].deactivate(),p+=1},_addItemViewCount:function(e){while(e>0)this._addItemView(),e-=1},_useCheckbox:function(){return this.options.collectionsUiModel.get("checkbox")},_addItemView:function(){var t=this.options,n,r,i;r=this._tempItemModel,r||(r=this._tempItemModel=e.modelFactory.create("CollectionItemModel")),i=this._tempItemUiModel,i||(i=this._tempItemUiModel=e.uiModelFactory.create("CollectionItemUiModel")),n=new e.CollectionItemView(_.extend({},t,{checkbox:this._useCheckbox(),model:r,itemUiModel:i})),this.addChildView(n)},_truncateItemNames:function(){var e=this.getChildViews(),t=e.length,n,r;for(r=0;r<t;r+=1)n=e[r],n.options.isInDom=!0,n.setAvailableNameWidth(this._availableNameWidth),n.updateTruncation(),_.isUndefined(this._availableNameWidth)&&(this._availableNameWidth=n.getAvailableNameWidth())},_updateChildViewRenditions:function(){var e=this.getChildViews(),t=e.length,n;for(n=0;n<t;n+=1)e[n].updateRendition()},_maybeScrollIdIntoView:function(){var e=this.options,t=e.collectionsUiModel,n,r;n=t.get("scroll_id_into_view");if(!n)return;r=this._itemElementById[n];if(!r||e.collectionUiModel.getItemUiModel(r).get("masked"))return;this._scrollItemIntoView($(r)),t.unset("scroll_id_into_view")},_scrollItemIntoView:function(e){var t,n,r,i,s,o;if(!e.length)return;t=this.$el,n=e.position().top,r=e.height(),i=t.height();if(this._isMouseWheel)return;if(n<0||n+r>i)s=t.scrollTop(),o=n-(i-r)/2,this._setScrollTop(Math.max(s+o,0))},_getChildViewHeight:function(){var e=this.$el.children();return e.length>0?r.getFullHeight(e.eq(0)):undefined},_getChildViewWidth:function(){var e=this.$el.children();return e.length>0?r.getFullWidth(e.eq(0)):undefined},_isItemSelected:function(e){return this._getContainingItem(e).hasClass("selected")},_logScSelectionEvent:function(e,t){var n,r,i,s;if(this.options.noScAnalytics)return;n=this._isItemSelected(e);if(n!==t){r=this._getContainingItem(e).data("id"),i=this.getChildViewById(r);if(!i)return;s=i.model.isFile(),this._logSiteCatalystEvent([s?o.FILE_NAME:o.FOLDER_NAME,n?o.CHECKED:o.UNCHECKED])}},_onClick:function(e){e.target===this.$el.get(0)&&!this._useCheckbox()&&this.options.appApi.selectionApi.clearSelection()},_onShareClick:function(t){var n=this._getViewEventOptions(t),r=n.itemView.model;if(e.Features.isFeatureEnabled("share_ui_2")){this._onItemClick(t);return}return t.stopPropagation(),n.models=[r],n.parentView=n.itemView,this._logSiteCatalystEvent([o.SHARED,o.CLICKED]),this._triggerViewEvent(e.ViewEvents.SHOW_PUBLIC_SHARE_DLG,n),!1},_onItemClick:function(t){var n=this.options,r=$(t.target),i=this._isItemSelected(r),s=this._getViewEventOptions(t),o=this._useCheckbox(),u=e.ViewEvents.SELECT_ITEM,a,f,l,c=e.SelectionUiModel,h=e.ViewEvents;f=s.itemView;if(!f)return;l=f.model.isFolder(),(n.noUrlUpdate||o)&&(l||!n.noFullPreview)?t.shiftKey?a=c.SELECT_EXTEND:o?n.searchUiModel.showFolders()&&l?(n.selectionUiModel.clearSelection(),u=h.SEARCH_IN_FOLDER,_.extend(s,{search_folder_id:f.model.id})):u=h.OPEN_COLLECTION_ITEM:a=c.SELECT_SELECT:t.shiftKey?a=c.SELECT_EXTEND:t.ctrlKey||t.metaKey?a=c.SELECT_TOGGLE:a=c.SELECT_SELECT,a&&_.extend(s,{selectType:a}),this._triggerViewEvent(u,s),this._consumeEvent(t),a&&this._logScSelectionEvent(r,i)},_onItemCheckboxClick:function(t){var n=this._getViewEventOptions(t),r,i=$(t.target),s;t.stopPropagation(),t.shiftKey?r=e.SelectionUiModel.SELECT_EXTEND:r=e.SelectionUiModel.SELECT_TOGGLE,_.extend(n,{selectType:r}),s=i.hasClass("selected"),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n),this._logScSelectionEvent(i,s)},_onItemMaskClick:function(e){e.stopPropagation()},_onItemDblClick:function(n){var r=this.options,i=r.selectionUiModel.getSingleSelectedItemModel(),s=this._getViewEventOptions(n),o=this._useCheckbox(),u=e.ViewEvents;!o&&i&&i.isFolder()?r.noUrlUpdate&&r.searchUiModel.showFolders()?(r.selectionUiModel.clearSelection(),this._triggerViewEvent(u.SEARCH_IN_FOLDER,_.extend(s,{search_folder_id:i.id}))):this._triggerViewEvent(u.OPEN_COLLECTION_ITEM,s):r.noFullPreview?this._triggerViewEvent(u.SELECTION_COMMIT,s):o||(!t.isCEF()||i&&i.isPDF()?this._triggerViewEvent(u.OPEN_COLLECTION_ITEM,s):this._triggerViewEvent(u.SAVEAS_SELECTED_COLLECTION_ITEMS))},_onItemCheckboxDblClick:function(e){this._consumeEvent(e)},_onFocusIn:function(e){var t=$(e.target),n,r,i,s=this.options.collectionsUiModel,o=this.options.selectionUiModel,u=o.isSingleSelectionMode(),a=s.get("last_active_row_index");return n=this.$(".collection-item"),r=this._getContainingItem(t),i=n.index(r),a===i&&this._consumeEvent(e),r.length===0?!0:(u&&this.options.selectionUiModel.getNumSelectedItems()===0&&a===-1&&_.defer(_.bind(function(){this._selectItem(r,!0)},this)),n.attr("tabindex",-1),r.attr("tabindex",0).find("input:focusable, a[href]:focusable, [role=link]:focusable").attr("tabindex",0),s.set("last_active_row_index",n.index(r)),this._scrollItemIntoView(r),!0)},_onFocusOut:function(e){var t=$(e.target),n;return n=this._getContainingItem(t),n.length===0?!0:(n.find("input:tabbable, a[href]:tabbable, [role=link]:tabbable").attr("tabindex",-1),!0)},_setTabbableItem:function(){this.$("[tabindex=0]").length===0&&this.$(".collection-item").filter(":first, :last").attr("tabindex",0)},_onMouseDown:function(){this._isMouseDown=!0,this._isDragging=!1,this._isMouseWheel=!1},_onMouseUp:function(){this._isMouseDown=!1,this._isDragging=!1,this._isMouseWheel=!1},_onMouseEnter:function(){this.options.collectionUiModel.set("is_mouse_over",!0)},_onMouseLeave:function(e){var t=this.options,n=t.hoverPreviewView;t.collectionUiModel.set("is_mouse_over",!1),(!e.relatedTarget||!n||$(e.relatedTarget).closest(n.$el).length===0)&&t.hoverPreviewUiModel.close()},_onMouseMove:function(e){this._debouncedOnMouseMove||(this._debouncedOnMouseMove=_.debounce(this._onDebouncedMouseMove,this.options.hoverPreviewUiModel.get("show_delay"))),this._debouncedOnMouseMove(e)},_onDebouncedMouseMove:function(e){var t=this.options,r=t.hoverPreviewView,i=t.hoverPreviewUiModel,s=$(e.target),o,u,a,f,l;if(t.noHoverPreview||!t.appApi.sessionApi.isSignedIn()||!t.collectionUiModel.get("is_mouse_over"))return;if(!n.isElementInDom(s))return;if(r&&s.closest(r.$el).length>0)return;o=this._getHoverPreviewEventTargetItem(e),o&&(u=o.data("id"),a=this.getChildViewById(u));if(u&&i.isSuppressed(u))return;a&&a.model.isFile()&&!a.model.isForm()?(f=i.get("item_view"),l={collection_items_view:this,item_view:a},f?f.model.get("id")!==u&&(i.close(),i.set(l)):i.set(l)):i.close()},_onItemMouseLeave:function(e){var t,n,r,i,s,o,u,a=this.options.hoverPreviewUiModel;s=function(e){o=e.target},a.unsuppress(),t=a.get("item_view");if(!t)return;r=t.model.id,n=this._getEventTargetItem(e),n.data("id")===r&&(i=$("body"),i.off("mousemove",s).on("mousemove",s),this._itemLeaveTimerId&&clearTimeout(this._itemLeaveTimerId),this._itemLeaveTimerId=setTimeout(_.bind(function(){this._itemLeaveTimerId=undefined,i.off("mousemove",s),u=this._getContainingItem($(o)),u.length>0&&u.data("id")!==r&&a.close()},this),a.get("item_leave_delay")))},_onMouseWheel:function(e){var t=this.$el,r=this.options.collectionsUiModel,i=this._debouncedMouseWheelListener,s=e.originalEvent,o=s.wheelDelta||-s.detail;this._isMouseWheel=!0,i||(i=this._debouncedMouseWheelListener=_.debounce(_.bind(function(){this._isMouseWheel=!1},this),r.get("scroll_recheck_delay"))),i(),n.descendantHasFocus(t)&&t.scrollTop()===0&&o>0&&e.preventDefault()},_onKeyDown:function(e){function X(e){w.unset("item_view"),f.stop(!0,!0),f.animate({scrollTop:e},W)}function V(e){return e&&e.is(".folder-item")}var r=this.options,i=r.appApi.selectionApi,s=$(e.target),o=e.which,u=e.ctrlKey||e.metaKey,a=e.shiftKey,f=this.$el,l=f[0],c=f.height(),h=f.width(),p=this._useCheckbox(),d=this._isListView(),v=this._isThumbnailView(),m=l?l.scrollTop:0,g=this._getChildViewHeight(),y=this._getChildViewWidth(),b=r.collectionsUiModel,w=r.hoverPreviewUiModel,E=r.selectionUiModel,S=E.isSingleSelectionMode(),x=!1,T=t.isCEF(),N=this.$(".collection-item"),C=this._getContainingItem(s),k=C.find(".collection-item-checkbox"),L=N.first(),A=N.last(),O=s.is(C),M=C.length>0&&!C.is(s),D=s.is("a[href], [role=link]"),P=N.index(C),H,B=$.Event("click"),j=0,F=g===0?0:Math.floor(c/g),I=y===0?0:Math.floor(h/y),q=n.descendantHasFocus(".collection-list-view")||n.descendantHasFocus(".collection-thumb-view"),R=n.descendantHasFocus(f),U=!R&&q,z=this._isItemSelected(s),W=b.get("scroll_duration");g&&(d?j=F:v&&(j=F*I));if(n.isElementHidden(f))return x;if(s.is(":focusable")&&!q)return x;r=this._getViewEventOptions(e),B.shiftKey=a;switch(o){case 32:R&&(D?(s.trigger(B),x=!0):s.is(k)||((a?C:k).trigger(B),x=!0));break;case 13:R?(s.trigger(B),T&&!i.isRunningInFileSelection()&&!V(C)?x=this._openFilesIfSelected():V(C)?x=this._openItemIfSelected(e):x=!0):T&&!i.isRunningInFileSelection()?x=this._openFilesIfSelected():x=this._openItemIfSelected(e);break;case 27:T&&!i.isRunningInFileSelection()&&(this._deselectAll(r),x=!0);break;case 33:R?H=N.eq(Math.max(0,P-j)):(X(m-c),x=!0);break;case 34:R?H=N.eq(Math.min(N.length-1,P+j)):(X(m+c),x=!0);break;case 35:R&&!C.is(A)&&(H=A),X(l.scrollHeight),x=!0;break;case 36:R&&!C.is(L)&&(H=L),X(0),x=!0;break;case 37:p?R?v?H=C.prev(".collection-item"):H=n.getNextFocusableDescendant(C,!0,!0):g&&!U&&(X(m-g),x=!0):t.isMac()&&u?(R&&I&&(H=N.eq(Math.floor(P/I)*I)),x=!0):(R&&(H=C.prev(".collection-item")),x=!0);break;case 38:p?M?H=C:O?v?H=N.eq(Math.max(0,P-I)):P>0&&(H=C.prev(".collection-item")):g&&!U&&(X(m-g),x=!0):t.isMac()&&u?(R&&(H=L),x=!0):v?(R&&(H=N.eq(Math.max(0,P-I))),x=!0):R&&P>0&&(H=C.prev(".collection-item"));break;case 39:p?R?v?H=C.next(".collection-item"):H=n.getNextFocusableDescendant(C,!1,!0):g&&(X(m+g),x=!0):t.isMac()&&u?(R&&I&&(H=N.eq(Math.floor(P/I)*I+I-1)),x=!0):(R&&(H=C.next(".collection-item")),x=!0);break;case 40:p?R?v?H=N.eq(Math.min(N.length-1,P+I)):H=C.next(".collection-item"):g&&!U&&(X(m+g),x=!0):t.isMac()&&u?(R&&(H=A),x=!0):v?(R&&(H=N.eq(Math.min(N.length-1,P+I))),x=!0):R&&(H=C.next(".collection-item"));break;case 65:u&&(a?(this._deselectAll(r),this._clearSelection(r)):this._selectAll(r),this._consumeEvent(e),x=!0);break;case 68:u&&(x=this._deleteIfSelected());break;case 127:case 46:x=this._deleteIfSelected()}return H&&H.length>0&&(x=!0,H.focus(),z&&e.shiftKey?_.defer(function(){H.trigger(B)}):S&&(this._clearSelection(r),this._selectItem(H,!0))),x&&this._consumeEvent(e),x},_openFilesIfSelected:function(){var t=this.options.selectionUiModel,n=t.getSelectionCountByType(),r,i,s,o;return r=n.numFiles,i=n.numFolders,s=n.numNonPDFs,o=n.numForms,t.getNumSelectedItems()>0?(i===1&&r===0?this._triggerViewEvent(e.ViewEvents.OPEN_SELECTED_COLLECTION_ITEMS):i===0&&r>0&&o===0&&(s===0?this._triggerViewEvent(e.ViewEvents.OPEN_SELECTED_COLLECTION_ITEMS):r===s&&this._triggerViewEvent(e.ViewEvents.SAVEAS_SELECTED_COLLECTION_ITEMS)),!0):!1},_selectAll:function(t){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend(t,{selectType:e.SelectionUiModel.SELECT_ALL}))},_deselectAll:function(t){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend(t,{selectType:e.SelectionUiModel.SELECT_NONE}))},_selectItem:function(e,t){var n=this.options,r=n.collectionUiModel,i=n.selectionUiModel,s=$(e),o=s.data("model"),u=r.getItemUiModel(s);i.selectItem(o,u,t,!0)},_selectPrevious:function(){this._selectType(e.SelectionUiModel.SELECT_PREVIOUS)},_selectNext:function(){this._selectType(e.SelectionUiModel.SELECT_NEXT)},_selectUp:function(){this._selectType(e.SelectionUiModel.SELECT_UP)},_selectDown:function(){this._selectType(e.SelectionUiModel.SELECT_DOWN)},_extendSelectPrevious:function(){this._selectType(e.SelectionUiModel.EXTEND_SELECT_PREVIOUS)},_extendSelectNext:function(){this._selectType(e.SelectionUiModel.EXTEND_SELECT_NEXT)},_extendSelectUp:function(){this._selectType(e.SelectionUiModel.EXTEND_SELECT_UP)},_extendSelectDown:function(){this._selectType(e.SelectionUiModel.EXTEND_SELECT_DOWN)},_selectFirst:function(){this._selectType(e.SelectionUiModel.SELECT_FIRST)},_selectFirstInRow:function(){this._selectType(e.SelectionUiModel.SELECT_FIRST_IN_ROW)},_selectLast:function(){this._selectType(e.SelectionUiModel.SELECT_LAST)},_selectLastInRow:function(){this._selectType(e.SelectionUiModel.SELECT_LAST_IN_ROW)},_selectType:function(t){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,{collectionItemsView:this,selectType:t})},_openItemIfSelected:function(t){var n=this.options,r=n.selectionUiModel,i=r.getSingleSelectedItemModel(),s=e.ViewEvents,o=this._getViewEventOptions(t);if(!i)return!1;if(n.noUrlUpdate){if(i.isFile())return!1;if(n.searchUiModel.showFolders())return n.selectionUiModel.clearSelection(),this._triggerViewEvent(s.SEARCH_IN_FOLDER,_.extend(o,{search_folder_id:i.id})),!0}return this._triggerViewEvent(s.OPEN_COLLECTION_ITEM,{collectionItemsView:this,itemView:this.getChildViewById(i.id)}),!0},_clearSelection:function(t){this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION,t)},_deleteIfSelected:function(){var t=this.options,n;return n=t.selectionUiModel.getNumSelectedItems()>0,n&&!t.noSelectionActions&&!t.noDelete&&this._triggerViewEvent(e.ViewEvents.DELETE,{collectionsUiModel:t.collectionsUiModel,parentView:this}),n},_addUiModelEventListeners:function(){var e=this.options,t=e.collectionsUiModel,n=e.sortUiModel;this.listenTo(t,"change:filter_by_extension",this._onFilterByExtensionChange).listenTo(n,"change:order_by",this._onSortChange).listenTo(n,"change:order_direction",this._onSortChange)},_onFilterByExtensionChange:function(){this.render()},_onSortChange:function(){this._setScrollTop(0)},_addScrollEventListeners:function(){this._removeScrollEventListeners(),this.$el.on("scroll",this._onScroll)},_removeScrollEventListeners:function(){this.$el.off("scroll")},_onScroll:function(){var e=this._debouncedScrollListener,t,n,r,i,s,o=this.options.collectionsUiModel;e||(n=this.$el,i=o.get("scroll_render_delay"),s=o.get("scroll_recheck_delay"),t=_.debounce(_.bind(function(){r=n.scrollTop(),r!==this._renderScrollTop&&this.render(r)},this),s),e=this._debouncedScrollListener=_.debounce(_.bind(function(){this._isDragging=this._isMouseDown,this.render(),t()},this),i)),e()}})}),define("core/dev/views/home-view-selector-view",["core/ac-core","core/views/plugin-selector-view"],function(e){return e.HomeViewSelectorView=e.PluginSelectorView.extend({initialize:function(){e.PluginSelectorView.prototype.initialize.call(this),LOG.warn("'core/views/home-view-selector-view' is deprecated. Use 'core/views/plugin-selector-view' instead.")}}),e.HomeViewSelectorView}),define("core/dev/templates/duplicate-name-dlg-template",[],function(){return'<fieldset class="duplicate-name-dlg-body theme-text">    <legend class="duplicate-name-dlg-prompt"><%= prompt %></legend>    <div class="duplicate-name-dlg-radio-btns">        <div class="duplicate-name-dlg-radio-btn-container">            <input class="duplicate-name-dlg-delete-existing-btn                          duplicate-name-dlg-radio-btn" type="radio"                   name="duplicate-name-dlg-radiogroup"                   value="delete-existing"                   id="duplicate-name-dlg-delete-existing-btn"                   checked="checked"/>            <label class="duplicate-name-dlg-delete-existing-label                          duplicate-name-dlg-radio-btn-label"                   for="duplicate-name-dlg-delete-existing-btn"                   ><%= deleteExisting %></label>        </div>         <div class="duplicate-name-dlg-radio-btn-container">            <input class="duplicate-name-dlg-rename-added-btn                          duplicate-name-dlg-radio-btn" type="radio"                   name="duplicate-name-dlg-radiogroup"                   value="rename-added"                   id="duplicate-name-dlg-rename-added-btn"                   />            <label class="duplicate-name-dlg-rename-added-label                          duplicate-name-dlg-radio-btn-label"                   for="duplicate-name-dlg-rename-added-btn"                   ><%= renameAdded %></label>        </div>    </div></fieldset> <div class="duplicate-name-dlg-control-btns">    <input class="duplicate-name-dlg-cancel-btn                  duplicate-name-dlg-control-btn                  dialog-control-button                  control-button button-grey ui-theme theme-text" type="button"           id="duplicate-name-dlg-cancel-btn"           aria-label="<%= cancel %>"           value="<%= cancel %>"/>    <input class="duplicate-name-dlg-continue-btn                  duplicate-name-dlg-control-btn                  dialog-control-button                  control-button theme-button theme-button-label" type="button"           id="duplicate-name-dlg-continue-btn"           aria-label="<%= continueLabel %>"           value="<%= continueLabel %>"/></div>'}),define("core/dev/views/duplicate-name-dlg-view",["core/ac-core","core/templates/duplicate-name-dlg-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/util","core/utils/view-util","core/utils/sc-analytics","core/views/dialog-view"],function(e,t,n,r,i,s,o){e.DuplicateNameDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .duplicate-name-dlg-delete-existing-btn":"_onRadioButtonClick","click .duplicate-name-dlg-rename-added-btn":"_onRadioButtonClick","click .duplicate-name-dlg-continue-btn":"_onContinueClick","click .duplicate-name-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this)},render:function(){return e.DialogView.prototype.render.call(this),this._appendToDialog(_.template(t)({prompt:this._getPrompt(),deleteExisting:this._getDeleteExistingLabel(),renameAdded:this._getRenameAddedLabel(),continueLabel:n.CONTINUE,cancel:n.CANCEL})),this._setTitle(this._getTitle()),this._initWrappers(),this._updateControls(),this._initTabLimits(),this._center(),i.isWindows()&&s.swapChildElements(this.$dlgControlBtns),this.$continueBtn.focus(),this._truncateText(),this},open:function(){var t=e.DialogView.prototype.open.call(this);return this._logSiteCatalystEvent(o.SHOWN),t},close:function(t,n){var r=this.options,i=r.appApi.manipulationApi,s=this._getErrorData(),o,u;o=_.bind(function(){e.DialogView.prototype.close.call(this,t,n)},this),t||(u=s.moved_from,u?i.moveToFolderAs(r,s.id,s.object_type,u,s.renamed_details.original_name).always(o):i.deleteItem(r,s.id,s.object_type).always(o))},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$radioBtns=this.$(".duplicate-name-dlg-radio-btn"),this.$deleteExistingBtn=this.$(".duplicate-name-dlg-delete-existing-btn"),this.$renameAddedBtn=this.$(".duplicate-name-dlg-rename-added-btn"),this.$deleteExistingLabel=this.$(".duplicate-name-dlg-delete-existing-label"),this.$renameAddedLabel=this.$(".duplicate-name-dlg-rename-added-label"),this.$dlgControlBtns=this.$(".duplicate-name-dlg-control-btns"),this.$continueBtn=this.$(".duplicate-name-dlg-continue-btn"),this.$cancelBtn=this.$(".duplicate-name-dlg-cancel-btn")},_getAddedId:function(){return this.options.duplicate.id},_getAddedType:function(){return this.options.duplicate.object_type},_getAddedName:function(){return this.options.duplicate.renamed_to},_getExistingId:function(){return this.options.duplicate.renamed_details.duplicate_of.id},_getExistingType:function(){return this.options.duplicate.renamed_details.duplicate_of.object_type},_getExistingName:function(){return this.options.duplicate.renamed_details.original_name},_getMovedFrom:function(){return this.options.duplicate.moved_from},_getTitle:function(){return _.template(n.DUPLICATE_NAME_TITLE,{type:this._getExistingType()==="file"?n.FILE_INITIAL_CAP:n.FOLDER_INITIAL_CAP})},_getPrompt:function(){return _.template(n.DUPLICATE_NAME_PROMPT,{type:this._getExistingType()==="file"?n.FILE:n.FOLDER,name:this._getExistingName()})},_getDeleteExistingLabel:function(){return _.template(n.DUPLICATE_NAME_REPLACE_EXISTING,{type:this._getExistingType()==="file"?n.FILE:n.FOLDER})},_getRenameAddedLabel:function(){var t=this.options.duplicate.dupType===e.ErrorUiModel.DUP_TYPE_UPLOAD?n.DUPLICATE_NAME_RENAME_UPLOADED:n.DUPLICATE_NAME_RENAME_MOVED;return _.template(t,{type:this._getAddedType()==="file"?n.FILE:n.FOLDER})},_updateControls:function(){this._getExistingType()==="folder"&&(this.$deleteExistingBtn.prop("checked",!1).attr("tabindex","-1"),this.$deleteExistingBtn.parent().addClass("hidden"),this.$renameAddedBtn.prop("checked",!0).attr("tabindex","0"))},_onRadioButtonClick:function(e){var t=$(e.currentTarget);this.$radioBtns.prop("checked",!1).attr("tabindex","-1"),t.prop("checked",!0).attr("tabindex","0")},_onContinueClick:function(e){var t=$(e.currentTarget);if(!s.isInputEnabled(t))return;this._logSiteCatalystEvent(o.CONTINUE),s.isInputChecked(this.$deleteExistingBtn)?this._deleteExisting():s.isInputChecked(this.$renameAddedBtn)&&this._renameAddedItem()},_onCancelClick:function(){this.close(!1)},_getErrorData:function(){return this.options.errorUiModel.get("error").data},_truncateText:function(){r.truncateElementText(this.$deleteExistingLabel),r.truncateElementText(this.$renameAddedLabel),r.truncateButtonLabel(this.$continueBtn),r.truncateButtonLabel(this.$cancelBtn)},_closeAndTrigger:function(e,t){this.closeWithoutResolving(),this.options.parentView._triggerViewEvent(e,t)},_deleteExisting:function(){var t=this._getFullScContext().concat(o.DELETE_EXISTING);this._logSiteCatalystEvent(o.EXISTING),this._closeAndTrigger(e.ViewEvents.DUP_DLG_DELETE_EXISTING,{parentDeferred:this._deferred,existingId:this._getExistingId(),existingType:this._getExistingType(),existingName:this._getExistingName(),addedId:this._getAddedId(),addedType:this._getAddedType(),scContext:t})},_renameAddedItem:function(){var t=this._getFullScContext();this._logSiteCatalystEvent(o.RENAME),this._closeAndTrigger(e.ViewEvents.DUP_DLG_RENAME_ADDED,{parentView:this.options.parentView,parentDeferred:this._deferred,addedId:this._getAddedId(),addedType:this._getAddedType(),addedName:this._getAddedName(),existingName:this._getExistingName(),movedFrom:this._getMovedFrom(),scContext:t})},_getSiteCatalystContext:function(){return o.DUP_FILE_NAME_DLG}})}),define("core/dev/templates/rhp-action-item-template",[],function(){return'<button class="plugin-selector rhp-menu-item rhp-action">    <div class="plugin-selector-icon rhp-action-icon"></div>    <div class="rhp-action-label"><%= label %></div></button>'}),define("core/dev/views/rhp-actions-plugins-view",["core/ac-core","core/templates/rhp-action-item-template","core/views/plugins-selector-view"],function(e,t){return e.RhpActionsPluginsView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this),this.options=_.extend({},this.options,{pluginsUiModel:this.options.selectionActionsPluginsUiModel})},render:function(){this.options.pluginsUiModel.get("plugins").each(function(e){var t=e.get("selector_elem");e.set("enable_plugin",!t||!t.hasClass("disabled"))}),e.PluginsSelectorView.prototype.render.call(this),this._updateButtons()},_highlightSelection:function(){this.$selectors.filter(":focusable").attr("tabindex","-1")},_getSelectorTemplate:function(){return t},_getSelectorViewEvent:function(){return e.ViewEvents.SELECTION_ACTION_ITEM_CLICK},_onPluginSelectorClick:function(t){var n=this.options,r=n.appApi;r.pluginsApi.callPluginMethodForEachIfEnabled(n.selectionActionsPluginsUiModel.getAllIds(),"deselectPlugin",undefined,undefined,!0),_.delay(_.bind(function(){e.PluginsSelectorView.prototype._onPluginSelectorClick.call(this,t)},this),n.selectionActionsPluginsUiModel.get("deselect_delay"))},_onKeyDown:function(){return!1},_updateButtons:function(){var e=this.options,t=e.appApi;t.pluginsApi.callSelectorMethodForEach(e.selectionActionsPluginsUiModel.getAllIds(),"updateSelector",e,undefined,!0)}}),e.RhpActionsPluginsView}),define("core/dev/templates/rhp-preview-template",[],function(){return'<div class="rhp-preview-image-cn">    <img class="rhp-preview-image centered-vertically" alt=""/>    <div class="rhp-preview-hud centered-vertically"></div>    <div class="rhp-preview-icon centered-vertically"></div>    <div class="rhp-preview-not-available                centered-vertically">        <%= previewNotAvailable %>        <span class="rhp-preview-not-available-desc"            ><%= previewNotAvailableDesc %></span>    </div></div>'}),define("core/dev/views/rhp-preview-view",["core/ac-core","core/templates/rhp-preview-template","i18n!core/nls/ui-strings","core/dev/utils/css-util","core/utils/sc-analytics","core/views/view","core/views/rhp-preview-hud-view"],function(e,t,n,r){return e.RhpPreviewView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var r=this.$el;return e.View.prototype.render.call(this),r.children().length===0&&(r.html(_.template(t)({previewNotAvailable:n.PREVIEW_NOT_AVAILABLE,previewNotAvailableDesc:n.PREVIEW_NOT_AVAILABLE_DESC})),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$imageCn=this.$(".rhp-preview-image-cn"),this.$image=this.$(".rhp-preview-image"),this.$icon=this.$(".rhp-preview-icon"),this.$hud=this.$(".rhp-preview-hud"),this.$noPreview=this.$(".rhp-preview-not-available")},_renderChildViews:function(){this._renderChildView("_hudView",e.RhpPreviewHudView,this.$hud);return},_preview:function(t){if(this.options.selectionUiModel.isSelectionMasked())return;this._loadPreview(),this._triggerViewEvent(e.ViewEvents.GET_RHP_PREVIEW_METADATA,{id:t.id,modal:!1})},_loadPreview:function(){var e=this.options,t=this.$image,n=e.rhpPreviewUiModel,r=n.get("item_model");this._showIcon(!1),t.attr("src","").removeClass("populated"),this._isImageLoaded=undefined,t.off(".selPreview").on("load.selPreview",_.bind(function(){t.off(".selPreview"),this._isImageLoaded=!0,this._fadePreview(!0,!0)},this)).on("error.selPreview",_.bind(function(){t.attr("src")&&(this._isImageLoaded=!1,this._fadePreview(!0,!1))},this)),t.attr("src",r.getRenditionUrl("tile",n.get("current_page")))},_fadePreview:function(e,t){var n=this.$el,r=this.$image;n.stop(!0,!1),e?(n.show(),r.addClass("populated"),this._showImage(t),n.animate({opacity:1})):r.attr("src")&&n.animate({opacity:0},function(){r.removeAttr("src"),n.hide()})},_showImage:function(e,t){var n=this.options,i=n.rhpPreviewUiModel,s=this.$imageCn,o=this.$image,u=this.$hud,a=this.$noPreview;s.removeClass("no-preview"),a.removeClass("shown"),e?(this._showIcon(!1),n.appApi.displayApi.scaleToFit(o,i.get("max_image_width"),i.get("max_image_height")),s.height(Math.max(r.getFullHeight(o),i.get("min_image_height"))),u.show(),o.show().css("opacity",1)):(u.hide(),o.hide(),t||(s.height(i.get("min_image_height")).addClass("no-preview"),a.addClass("shown")))},_showIcon:function(e,t){var n=this.$icon;e?(this._showImage(!1,!0),n.removeClass("folder multiple"),n.addClass("shown "+t),this.$imageCn.height(this.options.rhpPreviewUiModel.get("min_image_height"))):n.removeClass("shown")},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange).listenTo(e.rhpPreviewUiModel,"change:current_page",this._onCurrentPageChange)},_onSelectedItemModelsChange:function(e){var t=e.getSelectionCount(),n=this.$el,r,i=this.options.rhpPreviewUiModel;i.init(),this.$image.removeAttr("src"),t===0?n.hide():(n.show(),t===1?(r=e.getSingleSelectedItemModel(),i.init(r),r.isFile()?this._preview(r):this._showIcon(!0,"folder")):this._showIcon(!0,"multiple"))},_onCurrentPageChange:function(e){if(!e.get("item_model"))return;this.$image.fadeOut(e.get("fade_out_duration"),this._loadPreview)}}),e.RhpPreviewView}),define("core/dev/templates/rhp-actions-template",[],function(){return'<button class="rhp-menu-btn rhp-actions-menu-btn"        tabindex="0">    <div class="rhp-menu-btn-label"><%= actions %></div>    <div class="rhp-menu-btn-icon"></div></button><div class="rhp-menu rhp-actions-menu" role="menu">    <button class="rhp-menu-item rhp-action disabled print"            id="rhp-action-print-btn-<%= viewId %>">        <div class="rhp-action-icon print"></div>        <div class="rhp-action-label"><%= print %></div>    </button>    <button class="rhp-menu-item rhp-action disabled rename"            id="rhp-action-rename-btn-<%= viewId %>">        <div class="rhp-action-icon rename"></div>        <div class="rhp-action-label"><%= rename %></div>    </button>    <button class="rhp-menu-item rhp-action disabled move"            id="rhp-action-move-btn-<%= viewId %>">        <div class="rhp-action-icon move"></div>        <div class="rhp-action-label"><%= move %></div>    </button>    <button class="rhp-menu-item rhp-action disabled download"            id="rhp-action-download-btn-<%= viewId %>">        <div class="rhp-action-icon download"></div>        <div class="rhp-action-label"><%= download %></div>    </button>    <button class="rhp-menu-item rhp-action disabled send"            id="rhp-action-send-btn-<%= viewId %>">        <div class="rhp-action-icon send"></div>        <div class="rhp-action-label"><%= send %></div>    </button>     <div class="rhp-action-plugins"></div>     <button class="rhp-menu-item rhp-action disabled delete"            id="rhp-action-delete-btn-<%= viewId %>">        <div class="rhp-action-icon delete"></div>        <div class="rhp-action-label"><%= deleteStr %></div>    </button></div> <div class="selection-action-send-menu menu" role="menu"></div>'}),define("core/dev/templates/selection-action-send-menu-template",[],function(){return'<div class="selection-action-send-menu-item selection-action-send-menu-item-common theme-text theme-hoverable"     data-section="send" data-value="attach-to-email" tabindex="-1"     role="menuitem" data-test-name="selection-action-item-attach-to-email">    <%= attachToEmail %></div><div class="selection-action-send-menu-item selection-action-send-menu-item-common theme-text theme-hoverable"     data-section="send" data-value="send-and-track" tabindex="-1"     role="button" data-test-name="selection-action-item-send-and-track">    <%= sendAndTrack %></div> <div class="menu-nub-grey left"></div>'}),define("core/dev/views/menu-view",["core/ac-core","core/utils/event-util","core/utils/view-util","core/views/view"],function(e,t,n){e.MenuView=e.View.extend({options:{animate:!0,triggerEl:null},events:{"mouseover :focusable:not(:tabbable)":"_onMouseOver",mousedown:"_onMouseDown"},render:function(){e.View.prototype.render.call(this),this._initWrappers()},open:function(e){var t=this.$el,n=$.Deferred(),r,i=this.options;return this._clearFocusTimer(),this.isMenuOpen()||this._isAnimating?n.reject().promise():(this._isMenuOpen=!0,this.render(),i.animate?(this._isAnimating=!0,t.slideDown("fast",_.bind(function(){t.addClass("shown").removeAttr("aria-hidden"),e&&e(),this._isAnimating=!1},this))):(t.addClass("shown").removeAttr("aria-hidden"),e&&_.defer(e)),!i.triggerEl&&$(document.activeElement).not("body").length&&(i.triggerEl=document.activeElement),r=t.find("[role='option']:focusable,[role^='menuitem']:focusable,:tabbable").first(),r.length||(r=t.find(":focusable")),r.focus(this._getFocusDelay()/2),_.defer(this._addMenuEventListenerFactory()),this._deferred=n,n.promise())},close:function(t,n){var r=this.$el,i=this.options,s=i.menusUiModel,o,u;if(!this.isMenuOpen()||this._isAnimating){t&&t();return}this._isMenuOpen=!1,o=_.bind(function(){if(this._deferred){this._removeMenuEventListeners(),this._triggerViewEvent(e.ViewEvents.MENU_CLOSED),r.removeClass("shown").attr("aria-hidden","true");if(!n||!n.doNotEmpty)this.removeAllChildViews(),r.empty();i.triggerEl&&$(i.triggerEl).is(":focusable")&&(u=$(document.activeElement),(u.closest(this.$el).length===1||u.not("body").length===0)&&$(i.triggerEl).focus()),this._deferred.resolve(),this._deferred=undefined}},this),i.animate?(this._isAnimating=!0,r.slideUp("fast",_.bind(function(){o(),this._isAnimating=!1,t&&_.delay(t,s.get("close_animation_delay"))},this))):(o(),t&&t())},isMenuOpen:function(){return this._isMenuOpen},toggle:function(e){this.isMenuOpen()?this.close(e):this.open(e)},_initWrappers:function(){this.$body=$("body")},_addMenuEventListenerFactory:function(){return _.bind(this._addMenuEventListeners,this)},_addMenuEventListeners:function(){t.addDomEventListener(document.body,"click",this._onBodyClick,!0),t.addDomEventListener(document.body,"touchstart",this._onBodyClick,!0),this.options.appApi.keyApi.pushKeyHandler(this),this.options.appApi.focusApi.pushFocusHandler(this)},_removeMenuEventListeners:function(){t.removeDomEventListener(document.body,"click",this._onBodyClick,!0),t.removeDomEventListener(document.body,"touchstart",this._onBodyClick,!0),this.options.appApi.keyApi.popKeyHandler(this),this.options.appApi.focusApi.popFocusHandler(this)},_isClickOutsideMenu:function(e){return t.getEventTarget(e).closest(this.$el).length===0},_onBodyClick:function(e){this.option&&this.option.appApi&&this.option.appApi.displayApi&&!this.options.appApi.displayApi.isModalAjax()&&this._isClickOutsideMenu(e)&&(this.close(),this._closedByClick(e))},_closedByClick:function(e){return undefined},_clearFocusTimer:function(){clearTimeout(this.options.menusUiModel.get("focus_timeout_id"))},_getFocusDelay:function(){return this.options.menusUiModel.get("focus_delay")},_isOptionOrMenuItem:function(e){return $(e).is("[role='option'], [role^='menuitem']")},_onFocusIn:function(e){var t=$(e.target);return this._clearFocusTimer(),this._isOptionOrMenuItem(t)&&t.is("[tabindex]")&&t.attr("tabindex","0"),!0},_onFocusOut:function(e){var t=$(e.target),r,i=this,s=this.options.menusUiModel;return this._isOptionOrMenuItem(t)&&t.is("[tabindex]")&&_.defer(function(){r=$(document.activeElement),r.closest("[role='menu']").length||r.closest("[role='listbox']").length?t.attr("tabindex","-1"):t.attr("tabindex","0"),t.siblings(":tabbable").length||t.attr("tabindex","0")}),this._clearFocusTimer(),s.set("focus_timeout_id",_.delay(function(){n.descendantHasFocus(i.$el)||i.close()},this._getFocusDelay())),!0},_onMouseDown:function(){this._clearFocusTimer()},_onMouseOver:function(e){this._clearFocusTimer(),n.descendantHasFocus(this.$el)&&$(e.currentTarget).focus()},_onKeyDown:function(e){var t=this.$el,r=$(e.target),i=this.$(":focusable"),s=i.filter(":tabbable"),o,u=!1,a=r.is("input[type=text]");if(!r.closest(t).length)return u;this._clearFocusTimer();switch(e.which){case 9:this._isOptionOrMenuItem(r)?s.length>1?o=n.getNextFocusableDescendant(t,e.shiftKey,!0,":tabbable"):u=!0:s.length<=1?u=!0:(o=n.getNextFocusableDescendant(t,e.shiftKey,!0,":tabbable"),o&&o.length>0&&(u=!a));break;case 27:this.options.appApi.displayApi.isModalAjax()||(u=!0,this.close());break;case 13:case 32:a||(u=!0,r.click());break;case 37:case 38:u=!0,o=n.getNextFocusableDescendant(t,!0,!0),(!o||o.length===0)&&this.close();break;case 39:case 40:u=!0,o=n.getNextFocusableDescendant(t,!1,!0);break;case 35:u=!0,o=i.last();break;case 36:u=!0,o=i.first()}return u&&this._consumeEvent(e),o&&o.length>0&&_.defer(function(){o.focus()}),u}})}),define("core/dev/views/selection-action-send-menu-view",["core/ac-core","core/templates/selection-action-send-menu-template","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/views/menu-view"],function(e,t,n,r){return e.SelectionActionSendMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .selection-action-send-menu-item":"_onMenuItemClick"})},initialize:function(){e.MenuView.prototype.initialize.call(this)},render:function(){e.MenuView.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(_.template(t)({attachToEmail:n.ATTACH_TO_EMAIL,sendAndTrack:n.SEND_AND_TRACK})),this._initWrappers()),this.$attachToEmailMenuItem.attr("tabindex","0"),this.$attachToEmailMenuItem.attr("aria-label",n.ATTACH_TO_EMAIL),this.$sendAndTrackMenuItem.attr("aria-label",n.SEND_AND_TRACK)},open:function(t,n){return this._logSiteCatalystEvent([r.SEND_MENU,r.SHOWN]),this.$el.parent().css("overflow","visible"),n&&this.$el.css("left",n.left),e.MenuView.prototype.open.call(this,t)},close:function(t){return this.$el.parent().css("overflow","hidden"),e.MenuView.prototype.close.call(this,t)},reposition:function(e){e&&this.$el.css("left",e)},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$attachToEmailMenuItem=this.$(".selection-action-send-menu-item[data-value='attach-to-email']"),this.$sendAndTrackMenuItem=this.$(".selection-action-send-menu-item[data-value='send-and-track']")},_onMenuItemClick:function(e){var t=$(e.currentTarget),n=t.attr("data-value");if(t.hasClass("disabled")){this.close();return}this.close(_.bind(function(){this._executeSend(n)},this))},_executeSend:function(t){this._logSiteCatalystEvent([t==="attach-to-email"?r.ATTACH_TO_EMAIL:r.SEND_AND_TRACK,r.CLICKED]),t==="attach-to-email"?this._triggerViewEvent(e.ViewEvents.SELECTION_ACTION_ATTACH_TO_EMAIL):t==="send-and-track"&&this._triggerViewEvent(e.ViewEvents.SELECTION_ACTION_SEND_AND_TRACK)},_getSiteCatalystContext:function(){return this.options.noUrlUpdate?undefined:r.SHARE},_onFocusIn:function(e){var t=$(e.target);return this.$(":focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0),!0},_onBodyClick:function(t){return!this.options.appApi.displayApi.isModalAjax()&&this._isClickOutsideMenu(t)&&this._consumeEvent(t),e.MenuView.prototype._onBodyClick.call(this,t)}}),e.SelectionActionSendMenuView}),define("core/dev/views/rhp-actions-view",["core/ac-core","core/templates/rhp-actions-template","i18n!core/nls/ui-strings","core/utils/util","core/utils/action-ids","core/utils/view-util","core/utils/sc-analytics","core/views/rhp-actions-plugins-view","core/views/selection-action-send-menu-view","core/views/view"],function(e,t,n,r,i,s,o){return e.RhpActionsView=e.View.extend({events:{"click .rhp-actions-menu-btn":"_onActionsClick","click .rhp-action.print":"_onPrintClick","click .rhp-action.rename":"_onRenameClick","click .rhp-action.move":"_onMoveClick","click .rhp-action.download":"_onDownloadClick","click .rhp-action.send":"_onSendClick","click .rhp-action.delete":"_onDeleteClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners()},render:function(){var i=this.options,s=this.$el,o=this.$send;return e.View.prototype.render.call(this),s.children().length===0&&(s.html(_.template(t)({actions:n.ACTIONS_UC,print:n.PRINT,rename:n.RENAME,move:n.MOVE,download:n.DOWNLOAD,send:n.SEND_AND_TRACK,deleteStr:n.DELETE,viewId:i.viewId})),this._initWrappers(),r.isCEF()&&i.appApi.rnaApi.done(function(e){!e.stApi.isSendTrackAvailable()||i.noShare?o.text(n.ATTACH_TO_EMAIL):o.text(n.SEND)})),r.isCEF()&&i.selectionUiModel.getNumSelectedItems()<=0&&s.hasClass("open")?(s.removeClass("open"),this):(this._expandMenu(i.rhpPreviewUiModel.get("actions_expanded")),this._updateTooltips(),this._updateButtons(),this._updateButtonsVisibility(),this._renderChildViews(),this.$("[tabindex]:tabbable").length===0&&this.$(":focusable:first").attr("tabindex","0"),this)},_initWrappers:function(){this.$menuBtn=this.$(".rhp-actions-menu-btn"),this.$menu=this.$(".rhp-actions-menu"),this.$print=this.$(".rhp-action.print"),this.$rename=this.$(".rhp-action.rename"),this.$move=this.$(".rhp-action.move"),this.$download=this.$(".rhp-action.download"),this.$send=this.$(".rhp-action.send"),this.$plugins=this.$(".rhp-action-plugins"),this.$delete=this.$(".rhp-action.delete"),this.$sendMenu=this.$(".selection-action-send-menu")},_updateTooltips:function(){this.$rename.attr("title",this._getRenameTooltip()),this.$move.attr("title",this._getMoveTooltip()),this.$download.attr("title",this._getDownloadTooltip()),this.$send.attr("title",this._getSendTooltip()),this.$delete.attr("title",this._getDeleteTooltip())},_getRenameTooltip:function(){var e,t;return t=this.options.selectionUiModel.getSingleSelectedItemModel(),t?e=t.isFile()?n.RENAME_FILE:n.RENAME_FOLDER:e=n.RENAME,e},_getMoveTooltip:function(){var e,t,i,s;return t=this.options.selectionUiModel.getSelectionCountByType(),i=t.numFiles,s=t.numFolders,i===0?s===1?e=n.MOVE_FOLDER:e=n.MOVE_FOLDERS:i===1?s===0?e=n.MOVE_FILE:s===1?e=n.MOVE_FILE_AND_FOLDER:e=n.MOVE_FILE_AND_FOLDERS:s===0?e=n.MOVE_FILES:s===1?e=n.MOVE_FILES_AND_FOLDER:e=n.MOVE_FILES_AND_FOLDERS,r.isCEF()&&(e=n.MOVE),e},_getDownloadTooltip:function(){var e,t,r,i;return t=this.options.selectionUiModel.getSelectionCountByType(),r=t.numFiles,i=t.numFolders,r===0?i===1?e=n.DOWNLOAD_FOLDER:e=n.DOWNLOAD:r===1?i===0?e=n.DOWNLOAD_FILE:e=n.DOWNLOAD:i===0?e=n.DOWNLOAD_FILES:e=n.DOWNLOAD,e},_getSendTooltip:function(){var e=this._getSendTooltipCommon();return r.isCEF()&&this.options.appApi.rnaApi.done(_.bind(function(t){!t.stApi.isSendTrackAvailable()||this.options.noShare?e=n.ATTACH_TO_EMAIL:e=this._getSendTooltipCommon()},this)),e},_getSendTooltipCommon:function(){var e=this.options.selectionUiModel.getSelectionCountByType();return e.numFiles===1?n.SEND_FILE:n.SEND_FILES},_getDeleteTooltip:function(){return n.DELETE},_enableButton:function(e,t){_.isUndefined(t)&&(t=!0),s.enableInput(e,t)},_updateButtons:function(){var e=this.options,t=e.selectionUiModel,n=t.getSingleSelectedItemModel(),s=t.getSelectionCountByType(),o,u,a=e.appApi.connectorsApi,f=this.$rename,l=this.$move,c=this.$send,h=this.$download,p=this.$delete;o=s.numFiles,u=s.numFolders,this._enableButton(l),this._enableButton(p),n?(this._enableButton(f),this._enableButton(c,n.isFile()),this._enableButton(h,n.isFile()||n.isFolder())):(this._enableButton(f,!1),this._enableButton(c,u<=0),u>0&&o>0||u>1?this._enableButton(h,!1):(o>0||u===1)&&this._enableButton(h,!0)),e.folderDeletionDisabled&&this._enableButton(p,u<=0),this._updateButton(f,i.RENAME),a.isConnectorPlugin(e.pluginId)||this._updateButton(l,i.MOVE_ACROSS_CONNECTORS),r.isCEF()||this._updateButton(c,i.SEND),this._updateButton(h,i.DOWNLOAD),this._updateButton(p,i.DELETE)},_updateButtonsVisibility:function(){var e=this.options,t=e.appApi.connectorsApi,n=e.selectionUiModel,i=n.getSelectionCountByType(),s,o=this.$plugins;s=i.numFiles===0&&i.numFolders>0,r.isCEF()||(this._hideButton(this.$send,e.noShare||s||!e.appApi.pluginsApi.isPluginAvailable("send")),this._hideButton(this.$print,!0));if(!t.isConnectorPlugin(e.pluginId))return;this._hideButton(this.$rename,e.noRename),this._hideButton(this.$move,e.noMove),this._hideButton(this.$download,e.noDownload),s?o.hide():o.show(),this._hideButton(this.$delete,e.noDelete)},_updateButton:function(e,t){var n=this.options,r=n.selectionUiModel.getSelectedItemModels(),i=!1,s=n.appApi.connectorsApi;i=s.isActionRestrictedOnItems(r,t),i&&this._enableButton(e,!1)},_hideButton:function(e,t){t?e.hide():e.show()},_logNumSelectedItems:function(){var e=this.options,t=e.appApi.siteCatalystApi,n=e.selectionUiModel,r=n.getNumSelectedFiles(),i=n.getNumSelectedFolders(),s=this._getParentScContext();r>0&&t.logScEvent([s,o.NUM_FILES_CHECKED,o.getCountCode(r)]),i>0&&t.logScEvent([s,o.NUM_FOLDERS_CHECKED,o.getCountCode(i)])},_getSiteCatalystContext:function(){return o.ACTION_BAR},_expandMenu:function(e){var t=this.$menuBtn,n=this.$menu;this.options.rhpPreviewUiModel.set("actions_expanded",e),e?(t.addClass("expanded"),n.addClass("expanded")):(t.removeClass("expanded"),n.removeClass("expanded"))},_renderChildViews:function(){var t=this.options;this._renderChildView("_rhpActionsPluginsView",e.RhpActionsPluginsView,this.$plugins),r.isCEF()&&t.appApi.rnaApi.done(_.bind(function(n){n.stApi.isSendTrackAvailable()&&!t.noShare&&this._renderChildView("_rhpActionSendMenuView",e.SelectionActionSendMenuView,this.$sendMenu)},this))},_onActionsClick:function(){var e=this.options.rhpPreviewUiModel;e.get("actions_expanded")||e.expandActions()},_onRenameClick:function(t){var n=this.options,r,i=n.selectionUiModel.getSingleSelectedItemModel();if(!i||$(t.currentTarget).hasClass("disabled"))return;r=i.get("name"),this._logNumSelectedItems(),this._logSiteCatalystEvent([o.RENAME,o.CLICKED]),this._triggerViewEvent(e.ViewEvents.RENAME,{id:i.get("id"),object_type:i.get("object_type"),name:r,existingName:r,parentView:this,scContext:this._getFullScContext()})},_onSendClick:function(t){var n=this.options,i=n.appApi;if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([o.SHARE,o.CLICKED]);if(r.isCEF()){this._consumeEvent(t),i.rnaApi.done(_.bind(function(t){var r,i;t.stApi.isSendTrackAvailable()&&!n.noShare?this._rhpActionSendMenuView.isMenuOpen()?this.close():(r=this.$menu.position(),i=this.$send.position(),this._rhpActionSendMenuView.open(undefined,{left:r.left+i.left,top:r.top+i.top})):(this._logSiteCatalystEvent([o.ATTACH_TO_EMAIL,o.CLICKED]),this._triggerViewEvent(e.ViewEvents.SELECTION_ACTION_ATTACH_TO_EMAIL))},this));return}i.routerApi.navigate("send",{trigger:!0})},_onMoveClick:function(t){if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([o.MOVE,o.CLICKED]),this._triggerViewEvent(e.ViewEvents.MOVE,{parentView:this,scContext:this._getFullScContext()})},_onDeleteClick:function(t){if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([o.DELETE,o.CLICKED]),this._triggerViewEvent(e.ViewEvents.DELETE,{parentView:this,scContext:this._getFullScContext()})},_onDownloadClick:function(t){var n=this.options,r=n.selectionUiModel,i,s,u;if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([o.DOWNLOAD,o.CLICKED]),u=r.getSelectedItemModels(),i=r.getSingleSelectedItemModel(),i||(u=_.filter(u,function(e){return!e.isForm()}),u.length===1&&(i=u[0])),i&&i.isFile()?this._triggerViewEvent(e.ViewEvents.DOWNLOAD,{id:i.id,scContext:this._getFullScContext(),numForms:r.getNumSelectedForms(),itemModel:i}):(s=_.pluck(u,"id").join(";"),this._triggerViewEvent(e.ViewEvents.DOWNLOAD_ZIP,{id_list:s,scContext:this._getFullScContext(),numForms:r.getNumSelectedForms(),itemModel:u}))},_onKeyDown:function(e){var t=this.$el,n,r=e.which,i=r===38,o=!1;if(!s.descendantHasFocus(t))return o;switch(r){case 13:o=!0,$(e.target).click();break;case 38:case 40:n=s.getNextFocusableDescendant(t,i,!0)}return n&&n.length===1&&(o=!0,n.focus()),o},_onFocusIn:function(e){var t=$(e.target);t.closest(".rhp-action").length>0&&(this.$("[tabindex]:focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0))},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange).listenTo(e.rhpPreviewUiModel,"change:actions_expanded",this._onActionsExpandedChange)},_onSelectedItemModelsChange:function(e){if(e.isSelectionMasked())return;e.getNumSelectedItems()>0&&this.render()},_onActionsExpandedChange:function(){this.render()}}),e.RhpActionsView}),define("core/dev/templates/search-control-template",[],function(){return'<button class="search-magnifier"         disabled="disabled" aria-hidden="true">    <span class="hidden-accessible"><%= clearSearch %></span></button><div class="query-boxes">    <div class="query-boxes-list"          role="list" aria-live="polite"         aria-relevant="additions text"></div></div>'}),define("core/dev/templates/search-field-template",[],function(){return'<div class="search-field-container ui-theme theme-container" role="search">    <input id="search-field-<%= viewId %>" class="search-field ui-theme theme-text"           type="text" spellcheck="false"           data-test-name="search-field"           placeholder="<%= enterKeyword %>"           title="<%= search %>" /></div>'}),define("core/dev/views/search-field-view",["core/ac-core","core/templates/search-field-template","i18n!core/nls/ui-strings","core/utils/util","core/utils/view-util","core/views/view","core/views/input-search-view"],function(e,t,n,r,i){return e.SearchFieldView=e.View.extend({events:{"click   .search-field":"_onSearchFieldClick","keydown .search-field":"_onSearchFieldKeyDown"},initialize:function(){e.View.prototype.initialize.call(this),this._addAppApiCallbacks()},render:function(){var r=this.$el,s=this.$item;e.View.prototype.render.call(this);if(!s||!i.contains(r,s))r.append(_.template(t)({enterKeyword:n.ENTER_KEYWORD,search:n.SEARCH,viewId:this.options.viewId})),s=this.$item=r.children().last(),this._initWrappers();this._minimizeInputFieldWidth(),this._renderChildViews(),this._updateControls(),this._maximizeInputFieldWidth()},empty:function(){return this.$item.empty(),this},detach:function(){return this.$item.detach(),this},_initWrappers:function(){this.$searchFieldCn=this.$(".search-field-container"),this.$searchField=this.$(".search-field")},_renderChildViews:function(){this._renderChildView("_searchFieldView",e.InputSearchView,this.$searchField,{searchField:e.SearchUiModel.FIELD_ALL})},_updateControls:function(){var e=this.options,t=e.appApi.acrobatApi,n=this._searchFieldView,r=this.$searchFieldCn;e.searchUiModel.hasRemovableFieldQueries()?(n.enablePrompt(!1),r.removeClass("prompt")):(n.clearText().enablePrompt(!0),r.addClass("prompt")),t.isInAcrobat()&&t.isFolderSelectionMode()&&(this.$el.addClass("disabled"),i.enableInput(this.$searchField,!1))},_minimizeInputFieldWidth:function(){var e=this.$searchFieldCn;e.css("width",e.css("min-width"))},_maximizeInputFieldWidth:function(){var e=this.$searchFieldCn,t=e.position();if(!t)return;e.width(e.parent().width()-t.left-1)},_onSearchFieldClick:function(){var t=e.ViewEvents;this._triggerViewEvent(t.SEARCH_FIELD_CLICKED),r.isCEF()&&this._triggerViewEvent(t.CLEAR_SELECTION)},_onSearchFieldKeyDown:function(t){var n=t.which,r=e.Features,i,s,o;t.shiftKey&&(n===121?r.isFeatureEnabled("test_http_error_ui")&&(this._consumeEvent(t),this._isTestHttpErrorUiMode=!0):n===117&&r.isFeatureEnabled("test_idle_timeout")&&(this._consumeEvent(t),this._isTestIdleTimeoutMode=!0));if(this._isTestHttpErrorUiMode){n===13&&(i=$.trim(this.$searchField.val()),i.length>0&&(s=i.split(","),_.each(s,_.bind(function(e){var t,n,r,i,s;n=/\(\w+\)/.exec(e),n&&n.length>0&&(r=n[0],t=r.substr(1,r.length-2)),i={error:{code:t}},s={status:parseInt($.trim(e),10),responseText:JSON.stringify(i)},this.options.appApi.errorApi.enqueueAjaxError(s)},this))),this.$searchField.val(""),this._isTestHttpErrorUiMode=!1);return}if(this._isTestIdleTimeoutMode){if(n===13){i=$.trim(this.$searchField.val()),o=i.length>0?parseInt(i,10):0;if(isNaN(o)||o<0)o=0;this.options.appApi.inactivityApi.setIdleTimeout(o),this.$searchField.val(""),this._isTestIdleTimeoutMode=!1}return}},_addAppApiCallbacks:function(){var e=this.options.appApi;e.windowApi.addWindowResizeCallback(this._onWindowResize),e.previewApi.addItemModelChangeCallback(this._onItemModelChange)},_onWindowResize:function(){this._maximizeInputFieldWidth()},_onItemModelChange:function(e){var t=this.$searchField;e&&i.hasFocus(t)&&t.blur()}}),e.SearchFieldView}),define("core/dev/views/query-boxes-view",["core/ac-core","core/views/view","core/views/query-box-view","core/views/search-field-view"],function(e){return e.QueryBoxesView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this)},render:function(){return e.View.prototype.render.call(this),this._initWrappers(),this._renderChildViews(),this},_initWrappers:function(){this.$queryBoxesList=this.$(".query-boxes-list")},_renderChildViews:function(){var t=this.options.searchUiModel,n=t.get("field_queries"),r;r=this.getChildViews(),_.each(r,_.bind(function(t){t instanceof e.QueryBoxView&&this.removeChildView(t)},this)),n.each(_.bind(function(e){e.get("commit_query_box")&&this._renderQueryBoxView(e)},this)),this._renderSearchFieldView()},_renderQueryBoxView:function(t){this._renderChildView("_queryBoxView_"+t.id,e.QueryBoxView,this.$queryBoxesList,{searchFieldQuery:t,childViewId:t.id})},_renderSearchFieldView:function(){this._renderChildView("_searchFieldView",e.SearchFieldView,this.$el)}}),e.QueryBoxesView}),define("core/dev/views/search-control-view",["core/ac-core","core/templates/search-control-template","i18n!core/nls/ui-strings","core/utils/css-util","core/utils/view-util","core/utils/sc-analytics","core/views/view","core/views/query-boxes-view","core/views/input-search-view"],function(e,t,n,r,i,s){return e.SearchControlView=e.View.extend({events:{"click .search-magnifier.clear-btn":"_onClearSearchClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var s=this.$el,o=this.$queryBoxes,u=this.options.searchUiModel,a,f;return e.View.prototype.render.call(this),s.children().length===0&&(s.html(_.template(t)({clearSearch:n.CLEAR_SEARCH_TITLE})),this._initWrappers(),i.setElementFontByLocale(s,"input")),o=this.$queryBoxes,o.width(Math.floor(s.width()-r.getFullWidth(this.$magnifier))),this._renderChildViews(),this._updateControls(),f=s.height(),_.isNumber(f)&&(a=u.get("search_control_height"),u.set("search_control_height",f,{silent:_.isUndefined(a)})),this},_onViewEvent:function(t,n){if(t===e.ViewEvents.SEARCH_FIELD_CLICKED){this.options.noUrlUpdate?this._logSiteCatalystEvent([s.SEARCH_BAR,s.CLICKED]):this._logSiteCatalystEvent(s.CLICKED);return}this.trigger(t,n)},_getSiteCatalystContext:function(){return this.options.noUrlUpdate?undefined:s.SEARCH_BAR},_initWrappers:function(){this.$magnifier=this.$(".search-magnifier"),this.$queryBoxes=this.$(".query-boxes")},_updateControls:function(){var e=this.options,t=e.appApi.acrobatApi,r=this.$magnifier;e.searchUiModel.getRemovableFieldQueryCount()===0?r.removeClass("clear-btn").removeAttr("title").attr({disabled:"disabled","aria-hidden":!0}):r.addClass("clear-btn").attr({title:n.CLEAR_SEARCH_TITLE,"aria-hidden":!1}).removeAttr("disabled");if(t.isInAcrobat()&&t.isFolderSelectionMode()||e.searchUiModel.get("is_locked"))this.$el.addClass("disabled"),r.attr({disabled:"disabled"}),i.enableInput(this.$("input"),!1)},_renderChildViews:function(){this._renderQueryBoxesView()},_renderQueryBoxesView:function(){this._renderChildView("_queryBoxesView",e.QueryBoxesView,this.$queryBoxes)},_onClearSearchClick:function(){this._logSiteCatalystEvent([s.KEYWORDS,s.DISMISSED]),this._triggerViewEvent(e.ViewEvents.REMOVE_REMOVABLE_QUERIES),this.$("input").focus()},_addUiModelEventListeners:function(){var e=this.options.searchUiModel;this.listenTo(e,"change:field_queries",this._onFieldQueriesChange).listenTo(e,"change:focus_in_search_field",this._onFocusInSearchFieldChange)},_onFieldQueriesChange:function(){this._isHidden()||this.render()},_onFocusInSearchFieldChange:function(e,t){t&&this.$("input").focus()}}),e.SearchControlView}),define("core/dev/views/tool-view",["core/ac-core","core/views/plugin-content-view"],function(e){return e.ToolView=e.PluginContentView.extend({initialize:function(){e.PluginContentView.prototype.initialize.call(this),LOG.warn("'core/views/tool-view' is deprecated. Use 'core/views/plugin-selector-view' instead.")}}),e.ToolView}),define("core/dev/templates/selection-actions-template",[],function(){return'<input class="selection-action-checkbox"    id="selection-action-checkbox-<%= viewId %>"    title="<%= checkboxTitle %>"    type="checkbox"/>    <span class="selection-action-checkbox-checkmark"          aria-hidden="true"></span><div class="selection-action-btns unselectable">    <button class="selection-action-btn open disabled"            id="selection-action-open-btn-<%= viewId %>"            title="<%= actionOpenTitle %>"            disabled tabindex="-1">        <div class="selection-action-label theme-hyperlink"        ><%= actionOpen %></div>    </button>    <button class="selection-action-btn saveAs disabled"            id="selection-action-saveAs-btn-<%= viewId %>"            title="<%= actionSaveAsTitle %>"            disabled tabindex="-1">        <div class="selection-action-label theme-hyperlink"        ><%= actionSaveAs %></div>    </button>    <button class="selection-action-btn rename disabled"            id="selection-action-rename-btn-<%= viewId %>"            title="<%= actionRenameTitle %>"            disabled tabindex="-1">        <div class="selection-action-label  theme-hyperlink"        ><%= actionRename %></div>    </button>    <button class="selection-action-btn move disabled"            id="selection-action-move-btn-<%= viewId %>"            title="<%= actionMoveTitle %>"            disabled tabindex="-1">        <div class="selection-action-label theme-hyperlink"        ><%= actionMove %></div>    </button>    <button class="selection-action-btn download disabled"            id="selection-action-download-btn-<%= viewId %>"            title="<%= actionDownloadTitle %>"            disabled tabindex="-1">        <div class="selection-action-label theme-hyperlink"        ><%= actionDownload %></div>    </button>    <button class="selection-action-btn share disabled"            id="selection-action-share-btn-<%= viewId %>"            title="<%= actionShareTitle %>"            disabled tabindex="-1">        <div class="selection-action-label theme-hyperlink"        ><%= actionSend %></div>    </button>    <div class="selection-action-plugins" role="presentation"></div>    <button class="selection-action-btn delete"            id="selection-action-delete-btn-<%= viewId %>"            title="<%= actionDeleteTitle %>"            tabindex="-1">        <div class="selection-action-label delete theme-hyperlink"        ><%= actionDelete %></div>    </button></div><div class="selection-action-send-menu menu ui-theme theme-container" role="menu"></div>'}),define("core/dev/views/selection-actions-view",["core/ac-core","core/templates/selection-actions-template","i18n!core/nls/ui-strings","core/utils/util","core/utils/css-util","core/utils/sc-analytics","core/utils/action-ids","core/utils/view-util","core/views/view","core/views/view-events","core/views/selection-actions-plugins-view","core/views/selection-action-send-menu-view"],function(e,t,n,r,i,s,o,u){e.SelectionActionsView=e.View.extend({events:{click:"_onClick","click .selection-action-checkbox":"_onCheckboxClick","click .selection-action-btn.open":"_onOpenClick","click .selection-action-btn.saveAs":"_onSaveAsClick","click .selection-action-btn.rename":"_onRenameClick","click .selection-action-btn.move":"_onMoveClick","click .selection-action-btn.download":"_onDownloadClick","click .selection-action-btn.share":"_onShareClick","click .selection-action-btn.delete":"_onDeleteClick"},initialize:function(){e.View.prototype.initialize.call(this),this.template=_.template(t),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners()},render:function(){var s=this.$el,o,u,a=e.Features,f=this.options,l;return e.View.prototype.render.call(this),s.children().length===0?(s.empty().html(_.template(t)({checkboxTitle:n.CLOSE,actionOpen:n.OPEN,actionSaveAs:n.SAVE_AS,actionRename:n.RENAME,actionMove:n.MOVE,actionDownload:n.DOWNLOAD,actionSend:n.SEND_AND_TRACK,actionDelete:n.DELETE,actionOpenTitle:this._getOpenToolTip(),actionSaveAsTitle:this._getSaveAsToolTip(),actionRenameTitle:this._getRenameToolTip(),actionMoveTitle:this._getMoveToolTip(),actionDownloadTitle:this._getDownloadToolTip(),actionShareTitle:this._getShareToolTip(),actionDeleteTitle:this._getDeleteToolTip(),viewId:f.viewId})),this._initWrappers(),r.isCEF()&&f.appApi.rnaApi.done(_.bind(function(e){!e.stApi.isSendTrackAvailable()||f.noShare?this.$shareBtn.children().text(n.ATTACH_TO_EMAIL):this.$shareBtn.children().text(n.SEND),this.$shareBtn.attr("title",this._getShareToolTip())},this)),!a.isFeatureEnabled("share_ui")&&!a.isFeatureEnabled("share_ui_2")&&this.$shareBtn.hide()):(this.$openBtn.attr("title",this._getOpenToolTip()),this.$saveAsBtn.attr("title",this._getSaveAsToolTip()),this.$renameBtn.attr("title",this._getRenameToolTip()),this.$moveBtn.attr("title",this._getMoveToolTip()),this.$downloadBtn.attr("title",this._getDownloadToolTip()),this.$shareBtn.attr("title",this._getShareToolTip()),this.$deleteBtn.attr("title",this._getDeleteToolTip())),r.isCEF()&&f.selectionUiModel.getNumSelectedItems()<=0&&s.hasClass("open")?(s.removeClass("open"),this):(this._updateCheckbox(),this._updateButtons(),this._updateButtonsVisibility(),this._renderChildViews(),o=this.$(".selection-action-btn"),u=this.$(".selection-action-label"),l=this._removeLastSeparator(o),i.fitInOneRow(o,u,{prefFontSize:14,minFontSize:11,prefLrPadding:10,lastVisible:l}),this._repositionSendMenu(),this.$(":tabbable").length||this.$(":focusable:first").attr("tabindex","0"),this.$(":tabbable").length||this.$(":focusable:first").attr("tabindex","0"),this)},_initWrappers:function(){this.$selectionActions=this.$(".selection-action-btns"),this.$selectionActionsPlugins=this.$(".selection-action-plugins"),this.$checkbox=this.$(".selection-action-checkbox"),this.$openBtn=this.$(".selection-action-btn.open"),this.$saveAsBtn=this.$(".selection-action-btn.saveAs"),this.$renameBtn=this.$(".selection-action-btn.rename"),this.$moveBtn=this.$(".selection-action-btn.move"),this.$downloadBtn=this.$(".selection-action-btn.download"),this.$shareBtn=this.$(".selection-action-btn.share"),this.$deleteBtn=this.$(".selection-action-btn.delete"),this.$selectionActionSendMenuView=this.$(".selection-action-send-menu")},_getOpenToolTip:function(){var e=n.OPEN,t,r,i;return t=this.options.selectionUiModel.getSelectionCountByType(),r=t.numFiles,i=t.numFolders,i===0?r===1?e=n.OPEN_FILE:e=n.OPEN_FILES:e=n.OPEN_FOLDER,e},_getSaveAsToolTip:function(){var e=n.SAVE_AS,t,i;return t=this.options.selectionUiModel.getSelectionCountByType(),i=t.numFiles,i===1?e=n.SAVE_AS_FILE:r.isCEF()&&!this.options.mutipleNonPDFsSaveDisabled&&(e=n.SAVE_AS_FILES),e},_getRenameToolTip:function(){var e,t;return t=this.options.selectionUiModel.getSingleSelectedItemModel(),t?e=t.isFile()?n.RENAME_FILE:n.RENAME_FOLDER:e=n.RENAME,e},_getMoveToolTip:function(){var e,t,i,s;return t=this.options.selectionUiModel.getSelectionCountByType(),i=t.numFiles,s=t.numFolders,i===0?s===1?e=n.MOVE_FOLDER:e=n.MOVE_FOLDERS:i===1?s===0?e=n.MOVE_FILE:s===1?e=n.MOVE_FILE_AND_FOLDER:e=n.MOVE_FILE_AND_FOLDERS:s===0?e=n.MOVE_FILES:s===1?e=n.MOVE_FILES_AND_FOLDER:e=n.MOVE_FILES_AND_FOLDERS,r.isCEF()&&(e=n.MOVE),e},_getDownloadToolTip:function(){var e,t,r,i;return t=this.options.selectionUiModel.getSelectionCountByType(),r=t.numFiles,i=t.numFolders,r===0?i===1?e=n.DOWNLOAD_FOLDER:e=n.DOWNLOAD:r===1?i===0?e=n.DOWNLOAD_FILE:e=n.DOWNLOAD:i===0?e=n.DOWNLOAD_FILES:e=n.DOWNLOAD,e},_getShareToolTip:function(){var e=this._getShareToolTipCommon();return r.isCEF()&&this.options.appApi.rnaApi.done(_.bind(function(t){!t.stApi.isSendTrackAvailable()||this.options.noShare?e=n.ATTACH_TO_EMAIL:e=this._getShareToolTipCommon()},this)),e},_getShareToolTipCommon:function(){var t,r;return r=this.options.selectionUiModel.getSelectionCountByType(),r.numFiles===1?e.Features.isFeatureEnabled("share_ui_2")?t=n.SEND_FILE:t=n.SHARE_FILE:e.Features.isFeatureEnabled("share_ui_2")?t=n.SEND_FILES:t=n.SHARE_FILES,t},_getDeleteToolTip:function(){return n.DELETE},_isItemSelectable:function(e){return!this.options.noFolderSelection||!e.isFolder()},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(t){this._isItemSelectable(t)&&(e+=1)},this)),e},_updateCheckbox:function(){var e=this.$checkbox,t=this.options,n;t.collectionsUiModel.get("checkbox")?(e.removeClass("hidden"),this.$selectionActions.removeClass("no-checkbox"),n=t.selectionUiModel.getNumSelectedItems(),e.removeClass("dash check hidden").removeAttr("aria-checked checked").prop("indeterminate",!1),n>0&&(n===this._getNumSelectable()?e.addClass("check").attr({"aria-checked":"true",checked:"checked"}):e.addClass("dash").attr("aria-checked","mixed").prop("indeterminate",!0))):(e.addClass("hidden"),this.$selectionActions.addClass("no-checkbox")),r.isIE8()&&u.detachAndReattachElement(e.next())},_updateButtons:function(){var t=this.options,n=t.selectionUiModel,i=n.getSingleSelectedItemModel(),s=n.getSelectionCountByType(),u,a,f,l,c=t.appApi.connectorsApi;u=s.numFiles,a=s.numFolders,f=s.numNonPDFs,l=s.numForms;if(i){r.isCEF()?i.isFolder()||i.isPDF()?(this.$openBtn.show(),this.$saveAsBtn.hide()):(this.$openBtn.hide(),this.$saveAsBtn.show()):(this.$openBtn.hide(),this.$saveAsBtn.hide()),this.$openBtn.removeClass("disabled").removeAttr("disabled"),this.$openBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"),this.$saveAsBtn.removeClass("disabled").removeAttr("disabled"),this.$saveAsBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"),this.$renameBtn.removeClass("disabled").removeAttr("disabled"),this.$renameBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"),this.$moveBtn.removeClass("disabled").removeAttr("disabled");if(e.Features.isFeatureEnabled("share_ui")||e.Features.isFeatureEnabled("share_ui_2"))i.isFile()?(this.$shareBtn.removeClass("disabled").removeAttr("disabled"),this.$shareBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink")):(this.$shareBtn.addClass("disabled").attr("disabled","disabled"),this.$shareBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text"));i.isFile()||i.isFolder()?(this.$downloadBtn.removeClass("disabled").removeAttr("disabled"),this.$downloadBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink")):(this.$downloadBtn.addClass("disabled").attr("disabled","disabled"),this.$downloadBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text"))}else{r.isCEF()&&a===0&&u>0&&l===0?f===0?(this.$openBtn.show(),this.$saveAsBtn.hide()):u===f?(this.$openBtn.hide(),this.$saveAsBtn.show()):(this.$openBtn.hide(),this.$saveAsBtn.hide()):(this.$openBtn.hide(),this.$saveAsBtn.hide()),this.$openBtn.removeClass("disabled").removeAttr("disabled"),this.$openBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"),this.$renameBtn.addClass("disabled").attr("disabled","disabled"),this.$renameBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text"),this.$moveBtn.removeClass("disabled").removeAttr("disabled"),f>1&&t.mutipleNonPDFsSaveDisabled?(this.$saveAsBtn.addClass("disabled").attr("disabled","disabled"),this.$saveAsBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text")):(this.$saveAsBtn.removeClass("disabled").removeAttr("disabled"),this.$saveAsBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"));if(a>0&&u>0||a>1)this.$downloadBtn.addClass("disabled").attr("disabled","disabled"),this.$downloadBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text");else if(u>0||a===1)this.$downloadBtn.removeClass("disabled").removeAttr("disabled"),this.$downloadBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink");if(e.Features.isFeatureEnabled("share_ui")||e.Features.isFeatureEnabled("share_ui_2"))a>0?(this.$shareBtn.addClass("disabled").attr("disabled","disabled"),this.$shareBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text")):u>0&&(this.$shareBtn.removeClass("disabled").removeAttr("disabled"),this.$shareBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"))}t.folderDeletionDisabled&&(a>0?(this.$deleteBtn.addClass("disabled").attr("disabled","disabled"),this.$deleteBtn.children().removeClass("theme-hyperlink").addClass("theme-disabled-text")):(this.$deleteBtn.removeClass("disabled").removeAttr("disabled"),this.$deleteBtn.children().removeClass("theme-disabled-text").addClass("theme-hyperlink"))),this._updateButton(this.$renameBtn,o.RENAME),c.isConnectorPlugin(t.pluginId)||this._updateButton(this.$moveBtn,o.MOVE_ACROSS_CONNECTORS),r.isCEF()||this._updateButton(this.$shareBtn,o.SEND),this._updateButton(this.$downloadBtn,o.DOWNLOAD),this._updateButton(this.$deleteBtn,o.DELETE),this._updateButton(this.$saveAsBtn,o.NON_PDF_SAVE)},_updateButtonsVisibility:function(){var e=this.options,t=e.appApi.connectorsApi;r.isCEF()||this._updateButtonVisibility(this.$shareBtn,e.noShare||!e.appApi.pluginsApi.isPluginAvailable("send"));if(!t.isConnectorPlugin(e.pluginId)&&e.pluginId!=="scan_files")return;this._updateButtonVisibility(this.$renameBtn,e.noRename),this._updateButtonVisibility(this.$moveBtn,e.noMove),this._updateButtonVisibility(this.$downloadBtn,e.noDownload),this._updateButtonVisibility(this.$deleteBtn,e.noDelete)},_updateButton:function(e,t){var n=this.options,r=n.selectionUiModel.getSelectedItemModels(),i=!1,s=n.appApi.connectorsApi;i=s.isActionRestrictedOnItems(r,t),i&&(e.addClass("disabled").attr("disabled","disabled"),e.children().removeClass("theme-hyperlink").addClass("theme-disabled-text"))},_updateButtonVisibility:function(e,t){t?e.hide():e.show()},_logNumSelectedItems:function(){var e=this.options,t=e.appApi.siteCatalystApi,n=e.selectionUiModel,i=n.getNumSelectedFiles(),o=n.getNumSelectedFolders(),u=this._getParentScContext(),a=[];i>0&&(this.options.pluginId==="scan_files"?(a=r.addToArray(a,u),a=r.addToArray(a,s.NUM_FILES_CHECKED),a=r.addToArray(a,s.getCountCode(i)),e.appApi.siteCatalystApi.logScEvent(a)):t.logScEvent([u,s.NUM_FOLDERS_CHECKED,s.getCountCode(i)])),o>0&&(this.options.pluginId==="scan_files"?(a=r.addToArray(a,u),a=r.addToArray(a,s.NUM_FILES_CHECKED),a=r.addToArray(a,s.getCountCode(o)),e.appApi.siteCatalystApi.logScEvent(a)):t.logScEvent([u,s.NUM_FOLDERS_CHECKED,s.getCountCode(o)]))},_getSiteCatalystContext:function(){return s.ACTION_BAR},_renderChildViews:function(){var t=this.options;this._renderChildView("_selectionActionsPluginsView",e.SelectionActionsPluginsView,this.$selectionActionsPlugins),r.isCEF()&&t.appApi.rnaApi.done(_.bind(function(n){n.stApi.isSendTrackAvailable()&&!t.noShare&&this._renderChildView("_selectionActionSendMenuView",e.SelectionActionSendMenuView,this.$selectionActionSendMenuView)},this))},_onClick:function(e){var t=this.options;e.target===this.$el.get(0)&&!t.collectionsUiModel.get("checkbox")&&t.appApi.selectionApi.clearSelection()},_onCheckboxClick:function(){this._logSiteCatalystEvent([s.CANCEL,s.CLICKED]),this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION)},_onDeleteClick:function(t){if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([s.DELETE,s.CLICKED]),this._triggerViewEvent(e.ViewEvents.DELETE,{parentView:this,scContext:this._getFullScContext()})},_onOpenClick:function(t){var n=this.options;if($(t.currentTarget).hasClass("disabled"))return;this.options.pluginId==="scan_files"&&this._logSiteCatalystEvent([s.SCAN_DOC_OPEN,s.CLICKED]),n.selectionUiModel.getNumSelectedItems()>0&&this._triggerViewEvent(e.ViewEvents.OPEN_SELECTED_COLLECTION_ITEMS)},_onSaveAsClick:function(t){var n=this.options;if($(t.currentTarget).hasClass("disabled"))return;n.selectionUiModel.getNumSelectedItems()>0&&this._triggerViewEvent(e.ViewEvents.SAVEAS_SELECTED_COLLECTION_ITEMS)},_onRenameClick:function(t){var n=this.options,r=n.selectionUiModel.getSingleSelectedItemModel(),i;if(!r||$(t.currentTarget).hasClass("disabled"))return;i=r.get("name"),this._logNumSelectedItems(),this._logSiteCatalystEvent([s.RENAME,s.CLICKED]),this._triggerViewEvent(e.ViewEvents.RENAME,{id:r.get("id"),object_type:r.get("object_type"),name:i,existingName:i,parentView:this,scContext:this._getFullScContext()})},_onMoveClick:function(t){if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([s.MOVE,s.CLICKED]),this._triggerViewEvent(e.ViewEvents.MOVE,{parentView:this,scContext:this._getFullScContext()})},_onDownloadClick:function(t){var n=this.options,r=n.selectionUiModel,i,o,u;if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([s.DOWNLOAD,s.CLICKED]),u=r.getSelectedItemModels(),i=r.getSingleSelectedItemModel(),i||(u=_.filter(u,function(e){return!e.isForm()}),u.length===1&&(i=u[0])),i&&i.isFile()?this._triggerViewEvent(e.ViewEvents.DOWNLOAD,{id:i.id,scContext:this._getFullScContext(),numForms:r.getNumSelectedForms(),itemModel:i}):(o=_.pluck(u,"id").join(";"),this._triggerViewEvent(e.ViewEvents.DOWNLOAD_ZIP,{id_list:o,scContext:this._getFullScContext(),numForms:r.getNumSelectedForms(),itemModel:u}))},_onShareClick:function(t){var n=this.options,i=n.appApi,o="send",u;if($(t.currentTarget).hasClass("disabled"))return;this._logNumSelectedItems(),this._logSiteCatalystEvent([s.SHARE,s.CLICKED]);if(r.isCEF()){this._consumeEvent(t),i.rnaApi.done(_.bind(function(t){t.stApi.isSendTrackAvailable()&&!n.noShare?this._selectionActionSendMenuView.isMenuOpen()?this.close():this._selectionActionSendMenuView.open(undefined,_.extend({},{left:this.$selectionActions.position().left+this.$shareBtn.position().left,top:this.$selectionActions.position().top+this.$shareBtn.position().top})):(this._logSiteCatalystEvent([s.ATTACH_TO_EMAIL,s.CLICKED]),this._triggerViewEvent(e.ViewEvents.SELECTION_ACTION_ATTACH_TO_EMAIL))},this));return}if(e.Features.isFeatureEnabled("share_ui_2")){i.routerApi.navigate(o,{trigger:!0});return}u=n.selectionUiModel.get("selected_item_models"),this._triggerViewEvent(e.ViewEvents.SHOW_PUBLIC_SHARE_DLG,{models:u,parentView:this,scContext:this._getFullScContext()})},_repositionSendMenu:function(){var e=this.options,t=e.appApi;r.isCEF()&&t.rnaApi.done(_.bind(function(t){t.stApi.isSendTrackAvailable()&&!e.noShare&&this._selectionActionSendMenuView.isMenuOpen()&&this._selectionActionSendMenuView.reposition(this.$selectionActions.position().left+this.$shareBtn.position().left)},this))},_onKeyDown:function(e){var t=this.$el,n,r=e.which,i=r===37,s=!1;if(!u.descendantHasFocus(t))return s;switch(r){case 13:s=!0,$(e.target).click();break;case 37:case 39:n=u.getNextFocusableDescendant(t,i,!0)}return n&&n.length===1&&(s=!0,n.focus()),s},_onFocusIn:function(e){var t=$(e.target);this.$(":focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0)},_addUiModelEventListeners:function(){this.options.selectionUiModel.on("change:selected_item_models",this._onSelectedItemModelsChange)},_onSelectedItemModelsChange:function(){var e=this.options,t=e.appApi,n=this.$el;if(t.usersMeApi.isUserInCohort("bh-home20","enabled"))return;if(!e.collectionUiModel.get("is_active")||e.noSelectionActions||t.acrobatApi.isInAcrobat())return;e.selectionUiModel.getNumSelectedItems()>0?(n.hasClass("open")||(this._logSiteCatalystEvent(s.SHOWN),n.addClass("open").removeAttr("aria-hidden")),this.render(),r.isIE8()&&_.defer(this.render)):n.removeClass("open").attr("aria-hidden","true")},_removeLastSeparator:function(e){var t=e.length-1,n,r,i=0,s;for(;t>=0;t--)n=e.eq(t),!i&&u.isElementDisplayed(n)?(r=n.find("div"),r.hasClass("delete")||r.addClass("delete"),s=n,i=1):(r=n.find("div"),r.hasClass("delete")&&r.removeClass("delete"));return s}})}),define("core/dev/templates/collection-template",[],function(){return'<div role="toolbar" class="selection-actions ui-theme theme-container"></div><div role="grid"     aria-labelledby="<%= pluginSelectorId %>                      <%= folderPathId %>                      <%= searchResultsSummaryId %>"     aria-multiselectable="true">    <div role="row" class="collection-header unselectable ui-theme theme-container theme-border"></div>    <div role="presentation" class="collection-items with-header">    </div></div>'}),define("core/dev/views/collection-view",["core/ac-core","core/templates/collection-template","core/utils/util","core/utils/view-util","core/views/view","core/views/collection-header-view","core/views/selection-actions-view","core/views/collection-items-view"],function(e,t,n,r){return e.CollectionView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addCollectionEventListeners(),this._addUiModelEventListeners()},render:function(){var n=this.$el,i,s=this.options,o=s.appApi.pluginsApi,u=s.pluginId;return s.collectionUiModel.get("is_active")?(e.View.prototype.render.call(this),r.isElementEmpty(n)&&(n.html(_.template(t)({folderPathId:this._getFolderPathId(),searchResultsSummaryId:this._getSearchResultsSummaryId(),pluginSelectorId:o.getPluginSelectorId(u)})),this._initWrappers(),this._setCollectionItemsTabIndex()),i=this.$items,s.pluginId==="scan_files"?(s.collectionsUiModel.get("view")||s.collectionsUiModel.set("view","thumbnail"),s.collectionsUiModel.get("view")===e.CollectionsUiModel.VIEW_LIST?(n.removeClass("collection-thumb-view"),n.addClass("collection-list-view"),i.addClass("with-header")):(s.collectionsUiModel.set("view","thumbnail"),n.removeClass("collection-list-view"),n.addClass("collection-thumb-view"),s.selectionUiModel.getNumSelectedItems()>0&&!s.noSelectionActions?i.addClass("with-header"):i.removeClass("with-header"))):(s.collectionsUiModel.get("view")||s.collectionsUiModel.set("view","list"),s.collectionsUiModel.get("view")===e.CollectionsUiModel.VIEW_THUMBNAIL?(n.removeClass("collection-list-view"),n.addClass("collection-thumb-view"),s.selectionUiModel.getNumSelectedItems()>0&&!s.noSelectionActions?i.addClass("with-header"):i.removeClass("with-header")):(n.removeClass("collection-thumb-view"),n.addClass("collection-list-view"),i.addClass("with-header"))),this._renderChildViews(),_.delay(this._hideOrShowHeaderCheckbox,s.collectionsUiModel.get("data_render_delay")),this):this},_initWrappers:function(){this.$header=this.$(".collection-header"),this.$selectionActions=this.$(".selection-actions"),this.$items=this.$(".collection-items")},_setCollectionItemsTabIndex:function(){n.isFirefox()&&this.$items.attr("tabindex","-1")},_renderChildViews:function(){this._renderItemsView(),this._renderHeaderView(),this._renderSelectionActionsView()},_renderItemsView:function(){this._renderChildView("_itemsView",e.CollectionItemsView,this.$items,{collectionView:this})},_renderHeaderView:function(){this._renderChildView("_headerView",e.CollectionHeaderView,this.$header,{collectionItemsView:this._itemsView})},_getIdOfSiblingBySelector:function(e){var t=this.$el,n=t.parent().find("> "+e+"[id]"),r="";return n.length&&(r=n.attr("id")),r},_getFolderPathId:function(){var e=".folder-navigation > .folder-path";return this._getIdOfSiblingBySelector(e)},_getSearchResultsSummaryId:function(){var e=".files-search-results-summary";return this._getIdOfSiblingBySelector(e)},_renderSelectionActionsView:function(){this._renderChildView("_selectionActionsView",e.SelectionActionsView,this.$selectionActions)},_onKeyDown:function(e){var t=!1;switch(e.which){case 38:r.descendantHasFocus(this.$items)&&(this.setFocusToSelectionActionsView()||this.setFocusToHeaderView(!0),t=!0);break;case 40:if(r.descendantHasFocus(this.$header)||r.descendantHasFocus(this.$selectionActions))this.setFocusToCollectionItemsView(),t=!0}return t&&this._consumeEvent(e),t},_setFocusToChildView:function(e,t){var n=t?":checkbox:focusable":":tabbable:first",r=e.find(n);return t&&r.length===0&&(r=e.find(":focusable:first")),r.length?(r.focus(),!0):!1},setFocusToHeaderView:function(e){var t=this._setFocusToChildView(this.$header,e);return t},setFocusToSelectionActionsView:function(e){var t=this._setFocusToChildView(this.$selectionActions,e);return t},setFocusToCollectionItemsView:function(){var e=this._setFocusToChildView(this.$items);return e},_correctFocusOnSelectionChange:function(t,n){var r=this.$header,i=r.find(":checkbox"),s=this.$selectionActions,o=!1,u=!1;t&&(o=t.is(r),u=t.is(s)),this._hideOrShowHeaderCheckbox(),o&&n.selectType===e.SelectionUiModel.SELECT_ALL?this.setFocusToSelectionActionsView(!0):u&&(i.is(":focusable")?this.setFocusToHeaderView(!0):this.setFocusToCollectionItemsView())},_hideOrShowHeaderCheckbox:function(){var e=this.$header.find(":checkbox"),t=this.$selectionActions,n=this.options;t.hasClass("open")||n.appApi.acrobatApi.isInAcrobat()||!n.selectionUiModel.get("multiple_selection")||!n.collectionsUiModel.get("checkbox")?e.hide():e.show()},_addCollectionEventListeners:function(){var e=this.options,t;t=_.debounce(this.render,e.collectionsUiModel.get("data_render_delay")),this.collection.on("add change remove",t).on("reset",function(){e.collectionUiModel.clearItemUiModels(),t()})},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.collectionsUiModel,"change:view",this._onViewChange).listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange)},_onViewEvent:function(t,n){switch(t){case e.ViewEvents.SELECT_ITEM:this._onSelectItem(n);break;case e.ViewEvents.CLEAR_SELECTION:this._onClearSelection(n)}e.View.prototype._onViewEvent.call(this,t,n)},_onViewChange:function(){r.isElementHidden(this.$el)||this.updateChildViewSizes()},_onSelectedItemModelsChange:function(){this.render()},_onSelectItem:function(e){var t=r.descendantHasFocus(this.$header),n=r.descendantHasFocus(this.$selectionActions),i;t?i=this.$header:n&&(i=this.$selectionActions),_.delay(this._correctFocusOnSelectionChange,this.options.collectionsUiModel.get("scroll_render_delay"),i,e)},_onClearSelection:function(e){this._onSelectItem(e)}}),e.CollectionView}),define("core/dev/templates/hover-preview-template",[],function(){return'<img class="hover-preview-page3 hover-preview-page" alt=""/><img class="hover-preview-page2 hover-preview-page" alt=""/><div class="hover-preview-page1 hover-preview-page">    <img class="hover-preview-image" alt=""/>    <div class="hover-preview-not-available">        <%= previewNotAvailable %>        <span class="hover-preview-not-available-desc"            ><%= previewNotAvailableDesc %></span>    </div>    <div class="hover-preview-hud"></div></div>'}),define("core/dev/views/hover-preview-view",["core/ac-core","core/templates/hover-preview-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/sc-analytics","core/views/view","core/views/hover-preview-hud-view"],function(e,t,n,r,i){e.HoverPreviewView=e.View.extend({events:{click:"_onClick","click .preview-download":"_onDownloadClick","mouseenter .hover-preview-page":"_onPageMouseEnter","mouseleave .hover-preview-page":"_onPageMouseLeave"},initialize:function(){e.View.prototype.initialize.call(this),this._addAppApiCallbacks(),this._addUiModelEventListeners()},render:function(){e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(_.template(t)({previewNotAvailable:n.PREVIEW_NOT_AVAILABLE,previewNotAvailableDesc:n.PREVIEW_NOT_AVAILABLE_DESC})),this._initWrappers(),this._renderChildViews())},_initWrappers:function(){this.$previewPage1=this.$(".hover-preview-page1"),this.$previewImage=this.$(".hover-preview-image"),this.$noPreview=this.$(".hover-preview-not-available"),this.$previewPage2=this.$(".hover-preview-page2"),this.$previewPage3=this.$(".hover-preview-page3"),this.$previewHud=this.$(".hover-preview-hud")},_renderChildViews:function(){this._renderChildView("_hoverPreviewHudView",e.HoverPreviewHudView,this.$previewHud)},_getItemView:function(){return this.options.hoverPreviewUiModel.get("item_view")},_preview:function(){var t=this.options,n=t.appApi,r=t.hoverPreviewUiModel,i;if(n.previewApi.isActive())return;if(!r.get("enabled"))return;if(!n.sessionApi.isSignedIn())return;i=r.get("item_view");if(!i)return;r.init(),this._loadPreview(),this._triggerViewEvent(e.ViewEvents.GET_HOVER_PREVIEW_METADATA,{id:i.model.get("id"),modal:!1})},_loadPreview:function(){var e=this._getItemView(),t=this.$previewImage;if(!e)return;this._isImageLoaded=undefined,t.off(".hoverPreviewView").on("load.hoverPreviewView",_.bind(function(){this._isImageLoaded=!0,this._fadeInPreview(!0,e,!0),this._logPreviewShown()},this)).on("error.hoverPreviewView",_.bind(function(){this._isImageLoaded=!1,this._fadeInPreview(!0,e,!1)},this)),t.attr("src",e.model.getRenditionUrl("tile",this.options.hoverPreviewUiModel.get("current_page")))},_updatePreview:function(){var e=this._getItemView();if(!e)return;this._isImageLoaded!==undefined&&this._fadeInPreview(!0,e,this._isImageLoaded)},_close:function(){this.$previewImage.off(".hoverPreviewView"),this._fadeInPreview(!1)},_logPreviewShown:function(){this.options.appApi.siteCatalystApi.logScEvent([i.FILE_LIST,i.SMALL_PREVIEW,i.SHOWN])},_fadeInPreview:function(e,t,n){this.$el.stop(!0,!1),e?(this.$el.show(),n?(this._showImagePages(!0),this._sizeImagePages()):(this._showImagePages(!1),this._sizeNoPreview()),this._positionPreview(t),this.$el.animate({opacity:1})):this.$previewImage.attr("src")&&this.$el.animate({opacity:0},_.bind(function(){this.$previewImage.attr("src",undefined),this.$el.hide()},this))},_showImagePages:function(e){var t,n;t=e?"block":"none",n=this.options.hoverPreviewUiModel.get("page_count")||0,this.$noPreview.css("display",e?"none":"block"),this.$previewHud.css("display",e?"block":"none"),this.$previewImage.css("display",t),this.$previewPage2.css("display",n>1?t:"none"),this.$previewPage3.css("display",n>2?t:"none"),e?(this.$previewImage.fadeIn(),this.$previewImage.on("dragstart",function(e){e.preventDefault()})):this.delegateEvents()},_sizeImagePages:function(){var e,t;e=this.$previewImage.width(),t=this.$previewImage.height(),this.$previewPage1.width(e).height(t),this.$previewPage2.width(e).height(t),this.$previewPage3.width(e).height(t),this.options.hoverPreviewUiModel.set("width",e)},_sizeNoPreview:function(){var e=this.$noPreview.width()+"px",t=this.$noPreview.height()+"px";this.$previewPage1.css("width",e).css("height",t);var n=r.getTextSize(this.$noPreview,!0);this.$noPreview.css("margin-top",-n.height/2)},_positionPreview:function(e){var t;this.$el.css("top",this._getPreviewTop(e)),this.options.collectionsUiModel.isListView()?t=this._getListPreviewLeft(e):t=this._getThumbnailPreviewLeft(e),this.$el.css("left",t)},_getListPreviewLeft:function(e){var t,n,r,i,s;return t=e.getViewElement(),n=t.width(),r=n/3,i=4,s=r+this.$previewPage1.width()+this._getPreviewExtraWidth()+i-n,s>0&&(r-=s),r+t.offset().left-this.$el.offsetParent().offset().left},_getThumbnailPreviewLeft:function(e){var t,n,r,i,s,o,u,a;return t=e.getViewElement(),n=this.$previewPage1.width(),r=t.offset().left+(t.width()-n)/2,s=4,o=(this._getPreviewExtraWidth()+s)/2,i=this.$el.offsetParent().offset().left,u=r-i,u<o?r=o:(a=r+n+o-$(window).width(),a>0?r=Math.max(r-a,o):r+=o,r-=i),r},_getPreviewTop:function(e){var t,n,r,i,s,o,u,a;return t=this.$el.offsetParent().offset(),n=e.getViewElement(),r=n.offset(),i=this.$previewPage1.height(),s=r.top-1-(i-n.height())/2-t.top,o=4,u=(this._getPreviewExtraHeight()+o)/2,s<u?s=u:(a=s+t.top+i+u*2-$(window).height(),a>0&&(s=Math.max(s-a,u))),s},_getPreviewExtraSize:function(e){return e*Math.sin(2*Math.PI/180)},_getPreviewExtraWidth:function(){return this._getPreviewExtraSize(this.$previewPage1.height())},_getPreviewExtraHeight:function(){return this._getPreviewExtraSize(this.$previewPage1.width())},_onClick:function(){this._triggerViewEvent(e.ViewEvents.OPEN_COLLECTION_ITEM,{itemView:this._getItemView()})},_onDownloadClick:function(t){var n=this.options.hoverPreviewUiModel,r=n.getItemId();this._consumeEvent(t),n.close(),_.defer(_.bind(function(){this._triggerViewEvent(e.ViewEvents.DOWNLOAD,{id:r})},this))},_onPageMouseEnter:function(){this._stopPageMouseLeaveTimer()},_onPageMouseLeave:function(e){var t=$(e.relatedTarget),n;t.closest(".hover-preview-page").length===0&&(n=this._getItemView(),(!n||t.closest(n.getViewElement()).length===0)&&this._startPageMouseLeaveTimer())},_startPageMouseLeaveTimer:function(){var e=this.options.hoverPreviewUiModel;this._stopPageMouseLeaveTimer(),this._pageMouseLeaveTimerId=setTimeout(_.bind(function(){this._pageMouseLeaveTimerId=undefined,e.close()},this),e.get("preview_leave_delay"))},_stopPageMouseLeaveTimer:function(){var e=this._pageMouseLeaveTimerId;e&&(clearTimeout(e),this._pageMouseLeaveTimerId=undefined)},_addAppApiCallbacks:function(){this.options.appApi.previewApi.addItemModelChangeCallback(this._onItemModelChange)},_addUiModelEventListeners:function(){var e=this.options;e.hoverPreviewUiModel.on("change:item_view",this._onItemViewChange).on("change:page_count",this._onPageCountChange).on("change:current_page",this._onCurrentPageChange),e.dialogsUiModel.on("change:count",this._onDialogsCountChange)},_onItemViewChange:function(e,t){t?this._preview():this._close()},_onPageCountChange:function(){if(!this._getItemView())return;this._updatePreview()},_onCurrentPageChange:function(){if(!this._getItemView())return;this.$previewImage&&this.$previewImage.fadeOut(_.bind(function(){this._loadPreview()},this))},_onItemModelChange:function(){this._close()},_onDialogsCountChange:function(e,t){t>0&&this._close()}})}),define("core/dev/templates/bar-graph-template",[],function(){return'<div class="bar-graph bar-graph-left"></div><div class="bar-graph bar-graph-right"></div><div class="bar-graph bar-graph-legend"></div>'}),define("core/dev/views/bar-graph-view",["core/ac-core","core/templates/bar-graph-template","core/views/view"],function(e,t){e.BarGraphView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){var t=this.options,n;return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template()),this._initWrappers()),n=this.$el.width(),this._setBarWidths(),t.renderCallback(this.$left,this.$right,this.$legend),n!==this.$el.width()&&this._setBarWidths(),this},_initWrappers:function(){this.$left=$(".bar-graph-left"),this.$right=$(".bar-graph-right"),this.$legend=$(".bar-graph-legend")},_setBarWidths:function(){var e,t,n,r,i,s=this.options.barGraphUiModel;i=this.$el.width(),e=s.get("current_value"),t=s.get("total_value"),n=e/t*i,r=(t-e)/t*i,this.$left.width(n),this.$right.width(r),this.$right.css("left",n+3*parseInt(this.$left.css("borderWidth"),10)+parseInt(this.$el.css("paddingLeft"),10))}})}),define("core/dev/templates/sign-out-template",[],function(){return'<form id="sign-out-form" action="<%= url %>" method="post">    <input name="csrftoken" type="hidden"           value="<%= csrfToken %>"/></form>'}),define("core/dev/templates/account-menu-item-template",[],function(){return'<button class="account-menu-item plugin-selector"     role="menuitem" tabindex="-1">    <%= label %></button>'}),define("core/dev/templates/toolbar-item-template",[],function(){return'<button class="toolbar-item plugin-selector"           aria-pressed="false">    <div class="toolbar-item-label"><%= label %></div></button>'}),define("core/dev/nls-cef/ui-strings",{root:!0,"ar-ae":!0,"bg-bg":!0,"ca-es":!0,"cs-cz":!0,"da-dk":!0,"de-de":!0,"en-ae":!0,"en-gb":!0,"en-il":!0,"es-es":!0,"eu-es":!0,"fi-fi":!0,"fr-fr":!0,"fr-ma":!0,"he-il":!0,"hr-hr":!0,"hu-hu":!0,"it-it":!0,"ja-jp":!0,"ko-kr":!0,"nb-no":!0,"nl-nl":!0,"pl-pl":!0,"pt-br":!0,"ro-ro":!0,"ru-ru":!0,"sk-sk":!0,"sl-si":!0,"sl-sl":!0,"sv-se":!0,"tr-tr":!0,"uk-ua":!0,"zh-cn":!0,"zh-tw":!0}),define("core/dev/nls-cef/root/ui-strings",{ACTIONS:"Actions",ADDED:"Added",ADD_ACCOUNT:"Add Account...",BACK:"Back",CLOSE:"Close",CONTINUE:"Continue",EXTENSION:"(.<%- ext %>)",FILES:"Files",MODIFIED:"Modified",NAME:"Name",OR:"or",REMOVE:"Remove",SELECT_FILES:"Select Files",SELECT_FILE:"Select File",SIZE:"Size",N_ITEMS_CLICK_TO_VIEW:"<%= num %> items. Click to view.",CREATED_DATE:"Date Added",MODIFIED_DATE:"Date Modified",VIEWED_DATE:"Date Viewed",DATE_HH_MM_AMPM:"<%= hour %><%= sep %><%= minute %> <%= amPm %>",DATE_YESTERDAY:"Yesterday",DATE_MM_DD_YYYY:"<%= month %>/<%= day %>/<%= year %>",YYYY:"YYYY",AM:"AM",PM:"PM",HH:"H",HH_MM_SEPARATOR:":",MM:"M",DD:"D",ANIMATION:"Animation",AUDIO:"Audio",CALENDAR:"Calendar",CASCADING_STYLE_SHEET:"Cascading Style Sheet",CERTIFICATE:"Certificate",FONT:"Font",IMAGE:"Image",PLAIN_TEXT:"Plain Text",PRESENTATION:"Presentation",RICH_TEXT:"Rich Text",SPREADSHEET:"Spreadsheet",STYLE_SHEET:"Style Sheet",TEXT:"Text",UNKNOWN:"Unknown",VIDEO:"Video",KB:"<%= num %> KB",MB:"<%= num %> MB",GB:"<%= num %> GB",DECIMAL_SEPARATOR:".",THOUSANDS_SEPARATOR:",",FILE_NAME:"File Name contains",FILE_TYPE:"File Type is",FILE_CONTENT:"File contains",DATE_LAST_MODIFIED:"Date Last Modified is",DATE_LAST_VIEWED:"Date Last Viewed is",DATE_ADDED:"Date Added is",FILE_ADDED_BY:"File Added by",MIN_SIZE:"Min Size",MAX_SIZE:"Max Size",FILTER_DISPLAY_VALUE:"<%= field %>: <%= value %>",CREATE_PDF:"Create PDF",EXPORT_PDF:"Export PDF",COMBINE_PDF:"Combine PDF",FILL_SIGN:"Fill & Sign",ADOBE_ACROBAT:"Adobe Acrobat",ADOBE_READER_MOBILE:"Adobe Reader Mobile",ADOBE_READER:"Adobe Reader",TODAY:"Today",YESTERDAY:"Yesterday",WITHIN_LAST_WEEK:"Within Last Week",WITHIN_LAST_MONTH:"Within Last Month",ONE_TO_TWO_MONTHS_AGO:"1-2 Months Ago",TWO_TO_THREE_MONTHS_AGO:"2-3 Months Ago",THREE_TO_FOUR_MONTHS_AGO:"3-4 Months Ago",FOUR_TO_FIVE_MONTHS_AGO:"4-5 Months Ago",FIVE_TO_SIX_MONTHS_AGO:"5-6 Months Ago",SIX_TO_TWELVE_MONTHS_AGO:"6-12 Months Ago",MORE_THAN_ONE_YEAR_AGO:"1+ Year Ago",OK:"OK",CANCEL:"Cancel",CONFIRM_DELETE_TITLE:"Delete",CONFIRM_DELETE_MSG_ONE_ITEM:"Are you sure you want to delete this item?",CONFIRM_DELETE_MSG_N_ITEMS:"Are you sure you want to delete these <%= numItems %> items?",DOWNLOAD:"Download",DOWNLOAD_FILE:"Download File",DOWNLOAD_FILES:"Download Files",DOWNLOAD_FOLDER:"Download Folder",RENAME:"Rename",RENAME_ELLIPSIS:"Rename...",RENAME_FILE:"Rename File",RENAME_FOLDER:"Rename Folder",MOVE_FILE:"Move File",MOVE_FILES:"Move Files",MOVE_FOLDER:"Move Folder",MOVE_FOLDERS:"Move Folders",MOVE_FILE_AND_FOLDER:"Move File and Folder",MOVE_FILES_AND_FOLDER:"Move Files and Folder",MOVE_FILE_AND_FOLDERS:"Move File and Folders",MOVE_FILES_AND_FOLDERS:"Move Files and Folders",SHARE:"Share",SHARE_ELLIPSIS:"Share...",SHARE_FILE:"Share File",SHARE_FILES:"Share Files",SEND:"Send",SEND_FILE:"Send File",SEND_FILES:"Send Files",DELETE:"Delete",HOME:"Home",ENTER_KEYWORD:"Search",SEARCH:"Search",SHARED:"Shared",PREVIEW_NOT_AVAILABLE:"Cannot Preview Filetype",PREVIEW_NOT_AVAILABLE_DESC:"Please <a class='preview-download'>download</a> the file for viewing.",RENAME_NAME_IN_USE:'The <%= existingType %> named "<%= name %>" already exists in this location. Please choose another <%= renamedType %> name.',RENAME_ILLEGAL_NAME:"The name contains illegal characters or has too many characters. Please choose another <%= renamedType %> name.",MOVE:"Move",MOVE_FILE_TO:"Move File To...",MOVE_FILES_TO:"Move Files To...",MOVE_FOLDER_TO:"Move Folder To...",MOVE_FOLDERS_TO:"Move Folders To...",MOVE_FILE_AND_FOLDER_TO:"Move File and Folder To...",MOVE_FILES_AND_FOLDER_TO:"Move Files and Folder To...",MOVE_FILE_AND_FOLDERS_TO:"Move File and Folders To...",MOVE_FILES_AND_FOLDERS_TO:"Move Files and Folders To...",DUPLICATE_NAME_TITLE:"Duplicate <%= type %> Name",DUPLICATE_NAME_PROMPT:'A <%= type %> named "<%- name %>" already exists at this location. What would you like to do?',DUPLICATE_NAME_REPLACE_EXISTING:"Replace the existing <%= type %>",DUPLICATE_NAME_RENAME_UPLOADED:"Rename the uploaded <%= type %>",DUPLICATE_NAME_DELETE_MOVED:"Delete the moved <%= type %>",DUPLICATE_NAME_RENAME_MOVED:"Rename the moved <%= type %>",FILE_INITIAL_CAP:"File",FILE:"file",FOLDER_INITIAL_CAP:"Folder",FOLDER:"folder",REPORT_ABUSE:"Report Abuse",REPORT_ABUSE_TITLE:"Report Abuse",REPORT_ABUSE_CONTENT_LABEL:"Content",REPORT_ABUSE_TITLE_LABEL:"Title",REPORT_ABUSE_DEFAMATION_LABEL:"Defamation",REPORT_ABUSE_OFFENSIVE_LABEL:"Offensive Content",REPORT_ABUSE_EXPLICIT_LABEL:"Sexually Explicit Content",REPORT_ABUSE_TRADEMARK_LABEL:"Trademark Infringement",REPORT_ABUSE_RACIST_LABEL:"Racist or Hate Content",REPORT_ABUSE_OTHER_LABEL:"Other",REPORT_ABUSE_BLURB:"If you feel that this content violates the Adobe <a class='abuse-dialog-link' href='http://www.adobe.com/go/gfooter_terms_of_use' target='_blank'>Terms of Use</a>, you may report this content by filling out this quick form.",REPORT_ABUSE_EMAIL_PROMPT:"Your Email",REPORT_ABUSE_NAME_PROMPT:"Your Name",REPORT_ABUSE_TARGET_TYPE_PROMPT:"What are you reporting?",REPORT_ABUSE_REASON_PROMPT:"Why are you reporting this content?",REPORT_ABUSE_DESCRIPTION_PROMPT:"Please provide a description of your concern.",REPORT_ABUSE_COPYRIGHT_REPORT:"To report a Copyright Violation, please follow Section 17 in the <a class='abuse-dialog-link' href='http://www.adobe.com/go/gfooter_terms_of_use' target='_blank'>Terms of Use</a>.",REPORT_ABUSE_REPORT_BUTTON:"Report Abuse",REPORT_ABUSE_EMAIL_ERROR:"You must enter a valid email address.",LANGUAGE_CHANGE:"<%= lang %> (Change)",CHOOSE_LANGUAGE:"Choose Your Language",QUOTA_WARNING_DLG_TITLE_RUNNING_OUT:"File Storage Running Out",QUOTA_WARNING_DLG_MSG_RUNNING_OUT:"You are currently using <%= using %> of your <%= allotment %> allotment and will soon run out of storage.",QUOTA_WARNING_DLG_TITLE_EXCEEDED:"File Storage Exceeded",QUOTA_WARNING_DLG_MSG_LOGIN_EXCEEDED:"Your total storage of <%= using %> exceeds the maximum <%= allotment %> allowed with your new subscription.",QUOTA_WARNING_DLG_MSG_UPLOAD_EXCEEDED:"The uploaded file could not be saved because it would exceed your quota allotment of <%= allotment %>.",QUOTA_WARNING_DLG_MSG_YOU_MAY_VIEW:"You may view and download all existing files, but to save additional files you must upgrade your account.",QUOTA_WARNING_DLG_MSG_YOU_WILL_NEED:"You will need to delete some files to free up some additional space.",QUOTA_WARNING_DLG_MSG_UPGRADE:"Upgrade your account for more storage and additional features.",LEARN_MORE:"Learn More",UPGRADE:"Upgrade",ERROR:"Error",MISC_ERROR_ACROBAT_FILE_OPEN_MAX_TITLE:"File Open Maximum Exceeded",MISC_ERROR_ACROBAT_FILE_OPEN_MAX_MSG:"You can open at most 50 files at a time.",HTTP_STATUS_DEFAULT_TITLE:"Could not complete your request",HTTP_STATUS_DEFAULT_MSG:"An error occurred while trying to complete your request, and it could not be completed.",HTTP_STATUS_DEFAULT_MSG_CEF:"An error occurred while connecting to the service. Please try again later.",HTTP_STATUS_400_TITLE:"Could not complete your request (400)",HTTP_STATUS_400_TITLE_CEF:"Could not complete your request",HTTP_STATUS_400_MSG:"An error occurred while trying to complete your request, and it could not be completed.",HTTP_STATUS_401_TITLE:"You have been logged out (401)",HTTP_STATUS_401_TITLE_CEF:"You have been logged out",HTTP_STATUS_401_MSG:'Your session has expired and you have been logged out due to inactivity. Click "Sign In" below to log back in.',HTTP_STATUS_401_MSG_CEF:"An error occurred. Please try signing out, and signing in again",HTTP_STATUS_403_QUOTA_TITLE:"Storage Quota Exceeded (403)",HTTP_STATUS_403_QUOTA_TITLE_CEF:"Storage Quota Exceeded",HTTP_STATUS_403_QUOTA_MSG:"Your file could not be uploaded, as it would exceed your storage quota. You may want to delete some existing files to provide more space.",HTTP_STATUS_403_DEL_FOLDER_TITLE:"Cannot Delete Folder With Content (403)",HTTP_STATUS_403_DEL_FOLDER_TITLE_CEF:"Cannot Delete Folder With Content",HTTP_STATUS_403_DEL_FOLDER_MSG:"You may only delete empty folders. Please delete all contents before deleting the folder.",HTTP_STATUS_403_NO_SHARING_TITLE:"Sharing Disallowed (403)",HTTP_STATUS_403_NO_SHARING_TITLE_CEF:"Sharing Disallowed",HTTP_STATUS_403_NO_SHARING_MSG:"Your file could not be shared because it is an audio or video file.",HTTP_STATUS_403_VIRUS_TITLE:"Virus Detected (403)",HTTP_STATUS_403_VIRUS_TITLE_CEF:"Virus Detected",HTTP_STATUS_403_VIRUS_MSG:"Your file could not be uploaded because it contains a virus.",HTTP_STATUS_403_ENCRYPTION_TITLE:"Decryption failed (403)",HTTP_STATUS_403_ENCRYPTION_TITLE_CEF:"Decryption failed",HTTP_STATUS_403_ENCRYPTION_MSG:"There was an error accessing your content. Decryption failed. Contact your IT Administrator.",HTTP_STATUS_403_TITLE:"Forbidden (403)",HTTP_STATUS_403_TITLE_CEF:"Forbidden",HTTP_STATUS_403_MSG:"The operation could not be completed. Please try again later.",HTTP_STATUS_404_TITLE:"File Not Found (404)",HTTP_STATUS_404_TITLE_CEF:"File Not Found",HTTP_STATUS_404_MSG:"The file you are trying to access could not be found. The file may have been deleted or moved in another session.",HTTP_STATUS_405_TITLE:"Method Not Allowed (405)",HTTP_STATUS_405_TITLE_CEF:"Method Not Allowed",HTTP_STATUS_405_MSG:"Your request could not be completed, as the method is not allowed.",HTTP_STATUS_406_TITLE:"Browser Incompatibility",HTTP_STATUS_406_TITLE_CEF:"Type Not Supported",HTTP_STATUS_406_MSG:"Your browser is unable to communicate with this website. Please try a different browser. (Error 406: Type not supported).",HTTP_STATUS_415_TITLE:"Unsupported Media Type (415)",HTTP_STATUS_415_TITLE_CEF:"Unsupported Media Type",HTTP_STATUS_415_MSG:"Your request could not be completed, as the media type specified is not supported.",HTTP_STATUS_500_TITLE:"Internal Server Error (500)",HTTP_STATUS_500_TITLE_CEF:"Internal Server Error",HTTP_STATUS_500_MSG:"Your request could not be completed due to an internal server error.",HTTP_STATUS_501_TITLE:"Request not Implemented (501)",HTTP_STATUS_501_TITLE_CEF:"Request not Implemented",HTTP_STATUS_501_MSG:"The request you are trying to make is not yet implemented in the server.",HTTP_STATUS_503_TITLE:"Server Currently Unavailable (503)",HTTP_STATUS_503_TITLE_CEF:"Server Currently Unavailable",HTTP_STATUS_503_MSG:"The server could not reached, and may be down. Please try again later.",DOWNLOAD_FORM_TITLE:"Form File",DOWNLOAD_FORM_MESSAGE:"Your form file must be converted to PDF to be downloaded.",DOWNLOAD_FORMS_EXCLUDED_MESSAGE:"Your selection includes form files, which are not available for download. These files will be excluded. You can download PDF versions by selecting a single form file for download.",DOWNLOAD_FORMS_MESSAGE:"Form files are not available for download. You can download PDF versions by selecting a single form file for download.",SETTINGS:"Settings",DONE:"Done",FILE_LISTS:"File Lists",STORAGE:"Storage",DOCUMENT_CLOUD_FILES:"Document Cloud",ACROBAT_DOT_COM_FILES:"Document Cloud",DOWNLOAD_ALL:"Download All",NOTIFICATION_UPLOADING:"Uploading...",NOTIFICATION_CONVERTING:"Converting...",NOTIFICATION_CONVERSION_FAILURE:"Conversion Failure",NOTIFICATION_DOWNLOAD_FAILURE:"Download Failure",READY:"Ready",NOTIFICATION_WAITING:"Pending...",NOTIFICATION_DOWNLOADING:"Downloading...",NOTIFICATION_PROCESSING:"Processing...",NOTIFICATION_DOWNLOAD_ERROR:"An error occurred while downloading this file",NOTIFICATION_RETRY:"Retry",YES:"Yes",NO:"No",REPLACE_EXISTING_FILE_TITLE:"Replace existing file",REPLACE_EXISTING_FILE_MSG:"A file with this name already exists. Do you want to replace it?",OPEN:"Open",OPEN_FILE:"Open File",OPEN_FILES:"Open Files",OPEN_FOLDER:"Open Folder",SAVE_AS:"Save As",SAVE_AS_FILE:"Save As File",SAVE_AS_FILES:"Save As Zip",SAVED:"Saved",SHOW_IN_FOLDER:"Show in Folder",SEND:"Send",CONVERT_TO_PDF:"Convert to PDF",COMBINE:"Combine",BROWSE_FOLDER:"Browse...",CHOOSE_DIFFERENT_FOLDER:"Choose a Different Folder...",ATTACH_TO_EMAIL:"Attach to Email",SEND_AND_TRACK:"Send & Track",PUBLIC_ICON_TOOLTIP:"File shared with Adobe Send & Track",RNA_VERSION_DIALOG_TITLE:"An error occurred",RNA_VERSION_DIALOG_CONTENT:"Features in this area connect to the Adobe Document Cloud and must be updated to remain compatible with the service. To update to the latest version, choose Check for Updates from the Help menu or click the link below to continue your work in a web browser.",RNA_VERSION_DIALOG_LINK_TITLE:"Go to Document Cloud",EXPORTPDF_RHP_GOURL:"http://www.adobe.com/go/epdfrhprdr6_12_0_0",EXPORTPDF_GOURL:"http://www.adobe.com/go/epdfrdr6_12_0_0",CREATEPDF_RHP_GOURL:"http://www.adobe.com/go/cpdfrhprdr6_12_0_0",CREATEPDF_GOURL:"http://www.adobe.com/go/cpdfrdr2_12_0_0",MY_FILES_GOURL:"http://www.adobe.com/go/doccloudfilesrdr_12_0_0",FILLSIGN_GOURL:"http://www.adobe.com/go/fsrdr1_12_0_0",SEND_GOURL:"http://www.adobe.com/go/sendpluginrdr2_12_0_0",SENTFILES_GOURL:"http://www.adobe.com/go/sendpluginrdr3_12_0_0",MY_FILES_GOURL_ACRO:"http://www.adobe.com/go/doccloudfilesacro_12_0_0",FILLSIGN_GOURL_ACRO:"http://www.adobe.com/go/fsacro1_12_0_0",SEND_GOURL_ACRO:"http://www.adobe.com/go/sendpluginacro2_12_0_0",SENTFILES_GOURL_ACRO:"http://www.adobe.com/go/sendpluginacro3_12_0_0",SERVER_OUTAGE_DIALOG_TITLE:"An error occurred",SERVER_OUTAGE_DIALOG_CONTENT:"The service you are trying to reach is temporarily unavailable.  Please try again later."}),define("core/dev/all-modules",["core-unmapped/dev/constants/cef-constants","core-unmapped/dev/constants/odm-constants","core-unmapped/dev/utils/comment-util","core-unmapped/dev/utils/image-loader","core-unmapped/dev/utils/string-util","core-unmapped/dev/utils/date-util","core-unmapped/dev/utils/ipm-util","core-unmapped/dev/utils/http-util","core-unmapped/dev/utils/app-api-mgr","core-unmapped/dev/utils/num-util","core-unmapped/dev/utils/util","core-unmapped/dev/utils/router-util","core-unmapped/dev/utils/truncate","core-unmapped/dev/utils/ajax-util","core-unmapped/dev/utils/view-util","core-unmapped/dev/utils/css-util","core-unmapped/dev/utils/sc-analytics","core-unmapped/dev/utils/cookie-util","core-unmapped/dev/utils/event-util","core-unmapped/dev/utils/focus-util","core-unmapped/dev/utils/action-ids","core-unmapped/dev/utils/breadcrumbs","core-unmapped/dev/utils/crypto-util","core-unmapped/dev/utils/svg-loader","core-unmapped/dev/utils/file-types","core-unmapped/dev/nls/ui-strings","core-unmapped/dev/nls/root/ui-strings","core-unmapped/dev/ops/preview/getting-hover-preview-metadata-op","core-unmapped/dev/ops/preview/getting-rhp-preview-metadata-op","core-unmapped/dev/ops/preview/getting-rhp-folder-child-counts-op","core-unmapped/dev/ops/op-factory","core-unmapped/dev/ops/manipulation/deleting-item-op","core-unmapped/dev/ops/manipulation/deleting-form-op","core-unmapped/dev/ops/manipulation/renaming-item-op","core-unmapped/dev/ops/manipulation/setting-asset-metadata-op","core-unmapped/dev/ops/manipulation/moving-item-op","core-unmapped/dev/ops/manipulation/moving-items-op","core-unmapped/dev/ops/manipulation/deleting-existing-dup-op","core-unmapped/dev/ops/manipulation/deleting-selection-op","core-unmapped/dev/ops/manipulation/deleting-selection-if-confirmed-op","core-unmapped/dev/ops/manipulation/renaming-added-dup-op","core-unmapped/dev/ops/while-signed-in-op","core-unmapped/dev/ops/rna/listening-for-connector-events-op","core-unmapped/dev/ops/rna/selection-action-attach-to-email-op","core-unmapped/dev/ops/rna/apply-ui-theme-style-op","core-unmapped/dev/ops/rna/listening-for-file-download-progress-op","core-unmapped/dev/ops/rna/listening-for-file-upload-progress-op","core-unmapped/dev/ops/rna/downloading-zip-file-op","core-unmapped/dev/ops/rna/initializing-pdm-op","core-unmapped/dev/ops/rna/initializing-reader-op","core-unmapped/dev/ops/rna/creating-window-op","core-unmapped/dev/ops/rna/opening-doc-in-pdm-op","core-unmapped/dev/ops/rna/launch-footer-url-in-browser-op","core-unmapped/dev/ops/rna/uploading-file-op","core-unmapped/dev/ops/rna/opening-doc-in-reader-op","core-unmapped/dev/ops/rna/downloading-file-op","core-unmapped/dev/ops/rna/listening-for-actions-op","core-unmapped/dev/ops/rna/listening-for-stop-file-upload-op","core-unmapped/dev/ops/rna/save-as-file-op","core-unmapped/dev/ops/rna/selection-action-launch-send-track-app-op","core-unmapped/dev/ops/rna/initializing-cef-op","core-unmapped/dev/ops/downloading/downloading-zip-start-op","core-unmapped/dev/ops/downloading/downloading-form-op","core-unmapped/dev/ops/downloading/downloading-asset-op","core-unmapped/dev/ops/downloading/downloading-asset-if-exists-op","core-unmapped/dev/ops/downloading/downloading-zip-op","core-unmapped/dev/ops/notifications/getting-folder-notifications-op","core-unmapped/dev/ops/notifications/stopping-notifications-op","core-unmapped/dev/ops/notifications/enabling-folder-notifications-op","core-unmapped/dev/ops/notifications/creating-notifications-endpoints-op","core-unmapped/dev/ops/getting/getting-asset-metadata-op","core-unmapped/dev/ops/getting/getting-folder-items-op","core-unmapped/dev/ops/getting/getting-connectors-ui-helpers-op","core-unmapped/dev/ops/getting/getting-system-folder-metadata-op","core-unmapped/dev/ops/getting/getting-sso-uri-op","core-unmapped/dev/ops/getting/getting-base-cloud-uris-op","core-unmapped/dev/ops/getting/getting-site-catalyst-base-file-op","core-unmapped/dev/ops/getting/getting-download-ticket-op","core-unmapped/dev/ops/getting/getting-storage-quota-op","core-unmapped/dev/ops/getting/getting-users-me-cohorts-op","core-unmapped/dev/ops/getting/getting-sharing-info-op","core-unmapped/dev/ops/getting/getting-folder-metadata-op","core-unmapped/dev/ops/getting/getting-folder-op","core-unmapped/dev/ops/getting/getting-folder-path-op","core-unmapped/dev/ops/getting/getting-system-folders-op","core-unmapped/dev/ops/getting/getting-root-op","core-unmapped/dev/ops/getting/getting-common-limits-op","core-unmapped/dev/ops/getting/getting-base-files-uris-op","core-unmapped/dev/ops/getting/getting-document-cloud-storage-info-op","core-unmapped/dev/ops/misc/showing-manage-sub-op","core-unmapped/dev/ops/misc/validating-base-uris-op","core-unmapped/dev/ops/misc/validating-name-op","core-unmapped/dev/ops/misc/checking-storage-quota-on-startup-op","core-unmapped/dev/ops/misc/sending-log-event-op","core-unmapped/dev/ops/misc/loading-framework-version-op","core-unmapped/dev/ops/misc/handling-collection-render-end-op","core-unmapped/dev/ops/misc/handling-collection-render-begin-op","core-unmapped/dev/ops/session/rna-refreshing-session-op","core-unmapped/dev/ops/session/refreshing-session-initially-op","core-unmapped/dev/ops/session/refreshing-session-op","core-unmapped/dev/ops/session/deleting-session-op","core-unmapped/dev/ops/session/starting-session-op","core-unmapped/dev/ops/session/starting-susi-session-op","core-unmapped/dev/ops/session/rna-starting-session-op","core-unmapped/dev/ops/session/stopping-session-op","core-unmapped/dev/ops/session/refreshing-session-later-op","core-unmapped/dev/ops/selection/clearing-selection-op","core-unmapped/dev/ops/selection/selecting-collection-item-op","core-unmapped/dev/ops/creating/creating-folder-op","core-unmapped/dev/ops/connectors/instantiating-connectors-op","core-unmapped/dev/ops/connectors/adding-connector-plugin-op","core-unmapped/dev/ops/connectors/removing-connector-plugin-op","core-unmapped/dev/ops/connectors/removing-connector-op","core-unmapped/dev/ops/connectors/removing-connector-plugins-op","core-unmapped/dev/ops/connectors/instantiating-connectors-by-cohort-op","core-unmapped/dev/ops/connectors/adding-connector-op","core-unmapped/dev/ops/connectors/instantiating-one-connector-op","core-unmapped/dev/ops/plugins/loading-plugin-list-op","core-unmapped/dev/ops/plugins/executing-plugins-predownload-op","core-unmapped/dev/ops/plugins/selecting-selection-action-item-op","core-unmapped/dev/ops/plugins/loading-plugin-op","core-unmapped/dev/ops/plugins/instantiating-plugin-op","core-unmapped/dev/ops/plugins/instantiating-selector-op","core-unmapped/dev/ops/plugins/loading-plugins-op","core-unmapped/dev/ops/plugins/loading-module-op","core-unmapped/dev/ops/plugins/selecting-plugin-op","core-unmapped/dev/ops/plugins/loading-selection-actions-op","core-unmapped/dev/ops/op","core-unmapped/dev/ops/dialogs/renaming-item-from-dlg-op","core-unmapped/dev/ops/dialogs/showing-rename-dlg-op","core-unmapped/dev/ops/dialogs/showing-move-dlg-op","core-unmapped/dev/ops/dialogs/showing-quota-warning-dlg-op","core-unmapped/dev/ops/listening/listening-for-focus-events-op","core-unmapped/dev/ops/listening/listening-for-key-events-op","core-unmapped/dev/ops/listening/listening-for-parcel-notifications-op","core-unmapped/dev/ops/sharing/sharing-item-op","core-unmapped/dev/ac-core-init","core-unmapped/dev/models/session-model","core-unmapped/dev/models/collection-item-model","core-unmapped/dev/models/users-me-cohorts-model","core-unmapped/dev/models/folder-model","core-unmapped/dev/models/network-connectivity-model","core-unmapped/dev/models/connectors-ui-helpers-model","core-unmapped/dev/models/search-model","core-unmapped/dev/models/base-files-uris-model","core-unmapped/dev/models/sharing-root-model","core-unmapped/dev/models/model-factory","core-unmapped/dev/models/send-log-event-model","core-unmapped/dev/models/rna/cef-model","core-unmapped/dev/models/rna/cef-context-model","core-unmapped/dev/models/rna/rna-ipm-model","core-unmapped/dev/models/rna/native-window-model","core-unmapped/dev/models/rna/rna-notification-model","core-unmapped/dev/models/rna/rna-model","core-unmapped/dev/models/rna/pdm-context-model","core-unmapped/dev/models/rna/pdm-preview-model","core-unmapped/dev/models/rna/pdm-model","core-unmapped/dev/models/rna/local-item-model","core-unmapped/dev/models/rna/rna-model-factory","core-unmapped/dev/models/rna/acrocef-model","core-unmapped/dev/models/rna/reader-context-model","core-unmapped/dev/models/rna/reader-model","core-unmapped/dev/models/rna/reader-api-model","core-unmapped/dev/models/rna/test-model","core-unmapped/dev/models/storage-quota-model","core-unmapped/dev/models/asset-model","core-unmapped/dev/models/file-upload-model","core-unmapped/dev/models/base-uris-model","core-unmapped/dev/models/common-limits-model","core-unmapped/dev/models/sign-out-model","core-unmapped/dev/models/notification-model","core-unmapped/dev/models/system-folders-model","core-unmapped/dev/models/root-model","core-unmapped/dev/models/sharing-info-model","core-unmapped/dev/models/refresh-session-model","core-unmapped/dev/models/base-cloud-uris-model","core-unmapped/dev/models/model","core-unmapped/dev/models/ui/dialog-ui-model","core-unmapped/dev/models/ui/collection-item-ui-model","core-unmapped/dev/models/ui/sort-ui-model","core-unmapped/dev/models/ui/saveas-ui-model","core-unmapped/dev/models/ui/network-ui-model","core-unmapped/dev/models/ui/field-query-ui-model","core-unmapped/dev/models/ui/ui-model-factory","core-unmapped/dev/models/ui/actions-ui-model","core-unmapped/dev/models/ui/key-ui-model","core-unmapped/dev/models/ui/notification-ui-model","core-unmapped/dev/models/ui/search-ui-model","core-unmapped/dev/models/ui/full-preview-ui-model","core-unmapped/dev/models/ui/menus-ui-model","core-unmapped/dev/models/ui/file-upload-ui-model","core-unmapped/dev/models/ui/quota-dlg-ui-model","core-unmapped/dev/models/ui/collection-ui-model","core-unmapped/dev/models/ui/error-ui-model","core-unmapped/dev/models/ui/folder-tree-ui-model","core-unmapped/dev/models/ui/plugin-groups-ui-model","core-unmapped/dev/models/ui/inactivity-ui-model","core-unmapped/dev/models/ui/bar-graph-ui-model","core-unmapped/dev/models/ui/plugins-ui-model","core-unmapped/dev/models/ui/dialogs-ui-model","core-unmapped/dev/models/ui/left-rail-ui-model","core-unmapped/dev/models/ui/folder-ui-model","core-unmapped/dev/models/ui/selection-ui-model","core-unmapped/dev/models/ui/folder-tree-node-ui-model","core-unmapped/dev/models/ui/rhp-preview-ui-model","core-unmapped/dev/models/ui/hover-preview-ui-model","core-unmapped/dev/models/ui/collections-ui-model","core-unmapped/dev/models/ui/session-ui-model","core-unmapped/dev/models/ui/ui-model","core-unmapped/dev/models/ui/plugin-ui-model","core-unmapped/dev/ac-core","core-unmapped/dev/apis/api","core-unmapped/dev/views/quota-warning-dlg-view","core-unmapped/dev/views/home-view-view","core-unmapped/dev/views/selection-actions-plugins-view","core-unmapped/dev/views/left-rail-view","core-unmapped/dev/views/query-box-view","core-unmapped/dev/views/plugins-content-view","core-unmapped/dev/views/collection-header-view","core-unmapped/dev/views/toolbar-item-view","core-unmapped/dev/views/input-search-view","core-unmapped/dev/views/plugins-selector-view","core-unmapped/dev/views/input-placeholder-view","core-unmapped/dev/views/account-menu-item-view","core-unmapped/dev/views/plugin-content-view","core-unmapped/dev/views/hover-preview-hud-view","core-unmapped/dev/views/rhp-properties-view","core-unmapped/dev/views/rhp-preview-hud-view","core-unmapped/dev/views/plugin-view","core-unmapped/dev/views/full-preview-plugin-view","core-unmapped/dev/views/folder-tree-view","core-unmapped/dev/views/collection-items-view","core-unmapped/dev/views/dialog-view","core-unmapped/dev/views/home-view-selector-view","core-unmapped/dev/views/duplicate-name-dlg-view","core-unmapped/dev/views/rhp-actions-plugins-view","core-unmapped/dev/views/rhp-preview-view","core-unmapped/dev/views/folder-tree-node-view","core-unmapped/dev/views/move-dlg-view","core-unmapped/dev/views/rhp-actions-view","core-unmapped/dev/views/selection-action-send-menu-view","core-unmapped/dev/views/search-control-view","core-unmapped/dev/views/plugin-selector-view","core-unmapped/dev/views/search-field-view","core-unmapped/dev/views/query-boxes-view","core-unmapped/dev/views/view-events","core-unmapped/dev/views/rename-dlg-view","core-unmapped/dev/views/sectioned-plugins-selector-view","core-unmapped/dev/views/view","core-unmapped/dev/views/alert-dlg-view","core-unmapped/dev/views/menu-view","core-unmapped/dev/views/collection-item-view","core-unmapped/dev/views/tool-view","core-unmapped/dev/views/selection-actions-view","core-unmapped/dev/views/collection-view","core-unmapped/dev/views/hover-preview-view","core-unmapped/dev/views/bar-graph-view","core-unmapped/dev/ac-core-config","core-unmapped/dev/templates/filter-description-template","core-unmapped/dev/templates/sign-out-template","core-unmapped/dev/templates/duplicate-name-dlg-template","core-unmapped/dev/templates/alert-dlg-template","core-unmapped/dev/templates/query-box-template","core-unmapped/dev/templates/account-menu-item-template","core-unmapped/dev/templates/bar-graph-template","core-unmapped/dev/templates/rhp-actions-template","core-unmapped/dev/templates/sectioned-plugins-selector-template","core-unmapped/dev/templates/search-control-template","core-unmapped/dev/templates/home-views-selector-template","core-unmapped/dev/templates/search-field-template","core-unmapped/dev/templates/dialog-template","core-unmapped/dev/templates/selection-action-item-template","core-unmapped/dev/templates/collection-header-template","core-unmapped/dev/templates/rhp-preview-hud-template","core-unmapped/dev/templates/collection-template","core-unmapped/dev/templates/collection-item-template","core-unmapped/dev/templates/toolbar-item-template","core-unmapped/dev/templates/rhp-properties-template","core-unmapped/dev/templates/hover-preview-template","core-unmapped/dev/templates/folder-tree-node-template","core-unmapped/dev/templates/selection-action-send-menu-template","core-unmapped/dev/templates/hover-preview-hud-template","core-unmapped/dev/templates/rhp-action-item-template","core-unmapped/dev/templates/selection-actions-template","core-unmapped/dev/templates/rename-dlg-template","core-unmapped/dev/templates/quota-warning-dlg-template","core-unmapped/dev/templates/move-dlg-template","core-unmapped/dev/templates/rhp-preview-template","core-unmapped/dev/collections/rna/rna-collection-factory","core-unmapped/dev/collections/rna/local-folder-collection","core-unmapped/dev/collections/rna/rna-collection","core-unmapped/dev/collections/collection-factory","core-unmapped/dev/collections/collection","core-unmapped/dev/collections/ui/field-queries-ui-collection","core-unmapped/dev/collections/ui/ui-collection-factory","core-unmapped/dev/collections/ui/ui-collection","core-unmapped/dev/collections/ui/plugins-ui-collection","core-unmapped/dev/nls-cef/ui-strings","core-unmapped/dev/nls-cef/root/ui-strings"],function(){return undefined}),define("files/dev/models/model-factory",["core/ac-core","files/ac-files","core/models/model"],function(e,t){t.ModelFactory=e.Model.extend({create:function(e,n,r){var i=t[e];if(!!i)return new i(n,r);LOG(0,"AcFiles.ModelFactory.create: Unrecognized class: "+e)}})}),define("files/dev/models/ui/files-ui-model",["core/ac-core","files/ac-files","core/models/ui/ui-model"],function(e,t){t.FilesUiModel=e.UiModel.extend({recognized:{show_filter_menu:{type:"boolean",optional:!1},show_sort_menu:{type:"boolean",optional:!1},view:{type:"string",optional:!1,choices:["folder","search_results"]}},defaults:{show_filter_menu:!1,show_sort_menu:!1,view:"folder"},isFolderView:function(){return this.get("view")==="folder"},isSearchResultsView:function(){return this.get("view")==="search_results"}},{VIEW_FOLDER:"folder",VIEW_SEARCH_RESULTS:"search_results"})}),define("files/dev/models/ui/sharing-ui-model",["core/ac-core","files/ac-files","core/models/ui/dialog-ui-model"],function(e,t){t.SharingUiModel=e.DialogUiModel.extend({recognized:{status:{type:"string",optional:!0,choices:["pending","succeeded","failed","closed"]},file_name:{type:"string",optional:!0},show_spinner_delay:{type:"number",optional:!1},http_status:{type:"string",optional:!0},error_code:{type:"string",optional:!0}},defaults:{status:"closed",show_spinner_delay:2e3},enqueueAjaxError:function(e,n){var r={status:t.SharingUiModel.STATUS_FAILED,file_name:e.get("name"),http_status:n.status},i=n.responseText;if(i)try{r.error_code=JSON.parse(i).error.code}catch(s){}this.set(r)}},{STATUS_PENDING:"pending",STATUS_SUCCEEDED:"succeeded",STATUS_FAILED:"failed",STATUS_CLOSED:"closed"})}),define("files/dev/models/ui/ui-model-factory",["core/ac-core","files/ac-files","core/models/model","files/models/ui/files-ui-model","files/models/ui/sharing-ui-model"],function(e,t){t.UiModelFactory=e.Model.extend({create:function(e,n,r){var i=t[e];if(!!i)return new i(n,r);LOG(0,"AcFiles.UiModelFactory.create: Unrecognized class: "+e)}})}),define("files/dev/ops/acrobat/initializing-acrobat-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.InitializingAcrobatOp=e.Op.extend({run:function(){var e=this.options,n=e.appApi.acrobatApi,r=e.collectionsUiModel;return n.isInAcrobat()?(r.set({checkbox:!1,folders_only:n.isFolderSelectionMode()}),e.selectionUiModel.set("multiple_selection",n.allowMultipleSelection()),t.opFactory.create("SelectingAcrobatFilterOp",e).run()):this._getResolvedPromise()}})}),define("files/dev/ops/acrobat/selecting-acrobat-filter-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.SelectingAcrobatFilterOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.acrobatApi,n;return n=e.filterIndex,n===undefined?n=t.getSelectedFilterIndex():t.setSelectedFilterIndex(n),e.collectionsUiModel.set("filter_by_extension",t.getFilterFileExtensions(n)),this._getResolvedPromise()}})}),define("files/dev/ops/creating/creating-folder-from-dlg-op",["core/ac-core","files/ac-files","core/utils/sc-analytics","core/ops/op"],function(e,t,n){t.CreatingFolderFromDlgOp=e.Op.extend({run:function(){var t,r=this.options,i,s,o=$.Deferred();return s=r.dialogUiModel,i=e.opFactory.create("ValidatingNameOp",r),t=e.opFactory.create("CreatingFolderOp",_.extend({},r,{id:r.parentFolderId,name:r.name})),i.run().then(_.bind(function(){t.run().then(_.bind(function(e){e&&e.renamed_to?s.set("error",e):(s.set("close",!0),e&&r.collectionsUiModel.set("scroll_id_into_view",e.id),this._logSiteCatalystEvent(n.SUCCESS)),r.appApi.folderApi.refreshCurrentFolder(r),r.searchUiModel.invalidate(),r.searchUiModel.isSearching()&&_.delay(function(){r.selectionUiModel.clearSelection(),r.searchUiModel.triggerFieldQueriesChange(!0)},1e3),o.resolve()},this),function(){s.set("close",!1),o.reject()})},this),function(e){s.set("error",e),o.reject()}),o.promise()}})}),define("files/dev/templates/new-folder-dlg-template",[],function(){return'<div role="alert" class="files-new-folder-dlg-error theme-text"></div> <div class="files-new-folder-dlg-name-container">    <input class="files-new-folder-dlg-name ui-theme theme-container theme-text" type="text"           id="files-new-folder-dlg-name"           placeholder="<%= newFolderNamePlaceholder %>"           title="<%- title %>" /></div> <div class="dialog-buttons">    <input class="files-new-folder-dlg-cancel-btn                  dialog-control-button           control-button button-grey ui-theme theme-text" type="button"           id="files-new-folder-dlg-cancel-btn"           aria-label="<%= cancel %>"           value="<%= cancel %>" />    <input class="files-new-folder-dlg-create-btn                  dialog-control-button           control-button disabled theme-button theme-button-label" type="button"           id="files-new-folder-dlg-create-btn"           aria-label="<%= createFolder %>"           value="<%= createFolder %>"           disabled="disabled" /></div>'}),define("files/dev/views/new-folder-dlg-view",["core/ac-core","files/ac-files","files/templates/new-folder-dlg-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/truncate","core/utils/util","core/utils/view-util","core/utils/sc-analytics","core/views/dialog-view","core/views/input-placeholder-view"],function(e,t,n,r,i,s,o,u,a){return t.NewFolderDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"keydown .files-new-folder-dlg-name":"_onNameKeyDown","keyup   .files-new-folder-dlg-name":"_onNameKeyUp","paste   .files-new-folder-dlg-name":"_onNamePaste","click   .files-new-folder-dlg-create-btn":"_onCreateClick","click   .files-new-folder-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),o.isCEF()&&this.options.appApi.selectionApi.isRunningInFileSelection()&&this.setElement($(".alert-dialog-container")),this._template=_.template(n),this._addUiModelEventListeners()},render:function(){return e.DialogView.prototype.render.call(this),this._appendToDialog(this._template({newFolderNamePlaceholder:i.NEW_FOLDER_NAME_PLACEHOLDER,createFolder:i.CREATE_FOLDER,cancel:r.CANCEL,title:this.options.title})),this._initWrappers(),u.setElementFontByLocale(this.$el,"input"),this._center(),o.isWindows()&&u.swapChildElements(this.$dlgControlBtns),this._truncateText(),this._initTabLimits(),this._renderChildViews(),this._logSiteCatalystEvent(a.SHOWN),this},open:function(){return o.isCEF()&&this.options.appApi.selectionApi.isRunningInFileSelection()&&$("#modal-mask").addClass("alert"),e.DialogView.prototype.open.call(this)},close:function(t,n){var r=this.options,i=r.appApi,s=this._getError(),u;u=_.bind(function(){o.isCEF()&&i.selectionApi.isRunningInFileSelection()&&$("#modal-mask").removeClass("alert"),e.DialogView.prototype.close.call(this,t,n)},this),t?u():s&&s.renamed_details?e.opFactory.create("DeletingItemOp",_.extend({},r,{id:s.id,object_type:"folder",noScEvent:!0})).run().then(function(){i.folderApi.refreshCurrentFolder(r)}).always(u):u()},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$error=this.$(".files-new-folder-dlg-error"),this.$name=this.$(".files-new-folder-dlg-name"),this.$dlgControlBtns=this.$(".dialog-buttons"),this.$createBtn=this.$(".files-new-folder-dlg-create-btn"),this.$cancelBtn=this.$(".files-new-folder-dlg-cancel-btn")},_renderChildViews:function(){this._renderFolderNameView()},_renderFolderNameView:function(){this._renderChildView("_newFolderNameView",e.InputPlaceholderView,this.$name)},_onNameKeyDown:function(e){this._showDuplicateNameError(!1),this._showIllegalNameError(!1),e.which===13&&u.isInputEnabled(this.$createBtn)&&(this._maybeCreateFolder(),this._consumeEvent(e))},_onNameKeyUp:function(){this._updateNewFolderNameControls()},_onNamePaste:function(){_.defer(this._updateNewFolderNameControls)},_onCreateClick:function(e){var t=$(e.currentTarget);if(!u.isInputEnabled(t))return;u.enableInput(t,!1),this._maybeCreateFolder()},_onCancelClick:function(){this.close(!1)},_truncateText:function(){s.truncateInputPlaceholder(this.$name),s.truncateButtonLabel(this.$createBtn),s.truncateButtonLabel(this.$cancelBtn)},_getNewFolderName:function(){return $.trim(this.$name.val())},_updateNewFolderNameControls:function(){var e=this._getNewFolderName();u.enableInput(this.$createBtn,e.length>0&&e!==this._originalName&&!this.isCreatingFolder),this._initTabLimits()},_showDuplicateNameError:function(e,t,n){e?(this.$error.text(_.template(r.RENAME_NAME_IN_USE,{existingType:n?r.FILE:r.FOLDER,name:t,renamedType:r.FOLDER})),this.$error.slideDown("fast")):this.$error.slideUp("fast",_.bind(function(){this.$error.hide()},this))},_showIllegalNameError:function(e){var t=this.$error;e?(t.text(_.template(r.RENAME_ILLEGAL_NAME,{renamedType:r.FOLDER})),t.slideDown("fast")):(t.slideUp("fast",function(){t.hide()}),this._dialogUiModel.set("error",undefined,{silent:!0}))},_maybeCreateFolder:function(){var n,r,i;n=this._getNewFolderName();if(n.length===0)return;r=this._dialogUiModel,i=this._getError(),i?this._triggerViewEvent(e.ViewEvents.RENAME_ITEM_FROM_DLG,{id:this._newFolderId,object_type:"folder",name:i.renamed_to,newName:n,dialogUiModel:r,scContext:this._getFullScContext()}):(this.isCreatingFolder=!0,this._triggerViewEvent(t.ViewEvents.NEW_FOLDER_DLG_CREATE,{parentFolderId:this.options.parentFolderId,name:n,dialogUiModel:r,scContext:this._getFullScContext()}))},_getSiteCatalystContext:function(){return a.NEW_FOLDER_DLG},_addUiModelEventListeners:function(){var t=e.uiModelFactory.create("DialogUiModel");this._dialogUiModel=t,this.listenTo(t,"change:close",this._onCloseChange).listenTo(t,"change:error",this._onErrorChange)},_onCloseChange:function(e,t){this.isCreatingFolder=!1,this.close(t)},_getError:function(){return this._dialogUiModel.get("error")||this._error},_onErrorChange:function(t,n){var r=n.renamed_details,i,s=n.id,o;this.isCreatingFolder=!1;if(r)i=r.duplicate_of;else if(n.error&&(n.error.code===e.ErrorUiModel.CODE_ILLEGAL_NAME||n.error.code===e.ErrorUiModel.CODE_INVALID_PARAMETER)){this._showIllegalNameError(!0),this._updateNewFolderNameControls(),this.$name.focus().select();return}if(!r||!i){this.close();return}this._logSiteCatalystEvent([a.ERROR,a.FOLDER_EXISTS]),s&&(this._newFolderId=s),this._originalName=o=r.original_name,this._showDuplicateNameError(!0,o,i.object_type==="file"),this.$name.val(n.renamed_to),this._error=n,this._updateNewFolderNameControls(),this.$name.focus().select()}}),t.NewFolderDlgView}),define("files/dev/ops/dialogs/showing-new-folder-dlg-op",["core/ac-core","files/ac-files","i18n!files/nls/ui-strings","core/ops/op","files/views/new-folder-dlg-view"],function(e,t,n){t.ShowingNewFolderDlgOp=e.Op.extend({run:function(){var e,r=this.options;return e=new t.NewFolderDlgView(_.extend({},r,{title:n.NEW_FOLDER_TITLE})),e.open()}})}),define("files/dev/ops/listening/listening-for-current-folder-notifications-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/while-signed-in-op"],function(e,t,n){t.ListeningForCurrentFolderNotificationsOp=e.WhileSignedInOp.extend({initialize:function(){e.WhileSignedInOp.prototype.initialize.call(this),this._addAppApiCallbacks(),this._addModelEventListeners()},run:function(){return this._monitorCurrentFolder(),$.Deferred().promise()},_disableOperation:function(){e.WhileSignedInOp.prototype._disableOperation.call(this),this._removeAppApiCallbacks()},_monitorCurrentFolder:function(){var e=this.options,t=e.folderModel.id;if(!t)return;e.appApi.notificationApi.addFolderNotificationCallback(t,this._mergeUpdates)},_mergeUpdates:function(e){var t=this.options,n,r,i,s=t.folderModel,o;n=s.get("items"),o=this._isNavigateToParentRequired(e);if(o){this._navigateToFolder(o);return}if(this._isRefreshRequired(e)){this._enqueueFolderFetch();return}_.each(e,function(e){i=e.operation;if(i!=="deleted"&&i!=="move-removed")return LOG("AcCore.ListeningForCurrentFolderNotificationsOp._mergeUpdates: "+i+"' update not expected"),!0;r=n.get(e.object_id),r&&n.remove(r)})},_isNavigateToParentRequired:function(e){var t=this.options.folderModel.get("id"),n;return _.each(e,function(e){e.object_id===t&&e.operation==="deleted"&&(n=e.parent_id)}),n},_isRefreshRequired:function(e){var t,n;return _.each(e,function(e){n=e.operation;if(n!=="deleted"&&n!=="move-removed")return t=!0,!1}),t},_navigateToFolder:function(e){t.opFactory.create("NavigatingToFolderOp",this.options).run(e)},_enqueueFolderFetch:function(){var e=this.options.folderModel.get("id");this._fetchingFolderId?this._nextFolderId=e:e&&this._fetchFolder()},_fetchFolder:function(){var e=this.options;this._fetchingFolderId=e.folderModel.id,e.appApi.folderApi.enqueueRefreshCurrentFolder(e).then(_.bind(function(){var e=this._nextFolderId;e?(this._fetchFolder(e),this._nextFolderId=undefined):this._fetchingFolderId=undefined},this),_.bind(function(){LOG("AcCore.ListeningForCurrentFolderNotificationsOp._fetchFolder fail"),this._fetchingFolderId=undefined,this._nextFolderId=undefined},this))},_addAppApiCallbacks:function(){var e=this.options.appApi;e.inactivityApi.addIdleChangeCallback(this._onIsIdleChange),n.isCEF()&&e.networkConnectivityApi.addNetworkConnectivtyChangeCallback(this._onIsConnectivityChange)},_removeAppApiCallbacks:function(){var e=this.options.appApi;e.inactivityApi.removeIdleChangeCallback(this._onIsIdleChange),n.isCEF()&&e.networkConnectivityApi.removeNetworkConnectivtyChangeCallback(this._onIsConnectivityChange)},_onIsIdleChange:function(e,t){!t&&!_.isUndefined(e.previous("is_idle"))&&this._enqueueFolderFetch()},_onIsConnectivityChange:function(e,t){t&&this._enqueueFolderFetch()},_addModelEventListeners:function(){this.listenTo(this.options.folderModel,"change:id",this._onFolderIdChange)},_onFolderIdChange:function(e){var t=this.options,n;n=e.previous("id"),n&&t.appApi.notificationApi.removeFolderNotificationCallback(n,this._mergeUpdates),this._monitorCurrentFolder()}})}),define("files/dev/ops/listening/listening-for-dup-errors-op",["core/ac-core","files/ac-files","core/ops/while-signed-in-op","core/views/duplicate-name-dlg-view"],function(e,t){t.ListeningForDupErrorsOp=e.WhileSignedInOp.extend({run:function(){return this.options.errorUiModel.on("change:error",this._onErrorChange),$.Deferred().promise()},_onErrorChange:function(t,n){var r=this.options,i;if(!n)return;if(n.type!==e.ErrorUiModel.ERROR_TYPE_DUP)return;i=new e.DuplicateNameDlgView(_.extend(_.omit(r,"el"),{duplicate:n.data,parentView:r.rootView})),_.defer(function(){i.open().always(function(){r.errorUiModel.dequeueError()})})}})}),function(e){typeof define=="function"&&define.amd?define("jquery.ui.widget",["jquery"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return s=!o&&u.length?e.widget.extend.apply(null,[s].concat(u)):s,o?this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))}),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var r=e.widget}),function(e){typeof define=="function"&&define.amd?define("jquery.fileupload",["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){function t(t){var n=t==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var i=r.dataTransfer;i&&e.inArray("Files",i.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:r}))!==!1&&(r.preventDefault(),n&&(i.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))")).test(window.navigator.userAgent)&&!e('<input type="file">').prop("disabled"),e.support.xhrFileUpload=!!window.ProgressEvent&&!!window.FileReader,e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n)this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e;return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return e.type(t.formData)==="function"?t.formData(t.form):e.isArray(t.formData)?t.formData:e.type(t.formData)==="object"?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),i;if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,n._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n=this,r,i=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o=e.type(t.paramName)==="array"?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange);if(!s||t.blob||!this._isInstanceOf("File",i))t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"';s?e.support.xhrFormDataFileUpload&&(t.postMessage?(r=this._getFormData(t),t.blob?r.push({name:o,value:t.blob}):e.each(t.files,function(n,i){r.push({name:e.type(t.paramName)==="array"&&t.paramName[n]||o,value:i})})):(n._isInstanceOf("FormData",t.formData)?r=t.formData:(r=new FormData,e.each(this._getFormData(t),function(e,t){r.append(t.name,t.value)})),t.blob?r.append(o,t.blob,i.name):e.each(t.files,function(i,s){(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s))&&r.append(e.type(t.paramName)==="array"&&t.paramName[i]||o,s,s.uploadName||s.name)})),t.data=r):(t.contentType=i.type||"application/octet-stream",t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],n.each(function(){var t=e(this),n=t.prop("name")||"files[]",i=(t.prop("files")||[1]).length;while(i)r.push(n),i-=1}),r.length||(r=[n.prop("name")||"files[]"])),r},_initFormSettings:function(t){if(!t.form||!t.form.length)t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")));t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||e.type(t.form.prop("method"))==="string"&&t.form.prop("method")||"").toUpperCase(),t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,r){var i=e.Deferred(),s=i.promise();return n=n||this.options.context||s,t===!0?i.resolveWith(n,r):t===!1&&i.rejectWith(n,r),s.abort=i.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,n){var r=this,i=function(t){return e.Deferred().resolveWith(r,t).promise()};n.process=function(t,s){if(t||s)n._processQueue=this._processQueue=(this._processQueue||i([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(r,[n]).promise():i(arguments)}).pipe(t,s);return this._processQueue||i([this])},n.submit=function(){return this.state()!=="pending"&&(n.jqXHR=this.jqXHR=r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},n.state=function(){if(this.jqXHR)return r._getDeferredState(this.jqXHR);if(this._processQueue)return r._getDeferredState(this._processQueue)},n.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var r=this,i=t.files[0],s=i.size,o=t.uploadedBytes,u=t.maxChunkSize||s,a=this._blobSlice,f=e.Deferred(),l=f.promise(),c,h;return!(this._isXHRUpload(t)&&a&&(o||u<s))||t.data?!1:n?!0:o>=s?(i.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",i.error])):(h=function(){var n=e.extend({},t),l=n._progress.loaded;n.blob=a.call(i,o,o+u,i.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+o+"-"+(o+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),c=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,u,a){o=r._getUploadedBytes(a)||o+n.chunkSize,l+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o-n.uploadedBytes,total:o-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=o,n.result=i,n.textStatus=u,n.jqXHR=a,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),o<s?h():f.resolveWith(n.context,[i,u,a])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),f.rejectWith(n.context,[e,t,i])})},this._enhancePromise(l),l.abort=function(){return c.abort()},h(),l)},_beforeSend:function(e,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,r,i){var s=i._progress.total,o=i._response;i._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),i),o.result=i.result=t,o.textStatus=i.textStatus=n,o.jqXHR=i.jqXHR=r,this._trigger("done",null,i)},_onFail:function(e,t,n,r){var i=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),i.jqXHR=r.jqXHR=e,i.textStatus=r.textStatus=t,i.errorThrown=r.errorThrown=n,this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var r=this,i,s,o,u,a=r._getAJAXSettings(n),f=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,i=i||((s||r._trigger("send",e.Event("send",{delegatedEvent:t}),a)===!1)&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||e.ajax(a)).done(function(e,t,n){r._onDone(e,t,n,a)}).fail(function(e,t,n){r._onFail(e,t,n,a)}).always(function(e,t,n){r._onAlways(e,t,n,a),r._sending-=1,r._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending){var i=r._slots.shift();while(i){if(r._getDeferredState(i)==="pending"){i.resolve();break}i=r._slots.shift()}}r._active===0&&r._trigger("stop")}),i};return this._beforeSend(t,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),u=o.pipe(f)):(this._sequence=this._sequence.pipe(f,f),u=this._sequence),u.abort=function(){return s=[undefined,"abort","abort"],i?i.abort():(o&&o.rejectWith(a.context,s),f())},this._enhancePromise(u)):f()},_onAdd:function(t,n){var r=this,i=!0,s=e.extend({},this.options,n),o=n.files,u=o.length,a=s.limitMultiFileUploads,f=s.limitMultiFileUploadSize,l=s.limitMultiFileUploadSizeOverhead,c=0,h=this._getParamName(s),p,d,v,m,g=0;f&&(!u||o[0].size===undefined)&&(f=undefined);if(!(s.singleFileUploads||a||f)||!this._isXHRUpload(s))v=[o],p=[h];else if(!s.singleFileUploads&&!f&&a){v=[],p=[];for(m=0;m<u;m+=a)v.push(o.slice(m,m+a)),d=h.slice(m,m+a),d.length||(d=h),p.push(d)}else if(!s.singleFileUploads&&f){v=[],p=[];for(m=0;m<u;m+=1){c+=o[m].size+l;if(m+1===u||c+o[m+1].size+l>f||a&&m+1-g>=a)v.push(o.slice(g,m+1)),d=h.slice(g,m+1),d.length||(d=h),p.push(d),g=m+1,c=0}}else p=h;return n.originalFiles=o,e.each(v||o,function(s,o){var u=e.extend({},n);return u.files=v?o:[o],u.paramName=p[s],r._initResponseObject(u),r._initProgressObject(u),r._addConvenienceMethods(t,u),i=r._trigger("add",e.Event("add",{delegatedEvent:t}),u),i}),i},_replaceFileInput:function(t){var n=t.fileInput,r=n.clone(!0);t.fileInputClone=r,e("<form></form>").append(r)[0].reset(),n.after(r).detach(),e.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===n[0]?r[0]:t}),n[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,n){var r=this,i=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),i.resolve([e])},o=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(s)},u=function(){a.readEntries(function(e){e.length?(f=f.concat(e),u()):o(f)},s)},a,f=[];return n=n||"",t.isFile?t._file?(t._file.relativePath=n,i.resolve(t._file)):t.file(function(e){e.relativePath=n,i.resolve(e)},s):t.isDirectory?(a=t.createReader(),u()):i.resolve([]),i.promise()},_handleFileTreeEntries:function(t,n){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop("webkitEntries")||t.prop("entries"),r,i;if(n&&n.length)return this._handleFileTreeEntries(n);r=e.makeArray(t.prop("files"));if(!r.length){i=t.prop("value");if(!i)return e.Deferred().resolve([]).promise();r=[{name:i.replace(/^.*\\/,"")}]}else r[0].name===undefined&&r[0].fileName&&e.each(r,function(e,t){t.name=t.fileName,t.size=t.fileSize});return e.Deferred().resolve(r).promise()},_getFileInputFiles:function(t){return t instanceof e&&t.length!==1?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(i){r.files=i,n.options.replaceFileInput&&n._replaceFileInput(r),n._trigger("change",e.Event("change",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&r.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,r=t.dataTransfer,i={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){i.files=r,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var r=e.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers(),this._super(t,n),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return t!=="url"&&e.type(n)==="string"&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,r=e(this.element[0].cloneNode(!1));e.each(r.data(),function(e,i){var s="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r.attr(s)&&(t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;if(!t||this.options.disabled)return;t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=e.Deferred(),i=r.promise(),s,o;return i.abort=function(){return o=!0,s?s.abort():(r.reject(null,"abort","abort"),i)},this._getFileInputFiles(t.fileInput).always(function(e){if(o)return;if(!e.length){r.reject();return}t.files=e,s=n._onSend(null,t),s.then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})}),this._enhancePromise(i)}t.files=e.makeArray(t.files);if(t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){typeof define=="function"&&define.amd?define("jquery.iframe-transport",["jquery"],e):e(window.jQuery)}(function(e){var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var r=n.initialIframeSrc||"javascript:false;",i,s,o;return{send:function(u,a){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?",n.type==="DELETE"?(n.url=n.url+o+"_method=DELETE",n.type="POST"):n.type==="PUT"?(n.url=n.url+o+"_method=PUT",n.type="POST"):n.type==="PATCH"&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,s=e('<iframe src="'+r+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];s.unbind("load").bind("load",function(){var t;try{t=s.contents();if(!t.length||!t[0].firstChild)throw new Error}catch(n){t=undefined}a(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",s.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&n.type==="POST"&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,r){var i=e(t[n]);e(r).prop("name",i.prop("name")).attr("form",i.attr("form")),i.replaceWith(r)})}),i.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",r),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),define("files/dev/templates/file-upload-progress-template",[],function(){return'<div class="file-upload">   <div class="file-upload-progress-header"        id="file-upload-progress-header-<%= viewId %>">       <%= uploadHeading %></div>   <div class="file-upload-progress-bar" role="progressbar"        aria-labelledby="file-upload-progress-header-<%= viewId %>                         file-upload-progress-text-<%= viewId %>"        tabindex="-1">       <div class="file-upload-progress-bar-loaded"></div>   </div>   <div class="file-upload-progress-file-name               file-upload-progress-text"        id="file-upload-progress-text-<%= viewId %>">       <%- fileName %></div>   <button class="file-upload-cancel"></button></div>'}),define("files/dev/views/file-upload-progress-view",["core/ac-core","files/ac-files","files/templates/file-upload-progress-template","i18n!files/nls/ui-strings","core/utils/truncate","core/utils/view-util","core/views/view"],function(e,t,n,r,i,s){return t.FileUploadProgressView=e.View.extend({events:{"click .file-upload-cancel":"_onFileUploadCancel"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._numFailures=0},render:function(){e.View.prototype.render.call(this);if(s.isElementHidden(this.$el))return;return this.$progressBar||(this.$el.empty().html(this._template({fileName:this._getFileName(),uploadHeading:this._getStatus(),viewId:this.options.viewId})),this._initWrappers()),Ac.Locale.getLocale()==="ja-jp"&&this.$fileName.addClass("jp"),this._updateProgressAll(),this._updateHeader(),this._updateFileName(),this._isUploading=!0,this._updateCancelBtn(),this},setFiles:function(e){this._resetState(),this._files=e,this._numFiles=e.length,_.defer(this.render)},setNumFiles:function(e){this._numFiles=e,this.render()},getNumFiles:function(){return this._numFiles||0},setProgressAll:function(e,t){this._loaded=e,this._total=t,this._loaded===this._total&&(this._isUploadComplete=!0),this.render()},close:function(){this._resetState()},_onFileUploadCancel:function(){var e=this.options.fileUploadUiModel,t;e&&(t=this.options.fileUploadUiModel.get("jq_xhr"),t&&t.abort()),this.close()},_initWrappers:function(){this.$toolsContent=$(".tools-content"),this.$progressBar=this.$(".file-upload-progress-bar"),this.$progressLoaded=this.$(".file-upload-progress-bar-loaded"),this.$fileName=this.$(".file-upload-progress-file-name"),this.$header=this.$(".file-upload-progress-header"),this.$cancel=this.$(".file-upload-cancel")},_getStatus:function(){return this._isUploadComplete?r.PROCESSING:r.UPLOADING},_getFileName:function(){var e="",t=this._files,n=this._numFiles;return n===1?t&&t.length>0&&(e=t[0].name):e=_.template(r.N_FILES,{numFiles:n}),e},_resetState:function(){this._isUploading=undefined,this._isUploadComplete=undefined,this._files=undefined,this._numFiles=0,this._numFailures=0,this._loaded=undefined,this._total=undefined},_updateProgressAll:function(){var e,t=this._loaded,n=this._total,r;if(this.options.fileUploadModel.hasAjaxFileUpload()&&!t)return;t<n?(e=parseInt((n-t)/n*this.$progressBar.width(),10),this.$progressLoaded.css("right",e+"px"),r=parseInt(t/n*100,10),this.$progressBar.removeClass("indeterminate").attr({"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r})):(this.$progressLoaded.css("right","0px"),this._showIndeterminateProgress())},_updateCancelBtn:function(){var e=this.$cancel;!this.options.showCancelBtn||this._isUploadComplete?e.hide():e.show().attr("title",r.CANCEL_UPLOAD)},_showIndeterminateProgress:function(){this.$progressBar.addClass("indeterminate").removeAttr("aria-valuemin aria-valuemax aria-valuenow"),this.$progressLoaded.addClass("hidden")},_updateFileName:function(){var e=this.$fileName,t=this._getFileName();e.text()!==t&&(e.text(t),this._truncateText())},_updateHeader:function(){var e=this.$header,t=this._getStatus();e.text()!==t&&e.text(t)},_truncateText:function(){var e=this.$el,t=this.$fileName,n=this.$cancel,r;r=e.width()-parseInt(t.css("left"),10),n.css("display")!=="none"&&(r-=n.width()),t.width(r),i.truncateElementText(t)}}),t.FileUploadProgressView}),define("files/dev/ops/listening/listening-for-file-upload-events-op",["core/ac-core","files/ac-files","plugins-common/ac-plugins","core/utils/util","core/utils/http-util","core/utils/event-util","core/utils/view-util","core/utils/sc-analytics","core/ops/op","jquery.fileupload","jquery.iframe-transport","files/views/file-upload-progress-view"],function(e,t,n,r,i,s,o,u){var a=0,f=0;t.ListeningForFileUploadEventsOp=e.Op.extend({options:{targets:[{selector:".files-upload-btn",drag_and_drop:!0},{selector:".files-no-files-upload-file",drag_and_drop:!1}]},initialize:function(){e.Op.prototype.initialize.call(this),$(document).bind("drop dragover",function(e){e.preventDefault()}),this._addAppApiCallbacks(),this._addModelEventListeners(),this._addUiModelEventListeners(),this._isSelectorInitialized={}},run:function(){return $.Deferred().promise()},_start:function(){var e=this.options,t=e.fullPreviewUiModel,n=e.fileUploadUiModel;if(e.noUpload)return;if(!this._isSignedIn())return;if(!this._areTargetsRendered())return;if(this._isProhibitedBySearch())return;if(t&&t.isFileOpen())return;n.get("is_listening")&&this._stop(),_.each(e.targets,function(e){this._initWidget(e.selector,e.drag_and_drop)},this),n.set("is_listening",!0)},_stop:function(){_.each(this.options.targets,function(e){this._disableWidget(e.selector)},this),this.options.fileUploadUiModel.set("is_listening",!1)},_areTargetsRendered:function(){var e=!0;return _.each(this.options.targets,function(t){if($(t.selector).length===0)return e=!1,!1}),e},_isProhibitedBySearch:function(){var e=this.options,t=e.searchUiModel;return t&&t.isSearching()&&!e.enableDragAndDrop},_getWidget:function(e){return this.options.rootView.$el.find(e)},_initWidget:function(e,t){var n=this.options,r,i=n.fileUploadModel;r=this._getWidget(e),r.length===0&&LOG("AcFiles.ListeningForFileUploadEventsOp._initWidget: '"+e+"' not found"),i.hasAjaxFileUpload()||this._addPostMessageListener(),this._isSelectorInitialized[e]?r.fileupload("enable"):(r.fileupload(i.getWidgetOptions(t)),this._addFileUploadEventListeners(r),this._isSelectorInitialized[e]=!0)},_disableWidget:function(e){var t=this._getWidget(e);try{t.fileupload("disable")}catch(n){}},_addAppApiCallbacks:function(){this.options.appApi.sessionApi.addSignedInChangeCallback(this._onSignedInChange)},_onSignedInChange:function(e,t){t?this._start():this._stop()},_addModelEventListeners:function(){this.options.folderModel.on("change:id",this._onFolderIdChange)},_onFolderIdChange:function(){this._isSignedIn()&&(this._start(),this.options.folderModel.off("change:id",this._onFolderIdChange))},_addUiModelEventListeners:function(){var e=this.options,t=e.searchUiModel,n=e.fullPreviewUiModel;e.fileUploadUiModel.on("change:start_listening",this._onStartListeningChange).on("change:is_uploading",this._onIsUploadingChange),t&&t.on("change:status",this._onSearchStatusChange),n&&n.on("change:item_model",this._onFullPreviewItemModelChange)},_onStartListeningChange:function(e,t){t&&this._start()},_onIsUploadingChange:function(e,t){var n=this.options;t||n.appApi.folderApi.refreshCurrentFolder(n,{excludeEtag:!0})},_onSearchStatusChange:function(){this._isProhibitedBySearch()?this._stop():this._start()},_onFullPreviewItemModelChange:function(e,t){t?this._stop():this._start()},_isSignedIn:function(){return this.options.appApi.sessionApi.isSignedIn()},_addFileUploadEventListeners:function(e){e.on("fileuploadstart",this._onFileUploadStart).on("fileuploadstop",this._onFileUploadStop).on("fileuploadadd",this._onFileUploadAdd).on("fileuploadsubmit",this._onFileUploadSubmit).on("fileuploadsend",this._onFileUploadSend).on("fileuploadchange",this._onFileUploadChange).on("fileuploadpaste",this._onFileUploadPaste).on("fileuploaddrop",this._onFileUploadDrop).on("fileuploaddragover",this._onFileUploadDragOver).on("fileuploadprogress",this._onFileUploadProgress).on("fileuploadprogressall",this._onFileUploadProgressAll).on("fileuploaddone",this._onFileUploadDone).on("fileuploadfail",this._onFileUploadFail).on("fileuploadalways",this._onFileUploadAlways)},_onFileUploadStart:function(e){this.options.fileUploadUiModel.set("is_uploading",!0),this._progressView=this._openProgressView()},_onFileUploadStop:function(e){var t=this.options;this._closeProgressView(),t.fileUploadUiModel.set("is_uploading",!1).unset("jq_xhr"),this._dequeueFileUploadError(),a=f=0},_onFileUploadAdd:function(e,t){this._logEventTypeAndNames(e,t)},_onFileUploadSubmit:function(e,t){var n=t.files,i=this.options,s=i.appApi,u;if(o.isElementHidden($(e.currentTarget)))return!1;if(s.displayApi.isFullOverlayShown())return!1;if(!n)return!1;r.isIE10()&&(n=_.filter(n,function(e){return e.size>0}));if(n.length===0)return!1;if(!i.fileUploadUiModel.get("is_uploading")&&s.dialogApi.isDialogOpen())return!1;this._logEventTypeAndNames(e,t);if(this._isFolderUpload(e,t))return s.errorApi.enqueueAjaxError({status:"folder-upload-not-supported"}),this._decrementNumFiles(),!1;i.enableDragAndDrop?u=s.folderApi.getRootFolderId(i.pluginId):u=i.folderModel.get("id"),t.formData=i.fileUploadModel.getFormData(t,u)},_onFileUploadSend:function(e,t){this._logEventTypeAndNames(e,t),r.isCEF()?t.headers=_.pick(i.getRequestHeaders("POST"),"Accept","x-csrftoken","Authorization"):t.headers=_.pick(i.getRequestHeaders("POST"),"Accept","x-csrftoken"),t.global=!1,_.isFunction(t.xhr)&&this.options.fileUploadUiModel.set("jq_xhr",t.xhr())},_onFileUploadChange:function(e,t){this._logEventTypeAndNames(e,t),this._initFiles(t)},_onFileUploadPaste:function(e,t){var n=t.files;n&&n.length>0&&this._logEventTypeAndNames(e,t)},_onFileUploadDrop:function(e,t){this._logEventTypeAndNames(e,t),this._initFiles(t),this._isDragOverLogged=!1},_onFileUploadDragOver:function(){this._isDragOverLogged||(this._isDragOverLogged=!0)},_onFileUploadProgress:function(e,t){this._logProgressName(e,t)},_onFileUploadProgressAll:function(e,t){this._logProgress(e,t),this._progressView&&this._progressView.setProgressAll(t.loaded,t.total)},_onFileUploadDone:function(e,t){var n=this.options,r,i,s,o;f+=1,f===a&&(r=n.appApi.pluginsApi.callPluginMethod(n.pluginId,"_getSiteCatalystContext",undefined,u.FILE_LIST,!0),i=[r,u.UPLOAD],this._logSiteCatalystEvent(i.concat(u.SUCCESS)),this._logSiteCatalystEvent(i.concat([u.NUM_FILES,u.getCountCode(a)]))),s=t.jqXHR.responseText;if(s&&s.length>0)try{o=JSON.parse(s)}catch(l){}o&&o.renamed_to&&o.renamed_details.duplicate_of&&(o.object_type="file",this._onFileUploadDuplicateName(o))},_onFileUploadDuplicateName:function(t){if(r.isIpad()||r.isIphone())return;t.dupType=e.ErrorUiModel.DUP_TYPE_UPLOAD,this.options.errorUiModel.enqueueDupError(t,!0)},_onFileUploadFail:function(t,n){var r=n.jqXHR,i=this.options.appApi.errorApi;if(e.Features.isFeatureEnabled("quota_ui")&&i.isQuotaExceededError(r)){i.enqueueQuotaError();return}r.status>0&&i.enqueueAjaxError(r),this._decrementNumFiles()},_onFileUploadAlways:function(e,t){return undefined},_isFolderUpload:function(e,t){var n=this.options.appApi.displayApi;return!!_.find(t.files,function(e){return n.isDebugLogging()&&r.logProperties(e),e.relativePath||!e.type&&e.size%4096===0&&r.getExtension(e.name)!=="indd"})},_initFiles:function(e){var t=this._progressView,n,r,i;n=this._files=e.files,r=this._numFiles=n.length,a+=r,t&&(i=t.getNumFiles(),t.setFiles(n),t.setNumFiles(i+r))},_decrementNumFiles:function(){var e=this._progressView,t;this._numFiles-=1,t=this._numFiles,t===0?this._closeProgressView():e&&e.setNumFiles(t)},_dequeueFileUploadError:function(){var e=this.options;e.errorUiModel.dequeueDupError()||e.appApi.errorApi.dequeueQuotaError()},_addPostMessageListener:function(){if(this._isListeningForPostMessage)return;this._isListeningForPostMessage=!0,s.addPostMessageListener(this._onReceiveMessage)},_onReceiveMessage:function(t){var n,r,i,s,o,u;n=e.getBaseCloudUrl();if(!n||n.indexOf(t.origin)!==0)return;try{r=JSON.parse(t.data)}catch(a){return}if(r.name!=="complete-file-upload")return;try{i=JSON.parse(r.response)}catch(a){return}s=i.status,o=i.body,u=this.options,o.error?(u.appApi.errorApi.enqueueAjaxError({status:s,responseText:JSON.stringify({error:{code:o.error.code}})}),this._decrementNumFiles()):o.renamed_to&&o.renamed_details.duplicate_of&&(o.object_type="file",this._onFileUploadDuplicateName(o),u.fileUploadUiModel.get("is_uploading")||this._dequeueFileUploadError())},_openProgressView:function(){var e=this.options,r=e.appApi,i,s=r.statusMenuApi;return e=_.extend({},e,{parentView:e.rootView,showCancelBtn:!0}),delete e.el,this._progressView||(this._progressView=new t.FileUploadProgressView(e)),i=this._progressView,i.setFiles(this._files),s.showStatusMenuItem(n.HOME).then(function(e){i.setElement(e)}),s.setStatus(n.HOME,{status:r.statusMenuApi.STATUS_BUSY}),i},_closeProgressView:function(){var e=this.options.appApi.statusMenuApi;this._progressView&&(this._progressView.close(),this._progressView=undefined),e.setStatus(n.HOME,{status:e.STATUS_IDLE}),e.hideStatusMenuItem(n.HOME)},_logEventTypeAndNames:function(e,t){return this.options.appApi.displayApi.isDebugLogging()&&LOG(e.type+this._getFileUploadEventSeparator(e)+this._getFileUploadFileNames(t)),undefined},_logProgressName:function(e,t){return undefined},_logProgress:function(e,t){return undefined},_getFileUploadFileNames:function(e){var t="";return _.each(e.files,function(e){t.length>0&&(t+=", "),t+=e.name}),t},_getFileUploadEventSeparator:function(e){var t="fileuploadprogressall",n="";return _.times(t.length-e.type.length,function(){n+=" "}),n+" : "},_getProgress:function(e){var t=e.total,n=0;return t>0&&(n=parseInt(e.loaded/t*100,10)),"loaded: "+e.loaded+" total: "+e.total+" "+n+"%"}})}),define("files/dev/ops/listening/listening-for-quota-errors-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.ListeningForQuotaErrorsOp=e.Op.extend({run:function(){var e=$.Deferred();return this.options.appApi.errorApi.listenTo(this,"change:error",this._onErrorChange),this._deferred=e,this._deferred.resolve(),e.promise()},_onErrorChange:function(t,n){var r=this.options;if(!n)return;if(n.type!==e.ErrorUiModel.ERROR_TYPE_QUOTA)return;e.opFactory.create("ShowingQuotaWarningDlgOp",_.extend({},r,{uploading:!0,parentView:r.rootView})).run().then(function(){r.appApi.errorApi.dequeueError()})}})}),define("files/dev/ops/listening/listening-for-search-invalidation-op",["core/ac-core","files/ac-files","core/ops/while-signed-in-op"],function(e,t){t.ListeningForSearchInvalidationOp=e.WhileSignedInOp.extend({run:function(){var e=$.Deferred();return this.listenTo(this.options.searchUiModel,"change:invalid",this._onInvalidChange),this._deferred=e,e.promise()},_onInvalidChange:function(e,n){var r=this.options;n&&e.isSearching()&&r.appApi.routerApi.currentPathStartsWith("files")&&t.opFactory.create("SearchingOp",r).run()}})}),define("files/dev/ops/listening/listening-for-search-queries-change-op",["core/ac-core","files/ac-files","core/ops/while-signed-in-op"],function(e,t){return t.ListeningForSearchQueriesChangeOp=e.WhileSignedInOp.extend({run:function(){return this.listenTo(this.options.searchUiModel,"change:field_queries_request",this._onFieldQueriesRequestChange),$.Deferred().promise()},_onFieldQueriesRequestChange:function(){var e=this.options;if(e.searchUiModel.get("too_many_query_boxes"))return;e.selectionUiModel.clearSelection(),t.opFactory.create("SearchingIfAskedOp",e).run()}}),t.ListeningForSearchQueriesChangeOp}),define("files/dev/ops/listening/listening-for-selection-change-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/while-signed-in-op"],function(e,t,n){t.ListeningForSelectionChangeOp=e.WhileSignedInOp.extend({run:function(){return this._addUiModelEventListeners(),this._addAppApiCallbacks(),$.Deferred().promise()},_addUiModelEventListeners:function(){this.listenTo(this.options.selectionUiModel,"change:selected_item_models",this._onLocalSelectedItemModelsChange)},_removeUiModelEventListeners:function(){this.stopListening()},_onLocalSelectedItemModelsChange:function(e,t){this._removeAppApiCallbacks(),this.options.appApi.selectionApi.setSelectedItemModels(t),this._addAppApiCallbacks()},_addAppApiCallbacks:function(){var e=this.options,t=e.appApi,r=e.isDesktopConnectorPlugin||!1;n.isCEF()&&!r&&t.sessionApi.addSignedInChangeCallback(this._onSignedInChange),t.selectionApi.addSelectedItemsModelsChangeCallback(this._onAppSelectedItemModelsChange)},_onSignedInChange:function(e,t){t||(this._removeAppApiCallbacks(),this._removeUiModelEventListeners())},_removeAppApiCallbacks:function(){this.options.appApi.selectionApi.removeSelectedItemsModelsChangeCallback(this._onAppSelectedItemModelsChange)},_onAppSelectedItemModelsChange:function(e,t){this._removeUiModelEventListeners(),this.options.selectionUiModel.clearSelection(),this._addUiModelEventListeners()}})}),define("files/dev/views/view-events",["files/ac-files"],function(e){return e.ViewEvents={NAVIGATE_TO_FOLDER:"files:navigate-to-folder",FILTER_MENU_BTN_CLICK:"files:filter-menu-button-click",NEW_FOLDER:"files:new-folder",NEW_FOLDER_DLG_CREATE:"files:new-folder-dlg-create",SORT_MENU_BTN_CLICK:"files:sort-menu-button-click",TAGS_BTN_CLICK:"files:tags-button-click",SEARCH_BTN_CLICK:"files:search-button-click",SELECT_FILTER_MENU_ITEM:"files:select-filter-menu-item",SHARE_ITEMS_FROM_DLG:"files:share-items-from-dlg",SHARE_ITEM:"files:share-item",FULL_PREVIEW_CLOSE:"files:full-preview-close",FULL_PREVIEW_MENU_BTN_CLICK:"files:full-preview-menu-btn-click",FULL_PREVIEW_DELETE:"files:full-preview-delete",FULL_PREVIEW_PLUGIN_CLICK:"files:full-preview-plugin-click"},e.ViewEvents}),define("files/dev/ops/listening/listening-for-view-events-op",["core/ac-core","files/ac-files","core/ops/while-signed-in-op","core/views/view-events","files/views/view-events"],function(e,t){t.ListeningForViewEventsOp=e.WhileSignedInOp.extend({initialize:function(){e.WhileSignedInOp.prototype.initialize.call(this),this._initEventMap()},run:function(){var e=$.Deferred();return this.listenTo(this.options.rootView,"all",this._onViewEvent),this._deferred=e,e.promise()},_onViewEvent:function(t,n){var r,i,s,o;r=this._eventMap[t],r&&(i=r[0].create(r[1],n));if(!i){t!==e.ViewEvents.MENU_CLOSED&&LOG(0,"AcFiles.ListeningForViewEventsOp._onViewEvent ignoring "+t);return}s=i.options,s&&(o=s.parentDeferred),i.run().then(function(){o&&o.resolve()},function(){o&&o.reject()})},_mapEvent:function(e,t,n,r,i){e[t]=[n,r,i]},_initEventMap:function(){var n,r,i,s,o,u;n=this._eventMap={},r=this._mapEvent,i=e.opFactory,s=t.opFactory,o=e.ViewEvents,u=t.ViewEvents,r(n,o.SELECT_ITEM,i,"SelectingCollectionItemOp"),r(n,o.CLEAR_SELECTION,i,"ClearingSelectionOp"),r(n,o.OPEN_COLLECTION_ITEM,s,"OpeningCollectionItemOp"),r(n,o.OPEN_SELECTED_COLLECTION_ITEMS,s,"OpeningSelectedCollectionItemsOp"),r(n,o.SAVEAS_SELECTED_COLLECTION_ITEMS,s,"SaveAsSelectedCollectionItemsOp"),r(n,o.DOWNLOAD,i,"DownloadingAssetIfExistsOp"),r(n,o.DOWNLOAD_ZIP,i,"DownloadingZipStartOp"),r(n,o.DELETE,i,"DeletingSelectionIfConfirmedOp"),r(n,o.RENAME,i,"ShowingRenameDlgOp"),r(n,o.MOVE,i,"ShowingMoveDlgOp"),r(n,o.RENAME_ITEM_FROM_DLG,i,"RenamingItemFromDlgOp"),r(n,o.SHOW_PUBLIC_SHARE_DLG,s,"ShowingPublicShareDlgOp"),r(n,u.SHARE_ITEMS_FROM_DLG,s,"SharingItemsFromDlgOp"),r(n,u.SHARE_ITEM_FROM_PANEL,s,"SharingItemFromPanelOp"),r(n,u.SHARE_ITEM,i,"SharingItemOp"),r(n,o.MOVE_DLG_MOVE,i,"MovingItemsOp"),r(n,o.DUP_DLG_DELETE_EXISTING,i,"DeletingExistingDupOp"),r(n,o.DUP_DLG_RENAME_ADDED,i,"RenamingAddedDupOp"),r(n,o.GET_FOLDER_ITEMS,i,"GettingFolderItemsOp"),r(n,o.COLLECTION_RENDER_BEGIN,i,"HandlingCollectionRenderBeginOp"),r(n,o.COLLECTION_RENDER_END,i,"HandlingCollectionRenderEndOp"),r(n,o.GET_HOVER_PREVIEW_METADATA,i,"GettingHoverPreviewMetadataOp"),r(n,o.GET_RHP_PREVIEW_METADATA,i,"GettingRhpPreviewMetadataOp"),r(n,o.GET_RHP_FOLDER_CHILD_COUNTS,i,"GettingRhpFolderChildCountsOp"),r(n,o.SHOW_QUOTA_WARNING_DLG,i,"ShowingQuotaWarningDlgOp"),r(n,u.NAVIGATE_TO_FOLDER,s,"NavigatingToFolderOp"),r(n,o.SEARCH_IN_FOLDER,s,"SearchingOp"),r(n,u.NEW_FOLDER,s,"ShowingNewFolderDlgOp"),r(n,u.NEW_FOLDER_DLG_CREATE,s,"CreatingFolderFromDlgOp"),r(n,o.ADD_SEARCH_FIELD_QUERY,s,"AddingSearchFieldQueryOp"),r(n,o.REMOVE_SEARCH_FIELD_QUERY,s,"RemovingSearchFieldQueryOp"),r(n,o.REMOVE_LAST_FIELD_QUERY,s,"RemovingLastFieldQueryOp"),r(n,o.REMOVE_REMOVABLE_QUERIES,s,"RemovingRemovableQueriesOp"),r(n,u.FILTER_MENU_BTN_CLICK,s,"TogglingFilterMenuOp"),r(n,u.SORT_MENU_BTN_CLICK,s,"TogglingSortMenuOp"),r(n,o.VIEW_BY,s,"ChangingCollectionViewOp"),r(n,o.SORT,s,"SortingCollectionOp"),r(n,u.FULL_PREVIEW_PLUGIN_CLICK,s,"SelectingFullPreviewPluginOp"),r(n,u.FULL_PREVIEW_MENU_BTN_CLICK,s,"TogglingFullPreviewActionMenuOp"),r(n,u.FULL_PREVIEW_DELETE,s,"DeletingFullPreviewItemIfConfirmedOp"),r(n,o.SELECTION_ACTION_ITEM_CLICK,i,"SelectingSelectionActionItemOp"),r(n,o.LAUNCH_FOOTER_URL_IN_BROWSER,i,"LaunchFooterUrlInBrowserOp"),r(n,o.SELECTION_ACTION_SEND_AND_TRACK,i,"SelectionActionLaunchSendAndTrackAppOp"),r(n,o.SELECTION_ACTION_ATTACH_TO_EMAIL,i,"SelectionActionAttachToEmailOp")}})}),define("files/dev/ops/manipulation/deleting-full-preview-item-if-confirmed-op",["core/ac-core","files/ac-files","i18n!core/nls/ui-strings","core/utils/util","core/utils/sc-analytics","core/ops/op"],function(e,t,n,r,i){t.DeletingFullPreviewItemIfConfirmedOp=e.Op.extend({run:function(){var t=this.options,s,o=t.appApi.dialogApi,u=[],a=this._logSiteCatalystEvent;return a(i.SHOWN),s=n.CONFIRM_DELETE_TITLE,u=r.addToArray(u,t.scContext),u=r.addToArray(u,this._getSiteCatalystContext()),o.displayTextAlert(o.SEVERITY_WARNING,s,n.CONFIRM_DELETE_MSG_ONE_ITEM,n.DELETE,n.CANCEL,{scContext:u}).then(function(){return t=_.extend({},t,{noScEvent:!0}),$.when(t.appApi.previewApi.closeFullPreview(),e.opFactory.create("DeletingItemOp",t).run().done(function(){a(i.SUCCESS),t.selectionUiModel.clearSelection()}))},function(){a(i.CANCEL)})},_getSiteCatalystContext:function(){return i.DELETE_DLG}})}),define("files/dev/ops/misc/changing-collection-view-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.ChangingCollectionViewOp=e.Op.extend({run:function(){var e=this.options;return e.collectionsUiModel.set("view",e.view),t.opFactory.create("SavingFilesPrefsOp",e).run(),this._getResolvedPromise()}}),t.ChangingCollectionViewOp}),define("files/dev/ops/misc/navigating-to-folder-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/op"],function(e,t,n){t.NavigatingToFolderOp=e.Op.extend({run:function(r,i){var s=this.options,o=s.appApi,u=o.folderApi,a=o.displayApi,f=s.collectionUiModel,l,c=s.noUrlUpdate,h=s.noHistoryEffect,p=o.routerApi,d=o.saveAsApi,v=new $.Deferred,m=[],g;return n.isCEF()&&s.folderModel.get("content_type")&&s.folderModel.get("content_type")!=="application/vnd.adobe.skybox.folder"?(a.showSpinner(!0),o.saveAsApi.isRunningInFileSaveAs()&&o.saveAsApi.setCanSave(!1),s.selectionUiModel.clearSelection(),s.folderModel.fetch(s).done(function(){o.saveAsApi.isRunningInFileSaveAs()&&o.saveAsApi.setCanSave(!0),a.showSpinner(!1),s.folderModel.trigger("change:object_type"),v.resolve()}).fail(function(){a.showSpinner(!1),v.reject()}),v.promise()):(r=r||s.id,r?(a.showSpinner(!0),l="folder/"+encodeURIComponent(r),!c&&!h&&!p.isCurrentPath(l)&&p.navigate(l),(c||r!==u.getCurrentFolderId(s.pluginId))&&s.selectionUiModel.clearSelection(),u.setCurrentFolderId(s.pluginId,r),n.isCEF()&&d.isRunningInFileSaveAs()&&(d.setCurrentFolderId(r),d.setCanSave(!1)),!_.isUndefined(i)&&!_.isUndefined(i.ignoreErrors)&&(m=i.ignoreErrors),e.opFactory.create("GettingFolderOp",_.extend({},s,{ignoreErrors:m})).run(r,i).then(function(){f&&f.clearItemUiModels(),n.isCEF()&&d.isRunningInFileSaveAs()&&d.setCanSave(!0),u.setFilesCollection(s.folderModel.get("items").models),a.showSpinner(!1)},function(e){g=_.find(m,function(e){return e===404}),e.status===404&&!_.isUndefined(g)&&t.opFactory.create("NavigatingToFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:i.force}),a.showSpinner(!1)})):this._getRejectedPromise())}})}),define("files/dev/ops/misc/navigating-to-scan-folder-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/op"],function(e,t,n){t.NavigatingToScanFolderOp=e.Op.extend({run:function(r,i){var s=this.options,o=s.appApi,u=o.folderApi,a=o.displayApi,f=s.collectionUiModel,l,c=s.pluginUiModel,h=s.noUrlUpdate,p=s.noHistoryEffect,d=o.routerApi,v=o.saveAsApi,m=new $.Deferred,g=[],y,b=!1,w,E=!1,S;r=s.appApi.folderApi.getRootFolderId();if(r===s.appApi.folderApi.getRootFolderId()){var x=s.folderModel.get("members");E=!0,_.each(x,function(e){e.created_by_client&&e.created_by_client.startsWith("api_scan_mobile")===!0&&e.object_type&&e.object_type==="folder"&&e.parent_id===s.appApi.folderApi.getRootFolderId()&&(r=e.id,b=!0,S=e.name)}),r===s.appApi.folderApi.getRootFolderId()&&E===!0&&b===!1?(w=!1,s.folderModel.scanFound=!1):r===s.appApi.folderApi.getRootFolderId()&&E===!0&&b===!0&&(w=!0,s.folderModel.scanFound=!0,s.folderModel.scanId=r,s.folderModel.scanFolderName=S)}return r!==s.appApi.folderApi.getRootFolderId()&&b===!0&&(w=!0,s.folderModel.scanFound=!0,s.folderModel.scanId=r,s.folderModel.scanFolderName=S),r?(a.showSpinner(!0),l="folder/"+encodeURIComponent(r),!h&&!p&&!d.isCurrentPath(l)&&d.navigate(l),(h||r!==u.getCurrentFolderId(s.pluginId))&&s.selectionUiModel.clearSelection(),u.setCurrentFolderId(s.pluginId,r),n.isCEF()&&v.isRunningInFileSaveAs()&&(v.setCurrentFolderId(r),v.setCanSave(!1)),!_.isUndefined(i)&&!_.isUndefined(i.ignoreErrors)&&(g=i.ignoreErrors),E===!0&&w===!1?e.opFactory.create("GettingFolderOp",_.extend({},s,{ignoreErrors:g})).run(r,i).then(function(){f&&f.clearItemUiModels(),n.isCEF()&&v.isRunningInFileSaveAs()&&v.setCanSave(!0),u.setFilesCollection(s.folderModel.get("items").models);var e=s.folderModel.get("members"),i=!1,o=!0;_.each(e,function(e){e.created_by_client&&e.created_by_client.startsWith("api_scan_mobile")===!0&&e.object_type&&e.object_type==="folder"&&e.parent_id===s.appApi.folderApi.getRootFolderId()&&(r=e.id,i=!0)}),E===!0&&i===!0?(s.folderModel.scanFound=!0,s.folderModel.scanId=r,t.opFactory.create("NavigatingToScanFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:s})):E===!0&&i===!1&&(s.folderModel.scanFound=!1),a.showSpinner(!1)},function(e){y=_.find(g,function(e){return e===404}),e.status===404&&!_.isUndefined(y)&&t.opFactory.create("NavigatingToScanFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:i.force}),a.showSpinner(!1)}):b===!1?e.opFactory.create("GettingFolderOp",_.extend({},s,{ignoreErrors:g})).run(r,i).then(function(){f&&f.clearItemUiModels(),n.isCEF()&&v.isRunningInFileSaveAs()&&v.setCanSave(!0),u.setFilesCollection(s.folderModel.get("items").models),t.opFactory.create("NavigatingToScanFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:s}),a.showSpinner(!1)},function(e){y=_.find(g,function(e){return e===404}),e.status===404&&!_.isUndefined(y)&&t.opFactory.create("NavigatingToScanFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:i.force})}):e.opFactory.create("GettingFolderOp",_.extend({},s,{ignoreErrors:g})).run(r,i).then(function(){f&&f.clearItemUiModels(),n.isCEF()&&v.isRunningInFileSaveAs()&&v.setCanSave(!0),u.setFilesCollection(s.folderModel.get("items").models),s.appApi.siteCatalystApi.logScEvent(["ScanUser:FoldersShown:"+ +s.folderModel.getChildFoldersCount()],{featureType:"AdobeScanTab:Clicked",sectionName:"ScanPromotion"}),s.appApi.siteCatalystApi.logScEvent(["ScanUser:FilesShown:"+ +s.folderModel.getChildFilesCount()],{featureType:"AdobeScanTab:Clicked",sectionName:"ScanPromotion"}),a.showSpinner(!1)},function(e){y=_.find(g,function(e){return e===404}),e.status===404&&!_.isUndefined(y)&&t.opFactory.create("NavigatingToScanFolderOp",s).run(u.getRootFolderId(s.pluginId),{force:i.force}),a.showSpinner(!1)})):this._getRejectedPromise()}})}),define("files/dev/ops/misc/navigating-to-acroprefs-folder-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/op"],function(e,t,n){t.NavigatingToAcroPrefsFolderOp=e.Op.extend({run:function(n,r){var i=this.options,s=[],o;i.folderModel.ScanInstalled=!1,s=[404];var u=i.appApi.folderApi.getAcroPrefsFolderId();return u?e.opFactory.create("GettingSystemFolderMetadataOp",_.extend({},i,{ignoreErrors:s})).run(u).then(function(e){var n=i.appApi.rnaApi,r=_.find(s,function(e){return e===404});e.status===404&&!_.isUndefined(r)&&t.opFactory.create("NavigatingToAcroPrefsFolderOp",i).run();if(e.members){var o=e.members;_.each(o,function(e){e.name==="ScanInstalled"&&(i.folderModel.ScanInstalled=!0)})}var u="NO";i.folderModel.ScanInstalled===!0&&(u="YES"),n.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&e.invokeMethod({methodName:"logASTestReportAPI",methodArgs:["ScanTabData","ScanTabAcroprefs",u]})})}):$.Deferred().reject().promise()}})}),define("files/dev/ops/misc/opening-collection-item-op",["core/ac-core","files/ac-files","plugins-common/ac-plugins","core/utils/util","core/ops/op"],function(e,t,n,r){t.OpeningCollectionItemOp=e.Op.extend({run:function(){var e=this.options,i=e.appApi,s=e.itemModel,o=e.itemView,u,a,f,l=e.selectionUiModel;if(!o&&!s)return this._getRejectedPromise();o?u=o.model:u=s,a=u.id;if(u.isFolder()&&(o||r.isCEF()&&!(l.getNumSelectedItems()>1)))f=t.opFactory.create("NavigatingToFolderOp",_.extend({},e.collectionItemsView?e.collectionItemsView.options:e,{id:a}));else{if(!i.acrobatApi.isInAcrobat())return e.noFullPreview||(e.notDeselectAll||e.selectionUiModel.deselectAllExcept(a,!0),u.isForm()?i.pluginsApi.selectPlugin(n.FILLSIGN,{formId:a,formName:u.get("name")}):r.isCEF()&&u.isPDF()?t.opFactory.create("OpeningFullPreviewOp",_.extend(e,{id:a,itemModel:u})).run():i.routerApi.navigate("file/"+encodeURIComponent(a),{trigger:!0})),this._getResolvedPromise();f=t.opFactory.create("OpeningInAcrobatOp",_.extend({},e,{ids:[a]}))}return f.run()}})}),define("files/dev/ops/misc/opening-selected-collection-items-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.OpeningSelectedCollectionItemsOp=e.Op.extend({run:function(){var e=this.options,n,r,i=[];return n=e.selectionUiModel,r=n.get("selected_item_models"),_.each(r,function(n){var r=t.opFactory.create("OpeningCollectionItemOp",_.extend({},e,{itemModel:n,notDeselectAll:!0})).run();i.push(r)}),$.when.apply($,i)}})}),define("files/dev/ops/misc/save-as-selected-collection-items-op",["core/ac-core","files/ac-files","i18n!core/nls/ui-strings","core/models/rna/rna-notification-model","core/ops/op"],function(e,t,n,r){var i="binder.zip";t.SaveAsSelectedCollectionItemsOp=e.Op.extend({run:function(){var t=this.options,n,s,o=t.appApi,u=$.Deferred().resolve().promise(),a,f,l,c,h={notificationHeading:t.notificationHeading};n=t.selectionUiModel,a=n.getSelectionCountByType(),f=a.numFiles,l=a.numFolders;if(l===0&&f>0){s=n.getSelectedItemModels(),s=_.filter(s,function(e){return!e.isForm()});if(s.length===0)return u;s.length===1?c=s[0].get("name"):c=i,h.fileName=c,h.fileExtn=e.Util.getExtension(c),h.showDownloadAll=!1,o.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:r.NOTIFICATION_OPERATIONS.PROCESS,state:r.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(h),progress:0,description:t.notificatonCategory}).done(_.bind(function(t){s.length===1?this._downloadSingleFile(s[0],t).then(_.bind(function(e){this._onDownloadCompletion(t,e)},this),_.bind(function(e){this._onDownloadFailed(t,e)},this)):(e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),this._downloadMultipleFiles(s,t).then(_.bind(function(e){this._onDownloadCompletion(t,e)},this),_.bind(function(e){this._onDownloadFailed(t,e)},this)))},this))},this))}return u},_downloadSingleFile:function(t,n){var i=this.options,s,o=e.opFactory;return s=o.create("DownloadingFileOp",_.extend({},i,{itemModelProxy:t._proxy,assetId:t.id,fileName:t.get("name")})).run(),s[1].done(function(e){var t=n.get("userData"),s={};try{s=JSON.parse(t)}catch(o){}e.errorSet?i.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.removeNotification(n.get("notificationID"))},this)):(e.downloadedFileName&&(s.downloadedFileName=e.downloadedFileName),n.invoke("setProperty",{userData:JSON.stringify(s),operationType:r.NOTIFICATION_OPERATIONS.DOWNLOAD}),i.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0)},this)))}),s[0]},_downloadMultipleFiles:function(t,n){var r=this.options,s=e.opFactory,o=_.pluck(t,"id").join(";");return s.create("DownloadingZipStartOp",_.extend({},r,{id_list:o,numForms:0,fileName:i,notificationObj:n})).run()},_onDownloadCompletion:function(e,t){var n=e.get("userData"),i={};try{i=JSON.parse(n)}catch(s){}t.downloadedFileSys&&(i.downloadedFileSys=t.downloadedFileSys),t.downloadedFilePath&&(i.downloadedFilePath=t.downloadedFilePath),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(i),state:r.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,t){if(t!==7){var i={errorTitle:n.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:r.NOTIFICATION_STATES.FAILED,error:JSON.stringify(i)})}}})}),define("files/dev/ops/misc/sorting-collection-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.SortingCollectionOp=e.Op.extend({run:function(){var n=this.options,r=this.options.sortUiModel,i=n.orderBy,s=e.SortUiModel,o;return r.setOrder(i,n.orderDirection),(i===s.ORDER_BY_DATE_ADDED||i===s.ORDER_BY_DATE_MODIFIED||i===s.ORDER_BY_DATE_LAST_ACCESS)&&r.set("mru_date_order",i),t.opFactory.create("SavingFilesPrefsOp",n).run(),n.filesUiModel.isFolderView()?o=n.appApi.folderApi.enqueueRefreshCurrentFolder(n,{excludeEtag:!0}):o=t.opFactory.create("SearchingOp",n).run(),o}})}),define("files/dev/ops/misc/toggling-filter-menu-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.TogglingFilterMenuOp=e.Op.extend({run:function(){var e=this.options.filesUiModel;return e.set("show_filter_menu",!e.get("show_filter_menu")),this._getResolvedPromise()}}),t.TogglingFilterMenuOp}),define("files/dev/ops/misc/toggling-sort-menu-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.TogglingSortMenuOp=e.Op.extend({run:function(){var e=this.options.filesUiModel;return e.set("show_sort_menu",!e.get("show_sort_menu")),this._getResolvedPromise()}}),t.ToggingSortMenuOp}),define("files/dev/ops/preview/closing-full-preview-op",["core/ac-core","files/ac-files","core/utils/image-loader","core/ops/op"],function(e,t,n){t.ClosingFullPreviewOp=e.Op.extend({run:function(){var t=this.options,r=t.fullPreviewUiModel,i=r.get("item_model"),s;return i&&e.opFactory.create("SettingAssetMetadataOp",_.extend({},t,{id:i.id,key:"last_pagenum",value:r.get("current_page"),global:!1})).run(),s=r.get("prev_non_preview_path"),r.close(),n.cancelPendingRequests(),t.noHistoryEffect||t.appApi.routerApi.navigate(s||"/",{trigger:!0}),t.fullPreviewOverlaysUiModel&&t.fullPreviewOverlaysUiModel.unset("selected_plugin_id"),this._getResolvedPromise()}})}),define("files/dev/ops/preview/creating-ngdoc-rendition-op",["core/ac-core","files/ac-files","core/utils/util","core/utils/http-util","core/ops/op"],function(e,t,n,r){t.CreatingNGDocRenditionOp=e.Op.extend({run:function(){var e=this.options,i=e.fullPreviewUiModel,s=i.get("item_model"),o,u="POST",a,f=e.appApi,l=e.invitationId;a=s.get("name");if(!n.isSvgSupported()||!s.isPDF()&&n.getExtension(a.toLowerCase())!=="pdf")return this._getRejectedPromise();if(f.baseFilesUrisApi&&!l)o=f.baseFilesUrisApi.getApiUri()+"assets/"+s.id+"/ngdoc?"+r.getClientIdQueryParam();else{if(!e.baseFilesUrisModel||!l)return this._getRejectedPromise();o=e.baseFilesUrisModel.get("send_api")+"invitation/"+l+"/asset/"+s.id+"/ngdoc?"+r.getClientIdQueryParam()}return $.ajax(o,_.extend({type:u,headers:r.getRequestHeadersNoClientId(u),dataType:"json"},e)).then(function(n){n&&n.results&&(n.results.status==="done"?i.ngdocJobCompleted():n.results.jobID&&(i.set("ngdoc_job_id",n.results.jobID),i.ngdocJobStarted(),t.opFactory.create("ListeningForNGDocJobStatusOp",e).run()))})}})}),define("files/dev/ops/preview/getting-full-preview-metadata-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.GettingFullPreviewMetadataOp=e.Op.extend({run:function(){var t=this.options,n=t.fullPreviewUiModel,r=n.get("item_model"),i,s,o;if(r){i=r.get("last_pagenum"),s=r.get("page_count");if(!_.isUndefined(i)&&!_.isUndefined(s))return n.set({page_count:s,current_page:i}),this._getResolvedPromise()}return t.id||(t.id=r.id),e.opFactory.create("GettingAssetMetadataOp",t).run().done(function(s){var u;r||(r=e.modelFactory.create("AssetModel",s)),u=e.Features.isFeatureEnabled("enable_ngdoc")&&t.appApi.usersMeApi.isUserInCohort("bh-ngdoc","enabled"),n.init({item_model:r,enable_ngdoc:u,view_type:u?"ngdoc":"bitmap"}),r.set({preview_url:s.preview_url}),i=s.last_pagenum,_.isNumber(i)||(i=parseInt(i,10)),o=_.isNaN(i)?0:i,n.set({page_count:s.page_count,current_page:o})})}})}),define("files/dev/ops/preview/listening-for-ngdoc-job-status-op",["core/ac-core","files/ac-files","core/utils/http-util","core/utils/sc-analytics","core/ops/op"],function(e,t,n,r){t.ListeningForNGDocJobStatusOp=e.Op.extend({run:function(){return this._timerDelay=this.options.fullPreviewUiModel.get("ngdoc_timer_delay"),this._startListeningForNGDocJob(),$.Deferred().promise()},_startListeningForNGDocJob:function(){var e=this.options,t=e.fullPreviewUiModel,n;if(!t.get("ngdoc_job_id"))return;n=_.delay(_.bind(function(){this._getNGDocJobStatus()},this),this._timerDelay),t.set("ngdoc_timer_id",n)},_stopListeningForNGDocJob:function(){var e=this.options,t=e.fullPreviewUiModel,n=t.get("ngdoc_timer_id");if(!n)return;clearTimeout(n),t.set("ngdoc_timer_id",undefined,{silent:!0})},_getNGDocJobStatus:function(){var e=this.options,t=e.fullPreviewUiModel,i=t.get("ngdoc_job_id"),s=t.get("item_model"),o,u="GET",a;if(!i){this._stopListeningForNGDocJob();return}if(e.appApi.baseFilesUrisApi&&!e.invitationId)o=e.appApi.baseFilesUrisApi.getApiUri()+"assets/"+s.id+"/ngdoc?ngDocJobID="+i+"&"+n.getClientIdQueryParam(),a=e.appApi.networkApi.throttledAjax;else{if(!e.baseFilesUrisModel||!e.invitationId)return;o=e.baseFilesUrisModel.get("send_api")+"invitation/"+e.invitationId+"/asset/"+s.id+"/ngdoc?ngDocJobID="+i+"&"+n.getClientIdQueryParam(),a=$.ajax}a(o,_.extend({type:u,headers:n.getRequestHeadersNoClientId(u),dataType:"json"},e)).then(_.bind(function(n){n&&n.results&&n.results.jobID===i&&(n.results.status==="done"?(t.ngdocJobCompleted(),this._stopListeningForNGDocJob()):n.results.status==="failed"?(t.set("enable_ngdoc",!1,{silent:!0}),e.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.NGDOC,s.isPDF()?r.PDF:r.NON_PDF,r.FAILED]),this._stopListeningForNGDocJob()):(this._stopListeningForNGDocJob(),this._timerDelay=this._timerDelay*1.2,this._startListeningForNGDocJob()))},this),_.bind(function(){this._stopListeningForNGDocJob()},this))}})}),define("files/dev/ops/preview/loading-full-preview-plugins-op",["core/ac-core","files/ac-files","core/utils/util","core/ops/op"],function(e,t,n){t.LoadingFullPreviewPluginsOp=e.Op.extend({run:function(){var t=this.options,r,i,s,o,u,a,f=t.appApi.pluginsApi;return r=f.getPluginTypeConfig("full_preview"),i=f.getPluginTypeConfig("full_preview_rhp"),s=f.getPluginTypeConfig("full_preview_overlays"),n.isCEF()&&t.runningInRHP&&(r.plugin_ids=_.filter(r.plugin_ids,function(e){return e===r.default_plugin_id})),o=e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:r,pluginsUiModel:t.fullPreviewPluginsUiModel,pluginContext:t},_.pick(t,"appApi"))),u=e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:i,pluginsUiModel:t.fullPreviewRhpPluginsUiModel,pluginContext:t},_.pick(t,"appApi"))),a=e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:s,pluginsUiModel:t.fullPreviewOverlaysUiModel,pluginContext:t},_.pick(t,"appApi"))),o.run().then(function(){return $.when(u.run(),a.run())})}})}),define("files/dev/ops/preview/opening-full-preview-op",["core/ac-core","files/ac-files","core/utils/util","core/utils/sc-analytics","core/ops/op"],function(e,t,n,r){return t.OpeningFullPreviewOp=e.Op.extend({run:function(){var i=this.options,s=i.appApi,o=s.routerApi,u=s.siteCatalystApi,a=t.opFactory,f,l,c,h,p=i.fullPreviewUiModel,d=i.fullPreviewPluginsUiModel,v=i.fullPreviewOverlaysUiModel,m,g,y,b=e.opFactory,w,E=this._getRejectedPromise();return n.isCEF()?b.create("OpeningDocInReaderOp",i).run():i.noFullPreview?this._getResolvedPromise():(u.logScEvent([r.PREVIEW,r.SHOWN]),f=a.create("LoadingFullPreviewPluginsOp",i),l=a.create("GettingFullPreviewMetadataOp",i),w=a.create("CreatingNGDocRenditionOp",i),c=a.create("SelectingFullPreviewPluginOp",i),m="file/"+encodeURIComponent(i.id),o.isCurrentPath(m)||s.routerApi.navigate(m),f.run().then(function(){return l.run().then(function(){var t=E;return g=p.get("item_model").get("name"),y=n.getExtension(g.toLowerCase())==="pdf",p.get("enable_ngdoc")&&(t=w.run()),t.then(function(){u.logScEvent([r.PREVIEW,r.NGDOC,y?r.PDF:r.NON_PDF,r.SHOWN])},function(){p.set("enable_ngdoc",!1,{silent:!0}),u.logScEvent([r.PREVIEW,y?r.PDF:r.NON_PDF,r.SHOWN])}),s.previewApi.openedFullPreview(i),h=d.getSelectedId(),c.run(h).always(function(){return v.get("selected_plugin_id")||(h=v.get("default_plugin_id"),h&&(t=e.opFactory.create("SelectingPluginOp",i).run(h))),e.opFactory.create("SettingAssetMetadataOp",_.extend({},i,{id:p.get("item_model").id,key:"last_access",value:-1,global:!1})).run(),t})})}))}}),t.OpeningFullPreviewOp}),define("files/dev/ops/preview/selecting-full-preview-plugin-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.SelectingFullPreviewPluginOp=e.Op.extend({run:function(t){var n=this.options;return n.appApi.pluginsApi.hasPluginType("full_preview")?e.opFactory.create("SelectingPluginOp",n).run(t):this._getResolvedPromise()}})}),define("files/dev/ops/preview/toggling-full-preview-action-menu-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.TogglingFullPreviewActionMenuOp=e.Op.extend({run:function(){var e;return e=this.options.fullPreviewUiModel,e.set("show_action_menu",!e.get("show_action_menu")),this._getResolvedPromise()}})}),define("files/dev/ops/searching/adding-search-field-query-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.AddingSearchFieldQueryOp=e.Op.extend({run:function(){var e=this.options,t=e.searchUiModel,n=e.appApi,r=e.searchFieldQuery,i;return i=r.value,i?t.addFieldQuery(r):t.removeFieldQuery(t.getFieldQueryId(r)),!e.noUrlUpdate&&t.hasQueryBox()&&n.routerApi.navigate(t.appendRootPath(t.getSearchPath(),n.connectorsApi.getConnectorPluginRoot(e.pluginId))),this._getResolvedPromise()}}),t.AddingSearchFieldQueryOp}),define("files/dev/ops/searching/closing-search-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){var n;t.ClosingSearchOp=e.Op.extend({run:function(){var e=this.options,r=e.folderUiModel,i;return n?this._getRejectedPromise():(n=!0,e.searchUiModel.closeSearch(),e.searchModel.resetSearchResults(),e.filesUiModel.set("view",t.FilesUiModel.VIEW_FOLDER),i=r.get("route_folder_id"),i?r.unset("route_folder_id"):i=e.appApi.folderApi.getCurrentFolderId(e.pluginId),t.opFactory.create("NavigatingToFolderOp",e).run(i,{force:!0,ignoreErrors:[404]}).always(function(){n=!1}))}})}),define("files/dev/ops/searching/scan-closing-search-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){var n;t.ScanClosingSearchOp=e.Op.extend({run:function(){var e=this.options,r=e.folderUiModel,i;return n?this._getRejectedPromise():(n=!0,e.searchUiModel.closeSearch(),e.searchModel.resetSearchResults(),e.filesUiModel.set("view",t.FilesUiModel.VIEW_FOLDER),i=r.get("route_folder_id"),i?r.unset("route_folder_id"):i=e.appApi.folderApi.getCurrentFolderId(e.pluginId),t.opFactory.create("NavigatingToScanFolderOp",e).run(i,{force:!0,ignoreErrors:[404]}).always(function(){n=!1}))}})}),define("files/dev/ops/searching/opening-search-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.OpeningSearchOp=e.Op.extend({run:function(){var e=this.options;return e.filesUiModel.set("view",t.FilesUiModel.VIEW_SEARCH_RESULTS),t.opFactory.create("SearchingOp",e).run()}})}),define("files/dev/ops/searching/removing-last-field-query-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.RemovingLastFieldQueryOp=e.Op.extend({run:function(){return this.options.searchUiModel.removeLastFieldQuery(),this._getResolvedPromise()}}),t.RemovingLastFieldQueryOp}),define("files/dev/ops/searching/removing-removable-queries-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.RemovingRemovableQueriesOp=e.Op.extend({run:function(){return this.options.searchUiModel.removeRemovableFieldQueries(),this._getResolvedPromise()}}),t.RemovingRemovableQueriesOp}),define("files/dev/ops/searching/removing-search-field-query-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.RemovingSearchFieldQueryOp=e.Op.extend({run:function(){var e=this.options,t=e.searchUiModel;return t.removeFieldQuery(e.searchFieldQuery.id),this._getResolvedPromise()}}),t.RemovingSearchFieldQueryOp}),define("files/dev/ops/searching/searching-if-asked-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.SearchingIfAskedOp=e.Op.extend({run:function(){var e=this.options,n=e.searchUiModel,r,i,s,o=t.opFactory,u;return r=n.getFieldQueries(),i=n.getFilters(),s=_.extend({},e),r&&(_.extend(s,{query:r}),i&&_.extend(s,{filter:i})),o=t.opFactory,s.query||s.filter?u=o.create("OpeningSearchOp",s):u=o.create("ClosingSearchOp",e),u.run()}})}),define("files/dev/ops/searching/scan-searching-if-asked-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.ScanSearchingIfAskedOp=e.Op.extend({run:function(){var e=this.options,n=e.searchUiModel,r,i,s,o=t.opFactory,u;return r=n.getFieldQueries(),i=n.getFilters(),s=_.extend({},e),r&&(_.extend(s,{query:r}),i&&_.extend(s,{filter:i})),o=t.opFactory,s.query||s.filter?u=o.create("OpeningSearchOp",s):u=o.create("ScanClosingSearchOp",e),u.run()}})}),define("files/dev/ops/searching/searching-op",["core/ac-core","files/ac-files","core/utils/util","core/utils/http-util","core/ops/op"],function(e,t,n,r){var i,s,o,u;t.SearchingOp=e.Op.extend({run:function(){function R(e){return i===e.op._requestId}var t=this.options,a=t.pluginId,f=t.searchModel,l=t.searchUiModel,c=t.sortUiModel,h={},p,d,v,m,g,y,b,w,E,S=t.appApi,x=S.displayApi,T=S.routerApi,N,C,k,L,A,O,M,D={},P,H,B,j=[],F=S.connectorsApi,I,q;g="POST",d=t.query,v=t.filter,d?(l.set("mru_query",d),l.set("mru_filter",v)):(d=l.get("mru_query"),v=l.get("mru_filter"));if(n.isCEF()&&t.searchLocally)return w=f.get("items"),w.reset(),t.rnaRecentFilesSelect?w.reset(t.folderModel.get("items").filter(function(t){var n=!1,r,i,s=d.$and.length,o,u=!0,a;for(r=0;r<s;++r)d.$and[r].hasOwnProperty(e.SearchUiModel.FIELD_ALL)&&(u=!1,i=d.$and[r][e.SearchUiModel.FIELD_ALL].length,i>1&&(a=t.get("name").toLowerCase(),o=d.$and[r][e.SearchUiModel.FIELD_ALL].toLowerCase(),o=o.slice(1,i-1),n=n||a.indexOf(o)>-1));return u?t.isPDF():n&&t.isPDF()})):w.reset(t.folderModel.get("items").filter(function(e){return e.isPDF()})),l.set("status",e.SearchUiModel.STATUS_SUCCEEDED),this._getResolvedPromise();if(l.showFolders(!0)){t.pluginId==="scan_files"?A={parent_id:t.search_folder_id||t.appApi.folderApi.getCurrentFolderId(a)||l.get("current_folder_id")}:A={parent_id:t.search_folder_id||l.get("current_folder_id")||t.appApi.folderApi.getCurrentFolderId(a)},O={object_type:"folder"},M={$and:[O,A]},d.$and||(H=d,d={},d.$and=[H]);for(P=0;P<d.$and.length;P+=1)if(d.$and[P].parent_id){d.$and[P]=A;break}P===d.$and.length&&d.$and.push(A),D.$or=[M,d],d=D,h[e.SortUiModel.ORDER_BY_OBJECT_TYPE]=1}else{B=d.$and,B||(H=d,d={},B=d.$and=[H]),B[B.length]={object_type:"file"};if(t.pluginId==="scan_files"){A={parent_id:t.search_folder_id||t.appApi.folderApi.getCurrentFolderId(a)||l.get("current_folder_id")};for(P=0;P<d.$and.length;P+=1)if(d.$and[P].parent_id){d.$and[P]=A;break}P===d.$and.length&&d.$and.push(A)}}return p=c.getOrderDirection()===e.SortUiModel.ORDER_ASCENDING?1:0,h[c.get("order_by")]=p,F.isConnectorPlugin(a)?(q=F.getConnectorPluginName(a),q==="root"?j.push("native"):j.push(q)):(j=_.pluck(F.getConnectors(),"name"),I=_.indexOf(j,"root"),I!==-1&&(j[I]="native")),y={q:d,sort:h,metadata:f.get("metadata"),sources:j},v&&_.extend(y,{filter:v}),m=l.get("pagesize"),m&&_.extend(y,{pagesize:m}),_.isEqual(d,s)&&_.isEqual(v,o)&&_.isEqual(h,u)?this._getRejectedPromise():(s=d,o=v,u=h,w=f.get("items"),t.noSearchReset||w.reset(),i=this._requestId=_.uniqueId(),E={op:this},l.set("status",e.SearchUiModel.STATUS_PENDING),A&&l.set("current_folder_id",A.parent_id),t.noUrlUpdate||(C=T.getCurrentPath(),N=l.getSearchPath(),k=!1,L=S.connectorsApi.getConnectorPluginRoot(a),C.indexOf(N)===0?C.indexOf("files")===0&&(k=!0,N=l.appendRootPath(C,L)):l.hasQueryBox()&&(N=l.appendRootPath(N,L)),T.isCurrentPath(N)||T.navigate(N,{replace:k})),_.defer(function(){l.isSearchPending()&&x.showSpinner(!0)}),b=JSON.stringify(y),b=n.compressQuestionMarks(b),n.isCEF()&&S.saveAsApi.isRunningInFileSaveAs()&&(S.saveAsApi.setCurrentFolderId(l.get("current_folder_id")),S.saveAsApi.setCanSave(!1)),S.networkApi.throttledAjax(f.url(),{type:g,headers:r.getRequestHeadersNoClientId(g),context:E,data:b,dataType:"json",global:!1}).then(function(r){x.showSpinner(!1),R(this)&&!l.isSearchClosed()&&(w.reset(r.results),S.folderApi.setFilesCollection(w.models),n.isCEF()&&S.saveAsApi.isRunningInFileSaveAs()&&S.saveAsApi.setCanSave(!0),l.set("status",e.SearchUiModel.STATUS_SUCCEEDED),l.showFolders()&&e.opFactory.create("GettingFolderPathOp",_.extend(t,{id:l.get("current_folder_id"),global:!1})).run())},function(t){x.showSpinner(!1),t.status===401?S.sessionApi.signedOut():R(this)&&l.set("status",e.SearchUiModel.STATUS_FAILED)}).always(function(){s=undefined,o=undefined,u=undefined}))}})}),define("files/dev/ops/sharing/sharing-item-from-panel-op",["core/ac-core","core/ops/op"],function(e){e.SharingItemFromPanelOp=e.Op.extend({run:function(){var t=this.options,n,r,i,s,o;return n=t.model,i=t.isPublic,s=t.global,s===undefined&&(s=!0),r={model:n,isPublic:i,global:s},o=e.opFactory.create("SharingItemOp",r).run(),o.fail(function(e){t.appApi.errorApi.enqueueAjaxError(e)})}})}),define("files/dev/ops/sharing/sharing-items-from-dlg-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){t.SharingItemsFromDlgOp=e.Op.extend({run:function(){var n=this.options,r,i,s,o,u=[],a;return i=n.modelsToProcess,o=n.isPublic,r=n.sharingUiModel,i.length>0&&r.set({status:t.SharingUiModel.STATUS_PENDING}),_.each(i,function(t){s={model:t,isPublic:o},a=e.opFactory.create("SharingItemOp",s).run(),a.fail(function(e){r.enqueueAjaxError(t,e)}),u.push(a)}),$.when.apply(null,u).done(function(){r.set({status:t.SharingUiModel.STATUS_SUCCEEDED})})}})}),define("files/dev/ops/user/restoring-files-prefs-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.RestoringFilesPrefsOp=e.Op.extend({run:function(){var e=this.options,t=e.sortUiModel,n,r,i,s,o,u,a,f=e.collectionsUiModel,l;if(e.noPreferences)return;return n=e.appApi.usersMeApi.getUserPrefsByCategory("files"),r=n[e.pluginId]||n,l=e.appApi.routerApi.getQueryParams(),i=r.sort,i&&!t.hasSortQueryParam(l)&&t.set({order_by:i.order_by,order_direction:i.order_direction,mru_date_order:i.mru_date_order}),s=r.collections,s&&!f.hasViewQueryParam(l)&&f.set("view",s.view),o=r.fullPreview,o&&(u=o.show_info,a=o.show_rhp,u&&!a&&(a=u),e.fullPreviewUiModel.set("show_rhp",a)),this._getResolvedPromise()}}),t.RestoringFilesPrefsOp}),define("files/dev/ops/user/saving-files-prefs-op",["core/ac-core","files/ac-files","core/ops/op"],function(e,t){return t.SavingFilesPrefsOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.usersMeApi,n=e.sortUiModel,r=e.collectionsUiModel,i=e.fullPreviewUiModel,s,o,u=this._getResolvedPromise();return e.noPreferences?u:(o={sort:{order_by:n.get("order_by"),order_direction:n.get("order_direction"),mru_date_order:n.get("mru_date_order")},collections:{view:r.get("view")},fullPreview:{show_rhp:i.get("show_rhp")}},s=t.getUserPrefsByCategory("files"),s[e.pluginId]=o,t.setUserPrefs("files",s))}}),t.SavingFilesPrefsOp}),define("files/dev/ops/op-factory",["core/ac-core","files/ac-files","files/ops/acrobat/initializing-acrobat-op","files/ops/acrobat/selecting-acrobat-filter-op","files/ops/creating/creating-folder-from-dlg-op","files/ops/dialogs/showing-new-folder-dlg-op","files/ops/listening/listening-for-current-folder-notifications-op","files/ops/listening/listening-for-dup-errors-op","files/ops/listening/listening-for-file-upload-events-op","files/ops/listening/listening-for-quota-errors-op","files/ops/listening/listening-for-search-invalidation-op","files/ops/listening/listening-for-search-queries-change-op","files/ops/listening/listening-for-selection-change-op","files/ops/listening/listening-for-view-events-op","files/ops/manipulation/deleting-full-preview-item-if-confirmed-op","files/ops/misc/changing-collection-view-op","files/ops/misc/navigating-to-folder-op","files/ops/misc/navigating-to-scan-folder-op","files/ops/misc/navigating-to-acroprefs-folder-op","files/ops/misc/opening-collection-item-op","files/ops/misc/opening-selected-collection-items-op","files/ops/misc/save-as-selected-collection-items-op","files/ops/misc/sorting-collection-op","files/ops/misc/toggling-filter-menu-op","files/ops/misc/toggling-sort-menu-op","files/ops/preview/closing-full-preview-op","files/ops/preview/creating-ngdoc-rendition-op","files/ops/preview/getting-full-preview-metadata-op","files/ops/preview/listening-for-ngdoc-job-status-op","files/ops/preview/loading-full-preview-plugins-op","files/ops/preview/opening-full-preview-op","files/ops/preview/selecting-full-preview-plugin-op","files/ops/preview/toggling-full-preview-action-menu-op","files/ops/searching/adding-search-field-query-op","files/ops/searching/closing-search-op","files/ops/searching/scan-closing-search-op","files/ops/searching/opening-search-op","files/ops/searching/removing-last-field-query-op","files/ops/searching/removing-removable-queries-op","files/ops/searching/removing-search-field-query-op","files/ops/searching/searching-if-asked-op","files/ops/searching/scan-searching-if-asked-op","files/ops/searching/searching-op","files/ops/sharing/sharing-item-from-panel-op","files/ops/sharing/sharing-items-from-dlg-op","files/ops/user/restoring-files-prefs-op","files/ops/user/saving-files-prefs-op"],function(e,t){t.OpFactory=e.Op.extend({create:function(e,n){var r=t[e];if(!!r)return new r(n);LOG(0,"AcFiles.OpFactory.create: Unrecognized class: "+e)}})}),define("files/dev/ac-files-init",["files/ac-files","files/models/model-factory","files/models/ui/ui-model-factory","files/ops/op-factory"],function(e){return _.extend(e,{modelFactory:new e.ModelFactory,uiModelFactory:new e.UiModelFactory,opFactory:new e.OpFactory}),e}),define("files/dev/templates/sort-menu-template",[],function(){return'<div role="radiogroup"        aria-labelledby="        files-sort-menu-view-by-section-header-<%= viewId %>">    <div id="files-sort-menu-view-by-section-header-<%= viewId %>"         class="section-header first files-sort-menu-item-common theme-text"         role="heading">        <%= viewBy %></div>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="view-by" data-value="list"            data-test-name="sort-menu-item-view-by-list"            role="menuitem" tabindex="-1">        <%= list %>&nbsp;        <span class="files-sort-menu-item-selected-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="view-by" data-value="thumbnail"            data-test-name="sort-menu-item-view-by-thumbnail"            role="button" tabindex="-1">        <%= thumbnail %>&nbsp;        <span class="files-sort-menu-item-selected-icon"></span>    </button></div><div role="separator"></div><div role="radiogroup"     aria-labelledby="        files-sort-menu-sort-by-section-header-<%= viewId %>">    <div id="files-sort-menu-sort-by-section-header-<%= viewId %>"         class="section-header files-sort-menu-item-common theme-text"         role="heading">        <%= sortBy %></div>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="sort-by" data-value="name"            data-test-name="sort-menu-items-sort-by-file-name"            role="button" tabindex="-1">        <%= sortByFileName %>&nbsp;        <div class="files-sort-menu-item-order-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="sort-by" data-value="ext"            data-test-name="sort-menu-items-sort-by-file-type"            role="button" tabindex="-1">        <%= sortByFileType %>&nbsp;        <span class="files-sort-menu-item-order-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="sort-by" data-value="size"            data-test-name="sort-menu-items-sort-by-file-size"            role="button" tabindex="-1">        <%= sortBySize %>&nbsp;        <span class="files-sort-menu-item-order-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="sort-by" data-value="created"            data-test-name="sort-menu-items-sort-by-date-created"            role="button" tabindex="-1">        <%= sortByDateAdded %>&nbsp;        <span class="files-sort-menu-item-order-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"            data-section="sort-by" data-value="modified"            data-test-name="sort-menu-items-sort-by-date-modified"            role="button" tabindex="-1">        <%= sortByDateModified %>&nbsp;        <span class="files-sort-menu-item-order-icon"></span>    </button>    <button class="files-sort-menu-item files-sort-menu-item-common theme-text theme-hoverable"         data-section="sort-by" data-value="last_access"         data-test-name="sort-menu-items-sort-by-date-last-access"        role="button" tabindex="-1">        <%= sortByDateAccessed %>&nbsp;        <span class="files-sort-menu-item-order-icon"></span>    </button></div> <div class="menu-nub-grey"></div>'}),define("files/dev/views/sort-menu-view",["core/ac-core","files/ac-files","files/templates/sort-menu-template","i18n!files/nls/ui-strings","core/utils/sc-analytics","core/utils/css-util","core/views/menu-view"],function(e,t,n,r,i,s){var o={};return t.SortMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .files-sort-menu-item":"_onMenuItemClick","focusin .files-sort-menu-item":"_onMenuFocusInHC","focusout .files-sort-menu-item":"_onMenuFocusOutHC"})},initialize:function(){var t=e.SortUiModel;e.MenuView.prototype.initialize.call(this),o[t.ORDER_BY_FILE_NAME]=[i.FILE_NAME_UP,i.FILE_NAME_DOWN],o[t.ORDER_BY_FILE_TYPE]=[i.FILE_TYPE_UP,i.FILE_TYPE_DOWN],o[t.ORDER_BY_FILE_SIZE]=[i.FILE_SIZE_UP,i.FILE_SIZE_DOWN],o[t.ORDER_BY_DATE_ADDED]=[i.DATE_ADDED_UP,i.DATE_ADDED_DOWN],o[t.ORDER_BY_DATE_MODIFIED]=[i.DATE_MODIFIED_UP,i.DATE_MODIFIED_DOWN],o[t.ORDER_BY_DATE_LAST_ACCESS]=[i.DATE_ACCESSSED_UP,i.DATE_ACCESSED_DOWN]},render:function(){e.MenuView.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(_.template(n)({viewBy:r.VIEW_BY,list:r.LIST,thumbnail:r.THUMBNAIL,sortBy:r.SORT_BY,sortByFileName:r.SORT_BY_FILE_NAME,sortByFileType:r.SORT_BY_FILE_TYPE,sortBySize:r.SORT_BY_FILE_SIZE,sortByDateAdded:r.SORT_BY_DATE_ADDED,sortByDateModified:r.SORT_BY_DATE_MODIFIED,sortByDateAccessed:r.SORT_BY_DATE_VIEWED,viewId:this.options.viewId})),this._initWrappers()),this._showCurrentView(),this._showCurrentSort()},open:function(t){return this._logSiteCatalystEvent([i.SORT,i.SHOWN]),e.MenuView.prototype.open.call(this,t)},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$viewMenuItems=this.$(".files-sort-menu-item[data-section='view-by']"),this.$sortMenuItems=this.$(".files-sort-menu-item[data-section='sort-by']"),this.$sortMenuItemOrderIcons=this.$(".files-sort-menu-item-order-icon"),this.$fileInfoMenuItem=this.$(".files-sort-menu-item[data-value='file-info']")},_showCurrentView:function(){var e=this.options.collectionsUiModel,t;this.$viewMenuItems.removeClass("selected").attr("aria-checked","false"),t=this.$("[data-value="+e.get("view")+"]"),t.addClass("selected").attr("aria-checked","true")},_showCurrentSort:function(){var e=this.options.sortUiModel,t,n;e.get("is_locked")&&this.$sortMenuItems.addClass("disabled").attr({disabled:"disabled","aria-disabled":"true"}),this.$sortMenuItems.removeClass("ascending descending").attr("aria-checked","false"),this.$sortMenuItemOrderIcons.removeAttr("aria-label"),t=this.$("[data-value="+e.get("order_by")+"]"),n=t.find(".files-sort-menu-item-order-icon"),e.isAscending()?(t.addClass("ascending").attr("aria-checked","true"),n.attr("aria-label",r.ASCENDING)):(t.addClass("descending").attr("aria-checked","true"),n.attr("aria-label",r.DESCENDING))},_onMenuItemClick:function(e){var t=$(e.currentTarget),n=t.attr("data-section"),r=t.attr("data-value");if(t.hasClass("disabled")){this.close();return}this.close(_.bind(function(){n==="view-by"?this._viewBy(r):n==="sort-by"&&this._sortBy(r)},this))},_viewBy:function(t){this._logSiteCatalystEvent([i.VIEW_BY,t==="list"?i.LIST:i.THUMB,i.CHECKED]),this._triggerViewEvent(e.ViewEvents.VIEW_BY,{view:t})},_sortBy:function(t){var n=this.options,r=n.sortUiModel,s,u,a,f;s=r.get("order_by"),a=e.SortUiModel.ORDER_ASCENDING,f=e.SortUiModel.ORDER_DESCENDING,t===s?r.isAscending()?u=f:u=a:u=r.getOrderDirection(t),this._logSiteCatalystEvent([i.SORT_BY,o[t][u===a?0:1]]),this._triggerViewEvent(e.ViewEvents.SORT,{orderBy:t,orderDirection:u})},_getSiteCatalystContext:function(){return this.options.noUrlUpdate?undefined:i.SEARCH_BAR},_onMenuFocusInHC:function(e){var t=$(e.currentTarget);s.addClass(t,"theme-selectable")},_onMenuFocusOutHC:function(e){var t=$(e.currentTarget);s.removeClass(t,"theme-selectable")}}),t.SortMenuView}),define("files/dev/templates/files-body-template",[],function(){return'<div class="files-list folder theme-border"></div><div class="files-list files-search-results"></div><div class="hover-preview"></div>'}),define("files/dev/templates/folder-template",[],function(){return'<div role="navigation" class="folder-navigation ui-theme theme-container"></div><div class="folder-items collection-list-view unselectable"></div><div class="files-no-folder-items" aria-live="assertive" tabindex=0></div>'}),define("files/dev/templates/folder-navigation-template",[],function(){return'<button class="folder-back-btn" title="<%= back %>"           data-test-name="folder-navigation-back-btn">        <span class="hidden-accessible"><%= back %></span>   </button>   <div id="folder-path-<%= viewId %>" class="folder-path"></div>   <div class="files-header-btns right">       <button class="files-header-btn files-new-folder-btn"            title="<%= newFolder %>"            data-test-name="files-header-new-folder-btn">           <span class="hidden-accessible"><%= newFolder %></span>       </button>   </div>'}),define("files/dev/views/folder-navigation-view",["core/ac-core","files/ac-files","files/templates/folder-navigation-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/util","core/utils/breadcrumbs","core/utils/css-util","core/utils/truncate","core/utils/sc-analytics","core/views/view"],function(e,t,n,r,i,s,o,u,a,f){return t.FolderNavigationView=e.View.extend({events:{"click .folder-back-btn":"_onBackButtonClick","click .files-new-folder-btn":"_onNewFolderClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._addUiModelEventListeners()},render:function(){var t=this.options;return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({back:r.BACK,newFolder:i.NEW_FOLDER,viewId:t.viewId})),this._initWrappers(),s.isCEF()&&t.appApi.saveAsApi.isRunningInFileSaveAs()&&this.$path.addClass("folder-path-save-as")),this._showFolderPath(),this._showNewFolderButton(),this},_initWrappers:function(){this.$backBtn=this.$(".folder-back-btn"),this.$path=this.$(".folder-path"),this.$newFolder=this.$(".files-new-folder-btn")},_useBreadcrumbs:function(){return this.options.folderUiModel.get("breadcrumbs")},_showNewFolderButton:function(){this.options.showNewFolderInNavigation?this.$newFolder.show():this.$newFolder.hide()},_showFolderPath:function(){var e=this.options,t=s.isCEF(),n=this.$backBtn,r=this.$path,i=e.folderUiModel.get("path"),o=i.length,u=e.appApi.saveAsApi;if(o<=1||e.pluginId==="scan_files"&&o<=2&&i[0].name==="/"){this.$path.children().length>0&&this._clearFolderNavigationPath();if(!e.searchUiModel.showFolders()&&!e.showNavigationAtRoot)return;n.hide(),t&&u.isRunningInFileSaveAs()&&r.addClass("no-back-btn")}else n.show(),t&&u.isRunningInFileSaveAs()&&r.removeClass("no-back-btn");this._useBreadcrumbs()?(e.pluginId==="scan_files"&&i[0].name==="/"&&i.shift(),this._showBreadcrumbs(i)):this._showFolderName(i[o-1].name)},_clearFolderNavigationPath:function(){this.$path.empty()},_showBreadcrumbs:function(n){var i=this.options,a=i.appApi,l=this.$el,c=this.$path,h,p;p=_.bind(function(n){this._logSiteCatalystEvent([f.BREADCRUMB,n===a.folderApi.getRootFolderId(i.pluginId)?f.HOME:"",f.CLICKED]),i.searchUiModel.showFolders()?(i.selectionUiModel.clearSelection(),this._triggerViewEvent(e.ViewEvents.SEARCH_IN_FOLDER,{search_folder_id:n})):this._triggerViewEvent(t.ViewEvents.NAVIGATE_TO_FOLDER,{id:n})},this),h=l.parent().width()-this.$backBtn.position().left-u.getFullWidth(this.$backBtn)-u.getExtraWidth(c),s.isCEF()&&a.saveAsApi.isRunningInFileSaveAs()&&(h-=u.getFullWidth(this.$newFolder)),i.pluginId==="scan_files"?o.display(n,c,h,p,e.Locale.getLocale(),n[0].name):o.display(n,c,h,p,e.Locale.getLocale(),r.HOME)},_showFolderName:function(e){var t=this.$el,n=this.$path,r;n.text(e),r=t.parent().width()-u.getCssNum(n,"left")-u.getCssNum(n,"margin-right"),a.truncateElementText(n,r)},_onBackButtonClick:function(){var n=this.options,r=n.folderModel,i;this._logSiteCatalystEvent([f.BREADCRUMB,f.BACK,f.CLICKED]);if(n.searchUiModel.showFolders()){i=n.folderUiModel.get("path");if(i.length>1||n.pluginId==="scan_files"&&i.length>2&&i[0].name==="/")this.options.selectionUiModel.clearSelection(),this._triggerViewEvent(e.ViewEvents.SEARCH_IN_FOLDER,{search_folder_id:i[i.length-2].id})}else n.collectionsUiModel.set("scroll_id_into_view",r.get("id")),this._triggerViewEvent(t.ViewEvents.NAVIGATE_TO_FOLDER,{id:r.get("parent_id")})},_onNewFolderClick:function(e){var n=this.options.appApi;$(e.currentTarget).hasClass("disabled")||(this._logSiteCatalystEvent([f.NEW_FOLDER_ICON,f.CLICKED]),this._triggerViewEvent(t.ViewEvents.NEW_FOLDER,{parentFolderId:n.saveAsApi.getCurrentFolderId(),parentView:this,scContext:this._getParentScContext()}))},_addUiModelEventListeners:function(){this.options.folderUiModel.on("change:path",this._onFolderPathChange)},_onFolderPathChange:function(){this.render()}}),t.FolderNavigationView}),define("files/dev/templates/no-folder-items-template",[],function(){return'<div class="files-no-files files-no-files-prompt shown">    <div class="files-instruction-container">        <label for="files-no-files-upload-file-<%= viewId %>">            <div class="instruction-text first-line"></div>            <div class="instruction-text second-line">                 <%= uploadToAccess %></div>        </label>    </div>    <div data-test-name="files-no-folder-items-upload-btn"         title="<%= uploadFile %>">        <form method="POST" enctype="multipart/form-data">            <input class="files-no-files-upload-file file"                          type="file"                   name="file"                   id="files-no-files-upload-file-<%= viewId %>"                   data-test-name="files-no-files-upload-file"                   title="<%= uploadFile %>"                   multiple/>            <div class="files-no-folder-items-upload-btn"></div>        </form>    </div>    <div class="files-no-files-prompt-mask"></div></div> <div class="files-no-files files-no-files-text">    <div class="instruction-text theme-text"></div></div>'}),define("files/dev/views/no-folder-items-view",["core/ac-core","files/ac-files","core/utils/util","core/utils/view-util","files/templates/no-folder-items-template","i18n!files/nls/ui-strings","core/utils/sc-analytics","core/views/view"],function(e,t,n,r,i,s,o){return t.NoFolderItemsView=e.View.extend({events:{"click .files-no-files-upload-file":"_onUploadFileClick","mousedown .files-no-files-upload-file":"_onUploadFileMouseDown"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i),this._addFocusEventListener(),this._addKeyEventListener(),this._addUiModelEventListeners()},render:function(){var t;return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({uploadToAccess:s.UPLOAD_TO_ACCESS,uploadFile:s.UPLOAD_FILE,viewId:this.viewId})),this._initWrappers(),e.Util.isFirefox()&&this.$noFilesUploadFile.addClass("firefox")),this.options.noUpload&&(this.$noFilesPrompt.removeClass("shown"),this.$noFiles.addClass("shown")),t=this._getNoFilesText(),this.$noFilesInFolder1.text(t),this.$noFilesInFolder2.text(t),this.$noFilesInFolder3.attr("id","no-files-in-folder-"+this.cid),this.$el.attr("aria-labelledby","no-files-in-folder-"+this.cid),this},_initWrappers:function(){this.$noFilesPrompt=this.$(".files-no-files-prompt"),this.$noFiles=this.$(".files-no-files").not(".files-no-files-prompt"),this.$noFilesInFolder1=this.$noFilesPrompt.find(".instruction-text.first-line"),this.$noFilesInFolder2=this.$noFiles.find(".instruction-text"),this.$noFilesInFolder3=this.$noFiles.find(".instruction-text.theme-text"),this.$noFilesUploadFile=this.$(".files-no-files-upload-file")},_getNoFilesText:function(){var e=this.options,t=e.collectionsUiModel;return t.get("force_empty")?this._getForceEmptyText():e.pluginId==="scan_files"?s.NO_FILES_IN_FOLDER:e.folderModel.isRoot()?this._getNoFilesRootText():s.NO_FILES_IN_FOLDER},_getForceEmptyText:function(){var e=this.options,t=e.collectionsUiModel,r=t.get("force_empty_msg");return n.isCEF()&&e.appApi.saveAsApi.isRunningInFileSaveAs()?s.NO_FILES_IN_FOLDER:!_.isUndefined(r)&&r!==""?r:s.NO_SEARCH_RESULTS_FOLDER},_getNoFilesRootText:function(){var e=this.options,t=e.pluginId,n=e.appApi.connectorsApi,r;if(n.isConnectorPlugin(t)){r=n.getConnectorPluginLabel(t);if(r&&r!=="")return _.template(s.NO_FILES_IN_CONNECTOR,{connector:r})}return s.NO_FILES_IN_ROOT},_updateUploadButtonFocusStyle:function(e){var t=this.$("input:file");_.defer(function(){!e&&t.is(document.activeElement)?t.addClass("focused"):t.removeClass("focused")})},_onFocusIn:function(){this._updateUploadButtonFocusStyle()},_onFocusOut:function(){this._updateUploadButtonFocusStyle(!0)},_onKeyDown:function(e){var t=$(e.target),i=e.which,s=!1,o;this._updateUploadButtonFocusStyle();if(!r.descendantHasFocus(this.$el))return!1;if(t.is(this.$("input:file")))switch(i){case 13:case 32:n.isIE()&&(this.options.fileUploadModel.hasAjaxFileUpload()?t.click():i===13&&n.isIE9orBelow()&&(s=!0));break;case 9:o=r.getNextFocusableDescendant($("body"),e.shiftKey,!1,":tabbable"),o.length&&(s=!0,o.focus())}return s&&this._consumeEvent(e),s},_onUploadFileMouseDown:function(e){n.isIE()&&!n.isIE9orBelow()&&($(e.target).click(),e.preventDefault())},_onUploadFileClick:function(){this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.EMPTY,o.UPLOAD_ICON,o.CLICKED])},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.collectionUiModel,"change:show_empty",this._onShowEmptyChange),this.listenTo(e.collectionsUiModel,"change:force_empty",this._onShowEmptyChange)},_onShowEmptyChange:function(e,t){var n=this.options;if(t){if(!n.collectionsUiModel.get("force_empty")&&(!n.folderModel.get("name")||n.searchUiModel.isSearching()))return;this.render(),this.$el.addClass("shown")}else this.$el.removeClass("shown")}}),t.NoFolderItemsView}),define("files/dev/views/folder-view",["core/ac-core","files/ac-files","files/templates/folder-template","files/views/folder-navigation-view","core/views/view","core/views/collection-view","files/views/no-folder-items-view"],function(e,t,n){return t.FolderView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addModelEventListeners(),this._addUiModelEventListeners(),this._addAppApiCallbacks()},render:function(){var t=this.$el;e.View.prototype.render.call(this),t.children().length===0&&(t.html(_.template(n)),this._initWrappers()),this._renderChildViews();var r=this.options;return this._updateFolderNavigationView(),this},_initWrappers:function(){this.$folderNavigation=this.$(".folder-navigation"),this.$folderItems=this.$(".folder-items"),this.$noFolderItems=this.$(".files-no-folder-items")},_renderChildViews:function(){var t=this._collectionUiModel;t||(t=this._collectionUiModel=e.uiModelFactory.create("CollectionUiModel")),this._renderFolderNavigationView(t),this._renderNoFolderItemsView(t),this._renderFolderItemsView(t)},_renderFolderNavigationView:function(e){this._renderChildView("_folderNavigationView",t.FolderNavigationView,this.$folderNavigation,{collectionUiModel:e})},_renderFolderItemsView:function(t){this._renderChildView("_folderItemsView",e.CollectionView,this.$folderItems,{collection:this.options.folderModel.get("items"),collectionUiModel:t})},_renderNoFolderItemsView:function(n){var r=this.options.noUpload,i=e.Util;if(this.options.appApi.acrobatApi.isInAcrobat()||(i.isIpad()||i.isIphone())&&(i.isIosVersion(5)||i.isIosVersion(4)))r=!0;this._renderChildView("_noFolderItemsView",t.NoFolderItemsView,this.$noFolderItems,{collectionUiModel:n,noUpload:r})},_updateFolderNavigationView:function(){var e=this.$folderNavigation,t=this.$folderItems,n=this.options;!this.options.showNavigationAtRoot&&this.options.folderModel.isRoot()||n.pluginId==="scan_files"&&!this.options.showNavigationAtRoot&&this.options.folderModel.get("parent_id")===n.appApi.folderApi.getRootFolderId()?(e.removeClass("shown"),t.removeClass("with-folder-navigation")):(e.addClass("shown"),t.addClass("with-folder-navigation"))},_addModelEventListeners:function(){this.listenTo(this.options.folderModel,"change:object_type",this._onObjectTypeChange).listenTo(this.options.folderModel,"change:name",this._onNameChange)},_onObjectTypeChange:function(){var e=this.options.folderModel;this.options.pluginId!=="scan_files"&&(e.previous("object_type")||e.get("object_type")!=="root")&&this.render()},_onNameChange:function(){var e=this.options.folderModel;this.options.pluginId==="scan_files"&&this.render()},_addUiModelEventListeners:function(){this.listenTo(this.options.searchUiModel,"change:status",this._onSearchStatusChange)},_onSearchStatusChange:function(e){var t=e.isSearchClosed();this._collectionUiModel.set("is_active",t),t&&this.render()},_addAppApiCallbacks:function(){var e=this.options,t=e.folderModel,n=e.appApi.connectorsApi,r=n.getConnectorPluginName(e.pluginId);n.isDesktopConnector(r)||e.appApi.sessionApi.addSignedInChangeCallback(function(e,n){n||t.unset("id").get("items").reset()})}}),t.FolderView}),define("files/dev/templates/search-results-template",[],function(){return'<div role="navigation" class="folder-navigation ui-theme theme-container theme-border"></div><div id="files-search-results-summary-<%= viewId %>"     class="files-search-results-summary folder-navigation"></div><div class="files-search-results-items collection-list-view"></div><div class="files-no-search-results files-no-files"     aria-live="assertive"></div><div class="files-search-message" aria-live="assertive"></div>'}),define("files/dev/views/search-results-summary-view",["core/ac-core","files/ac-files","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n){return t.SearchResultsSummaryView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addModelEventListeners(),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),this.$el.text(this._getSummary()),this},_getSummary:function(){var e,t=this.options.searchUiModel;return t.get("invalid")?e=n.SEARCH_RESULTS:e=this._getStatusSummary(t.get("status")),e},_getStatusSummary:function(t){var r=this.options,i,s;switch(t){case e.SearchUiModel.STATUS_PENDING:i=n.SEARCH_RESULTS;break;case e.SearchUiModel.STATUS_SUCCEEDED:s=r.collectionUiModel.get("item_count"),_.isUndefined(s)?i=n.SEARCH_RESULTS:i=_.template(n.SEARCH_RESULTS_COUNT,{count:s});break;case e.SearchUiModel.STATUS_FAILED:i=n.SEARCH_RESULTS_UNAVAILABLE;break;default:i=""}return i},_addModelEventListeners:function(){var e=this.options.searchModel.get("items");e.on("all",this._onItemsChange)},_onItemsChange:function(){this.render()},_addUiModelEventListeners:function(){var e=this.options,t;t=e.searchUiModel,t.on("change:status",this._onStatusChange),t.on("change:invalid",this._onInvalidChange),t=e.collectionUiModel,t.on("change:item_count",this._onItemCountChange)},_onStatusChange:function(){this.render()},_onInvalidChange:function(e,t){t&&this.render()},_onItemCountChange:function(e,t){var n=this.options.searchUiModel;n.isSearchPending()?e.unset("item_count",{silent:!0}):n.hasSearchSucceeded()&&this.render()}}),t.SearchResultsSummaryView}),define("files/dev/templates/no-search-results-template",[],function(){return'<div class="instruction-text theme-text" aria-label="<%= noSearchResults %><%= tryDifferentSearch %>" tabindex=0>     <%= noSearchResults %></div><div class="instruction-text sub-text theme-text">     <%= tryDifferentSearch %></div><div class="instruction-text instruction-text-folder theme-text">    <%= noSearchResultsInFolder %></div>'}),define("files/dev/views/no-search-results-view",["core/ac-core","files/ac-files","core/utils/util","files/templates/no-search-results-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r,i){return t.NoSearchResultsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(r),this._addUiModelEventListeners()},render:function(){e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({noSearchResults:i.NO_SEARCH_RESULTS,tryDifferentSearch:i.TRY_DIFFERENT_SEARCH,noSearchResultsInFolder:i.NO_SEARCH_RESULTS_FOLDER})),this._initWrappers())},_initWrappers:function(){this.$instructionTextFolder=this.$(".instruction-text-folder"),this.$instructionText=this.$(".instruction-text").not(".instruction-text-folder")},_addUiModelEventListeners:function(){var e=this.options.collectionUiModel;e.on("change:show_empty",this._onShowEmptyChange)},_onShowEmptyChange:function(e,t){var r=this.options,s=r.searchUiModel;if(t){if(s.isSearchClosed()||s.isSearchPending())return;this.render(),this.$el.addClass("shown"),s.showFolders()?(this.$instructionTextFolder.show(),this.$instructionText.hide()):(this.$instructionTextFolder.hide(),this.$instructionText.show()),n.isCEF()&&r.appApi.saveAsApi.isRunningInFileSaveAs()?this.$instructionTextFolder.text(i.NO_FILES_IN_FOLDER):this.$instructionTextFolder.text(i.NO_SEARCH_RESULTS_FOLDER)}else this.$el.removeClass("shown")}}),t.NoSearchResultsView}),define("files/dev/templates/search-message-template",[],function(){return'<div class="instructions centered-vertically">    <div class="instruction-text"></div>    <div class="instruction-text sub-text"></div></div>'}),define("files/dev/views/search-message-view",["core/ac-core","files/ac-files","files/templates/search-message-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r){return t.SearchMessageView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._addUiModelEventListeners()},render:function(){var t=this.$el,n;e.View.prototype.render.call(this),t.children().length===0&&(t.html(this._template()),this._initWrappers()),n=this._getUserMessageObj(),_.isEmpty(n)?t.removeClass("shown"):(this.$instructionText.text(n.header),this.$instructionSubtext.text(n.message),t.addClass("shown"))},_initWrappers:function(){this.$instructionText=this.$(".instruction-text"),this.$instructionSubtext=this.$(".instruction-text.sub-text")},_getUserMessageObj:function(){var e=this.options.searchUiModel,t={};return e.get("too_many_query_boxes")&&(t.header=r.TOO_MANY_SEARCH_TERMS_HEADER,t.message=r.TOO_MANY_SEARCH_TERMS_MESSAGE),t},_addUiModelEventListeners:function(){this.listenTo(this.options.searchUiModel,"change:too_many_query_boxes",this._onTooManyQueryBoxesChange)},_onTooManyQueryBoxesChange:function(){this.render()}}),t.SearchMessageView}),define("files/dev/views/search-results-view",["core/ac-core","files/ac-files","files/templates/search-results-template","core/utils/util","core/utils/view-util","files/views/folder-navigation-view","files/views/search-results-summary-view","core/views/view","core/views/collection-view","files/views/no-search-results-view","files/views/search-message-view"],function(e,t,n,r,i){return t.SearchResultsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var t=this.$el;return e.View.prototype.render.call(this),t.children().length===0&&(t.html(_.template(n)({viewId:this.options.viewId})),this._initWrappers(),i.setElementFontByLocale(this.$el,"div")),this._renderChildViews(),this._updateFolderNavigationView(),this},_initWrappers:function(){this.$folderNavigation=this.$(".folder-navigation").not(".files-search-results-summary"),this.$summary=this.$(".files-search-results-summary"),this.$items=this.$(".files-search-results-items"),this.$noResults=this.$(".files-no-search-results"),this.$message=this.$(".files-search-message")},_getCollectionUiModel:function(){var t;return this._collectionUiModel||(t=this._collectionUiModel=e.uiModelFactory.create("CollectionUiModel"),this.options.searchUiModel.showFolders()||t.set({is_item_excluded:function(e){return e.isFolder()}})),this._collectionUiModel},_renderChildViews:function(){var e=this._getCollectionUiModel();this._renderFolderNavigationView(e),this._renderSummaryView(e),this._renderNoResultsView(e),this._renderItemsView(e),this._renderMessageView()},_renderFolderNavigationView:function(e){this._renderChildView("_folderNavigationView",t.FolderNavigationView,this.$folderNavigation,{collectionUiModel:e})},_renderSummaryView:function(e){this._renderChildView("_summaryView",t.SearchResultsSummaryView,this.$summary,{collectionUiModel:e})},_renderItemsView:function(t){this._renderChildView("_itemsView",e.CollectionView,this.$items,{collection:this.options.searchModel.get("items"),collectionUiModel:t})},_renderNoResultsView:function(e){this._renderChildView("_noResultsView",t.NoSearchResultsView,this.$noResults,{collectionUiModel:e})},_renderMessageView:function(){this._renderChildView("_messageView",t.SearchMessageView,this.$message)},_updateFolderNavigationView:function(){var e=this.options,t=e.searchUiModel,n=this.$folderNavigation,r=this.$items;t.get("current_folder_id")!==e.appApi.folderApi.getRootFolderId(e.pluginId)&&t.showFolders()||t.showNavigationAtRoot()?(n.addClass("shown"),r.addClass("with-folder-navigation")):(n.removeClass("shown"),r.removeClass("with-folder-navigation"))},_addUiModelEventListeners:function(){var e=this.options,t=e.searchModel,n=e.searchUiModel;r.isCEF()&&e.appApi.sessionApi.addSignedInChangeCallback(function(e,n){n||t.get("items").reset()}),this.listenTo(n,"change:status",this._onSearchStatusChange)},_onSearchStatusChange:function(e,t){var n=e.isSearching();this._getCollectionUiModel().set("is_active",n),n&&this.render()}}),t.SearchResultsView}),define("files/dev/views/files-body-view",["core/ac-core","files/ac-files","files/templates/files-body-template","core/views/view","core/views/hover-preview-view","files/views/folder-view","files/views/search-results-view"],function(e,t,n){return t.FilesBodyView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(_.template(n)),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$filesLists=this.$(".files-list"),this.$folder=this.$(".folder"),this.$searchResults=this.$(".files-search-results"),this.options.noHoverPreview||(this.$hoverPreview=this.$(".hover-preview"))},_renderChildViews:function(){var e=this.options,t=this.$folder,n=this.$searchResults;e.noHoverPreview||this._renderHoverPreviewView(),e.filesUiModel.isFolderView()?(n.addClass("hidden"),t.removeClass("hidden"),this._renderFolderView()):(t.addClass("hidden"),n.removeClass("hidden"),this._renderSearchResultsView())},_renderHoverPreviewView:function(){this._renderChildView("_hoverPreviewView",e.HoverPreviewView,this.$hoverPreview)},_renderFolderView:function(){this._renderChildView("_folderView",t.FolderView,this.$folder,{hoverPreviewView:this._hoverPreviewView})},_renderSearchResultsView:function(){this._renderChildView("_searchResultsView",t.SearchResultsView,this.$searchResults,{hoverPreviewView:this._hoverPreviewView})},_addUiModelEventListeners:function(){this.listenTo(this.options.filesUiModel,"change:view",this._onViewChange)},_onViewChange:function(e,n){var r=this.$folder,i=this.$searchResults,s=this.render,o=n===t.FilesUiModel.VIEW_FOLDER;r.stop(!0,!0),i.stop(!0,!0),o?i.fadeOut(function(){r.removeClass("hidden"),r.animate({opacity:1},s)}):r.animate({opacity:0},function(){r.addClass("hidden"),i.fadeIn(s)})}}),t.FilesBodyView}),define("files/dev/templates/files-footer-template",[],function(){return'<div class="footer-link theme-hyperlink"  role="link" id="footer-link" disabled tabindex="-1"><%= hyperLinkText%></div>'}),define("files/dev/views/files-footer-view",["core/ac-core","files/ac-files","files/templates/files-footer-template","core/utils/view-util","core/views/view"],function(e,t,n,r){return t.FilesFooterView=e.View.extend({events:{"click .footer-link":"_onFooterLinkClick","keydown .footer-link":"_onKeyDown"},initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener(),this._template=_.template(n)},render:function(){return this.$el.children().length===0&&(this.$el.html(this._template({hyperLinkText:this.options.footerAnchorText})),this._initWrappers(),this._setTabbableItem()),this},_onFocusIn:function(e){var t=$(e.target);return this.$(":focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0),!0},_onFocusOut:function(e){return!0},_setTabbableItem:function(){var e=this.$(".footer-link:focusable"),t=this.$(":tabbable");t.length===0&&e.attr("tabindex","0")},_onKeyDown:function(e){var t=this.$el,n=e.which,i=!1;if(!r.descendantHasFocus(t))return i;switch(n){case 13:i=!0,$(e.target).click();break;case 32:i=!0,$(e.target).click();break;case 9:i=!0}return i},_initWrappers:function(){this.$footerLink=this.$(".footer-link")},_onFooterLinkClick:function(){this._triggerViewEvent(e.ViewEvents.LAUNCH_FOOTER_URL_IN_BROWSER)}}),t.FilesFooterView}),define("files/dev/templates/full-preview-plugins-content-template",[],function(){return'<div class="full-preview-plugin-content plugin-content ui-theme theme-container"></div>'}),define("files/dev/views/full-preview-plugins-content-view",["core/ac-core","files/ac-files","files/templates/full-preview-plugins-content-template","core/views/plugins-content-view"],function(e,t,n){return t.FullPreviewPluginsContentView=e.PluginsContentView.extend({_getContentTemplate:function(){return n}}),t.FullPreviewPluginsContentView}),define("files/dev/templates/filter-file-type-menu-template",[],function(){return'<button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= fillsignMimeType %>     data-site-catalyst="FillSign"     role="menuitem" tabindex="-1">     <%= fillsignUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= illustratorMimeType %>     data-site-catalyst="Illustrator"     role="button" tabindex="-1">     <%= illustratorUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= indesignMimeType %>     data-site-catalyst="InDesign"     role="button" tabindex="-1">     <%= indesignUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= pdfMimeType %>     data-site-catalyst="PDF"     role="button" tabindex="-1">     <%= pdfUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= photoshopMimeType %>     data-site-catalyst="Photoshop"     role="button" tabindex="-1">     <%= photoshopUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= htmlMimeType %>     data-site-catalyst="HTML"     role="button" tabindex="-1">     <%= htmlUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= imageMimeType %>     data-site-catalyst="Image"     role="button" tabindex="-1">     <%= imageUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= excelMimeType %>     data-site-catalyst="Excel"     role="button" tabindex="-1">     <%= excelUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= powerpointMimeType %>     data-site-catalyst="Powerpoint"     role="button" tabindex="-1">     <%= powerpointUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= wordMimeType %>     data-site-catalyst="Word"     role="button" tabindex="-1">     <%= wordUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= textMimeType %>     data-site-catalyst="Text"     role="button" tabindex="-1">     <%= textUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= videoMimeType %>     data-site-catalyst="Video"     role="button" tabindex="-1">     <%= videoUiName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data=<%= zipMimeType %>     data-site-catalyst="Zip"     role="button" tabindex="-1">     <%= zipUiName %></button>'}),define("files/dev/views/filter-submenu-view",["core/ac-core","files/ac-files","core/utils/css-util","core/utils/view-util","core/utils/truncate","core/views/menu-view"],function(e,t,n,r,i){return t.FilterSubmenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .files-filter-menu-submenu-item":"_onMenuItemClick","focusin .files-filter-menu-submenu-item":"_onMenuFocusInHC","focusout .files-filter-menu-submenu-item":"_onMenuFocusOutHC"})},render:function(){var t=this.$el,r=this.options.$menuBtn,i,s;return e.MenuView.prototype.render.call(this),t.children().length===0&&(i=r.position(),s=r.height()+n.getExtraHeight(r),t.css("top",i.top+s+"px"),t.css("left",i.left+"px"),t.width(r.width()+n.getPaddingWidth(r))),this},initialize:function(){},open:function(t,n){var r=this.options,i=r.animate,s;return r.animate=!n,s=e.MenuView.prototype.open.call(this,_.bind(function(){this._truncateMenuItems(),t&&t()},this)),r.animate=i,s},_truncateMenuItems:function(){var e=this.$el,t,s,o;t=e.find(".files-filter-menu-submenu-item"),t.each(_.bind(function(t,u){s=$(u),o=this._menuItemWidth,o||(o=s.parent().width()-n.getExtraWidth(s),r.isVerticalScrollBarPresent(e)&&(o-=r.getScrollBarWidth(e)),this._menuItemWidth=o),s.width(o),i.truncateElementText(s)},this))},_onMenuItemClick:function(e){var n=$(e.target);this.close(),this._triggerViewEvent(t.ViewEvents.SELECT_FILTER_MENU_ITEM,{filterMenuType:this.$el.attr("data-data"),filterMenuItemValue:n.attr("data-data"),filterMenuItemFilter:n.attr("data-worker"),filterMenuItemSiteCatalyst:n.attr("data-site-catalyst"),filterMenuItemQueryLabel:$.trim(n.text())})},_onMenuFocusInHC:function(e){var t=$(e.target);n.addClass(t,"theme-selectable")},_onMenuFocusOutHC:function(e){var t=$(e.target);n.removeClass(t,"theme-selectable")}}),t.FilterSubmenuView}),define("files/dev/views/filter-file-type-menu-view",["files/ac-files","files/templates/filter-file-type-menu-template","i18n!core/nls/ui-strings","core/utils/file-types","files/views/filter-submenu-view"],function(e,t,n,r){return e.FilterFileTypeMenuView=e.FilterSubmenuView.extend({render:function(){var i=this.$el,s=r.MimeType,o=r.UiName;return e.FilterSubmenuView.prototype.render.call(this),i.children().length===0&&i.html(_.template(t)({fillsignMimeType:s.ADOBE_FILL_SIGN,fillsignUiName:o.ADOBE_FILL_SIGN,illustratorMimeType:s.ADOBE_ILLUSTRATOR,illustratorUiName:o.ADOBE_ILLUSTRATOR,indesignMimeType:s.ADOBE_INDESIGN,indesignUiName:o.ADOBE_INDESIGN,pdfMimeType:s.ADOBE_PDF,pdfUiName:o.ADOBE_PDF,photoshopMimeType:s.ADOBE_PHOTOSHOP,photoshopUiName:o.ADOBE_PHOTOSHOP,htmlMimeType:s.HTML,htmlUiName:o.HTML,imageMimeType:s.IMAGE,imageUiName:n.IMAGE,excelMimeType:s.MS_EXCEL,excelUiName:o.MS_EXCEL,powerpointMimeType:s.MS_POWERPOINT,powerpointUiName:o.MS_POWERPOINT,wordMimeType:s.MS_WORD,wordUiName:o.MS_WORD,textMimeType:s.TEXT,textUiName:n.TEXT,videoMimeType:s.VIDEO,videoUiName:n.VIDEO,zipMimeType:s.ZIP,zipUiName:o.ZIP})),this}}),e.FilterFileTypeMenuView}),define("files/dev/templates/files-container-template",[],function(){return'<div class="files-offline-view ui-theme theme-container"></div><div class="files-ipm"></div><div class="files unselectable"></div><div class="files-sign-out ui-theme theme-container"></div><div class="files-no-access-view ui-theme theme-container"></div>'}),define("files/dev/templates/files-ipm-template",[],function(){return'<div class="connector-marketing-content unselectable"><%= ipm %></div><div class="files-ipm-btns">    <input type="button"           class="control-button files-ipm-link-btn           id="files-ipm-link-btn"           value="<%= link %>">    </input></div>'}),define("files/dev/views/files-ipm-view",["core/ac-core","files/ac-files","files/templates/files-ipm-template","core/views/view"],function(e,t,n){return t.FilesIpmView=e.View.extend({events:{"click .files-ipm-link-btn":"_onLinkButtonClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){var t=this.$el,n,r,i=this.options,s=i.pluginId,o,u,a,f,l=i.appApi.pluginsApi,c=i.appApi.connectorsApi;return e.View.prototype.render.call(this),t.children().length===0&&(u=c.isConnectorPlugin(s),u&&(o=l.getPluginUiModel(s).get("connector_name"),n=c.getConnectorsUiHelpers(o),a=n.add_ui,a&&(f=_.unescape(a.add_html),r=a.add_button_label,t.html(this._template({ipm:f,link:r}))))),this},_onLinkButtonClick:function(){var e=this.options;e.appApi.connectorsApi.addConnector(e.pluginId)}}),t.FilesIpmView}),define("files/dev/templates/files-template",[],function(){return'<div class="file-save-as-header ui-theme theme-container"></div><div class="files-header files-list-header ui-theme theme-container theme-border"></div><div class="files-body ui-theme theme-container"></div><div class="files-rhp hidden invisible"></div><div class="files-footer ui-theme theme-container-prominent theme-border"></div>'}),define("files/dev/templates/files-header-template",[],function(){return'<div class="search-control ui-theme theme-container"></div> <div role="toolbar" class="files-header-btns right"    <% if (pluginSelectorId.length > 0) { %>            aria-labelledby="<%= pluginSelectorId %>"    <% } %>>    <button class="files-header-btn files-filter-menu-btn "            title="<%= filter %>"            data-test-name="files-header-filter-menu-btn"            aria-haspopup="true"             aria-owns="files-filter-menu-<%= viewId %>">        <span class="hidden-accessible"><%= filter %></span>    </button>    <div id="files-filter-menu-<%= viewId %>"         class="files-filter-menu menu ui-theme theme-container" role="dialog"></div>     <button class="files-header-btn files-new-folder-btn "         title="<%= newFolder %>"         data-test-name="files-header-new-folder-btn">        <span class="hidden-accessible"><%= newFolder %></span>    </button>     <div class="files-header-btn files-upload-btn"         data-test-name="files-header-upload-btn"         title="<%= uploadFile %>">        <div class="files-upload-icon">            <form method="POST" enctype="multipart/form-data">                <input class="upload-file file" type="file"                       name="file"                       title="<%= uploadFile %>" multiple>                </input>                <div class="files-upload-btn-focus"></div>            </form>        </div>    </div>     <button class="files-header-btn files-sort-menu-btn"            title="<%= sort %>"            data-test-name="files-header-sort-menu-btn"            aria-haspopup="true"            aria-owns="files-sort-menu-<%= viewId %>">        <span class="hidden-accessible"><%= sort %></span>    </button>    <div id="files-sort-menu-<%= viewId %>"          class="files-sort-menu menu ui-theme theme-container" role="menu"></div> </div>'}),define("files/dev/templates/filter-menu-template",[],function(){return'<fieldset class="files-filter-menu-fieldset"><legend id="files-filter-menu-legend-<%= viewId %>"        class="files-filter-menu-header theme-text"><%= filterBy %></legend><div id="files-filter-select-attribute-label-<%= viewId %>"      class="hidden-accessible" aria-hidden="true">    <%= selectAttribute %></div><button class="files-filter-menu-submenu-btn unselectable            files-filter-menu-attr-menu-btn theme-list-item"    id="files-filter-menu-attr-menu-btn-<%= viewId %>"    role="combobox"    aria-labelledby="files-filter-select-attribute-label-<%= viewId %>"    aria-owns="files-filter-menu-attr-menu-<%= viewId %>"    aria-haspopup="true" tabindex="0">    <label role="presentation"           id="files-filter-menu-attr-menu-btn-label-<%= viewId %>"           class="files-filter-menu-attr-menu-btn-label theme-list-item-text"           aria-hidden="true"           for="files-filter-menu-value-field-<%= viewId %>">    </label>    <div class="files-filter-menu-btn-down-arrow"></div></button><div class="files-filter-menu-attr-menu            files-filter-menu-submenu ui-theme theme-container"     id="files-filter-menu-attr-menu-<%= viewId %>"     data-data="attribute"    role="listbox"></div><div id="files-filter-select-value-label-<%= viewId %>"     class="hidden-accessible" aria-hidden="true">    <%= selectValue %></div><button class="files-filter-menu-submenu-btn unselectable            files-filter-menu-value-menu-btn disabled theme-list-item"    disabled="disabled"    id="files-filter-menu-value-menu-btn-<%= viewId %>"    role="combobox"    aria-labelledby="files-filter-menu-attr-menu-btn-label-<%= viewId %>"    aria-owns="files-filter-menu-file-type-menu-<%= viewId %>               files-filter-menu-date-menu-<%= viewId %>               files-filter-menu-added-by-menu-<%= viewId %>"    aria-haspopup="true"    aria-disabled="true" tabindex="0">    <div role="presentation"         id="files-filter-menu-value-menu-btn-label-<%= viewId %>"         class="files-filter-menu-value-menu-btn-label theme-list-item-text"         aria-hidden="true"></div>    <div class="files-filter-menu-btn-down-arrow"></div></button><div id="files-filter-menu-file-type-menu-<%= viewId %>"      class="files-filter-menu-file-type-menu            files-filter-menu-submenu ui-theme theme-container"     data-data="value"    role="listbox"></div><div id="files-filter-menu-date-menu-<%= viewId %>"     class="files-filter-menu-date-menu            files-filter-menu-submenu ui-theme theme-container"     data-data="value"    role="listbox"></div><div id="files-filter-menu-added-by-menu-<%= viewId %>"     class="files-filter-menu-file-added-by-menu            files-filter-menu-submenu ui-theme theme-container"     data-data="value"    role="listbox"></div> <input id="files-filter-menu-value-field-<%= viewId %>"       class="files-filter-menu-submenu-btn              files-filter-menu-value-field ui-theme theme-container theme-text"       type="text" spellcheck="false"       aria-labelledby="files-filter-menu-attr-menu-btn-label-<%= viewId %>"       placeholder="<%= enterValue %>"/></fieldset><div class="menu-nub-grey"></div>'}),define("files/dev/templates/filter-added-by-menu-template",[],function(){return'<button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_cpdf"     data-worker="sc_worker_exportpdf"     data-site-catalyst="ExportPDF"     role="menuitem" tabindex="-1">    <%= exportFromPdf %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_cpdf"     data-worker="sc_worker_createpdf"     data-site-catalyst="CreatePDF"     role="button" tabindex="-1">    <%= convertToPdf %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_cpdf"     data-worker="sc_worker_combinepdf"     data-site-catalyst="Combine"     role="button" tabindex="-1">    <%= combineToPdf %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_fillsign"     data-site-catalyst="FillSign"     role="button" tabindex="-1">    <%= fillSign %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_acrobat*"     data-site-catalyst="Acrobat"     role="button" tabindex="-1">     <%= adobeAcrobat %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_reader_mobile*,api_acrobat_mobile*"     data-site-catalyst="ReaderMobile"     role="button" tabindex="-1">     <%= adobeReaderMobile %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="api_reader*"     data-site-catalyst="Reader"     role="button" tabindex="-1">     <%= adobeReader %></button>'}),define("files/dev/views/filter-added-by-menu-view",["files/ac-files","files/templates/filter-added-by-menu-template","i18n!files/nls/ui-strings","files/views/filter-submenu-view"],function(e,t,n){return e.FilterAddedByMenuView=e.FilterSubmenuView.extend({render:function(){var r=this.$el;return e.FilterSubmenuView.prototype.render.call(this),r.children().length===0&&(r.html(_.template(t)({exportFromPdf:n.EXPORT_FROM_PDF,convertToPdf:n.CONVERT_TO_PDF,combineToPdf:n.COMBINE_TO_PDF,fillSign:n.FILL_SIGN,adobeAcrobat:n.ADOBE_ACROBAT,adobeReaderMobile:n.ADOBE_READER_MOBILE,adobeReader:n.ADOBE_READER})),this._initWrappers()),this}}),e.FilterAddedByMenuView}),define("files/dev/templates/filter-attr-menu-template",[],function(){return'<button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="name"     data-site-catalyst="NameContains"     role="menuitem" tabindex="-1">    <%= fileName %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="content_type"     data-site-catalyst="FileTypeIs"     role="button" tabindex="-1">    <%= fileType %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="modified"     data-site-catalyst="DateModifiedIs"     role="button" tabindex="-1">    <%= dateLastModified %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable "     data-data="last_access"     data-site-catalyst="DateAccessIs"     role="button" tabindex="-1">    <%= dateAccessed %></button><button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="created"     data-site-catalyst="DateAddedIs"     role="button" tabindex="-1">    <%= dateAdded %></button><button class="files-filter-menu-submenu-item unselectable            file-added-by theme-text  theme-hoverable "     data-data="created_by_client"     data-site-catalyst="CreatedByToolIs"     role="button" tabindex="-1">    <%= fileAddedBy %></button>'}),define("files/dev/views/filter-attr-menu-view",["files/ac-files","files/templates/filter-attr-menu-template","i18n!core/nls/ui-strings","files/views/filter-submenu-view"],function(e,t,n){return e.FilterAttrMenuView=e.FilterSubmenuView.extend({render:function(){var r=this.$el;return e.FilterSubmenuView.prototype.render.call(this),r.children().length===0&&r.html(_.template(t)({fileName:n.FILE_NAME_CONTAINS,fileType:n.FILE_TYPE_IS,dateLastModified:n.DATE_LAST_MODIFIED,dateAdded:n.DATE_ADDED,dateAccessed:n.DATE_LAST_VIEWED,fileAddedBy:n.FILE_ADDED_BY})),this}}),e.FilterAttrMenuView}),define("files/dev/templates/filter-date-menu-template",[],function(){return'<button class="files-filter-menu-submenu-item unselectable theme-text theme-hoverable"     data-data="today"     data-site-catalyst="Today"     role="menuitem" tabindex="-1">    <%= today %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="yesterday"     data-site-catalyst="Yesterday"     role="button" tabindex="-1">    <%= yesterday %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="within-last-week"     data-site-catalyst="LastWeek"     role="button" tabindex="-1">    <%= withinLastWeek %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="within-last-month"     data-site-catalyst="LastMonth"     role="button" tabindex="-1">    <%= withinLastMonth %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="one-to-two-months-ago"     data-site-catalyst="1-2MonthsAgo"     role="button" tabindex="-1">    <%= oneToTwoMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="two-to-three-months-ago"     data-site-catalyst="2-3MonthsAgo"     role="button" tabindex="-1">    <%= twoToThreeMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="three-to-four-months-ago"     data-site-catalyst="3-4MonthsAgo"     role="button" tabindex="-1">    <%= threeToFourMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="four-to-five-months-ago"     data-site-catalyst="4-5MonthsAgo"     role="button" tabindex="-1">    <%= fourToFiveMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="five-to-six-months-ago"     data-site-catalyst="5-6MonthsAgo"     role="button" tabindex="-1">    <%= fiveToSixMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="six-to-twelve-months-ago"     data-site-catalyst="6-12MonthsAgo"     role="button" tabindex="-1">    <%= sixToTwelveMonthsAgo %></button><button class="files-filter-menu-submenu-item unselectable  theme-text theme-hoverable"     data-data="more-than-one-year-ago"     data-site-catalyst="Over1YearAgo"     role="button" tabindex="-1">    <%= moreThanOneYearAgo %></button>'}),define("files/dev/views/filter-date-menu-view",["files/ac-files","files/templates/filter-date-menu-template","i18n!core/nls/ui-strings","files/views/filter-submenu-view"],function(e,t,n){return e.FilterDateMenuView=e.FilterSubmenuView.extend({render:function(){var r=this.$el;return e.FilterSubmenuView.prototype.render.call(this),r.children().length===0&&r.html(_.template(t)({today:n.TODAY,yesterday:n.YESTERDAY,withinLastWeek:n.WITHIN_LAST_WEEK,withinLastMonth:n.WITHIN_LAST_MONTH,oneToTwoMonthsAgo:n.ONE_TO_TWO_MONTHS_AGO,twoToThreeMonthsAgo:n.TWO_TO_THREE_MONTHS_AGO,threeToFourMonthsAgo:n.THREE_TO_FOUR_MONTHS_AGO,fourToFiveMonthsAgo:n.FOUR_TO_FIVE_MONTHS_AGO,fiveToSixMonthsAgo:n.FIVE_TO_SIX_MONTHS_AGO,sixToTwelveMonthsAgo:n.SIX_TO_TWELVE_MONTHS_AGO,moreThanOneYearAgo:n.MORE_THAN_ONE_YEAR_AGO})),this}}),e.FilterDateMenuView}),define("files/dev/views/filter-menu-view",["core/ac-core","files/ac-files","files/templates/filter-menu-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/css-util","core/utils/sc-analytics","core/views/menu-view","core/views/input-search-view","files/views/filter-added-by-menu-view","files/views/filter-attr-menu-view","files/views/filter-date-menu-view","files/views/filter-file-type-menu-view"],function(e,t,n,r,i,s,o){return t.FilterMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .files-filter-menu-attr-menu-btn":"_onAttrMenuBtnClick","click .files-filter-menu-value-menu-btn":"_onValueMenuBtnClick"})},initialize:function(){e.MenuView.prototype.initialize.call(this)},render:function(){var t=this.$el,r=this.options;return e.MenuView.prototype.render.call(this),t.children().length===0&&(t.html(_.template(n)({filterBy:i.FILTER_BY,selectAttribute:i.SELECT_ATTRIBUTE,selectValue:i.SELECT_VALUE,enterValue:i.ENTER_VALUE,viewId:r.viewId})),this._initWrappers()),this.$attrMenuBtnLabel.text(i.SELECT_ATTRIBUTE),this.$valueMenuBtnLabel.text(i.SELECT_VALUE),this.$attrMenuBtn.removeClass("selected").removeAttr("aria-expanded"),this.$valueMenuBtn.removeClass("selected").removeAttr("aria-expanded").addClass("disabled").attr({"aria-disabled":"true",disabled:"disabled"}),r.searchUiModel.get("is_locked")&&this.$filterSubmenuBtns.addClass("disabled"),this},open:function(t){return this.options.noUrlUpdate?this._logSiteCatalystEvent([o.FILTER,o.SHOWN]):this._logSiteCatalystEvent(o.SHOWN),e.MenuView.prototype.open.call(this,_.bind(function(){this._sizeInputField(),this._renderChildViews(),this._openMenuView(this.$attrMenuBtn,this._attrMenuView,t,!0)},this))},close:function(t){var n=this.$valueField;e.MenuView.prototype.close.call(this,t),n.val()&&this._fileNameContainsView.commitText()},_onBodyClick:function(t){$(t.target).hasClass("clear-btn")&&this.$valueField.val(""),e.MenuView.prototype._onBodyClick.call(this,t)},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$attrMenuBtn=this.$(".files-filter-menu-attr-menu-btn"),this.$attrMenuBtnLabel=this.$(".files-filter-menu-attr-menu-btn-label"),this.$valueMenuBtn=this.$(".files-filter-menu-value-menu-btn"),this.$valueMenuBtnLabel=this.$(".files-filter-menu-value-menu-btn-label"),this.$valueField=this.$(".files-filter-menu-value-field"),this.$attrMenu=this.$(".files-filter-menu-attr-menu"),this.$fileAddedByAttr=this.$(".files-filter-menu-attr-menu-item.file-added-by"),this.$fileTypeMenu=this.$(".files-filter-menu-file-type-menu"),this.$fileAddedByMenu=this.$(".files-filter-menu-file-added-by-menu"),this.$dateMenu=this.$(".files-filter-menu-date-menu"),this.$filterSubmenuBtns=this.$(".files-filter-menu-submenu-btn")},_sizeInputField:function(){var e=this.$valueField,t=this.$attrMenuBtn;e.width(s.getFullWidth(t)-s.getExtraWidth(e)),e.height(t.height())},_renderChildViews:function(){return this.removeAllChildViews(),this._renderChildView("_attrMenuView",t.FilterAttrMenuView,this.$attrMenu,{$menuBtn:this.$attrMenuBtn,triggerEl:this.$attrMenuBtn.get(0)}),this._renderChildView("_fileNameContainsView",e.InputSearchView,this.$valueField,{searchField:e.SearchUiModel.FIELD_FILE_NAME}),this._renderChildView("_fileTypeMenuView",t.FilterFileTypeMenuView,this.$fileTypeMenu,{$menuBtn:this.$valueMenuBtn,triggerEl:this.$valueMenuBtn.get(0)}),this._renderChildView("_dateMenuView",t.FilterDateMenuView,this.$dateMenu,{$menuBtn:this.$valueMenuBtn,triggerEl:this.$valueMenuBtn.get(0)}),this._renderChildView("_addedByMenuView",t.FilterAddedByMenuView,this.$fileAddedByMenu,{$menuBtn:this.$valueMenuBtn,triggerEl:this.$valueMenuBtn.get(0)}),this},_getMenuButtonDownArrow:function(e){return e.find(".files-filter-menu-btn-down-arrow")},_openMenuView:function(e,t,n,r){this.options.searchUiModel.get("is_locked")||(e.addClass("selected").attr("aria-expanded","true"),t.open(n,r))},_toggleMenuView:function(e,t){if(this.options.searchUiModel.get("is_locked")||!t){e.removeClass("selected").removeAttr("aria-expanded");return}var n=t.isMenuOpen();e.toggleClass("selected",!n),n?(e.removeClass("selected").removeAttr("aria-expanded"),t.close()):(e.addClass("selected").attr("aria-expanded","true"),t.open().always(function(){e.removeClass("selected").removeAttr("aria-expanded")}))},_getSiteCatalystContext:function(){return this.options.noUrlUpdate?undefined:[o.SEARCH_BAR,o.FILTER]},_onViewEvent:function(n,r){var i,s,u,a,f=e.SearchUiModel;n===t.ViewEvents.SELECT_FILTER_MENU_ITEM?(i={value:r.filterMenuItemValue,filter:r.filterMenuItemFilter,siteCatalyst:r.filterMenuItemSiteCatalyst,queryLabel:r.filterMenuItemQueryLabel},r.filterMenuType==="attribute"?this._onSelectAttrMenuItem(i):this._onSelectValueMenuItem(i)):(n===e.ViewEvents.ADD_SEARCH_FIELD_QUERY&&(u=this.$attrMenuBtn.data("data"),s=r.searchFieldQuery,s.commitQueryBox&&(this.close(),a=[],u===f.FIELD_FILE_NAME&&a.push(o.NAME),a.push(o.ENTERED),this._logSiteCatalystEvent(a)),s.queryLabel=r.searchUiModel.getFieldQueryLabel(s)),this.trigger(n,r))},_onSelectAttrMenuItem:function(t){var n=this.$attrMenuBtn,r=this.$attrMenuBtnLabel,s=this.$valueMenuBtn,o=this.$valueMenuBtnLabel,u=this.$valueField,a=t.value,f=e.SearchUiModel,l;n.data("data",a),r.text(t.queryLabel),s.removeClass("disabled").removeAttr("aria-disabled disabled"),s.show(),u.hide(),delete this._valueMenuView;switch(a){case f.FIELD_FILE_NAME:s.hide(),u.show(),l=this.options.menusUiModel.get("focus_delay"),_.delay(_.bind(function(){u.focus()},this),l);break;case f.FIELD_FILE_TYPE:this._openMenuView(s,this._fileTypeMenuView),this._valueMenuView=this._fileTypeMenuView,o.text(i.SELECT_FORMAT);break;case f.FIELD_FILE_ADDED_BY:this._openMenuView(s,this._addedByMenuView),this._valueMenuView=this._addedByMenuView,o.text(i.SELECT_TOOL);break;case f.FIELD_DATE_ADDED:case f.FIELD_DATE_MODIFIED:case f.FIELD_DATE_LAST_ACCESS:this._openMenuView(s,this._dateMenuView),this._valueMenuView=this._dateMenuView,o.text(i.SELECT_DATES)}this._logSiteCatalystEvent(t.siteCatalyst)},_onSelectValueMenuItem:function(t){var n=this.$attrMenuBtn,i,s,u,a=e.SearchUiModel,f;s=n.data("data"),u=[];switch(s){case a.FIELD_FILE_TYPE:f=o.FILE_TYPE;break;case a.FIELD_DATE_MODIFIED:f=o.DATE_MODIFIED;break;case a.FIELD_DATE_ADDED:f=o.DATE_ADDED;break;case a.FIELD_FILE_ADDED_BY:f=o.CREATED_BY_TOOL}u.push(f),u.push(t.siteCatalyst),this._logSiteCatalystEvent(u),i=_.template(r.FILTER_DISPLAY_VALUE,{field:$.trim(n.text()),value:t.queryLabel}),this._triggerViewEvent(e.ViewEvents.ADD_SEARCH_FIELD_QUERY,{searchFieldQuery:{field:s,value:t.value,filter:t.filter,commitQueryBox:!0,queryLabel:i}}),this.close()},_onAttrMenuBtnClick:function(){var e=this.$attrMenuBtn,t=this.$valueMenuBtn,n=_.bind(function(){this.$valueMenuBtnLabel.text(i.SELECT_VALUE),t.removeData("data"),this._toggleMenuView(e,this._attrMenuView)},this);this._valueMenuView?this._valueMenuView.close(n):n()},_onValueMenuBtnClick:function(){var e=this.$valueMenuBtn;if(e.hasClass("disabled"))return!1;this._toggleMenuView(e,this._valueMenuView)},_onKeyDown:function(t){var n=t.target,r=!1;this.$attrMenuBtn.is(n)&&(r=this._onAttrMenuBtnKeyDown(t)),this.$valueMenuBtn.is(n)&&(r=this._onValueMenuBtnKeyDown(t));if(r)return r;e.MenuView.prototype._onKeyDown.apply(this,[t])},_onMenuBtnKeyDown:function(e,t){var n=e.which,r=$(e.target);switch(n){case 32:case 38:case 40:this._consumeEvent(e);if(n===38&&t||n===40&&!t||n===32)return r.click(),!0}return!1},_onAttrMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this._attrMenuView.isMenuOpen())},_onValueMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this._valueMenuView.isMenuOpen())}}),t.FilterMenuView}),define("files/dev/views/files-header-view",["core/ac-core","files/ac-files","files/templates/files-header-template","i18n!files/nls/ui-strings","core/utils/util","core/utils/view-util","core/utils/css-util","core/utils/sc-analytics","core/views/view","core/views/search-control-view","files/views/filter-menu-view","files/views/sort-menu-view"],function(e,t,n,r,i,s,o,u){return t.FilesHeaderView=e.View.extend({events:{"click .files-filter-menu-btn":"_onFilterMenuBtnClick","click .files-upload-btn":"_onUploadClick","mousedown .files-upload-btn":"_onUploadMouseDown","click .files-new-folder-btn":"_onNewFolderClick","click .files-sort-menu-btn":"_onSortMenuBtnClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener(),this._addKeyEventListener(),this._addUiModelEventListeners()},render:function(){var t=this.options,s=this.$el,u,a,f=t.appApi.pluginsApi,l=t.pluginId;return e.View.prototype.render.call(this),s.children().length===0&&(s.html(_.template(n)({sort:r.SORT,uploadFile:r.UPLOAD_FILE,newFolder:r.NEW_FOLDER,filter:r.FILTER,viewId:t.viewId,pluginSelectorId:f.getPluginSelectorId(l)})),this._initWrappers(),u=this.$upload,(i.isIpad()||i.isIphone())&&(!e.Features.isFeatureEnabled("ios_upload_ui")||i.isIosVersion(5)||i.isIosVersion(4))&&u.hide(),t.noUpload&&u.hide(),t.enableDragAndDrop&&u.width(0),t.noNewFolder&&this.$newFolder.hide(),t.noSearchControl?this.$searchControl.hide():this.$searchControl.show(),t.noFilter&&this.$filterMenuBtn.hide(),t.noSort&&this.$sortMenuBtn.hide()),_.defer(_.bind(function(){a=this.$searchControl,a.width(Math.floor(s.width()-o.getFullWidth(this.$btnsRight))),this._renderChildViews(),this._positionFilterMenu(),s.height(o.getFullHeight(a))},this)),this},_initWrappers:function(){this.$searchControl=this.$(".search-control"),this.$btnsRight=this.$(".files-header-btns.right"),this.$filterMenuBtn=this.$(".files-filter-menu-btn"),this.$filterMenu=this.$(".files-filter-menu"),this.$newFolder=this.$(".files-new-folder-btn"),this.$upload=this.$(".files-upload-btn"),this.$uploadInput=this.$("input:file.file"),this.$sortMenuBtn=this.$(".files-sort-menu-btn"),this.$sortMenu=this.$(".files-sort-menu")},_showHeaderBtnClickedEffect:function(e,t){s.showClickedEffect(e,"files-header-btn-active","files-header-btn-transition",t)},_renderChildViews:function(){this._renderSearchControlView(),this._renderFilterMenuView(),this._renderSortMenuView()},_renderSearchControlView:function(){this._renderChildView("_searchControlView",e.SearchControlView,this.$searchControl)},_renderFilterMenuView:function(){this._renderChildView("_filterMenuView",t.FilterMenuView,this.$filterMenu)},_renderSortMenuView:function(){this._renderChildView("_sortMenuView",t.SortMenuView,this.$sortMenu)},_positionFilterMenu:function(){var e=this.$filterMenuBtn,t=e.position();if(!t)return;this._filterMenuView.$el.css("right",this.$el.width()-t.left-o.getFullWidth(e)+1+"px")},_updateUploadButtonFocusStyle:function(e){var t=this.$("input:file");!e&&t.is(document.activeElement)?t.addClass("focused"):t.removeClass("focused"),i.isIE8()&&s.detachAndReattachElement(t.next())},_onFocusIn:function(){this._updateUploadButtonFocusStyle()},_onFocusOut:function(){this._updateUploadButtonFocusStyle(!0)},_onKeyDown:function(e){var t=$(e.target),n=!1;return this._updateUploadButtonFocusStyle(),s.descendantHasFocus(this.$el)?(t.is(this.$filterMenuBtn)&&(n=this._onFilterMenuBtnKeyDown(e)),t.is(this.$sortMenuBtn)&&(n=this._onSortMenuBtnKeyDown(e)),!n&&(t.is(".files-header-btn")||t.is(this.$("input:file")))&&(n=this._onFilesHeaderBtnKeyDown(e)),n):!1},_onFilterMenuBtnClick:function(){this.options.noUrlUpdate?this._logSiteCatalystEvent([u.FILTER_ICON,u.CLICKED]):this._logSiteCatalystEvent([u.SEARCH_BAR,u.FILTER_ICON,u.CLICKED]),this._triggerViewEvent(t.ViewEvents.FILTER_MENU_BTN_CLICK)},_onMenuBtnKeyDown:function(e,t){var n=e.which,r=e.target;switch(n){case 32:case 38:case 40:this._consumeEvent(e);if(n===38&&t||n!==38&&!t)return r.click(),!0}return!1},_onFilterMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this._filterMenuView.isMenuOpen())},_onUploadMouseDown:function(e){i.isIE()&&!i.isIE9orBelow()&&($(e.target).click(),e.preventDefault())},_onUploadClick:function(){this._logSiteCatalystEvent([u.UPLOAD_ICON,u.CLICKED])},_onNewFolderClick:function(e){var n=this.options;$(e.currentTarget).hasClass("disabled")||(this._logSiteCatalystEvent([u.NEW_FOLDER_ICON,u.CLICKED]),this._triggerViewEvent(t.ViewEvents.NEW_FOLDER,{parentFolderId:n.appApi.folderApi.getCurrentFolderId(n.pluginId),parentView:this,scContext:this._getParentScContext()}))},_onSortMenuBtnClick:function(){this.options.noUrlUpdate?this._logSiteCatalystEvent([u.SORT_ICON,u.CLICKED]):this._logSiteCatalystEvent([u.SEARCH_BAR,u.SORT_ICON,u.CLICKED]),this._triggerViewEvent(t.ViewEvents.SORT_MENU_BTN_CLICK)},_onSortMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this._sortMenuView.isMenuOpen())},_onFilesHeaderBtnKeyDown:function(e){var t=this.options,n=$(e.target),r=e.which,o=e.shiftKey,u=this.$btnsRight,a,f=!1,l=this.$("input:file").is(n);switch(r){case 13:case 32:l?i.isIE()&&(t.fileUploadModel.hasAjaxFileUpload()?n.click():r===13&&i.isIE9orBelow()&&(f=!0)):(f=!0,n.click());break;case 9:l&&(a=s.getNextFocusableDescendant(u,o,!0),f=!0);break;case 37:case 38:a=s.getNextFocusableDescendant(u,!0,!0),f=!0;break;case 39:case 40:a=s.getNextFocusableDescendant(u,!1,!0),f=!0}return f&&this._consumeEvent(e),a&&a.focus(),f},_addUiModelEventListeners:function(){var e=this.options,t=e.searchUiModel,n=e.filesUiModel;this.listenTo(t,"change:status",this._onSearchStatusChange).listenTo(n,"change:show_filter_menu",this._onShowFilterMenuChange).listenTo(n,"change:show_sort_menu",this._onShowSortMenuChange)},_onSearchStatusChange:function(){this.options.searchUiModel.isSearching()?(this.$newFolder.addClass("disabled").prop("disabled",!0),this.$upload.addClass("disabled"),this.$upload.find("input").prop("disabled",!0)):(this.$newFolder.removeClass("disabled").prop("disabled",!1),this.$upload.removeClass("disabled").prop("disabled",!1),this.$upload.find("input").prop("disabled",!1))},_onShowFilterMenuChange:function(e,t){var n=this._filterMenuView,r,i=this.$filterMenuBtn;t?(r=this.options.filesUiModel,n.open().always(function(){i.removeClass("selected").removeAttr("aria-expanded"),r.set("show_filter_menu",!1,{silent:!0})}),i.addClass("selected").attr("aria-expanded","true")):n.close()},_onShowSortMenuChange:function(e,t){var n=this._sortMenuView,r,i=this.$sortMenuBtn;t?(r=this.options.filesUiModel,n.open().always(function(){i.removeClass("selected").removeAttr("aria-expanded"),r.set("show_sort_menu",!1,{silent:!0})}),i.addClass("selected").attr("aria-expanded","true")):n.close()}}),t.FilesHeaderView}),define("files/dev/templates/files-rhp-template",[],function(){return'<div class="files-rhp-preview"></div><div class="files-rhp-properties"></div><div class="files-rhp-actions"></div>'}),define("files/dev/views/files-rhp-view",["core/ac-core","files/ac-files","files/templates/files-rhp-template","core/views/rhp-preview-view","core/views/rhp-properties-view","core/views/rhp-actions-view","core/views/view"],function(e,t,n){return t.FilesRhpView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this)},render:function(){var t;if(!this.options.appApi.usersMeApi.isUserInCohort("bh-home20","enabled"))return;e.View.prototype.render.call(this);if(this.options.noHoverPreview)return;return t=this.$el,t.children().length===0&&(t.html(_.template(n)),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$preview=this.$(".files-rhp-preview"),this.$properties=this.$(".files-rhp-properties"),this.$actions=this.$(".files-rhp-actions")},_renderChildViews:function(){this._renderChildView("_previewView",e.RhpPreviewView,this.$preview),this._renderChildView("_propertiesView",e.RhpPropertiesView,this.$properties),this._renderChildView("_actionsView",e.RhpActionsView,this.$actions)}}),t.FilesRhpView}),define("files/dev/templates/full-preview-template",[],function(){return'<div class="full-preview-header files-header">    <div class="full-preview-home-btn-wrapper">        <button class="full-preview-home-btn"                id="full-preview-header-home-btn"                title="<%= back %>">            <span class="hidden-accessible"><%= back %></span>        </button>        <div class="full-preview-home-btn-separator"></div>    </div>     <div class="full-preview-name-container folder-path                with-home-btn">        <div id="full-preview-name" class="full-preview-name"             role="heading" aria-level="1"><%- name %></div>         <button class="full-preview-action-menu-btn                       files-header-btn"             id="full-preview-action-menu-btn"             title="<%= actions %>" aria-haspopup="true">            <span class="hidden-accessible"><%= actions %></span>        </button>        <div class="full-preview-action-menu menu" role="menu"              aria-hidden="true"></div>    </div>     <div class="full-preview-header-btns files-header-btns right">        <button class="full-preview-send-btn"            data-test-name="full-preview-header-send-btn">            <div class="core-email-icon full-preview-send-btn-icon">            </div>            <div class="full-preview-send-btn-label">                 <%= send %>            </div>        </button>         <button class="full-preview-download-btn"            data-test-name="full-preview-header-download-btn">            <div class="full-preview-download-btn-icon"></div>            <div class="full-preview-download-btn-label">                 <%= download %>            </div>         </button>    </div> </div> <div class="full-preview-main">    <div class="full-preview-body folder-items">        <div id="full-preview-image-container"             class="full-preview-image-container">            <!-- Intentionally omit close tag for img.                 See bug 3498744 (IE8) -->            <img class="full-preview-image single hidden" alt=""/>            <div class="full-preview-svg single hidden" />        </div>        <div class="full-preview-not-available">            <%= previewNotAvailable %>            <span class="full-preview-not-available-desc">                <%= previewNotAvailableDesc %></span>        </div>    </div>     <div class="full-preview-hud" role="toolbar"         aria-labelledby="full-preview-name"         aria-controls="full-preview-image-container"></div></div> <div class="full-preview-sidebar has-icons" tabindex="-1"></div>'}),define("files/dev/views/full-preview-home-btn-view",["core/ac-core","files/ac-files","core/templates/toolbar-item-template","core/views/plugin-selector-view"],function(e,t,n){return t.FullPreviewHomeBtnView=e.PluginSelectorView.extend({render:function(){this.options.template=_.template(n),e.PluginSelectorView.prototype.render.call(this)},getSelectorIconClass:function(){return"full-preview-home-btn"}}),t.FullPreviewHomeBtnView}),define("files/dev/templates/full-preview-action-menu-template",[],function(){return'<button class="full-preview-rename-menu-item            full-preview-action-menu-item"    id="full-preview-action-rename-menu-item"    role="menuitem" tabindex="-1">     <%= rename %></button><button class="full-preview-share-menu-item            full-preview-action-menu-item"    id="full-preview-action-share-menu-item"    role="menuitem" tabindex="-1">     <%= share %></button><button class="full-preview-delete-menu-item            full-preview-action-menu-item"     id="full-preview-action-delete-menu-item"     role="menuitem" tabindex="-1">     <%= deleteText %></button> <div class="menu-nub-grey"></div>'}),define("files/dev/views/full-preview-action-menu-view",["core/ac-core","files/ac-files","files/templates/full-preview-action-menu-template","i18n!core/nls/ui-strings","core/utils/css-util","core/utils/sc-analytics","core/views/menu-view"],function(e,t,n,r,i,s){return t.FullPreviewActionMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .full-preview-rename-menu-item":"_onRenameClick","click .full-preview-share-menu-item":"_onShareClick","click .full-preview-delete-menu-item":"_onDeleteClick"})},render:function(){var t=this.$el;e.MenuView.prototype.render.call(this),t.children().length===0&&(t.html(_.template(n)({rename:r.RENAME_ELLIPSIS,share:r.SHARE_ELLIPSIS,deleteText:r.DELETE})),(!e.Features.isFeatureEnabled("share_ui")||this.options.noShare)&&$(".full-preview-share-menu-item").hide())},open:function(){var t=this.options,n=e.MenuView.prototype.open.call(this),r=this.$el,o;return this._logSiteCatalystEvent(s.SHOWN),o=t.$actionMenuBtn.position(),r.css("left",o.left-i.getFullWidth(r)+42+"px"),n},_getSiteCatalystContext:function(){var e=this.options.fullPreviewUiModel;return e.isNGDocView()&&e.isNGDocJobComplete()?[s.NGDOC,s.TOOLBAR,s.GEAR_MENU]:[s.TOOLBAR,s.GEAR_MENU]},_onRenameClick:function(){var t=this.options,n;this.close(_.bind(function(){this._logSiteCatalystEvent([s.RENAME,s.CLICKED]);var r=t.fullPreviewUiModel.get("item_model");n=r.get("name"),this._triggerViewEvent(e.ViewEvents.RENAME,{id:r.get("id"),object_type:r.get("object_type"),name:n,existingName:n,model:r,parentView:this,scContext:this._getFullScContext()})},this))},_onShareClick:function(){var t=this.options;this.close(_.bind(function(){this._logSiteCatalystEvent([s.SHARE,s.CLICKED]);var n=t.fullPreviewUiModel.get("item_model");this._triggerViewEvent(e.ViewEvents.SHOW_PUBLIC_SHARE_DLG,{models:[n],parentView:this,scContext:this._getFullScContext()})},this))},_onDeleteClick:function(){var e=this.options;this.close(_.bind(function(){this._logSiteCatalystEvent([s.DELETE,s.CLICKED]),this._triggerViewEvent(t.ViewEvents.FULL_PREVIEW_DELETE,{id:e.fullPreviewUiModel.get("item_model").id,object_type:"file",parentView:this,scContext:this._getFullScContext()})},this))}}),t.FullPreviewActionMenuView}),define("files/dev/templates/full-preview-hud-template",[],function(){return'<div class="full-preview-hud-controls" role="presentation">    <button class="full-preview-hud-prev full-preview-hud-btn"            id="full-preview-hud-prev-page"            title="<%= prevPageTitle %>">        <span class="hidden-accessible"><%= prevPageTitle %></span>    </button>    <button class="full-preview-hud-next full-preview-hud-btn"            id="full-preview-hud-next-page"            title="<%= nextPageTitle %>">        <span class="hidden-accessible"><%= nextPageTitle %></span>    </button>     <input class="full-preview-hud-page-num full-preview-hud-num"           type="tel"           id="full-preview-hud-page-num"           title="<%= pageNumTitle %>" />    <div class="full-preview-hud-num separator">         <%= pageNumSeparator %></div>    <div class="full-preview-hud-num"         title="<%= pageCountTitle %>" role="presentation">        <div class="hidden-accessible"><%= pageCountTitle %></div>        <div class="full-preview-hud-page-count"             id="full-preview-hud-page-count"></div>    </div>     <div class="full-preview-hud-divider" role="separator"></div>    <button class="full-preview-hud-zoom-out full-preview-hud-btn"         id="full-preview-hud-zoom-out"         title="<%= zoomOutTitle %>">        <span class="hidden-accessible"><%= zoomOutTitle %></span>    </button>    <button class="full-preview-hud-zoom-in full-preview-hud-btn"         id="full-preview-hud-zoom-in"         title="<%= zoomInTitle %>">        <span class="hidden-accessible"><%= zoomInTitle %></span>    </button>     <button class="full-preview-hud-toggle-ngdoc full-preview-hud-btn"         id="full-preview-hud-toggle-ngdoc">        <span class="hidden-accessible"></span>    </button>     <div class="full-preview-hud-divider" role="separator"></div>     <button class="full-preview-hud-scroll-pages full-preview-hud-btn"            id="full-preview-hud-scroll-pages"            title="<%= scrollPagesTitle %>">        <span class="hidden-accessible"><%= scrollPagesTitle %></span>    </button>    <button class="full-preview-hud-fit-page-width full-preview-hud-btn                   disabled"           id="full-preview-hud-fit-page-width"           title="<%= fitPageWidthTitle %>">        <span class="hidden-accessible"><%= fitPageWidthTitle %></span>    </button>    <button class="full-preview-hud-fit-full-page full-preview-hud-btn"            id="full-preview-hud-fit-full-page"            title="<%= fitFullPageTitle %>">        <span class="hidden-accessible"><%= fitFullPageTitle %></span>    </button>     <button class="full-preview-hud-toggle-rhp full-preview-hud-btn"            id="full-preview-hud-toggle-rhp">        <span class="hidden-accessible"></span>    </button>     <div class="full-preview-hud-divider"></div>    <button class="full-preview-hud-toggle-info full-preview-hud-btn"            aria-haspopup="true"            id="full-preview-hud-toggle-info">        <span class="hidden-accessible"></span>    </button>     <button class="full-preview-hud-dock full-preview-hud-btn"            id="full-preview-hud-dock"            title="<%= dockTitle %>">        <span class="hidden-accessible"><%= dockTitle %></span>    </button>     <button class="full-preview-hud-close full-preview-hud-btn"            id="full-preview-hud-close"            title="<%= unDockTitle %>">        <span class="hidden-accessible"><%= unDockTitle %></span>    </button></div> <div class="files-full-preview-file-info menu"     tabindex="-1" role="dialog"></div>'}),define("files/dev/templates/full-preview-file-info-template",[],function(){return'<table class="files-full-preview-file-info-table"><caption class="files-full-preview-file-info-name">    <%= fileName %></caption><tr class="files-full-preview-file-info-item">    <th class="files-full-preview-file-info-attr"        scope="row">        <%= typeLabel %>    </th>    <td class="files-full-preview-file-info-value                 files-full-preview-file-info-type">        <%= fileType %>    </td></tr><tr class="files-full-preview-file-info-item">    <th class="files-full-preview-file-info-attr"        scope="row">        <%= addedLabel %>    </th>    <td class="files-full-preview-file-info-value                 files-full-preview-file-info-added">        <%= dateAdded %>    </td></tr><tr class="files-full-preview-file-info-item">    <th class="files-full-preview-file-info-attr"        scope="row">        <%= modifiedLabel %>    </th>    <td class="files-full-preview-file-info-value                 files-full-preview-file-info-modified">        <%= dateModified %>    </td></tr><tr class="files-full-preview-file-info-item">    <th class="files-full-preview-file-info-attr"        scope="row">        <%= sizeLabel %>    </th>    <td class="files-full-preview-file-info-value                 files-full-preview-file-info-size">        <%= fileSize %>    </td></tr></table> <div class="menu-nub-grey down"></div>'}),define("files/dev/views/full-preview-file-info-view",["core/ac-core","files/ac-files","files/templates/full-preview-file-info-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/css-util","core/utils/num-util","core/utils/date-util","core/utils/file-types","core/utils/truncate","core/views/menu-view"],function(e,t,n,r,i,s,o,u,a,f){return t.FullPreviewFileInfoView=e.MenuView.extend({template:_.template(n),render:function(){var t=this.$el,n;e.MenuView.prototype.render.call(this),t.html(this.template({fileName:this._getFileName(),typeLabel:i.TYPE,fileType:this._formatFileType(),addedLabel:r.ADDED,dateAdded:this._formatDateAdded(),modifiedLabel:r.MODIFIED,dateModified:this._formatDateModified(),sizeLabel:r.SIZE,fileSize:this._formatFileSize()})),this._initWrappers(),f.truncateElementText(this.$fileName),n=this.options.$toggleInfoBtn.offset(),t.css("left",Math.max(n.left-s.getFullWidth(t)+42,0)+"px")},_onBodyClick:function(t){e.MenuView.prototype._onBodyClick.call(this,t),$(t.target).closest(this.options.$toggleInfoBtn).length>0&&this._consumeEvent(t)},_initWrappers:function(){this.$fileName=this.$(".files-full-preview-file-info-name")},_getItemModel:function(){return this.options.fullPreviewUiModel.get("item_model")},_formatDate:function(e){var t=this._getItemModel();return t?u.formatDate(t.get(e)):""},_getFileName:function(){return this.options.fullPreviewUiModel.getFileName()},_formatFileType:function(){return a.formatFileType(this._getItemModel())},_formatDateAdded:function(){return this._formatDate("created")},_formatDateModified:function(){return this._formatDate("modified")},_formatFileSize:function(){var e=this._getItemModel();return e?o.formatSize(e.get("size")):""}}),t.FullPreviewFileInfoView}),define("files/dev/views/full-preview-hud-view",["core/ac-core","files/ac-files","files/templates/full-preview-hud-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/util","core/utils/view-util","core/utils/num-util","core/utils/sc-analytics","core/views/view","files/views/full-preview-file-info-view"],function(e,t,n,r,i,s,o,u,a){var f=.8,l=1.25;return t.FullPreviewHudView=e.View.extend({events:{mouseenter:"_onMouseEnter",mousemove:"_onMouseMove",mouseleave:"_onMouseLeave","click   .full-preview-hud-prev":"_onPrevPageClick","click   .full-preview-hud-next":"_onNextPageClick","keydown .full-preview-hud-page-num":"_onPageNumKeyDown","keyup   .full-preview-hud-page-num":"_onPageNumKeyUp","click   .full-preview-hud-zoom-out":"_onZoomOutClick","click   .full-preview-hud-zoom-in":"_onZoomInClick","click   .full-preview-hud-scroll-pages":"_onScrollPagesClick","click   .full-preview-hud-fit-page-width":"_onFitPageWidthClick","click   .full-preview-hud-fit-full-page":"_onFitFullPageClick","click   .full-preview-hud-toggle-rhp":"_onToggleRhpClick","click   .full-preview-hud-toggle-info":"_onToggleInfoClick","click   .full-preview-hud-toggle-ngdoc":"_onToggleNgdocClick","click   .full-preview-hud-close":"_onCloseClick","click   .full-preview-hud-dock":"_onDockClick","touchstart .full-preview-hud-prev":"_onPrevPageClick","touchstart .full-preview-hud-next":"_onNextPageClick","touchstart .full-preview-hud-page-num":"_onPageNumTap","touchstart   .full-preview-hud-zoom-out":"_onZoomOutClick","touchstart   .full-preview-hud-zoom-in":"_onZoomInClick","touchstart .full-preview-hud-scroll-pages":"_onScrollPagesClick","touchstart .full-preview-hud-fit-page-width":"_onFitPageWidthClick","touchstart .full-preview-hud-fit-full-page":"_onFitFullPageClick","touchstart .full-preview-hud-toggle-rhp":"_onToggleRhpClick","touchstart .full-preview-hud-toggle-info":"_onToggleInfoClick","touchstart .full-preview-hud-toggle-ngdoc":"_onToggleNgdocClick","touchstart .full-preview-hud-close":"_onCloseClick","touchstart .full-preview-hud-dock":"_onDockClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._addUiModelEventListeners(),this._addFocusEventListener()},render:function(){e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({prevPageTitle:i.PREV_PAGE_TITLE,nextPageTitle:i.NEXT_PAGE_TITLE,pageNumTitle:i.PAGE_NUM_TITLE,pageNumSeparator:i.PAGE_NUM_SEPARATOR,pageCountTitle:i.PAGE_COUNT_TITLE,zoomOutTitle:i.ZOOM_OUT_TITLE,zoomInTitle:i.ZOOM_IN_TITLE,scrollPagesTitle:i.SCROLL_PAGES_TITLE,fitPageWidthTitle:i.FIT_PAGE_WIDTH_TITLE,fitFullPageTitle:i.FIT_FULL_PAGE_TITLE,unDockTitle:i.UNDOCK,dockTitle:i.DOCK_TO_BOTTOM,closeTitle:r.CLOSE})),this._initWrappers(),s.isTouchDevice()&&this.$pageNum.attr("readonly","readonly").addClass("readonly")),this.$pageNum.val(this._getPageNumStr()),this.$pageCount.html(this._getPageCountStr());var t=this._getToggleRhpTitle(),n=this._getToggleInfoTitle(),o=this._getToggleNgdocTitle();this.$toggleRhp.attr("title",t).find(".hidden-accessible").text(t),this.$toggleInfo.attr("title",n).find(".hidden-accessible").text(n),this.$toggleNgdoc.attr("title",o).find(".hidden-accessible").text(o),this._updateControls(),this.options.fullPreviewUiModel.get("is_hud_dismissed")||this._show(!0),this._renderChildViews()},_initWrappers:function(){this.$prevPage=this.$(".full-preview-hud-prev"),this.$nextPage=this.$(".full-preview-hud-next"),this.$pageNum=this.$(".full-preview-hud-page-num"),this.$pageCount=this.$(".full-preview-hud-page-count"),this.$viewBtns=this.$(".full-preview-hud-scroll-pages,.full-preview-hud-fit-page-width,.full-preview-hud-fit-full-page"),this.$scrollPages=this.$(".full-preview-hud-scroll-pages"),this.$fitPageWidth=this.$(".full-preview-hud-fit-page-width"),this.$fitFullPage=this.$(".full-preview-hud-fit-full-page"),this.$toggleRhp=this.$(".full-preview-hud-toggle-rhp"),this.$toggleInfo=this.$(".full-preview-hud-toggle-info"),this.$toggleNgdoc=this.$(".full-preview-hud-toggle-ngdoc"),this.$close=this.$(".full-preview-hud-close"),this.$dock=this.$(".full-preview-hud-dock"),this.$fileInfo=this.$(".files-full-preview-file-info"),this.$hudControls=this.$(".full-preview-hud-controls")},_getPageNum:function(){return this.options.fullPreviewUiModel.get("current_page")},_getPageCount:function(){return this.options.fullPreviewUiModel.get("page_count")},_getPageNumStr:function(){return this._getPageCount()?(this._getPageNum()+1).toString():""},_getPageCountStr:function(){var e=this._getPageCount();return e?e.toString():" "},_getToggleRhpTitle:function(){return this.options.fullPreviewUiModel.get("show_rhp")?i.HIDE_RHP:i.SHOW_RHP},_getToggleInfoTitle:function(){return this.options.fullPreviewUiModel.get("show_info")?i.HIDE_FILE_INFO:i.SHOW_FILE_INFO},_getToggleNgdocTitle:function(){return this.options.fullPreviewUiModel.isNGDocView()?i.SHOW_IMAGE_PREVIEW:i.SHOW_NGDOC_PREVIEW},_updateControls:function(){var e,t,n;e=this.options.fullPreviewUiModel,t=this._getPageNum(),n=this._getPageCount(),t===0?(this.$prevPage.is(document.activeElement)&&this.$nextPage.focus(),o.enableInput(this.$prevPage,!1)):o.enableInput(this.$prevPage,!0),t===n-1?(this.$nextPage.is(document.activeElement)&&this.$prevPage.focus(),o.enableInput(this.$nextPage,!1)):o.enableInput(this.$nextPage,!0),this._updateCurrentPageNumber(),this.$viewBtns.removeClass("disabled").attr("aria-pressed","false"),e.isScrollPagesView()?this.selectedViewButton=this.$scrollPages:e.isFitFullPageView()?this.selectedViewButton=this.$fitFullPage:this.selectedViewButton=this.$fitPageWidth,this.selectedViewButton.addClass("disabled").attr("aria-pressed","true"),e.get("show_rhp")?this.$toggleRhp.addClass("show-rhp"):this.$toggleRhp.removeClass("show-rhp"),e.get("enable_ngdoc")&&e.isNGDocJobComplete()?(this.$toggleNgdoc.show(),e.isNGDocView()?this.$toggleNgdoc.removeClass("show-image"):this.$toggleNgdoc.addClass("show-image")):this.$toggleNgdoc.hide(),e.get("is_hud_dismissed")||s.isTouchDevice()?(this.$close.css("display","none"),this.$dock.css("display","")):(this.$close.css("display","inline-block"),this.$dock.css("display","none"))},_updateCurrentPageNumber:function(){this.$pageNum.val(this._getPageNum()+1)},_updateHudPosition:function(){var e=this.options.fullPreviewUiModel;e.get("is_hud_dismissed")||(o.isHorizontalScrollBarPresent(e.get("preview_elem"))?this.$el.css("bottom",o.getScrollBarWidth()+"px"):this.$el.css("bottom","0px"))},_show:function(e){if(!this._getPageCount())return;if(e===this._isShown){e&&s.isTouchDevice()&&this._updateCurrentPageNumber();return}this.$el.stop(!0,!1),this.$el.animate({opacity:e?1:0},_.bind(function(){e||this._updateControls()},this)),this._isShown=e,e?(this.options.fullPreviewUiModel.get("is_hud_dismissed")?(this.$el.addClass("full-preview-hud-floating"),this.$hudControls.addClass("full-preview-hud-controls-floating"),this.$toggleNgdoc.is(":visible")?this.$hudControls.addClass("ngdoc"):this.$hudControls.removeClass("ngdoc")):(this.$el.removeClass("full-preview-hud-floating"),this.$hudControls.removeClass("full-preview-hud-controls-floating ngdoc")),this._updateControls(),this._updateCurrentPageNumber()):this.$pageNum&&this.$pageNum.blur()},_renderChildViews:function(){this._renderFileInfoView()},_renderFileInfoView:function(){this._renderChildView("_fullPreviewFileInfoView",t.FullPreviewFileInfoView,this.$fileInfo,{$toggleInfoBtn:this.$toggleInfo,animate:!1})},_onMouseEnter:function(e){$(e.currentTarget).is(this.$el)&&(this._isMouseEntered=!0,this._show(!0))},_onMouseMove:function(e){var t,n=e.pageX,r=e.pageY,i,s,u,a,f,l,c,h=this.$el;t=this.options.fullPreviewUiModel.get("preview_elem");if(!o.isVerticalScrollBarPresent(t)){h.css("width","100%");return}i=this.$el.offset(),a=i.left+this.$el.width(),f=i.top+this.$el.height(),l=o.getScrollBarWidth(),s=a-l,u=i.top,c=n>=s&&n<=a&&r>=u&&r<=f,c&&!this._wasOverScrollBar?h.width(h.width()-l):h.css("width","100%"),this._wasOverScrollBar=c,this._show(!c)},_onMouseLeave:function(e){var t=this.options.fullPreviewUiModel;$(e.currentTarget).is(this.$el)&&(this._isMouseEntered=!1,t.get("is_hud_dismissed")&&$(document.activeElement).closest(this.$el).length===0&&this._show(!1))},_timeoutId:null,_onFocusIn:function(e){clearTimeout(this._timeoutId);var t=this.options.fullPreviewUiModel;t.get("is_hud_dismissed")&&$(e.target).closest(this.$el)!==0&&this._show(!0)},_onFocusOut:function(){var e=this.options.fullPreviewUiModel,t=this.$el,n=this;e.get("is_hud_dismissed")&&(this._timeoutId=setTimeout(function(){e.get("is_hud_dismissed")&&!n._isMouseEntered&&$(document.activeElement).closest(t).length===0&&n._show(!1)},10))},_onPrevPageClick:function(e){this._onPageNavClick(e,!1)},_onNextPageClick:function(e){this._onPageNavClick(e,!0)},_onPageNavClick:function(e,t){var n;e&&e.preventDefault();if(!e||!$(e.currentTarget).hasClass("disabled"))this._logSiteCatalystEvent(t?a.NEXT_PAGE:a.PREV_PAGE),n=this._getPageNum(),this._goToPage(t?n+1:n-1,!0)},_goToPage:function(e,t){var n=this.options.fullPreviewUiModel,r=n.get("current_page");n.set({current_page:Math.min(Math.max(0,e),this._getPageCount()-1),align_current_page:t}),r===n.get("current_page")&&this._updateCurrentPageNumber()},_onPageNumKeyDown:function(e){var t=this.$pageNum,n=_.bind(function(){this._updateCurrentPageNumber(),t.blur().focus(),t.select()},this),r=_.bind(function(){var e=parseInt(this.$pageNum.val(),10);isNaN(e)?n():(this._logSiteCatalystEvent(a.PAGE_NUM_ENTERED),this._goToPage(e-1,!0),s.isTouchDevice()&&t.blur())},this),i=e.which;i===27?n():i===13||i===9?r():(i===37||i===39)&&e.stopPropagation()},_onPageNumKeyUp:function(){var e=this.$pageNum,t=e.val(),n=u.removeNonNumerics(t);n!==t&&e.val(n)},_onPageNumTap:function(){var e=this.$pageNum;e.attr("readonly")!=="readonly"&&e.focus().select()},_onZoomOutClick:function(e){var t=this.options.fullPreviewUiModel,n=t.get("zoom_factor");if($(e.currentTarget).hasClass("disabled"))return;t.set({align_current_page:!0,zoom_factor:n*f}),this._updateHudPosition(),this._logSiteCatalystEvent(a.ZOOM_OUT)},_onZoomInClick:function(e){var t=this.options.fullPreviewUiModel,n=t.get("zoom_factor");if($(e.currentTarget).hasClass("disabled"))return;t.set({align_current_page:!0,zoom_factor:n*l}),this._updateHudPosition(),this._logSiteCatalystEvent(a.ZOOM_IN)},_onScrollPagesClick:function(e){this._onViewButtonClick(e,"scroll_pages")&&this._logSiteCatalystEvent(a.SCROLL)},_onFitPageWidthClick:function(e){this._onViewButtonClick(e,"fit_page_width")&&this._logSiteCatalystEvent(a.FIT_PAGE_WIDTH)},_onFitFullPageClick:function(e){this._onViewButtonClick(e,"fit_full_page")&&this._logSiteCatalystEvent(a.FIT_FULL_PAGE)},_onViewButtonClick:function(e,t){return $(e.currentTarget).hasClass("disabled")?!1:(this.options.fullPreviewUiModel.set({view_format:t,align_current_page:!0,zoom_factor:1}),this._updateHudPosition(),!0)},_onToggleRhpClick:function(e){var n=this.options,r=n.fullPreviewUiModel,i=r.get("show_rhp");e.preventDefault(),this._logSiteCatalystEvent(i?a.HIDE_RHP:a.SHOW_RHP),r.set("show_rhp",!i),t.opFactory.create("SavingFilesPrefsOp",n).run()},_onToggleInfoClick:function(e){var t=this.options,n=t.fullPreviewUiModel,r=n.get("show_info");e.preventDefault(),this._logSiteCatalystEvent(r?a.HIDE_FILE_INFO:a.SHOW_FILE_INFO),n.set("show_info",!r)},_onToggleInfoKeyDown:function(e){var t=this.options,n=t.fullPreviewUiModel,r=n.get("show_info"),i=e.which;switch(i){case 32:case 38:case 40:case 27:return(r&&(i===38||i===27)||!r&&i===40||i===32)&&this._onToggleInfoClick(e),this._consumeEvent(e),!0}return!1},_onToggleNgdocClick:function(e){var t=this.options,n=t.fullPreviewUiModel,r;e.preventDefault();if(!n.get("enable_ngdoc"))return;r=n.isNGDocView(),this._logSiteCatalystEvent(r?a.SHOW_IMAGE_PREVIEW:a.SHOW_NGDOC_PREVIEW),n.set({view_type:r?"bitmap":"ngdoc"})},_onDockClick:function(){var e=this,t=this.options.fullPreviewUiModel,n=this.$dock.is(document.activeElement);this._show(!1),t.set("is_hud_dismissed",!1),this._show(!0),n&&_.delay(function(){e.$close.focus()},t.get("restore_focus_delay")/5)},_onCloseClick:function(){var e=this,t=this.options.fullPreviewUiModel,n=this.$close.is(document.activeElement);this._logSiteCatalystEvent(a.CLOSE),t.set("is_hud_dismissed",!0),this._show(!1),n&&_.delay(function(){e.$dock.focus()},t.get("restore_focus_delay"))},_onKeyDown:function(e){var t=e.which,n=!1,r=this.options.fullPreviewUiModel,i=this.$el,s=$(e.target),u,a=o.descendantHasFocus(i);if(s.is("[aria-haspopup=true],[role=option],[role^='menuitem'],[role=toolbar] :focusable")&&!a)return!1;if(s.is(this.$toggleInfo)&&this._onToggleInfoKeyDown(e))return!0;switch(t){case 27:s.closest(".generic-dialog, [role=dialog], [role=menu]").length===0&&this.options.appApi.previewApi.closeFullPreview(),n=!0;break;case 35:this._goToPage(r.get("page_count")-1,!0),n=!0;break;case 36:this._goToPage(0,!0),n=!0;break;case 33:case 38:this._onPrevPageClick(),n=!0;break;case 34:case 40:this._onNextPageClick(),n=!0;break;case 37:a?u=o.getNextFocusableDescendant(i,!0,!1):(this._onPrevPageClick(),n=!0);break;case 39:a?u=o.getNextFocusableDescendant(i,!1,!1):(this._onNextPageClick(),n=!0);break;case 65:if(e.ctrlKey||e.metaKey)r.isNGDocView()||(n=!0)}return u&&u.length&&(this._consumeEvent(e),n=!0,u.focus()),n},_getSiteCatalystContext:function(){var e=this.options.fullPreviewUiModel;return e.isNGDocView()&&e.isNGDocJobComplete()?[a.NGDOC,a.BOTTOM_NAV_BAR]:a.BOTTOM_NAV_BAR},_addUiModelEventListeners:function(){var e=this.options.fullPreviewUiModel;this.listenTo(e,"change:item_model",this._onItemModelChange).listenTo(e,"change:page_count",this._onPageCountChange).listenTo(e,"change:current_page",this._onCurrentPageChange).listenTo(e,"change:show_info",this._onShowInfoChange)},_onItemModelChange:function(e,t){t||this.options.appApi.keyApi.popKeyHandler(this)},_onPageCountChange:function(e,t){t&&(this.render(),this.options.appApi.keyApi.pushKeyHandler(this))},_onCurrentPageChange:function(e,t){this._goToPage(t,e.get("align_current_page"))},_onShowInfoChange:function(e,t){var n=this._fullPreviewFileInfoView,r;t?(r=this.options.fullPreviewUiModel,n.open().always(function(){r.set("show_info",!1)})):n.close(),this.render()}}),t.FullPreviewHudView}),define("files/dev/templates/full-preview-toolbar-item-template",[],function(){return'<button role="tab" class="toolbar-item plugin-selector"           aria-selected="false" title="<%= label %>">    <div class="plugin-selector-icon"></div>    <div class="toolbar-item-label hidden-accessible">        <%= label %>    </div></button>'}),define("files/dev/views/full-preview-plugins-selector-view",["core/ac-core","files/ac-files","files/templates/full-preview-toolbar-item-template","core/utils/css-util","core/views/plugins-selector-view"],function(e,t,n,r){return t.FullPreviewPluginsSelectorView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this)},render:function(){e.PluginsSelectorView.prototype.render.call(this),this.options.pluginsUiModel.getShownPluginCount()<=1?this.$el.hide():this._positionPointer()},_getSelectorTemplate:function(){return n},_getSelectorViewEvent:function(){return t.ViewEvents.FULL_PREVIEW_PLUGIN_CLICK},_initWrappers:function(){e.PluginsSelectorView.prototype._initWrappers.call(this),this.$pointer=this.$(".toolbar-selection-pointer")},_positionPointer:function(){var e=this._getSelectedSelectorElement(),t=this.options.fullPreviewUiModel.get("show_rhp"),n=this.$pointer,i;this.$el.show(),e&&t?(n.width(e.find(".plugin-selector-icon").width()),i=r.getFullWidth(e),n.show().css("left",e.position().left+1+(i-n.width())/2+"px")):(this._unhighlightSelection(),n.hide())},_onPluginSelectorClick:function(n){var r=this.options,i=r.fullPreviewUiModel;i.get("show_rhp")||(i.set("show_rhp",!0),t.opFactory.create("SavingFilesPrefsOp",r).run()),e.PluginsSelectorView.prototype._onPluginSelectorClick.call(this,n)}}),t.FullPreviewPluginsSelectorView}),define("files/dev/templates/full-preview-overlays-content-template",[],function(){return'<div class="full-preview-overlay-content plugin-content"></div>'}),define("files/dev/views/full-preview-overlays-content-view",["core/ac-core","files/ac-files","files/templates/full-preview-overlays-content-template","core/views/plugins-content-view"],function(e,t,n){return t.FullPreviewOverlaysContentView=e.PluginsContentView.extend({render:function(){var t=this.$el,r,i=this.options.fullPreviewOverlaysUiModel,s=this.options.bScrollPageView,o,u,a,f,l,c,h;e.View.prototype.render.call(this),r=_.template(n),t.children(".full-preview-overlay-content").length===0&&(o=i.get("plugins"),o&&o.each(function(e){var n=_.clone(e.get("preview_elems"));t.append(r()),s?(n.push(t.children().last()),e.set("preview_elems",n)):e.set("content_elem",t.children().last())}),this._initWrappers()),s?(l=this.$el.find(".full-preview-image"),c=this.$el.find(".full-preview-svg")):(l=this.$el.find(".full-preview-image").not(".scroll-pages"),c=this.$el.find(".full-preview-svg").not(".scroll-pages")),l.length!==0&&l.is(":visible")?(this.$contents.css({"margin-top":l.css("margin-top"),"margin-left":l.css("margin-left"),"margin-bottom":l.css("margin-bottom"),"margin-right":l.css("margin-right"),left:l.offset().left+"px"}),this.$contents.width(l.width()).height(l.height())):c.length!==0&&c.is(":visible")&&(this.$contents.css({"margin-top":c.css("margin-top"),"margin-left":c.css("margin-left"),"margin-bottom":c.css("margin-bottom"),"margin-right":c.css("margin-right"),left:c.offset().left+"px"}),this.$contents.width(c.width()).height(c.height())),this.$contents.removeClass("selected"),a=i.getSelectedId(),u=i.get("plugins").get(a),h=l.hasClass("hidden")&&c.hasClass("hidden"),u&&(s?_.each(u.get("preview_elems"),function(e){h||e.addClass("selected")}):h||u.get("content_elem").addClass("selected"),f=u.get("plugin_api"),f&&s===!1&&f.render())},remove:function(){var t=this.options.fullPreviewOverlaysUiModel,n;this.$el.find(".full-preview-overlay-content").remove(),n=t.get("plugins"),n&&n.each(function(e){e.get("preview_elems").length!==0&&e.set("preview_elems",[])}),e.View.prototype.remove.call(this)},_getContentTemplate:function(){return n},_initWrappers:function(){this.$contents=this.$el.children(".plugin-content")}}),t.FullPreviewOverlaysContentView}),define("files/dev/views/full-preview-view",["core/ac-core","files/ac-files","files/templates/full-preview-template","i18n!core/nls/ui-strings","core/utils/truncate","core/utils/image-loader","core/utils/css-util","core/utils/comment-util","core/utils/sc-analytics","core/utils/svg-loader","core/views/view","files/views/view-events","files/views/full-preview-home-btn-view","files/views/full-preview-action-menu-view","files/views/full-preview-hud-view","files/views/full-preview-plugins-selector-view","files/views/full-preview-plugins-content-view","files/views/full-preview-overlays-content-view"],function(e,t,n,r,i,s,o,u,a,f){var l="application/pdf",c=1200;return t.FullPreviewView=e.View.extend({viewEvents:{"click .full-preview-home-btn":"_onHomeBtnClick","click .full-preview-action-menu-btn":"_onActionMenuBtnClick","click .full-preview-download-btn":"_onDownloadClick","click .full-preview-send-btn":"_onSendClick","click .preview-download":"_onPreviewDownloadClick","keydown .full-preview-action-menu-btn":"_onActionMenuBtnKeyDown"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._addUiModelEventListeners(),this._addAppApiCallbacks()},template:function(){return _.template(n)},render:function(){var t=this.$el,n=this.options,i=n.fullPreviewUiModel;e.View.prototype.render.call(this);if(!i.get("item_model"))return;t.children().length===0&&(t.html(this.template()({actions:r.ACTIONS,back:r.BACK,download:r.DOWNLOAD,send:r.SEND,previewNotAvailable:r.PREVIEW_NOT_AVAILABLE,previewNotAvailableDesc:r.PREVIEW_NOT_AVAILABLE_DESC})),this._initWrappers(),i.set("preview_elem",this.$previewBody),i.get("standalone")&&(this.$homeBtn.hide(),this.$previewNameCn.removeClass("with-home-btn")),i.get("read_only")&&(this.$actionMenuBtn.hide(),this.$pluginsSelector.hide()),(n.noShare||!n.appApi.pluginsApi.isPluginAvailable("send"))&&this.$(".full-preview-send-btn").hide()),this._updateRendition(),this._updateName(),this._updateViewFormat(),this._updateShowRhp(),this._renderChildViews()},_initWrappers:function(){this.$homeBtn=this.$(".full-preview-home-btn"),this.$previewHeader=this.$(".full-preview-header"),this.$previewMain=this.$(".full-preview-main"),this.$previewBody=this.$(".full-preview-body"),this.$previewImageCn=this.$(".full-preview-image-container"),this.$previewImage=this.$(".full-preview-image.single"),this.$previewSvg=this.$(".full-preview-svg.single"),this.$noPreview=this.$(".full-preview-not-available"),this.$actionMenuBtn=this.$(".full-preview-action-menu-btn"),this.$actionMenu=this.$(".full-preview-action-menu"),this.$previewHud=this.$(".full-preview-hud"),this.$previewSidebar=this.$(".full-preview-sidebar"),this.$previewNameCn=this.$(".full-preview-name-container"),this.$previewName=this.$(".full-preview-name"),this.$headerBtns=this.$(".full-preview-header-btns"),this.$pluginsSelector=this.$(".full-preview-plugins-selector"),this.$pluginsContent=this.$(".full-preview-sidebar")},_open:function(){var e=this.$el;this._close(),this._isExpanded=!0,e.addClass("shown"),this.delegateEvents(this.viewEvents),this.options.appApi.windowApi.addWindowResizeCallback(this._onWindowResize),this.render()},_close:function(){var e=this.$el;if(!this._isExpanded)return;this._isExpanded=!1,this.options.appApi.windowApi.removeWindowResizeCallback(this._onWindowResize),this._isHeightEstimated=!1,this._removePluginsOverlayViews(),this.$previewImageCn.find(".full-preview-image-container.scroll-pages").remove(),this._removeBodyScrollEventListener();try{this.$(".full-preview-image").removeAttr("src"),this.$(".full-preview-svg").empty(),this._hasImage=!1,this._hasSvg=!1}catch(t){}this.$noPreview.hide(),e.removeClass("shown"),this.remove(),this.undelegateEvents(),delete this._commentMarkupRequiredCached},_getName:function(){var t,n;return n=this.options.fullPreviewUiModel.get("item_model"),n&&(t=e.Util.replaceSpaceWithNbsp(n.get("name"))),t||(t=""),t},_getNameAndControlsWidth:function(){var e=this.$el;return e.width()-o.getCssNum(this.$previewNameCn,"left")},_getNameAndGearWidth:function(){var e,t=this.$pluginsSelector;return e=this._getNameAndControlsWidth()-o.getFullWidth(this.$headerBtns),t.css("display")!=="none"&&(e-=o.getFullWidth(t)),e},_getNameWidth:function(){var e=this._getNameAndGearWidth()-o.getFullWidth(this.$actionMenuBtn);return e},_updateName:function(){var e=this.$previewNameCn,t=this.$previewName;e.width(this._getNameAndGearWidth()-o.getExtraWidth(e)),t.text(this._getName()),this._truncateName()},_truncateName:function(){function r(){return i.getTextSize(n).width-t}var t=this._getNameWidth(),n=this.$previewName;e.Locale.getLocale()==="ja-jp"&&(t*=.85,t=Math.floor(t)),!isNaN(t)&&t>0&&i.truncateToFit(n,r)},_gotRenditionLoadError:function(){this.options.fullPreviewUiModel.set("got_rendition_load_error",!0)},_updateRendition:function(){var t=this.options.fullPreviewUiModel;if(!t.get("page_count"))return;if(t.isScrollPagesView())this.$previewImageCn.find(".full-preview-image-container.scroll-pages").length===0&&this._createScrollPagesImages(),t.get("got_current_scroll_page")?this._getScrollPagesChunk():this._getScrollPagesCurrent();else{var n=e.Util;!this._isExpanded&&(n.isIE8()||n.isFirefox())?_.delay(this._getPageRendition,t.get("toggle_rhp_duration")):this._getPageRendition()}},_acknowledgePageLoading:function(e){var t=this.options.fullPreviewUiModel,n;t.isScrollPagesView()?(n=t.get("loaded_scroll_pages"),n||(n={}),_.has(n,e)||(n[e]=!0,t.set("loaded_scroll_pages",n),t.trigger("change:loaded_scroll_pages"))):t.set("loaded_fitandfull_page",e)},_adjustSvgDimensions:function(e){var t,n,r=this.options.fullPreviewUiModel.get("zoom_factor"),i,s=c;if(e.length===0||e.data("pageNum")===undefined)return;this._removeBodyScrollEventListener(),t=parseFloat(e.attr("width")),n=parseFloat(e.attr("height")),i=this._getAspectRatio(e.data("pageNum"),t,n),i>1?(n=Math.ceil(1/i*s*r),t=s*r):(t=Math.ceil(i*s*r),n=s*r),e.attr("width",t+"px").attr("height",n+"px"),this._addBodyScrollEventListener()},_adjustImgDimensions:function(e){var t,n,r=this.options.fullPreviewUiModel,i=r.get("zoom_factor"),s,o=c,u=1;if(e.length===0||!e.data("loaded")||e.data("pageNum")===undefined)return;t=parseFloat(e.width()),n=parseFloat(e.height());if(!r.isNGDocJobComplete()&&(t===0||n===0))return;e.data("currentZoom")&&(u=e.data("currentZoom")),this._removeBodyScrollEventListener(),s=this._getAspectRatio(e.data("pageNum"),t,n),s>1?(r.isNGDocJobComplete()||(o=t/u),n=Math.ceil(1/s*o*i),t=o*i):(r.isNGDocJobComplete()||(o=n/u),t=Math.ceil(s*o*i),n=o*i),e.width(t+"px").height(n+"px"),e.data("currentZoom",i),this._addBodyScrollEventListener()},_getAspectRatio:function(e,t,n){var r=this.options,i=r.fullPreviewUiModel,s=i.get("aspect_ratio_pages");return s[e]||(s[e]=t/n,i.set("aspect_ratio_pages",s,{silent:!0})),s[e]},_isScrollPageLoaded:function(e,t){var n=this.options.fullPreviewUiModel,r,i;return t?n.get("enable_ngdoc")?(i=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(e).find(".full-preview-svg.scroll-pages"),i.find(".full-preview-svg-content").length>0):!1:(r=n.get("loaded_scroll_pages"),r||(r={}),r[e])},_isScrollPageRequested:function(e,t){var n,r;return t?this.options.fullPreviewUiModel.get("enable_ngdoc")?(r=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(e).find(".full-preview-svg.scroll-pages"),r.data("is_loading")):!1:(n=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(e).find(".full-preview-image.scroll-pages"),!_.isUndefined(n.attr("src")))},_getPageRendition:function(){var e,t;e=this.options.fullPreviewUiModel,t=e.get("current_page");if(t===e.get("loaded_page"))return;e.set("loaded_page",t),this._hasImage=!1,this._hasSvg=!1,e.isNGDocView()?(this.$previewSvg.data({pageNum:undefined}),this.$previewSvg.fadeOut(_.bind(function(t){t===e.get("current_page")&&this._loadPageRendition()},this,t))):(this.$previewImage.data({loaded:!1,pageNum:undefined}),this.$previewImage.fadeOut(_.bind(function(t){t===e.get("current_page")&&this._loadPageRendition()},this,t)))},_loadPageRendition:function(){function u(t){var n=this.$previewSvg.find("svg"),r,i;t.isSVG?(n.length>0&&!n.hasClass("full-preview-svg-content")&&(n.attr("class","full-preview-svg-content"),n.data("pageNum",t.pageNum),this._adjustSvgDimensions(n)),r=!0):(i=!0,this.$previewImage.data("pageNum",t.pageNum),e.get("zoom_factor")!==1&&this._adjustImgDimensions(this.$previewImage)),t.pageNum===e.get("current_page")&&this._show(i,r)}function a(t){var n,r;LOG(0,"AcFiles.FullPreviewView._loadPageRendition: error"),t.isSVG?n=!1:r=!1,t.pageNum===e.get("current_page")&&this._show(r,n),this._gotRenditionLoadError()}var e,t,n,r,i,o;e=this.options.fullPreviewUiModel,t=e.get("item_model"),i=e.get("enable_ngdoc");if(!t)return;i&&e.isNGDocJobComplete()&&(r=t.getNGDocUrl(e.get("current_page")),this.$previewSvg.data("svg_url",r),f.loadSvg(this.$previewSvg,r,{pageNum:e.get("current_page"),isSVG:!0},!0).then(_.bind(u,this),_.bind(a,this))),o=this._isCommentMarkupRequired(),n=t.getRenditionUrl("preview",e.get("current_page"),o),s.loadImage(this.$previewImage,n,{pageNum:e.get("current_page"),isSVG:!1},!0).then(_.bind(u,this),_.bind(a,this))},_createScrollPagesImages:function(){var e=this.options.fullPreviewUiModel,t,n,r,i,s,o=e.get("enable_ngdoc");for(t=0,n=e.get("page_count");t<n;t+=1)s=$(document.createElement("div")),s.addClass("full-preview-image-container scroll-pages"),o&&(i=$(document.createElement("div")),i.addClass("full-preview-svg scroll-pages")),r=$(document.createElement("img")),r.addClass("full-preview-image scroll-pages"),t>0&&(s.addClass("subsequent-page"),r.addClass("subsequent-page"),o&&i.addClass("subsequent-page")),s.append(r),o&&s.append(i),this.$previewImageCn.append(s),t===n-1&&(s.addClass("last-page"),r.addClass("last-page"),o&&i.addClass("last-page"))},_onScrollPageContentLoad:function(e){var t=this.options.fullPreviewUiModel;this._isScrollPageLoaded(e)&&t.isNGDocView()&&this._isScrollPageLoaded(e,!0)&&t.set({got_current_scroll_page:!0}),e=t.get("current_page"),this._setScrollPagesScrollPosition(e),this._acknowledgePageLoading(e),this._getScrollPagesChunk(),this._renderPluginsOverlayViews(this.options)},_getScrollPagesCurrent:function(){function c(t){var n=t.$svgElement,i=t.$imgElement,s,o,u;this.$previewBody.removeClass("no-preview"),this.$noPreview.hide(),t.isSVG?(s=n.find("svg"),s.length>0&&(s.hasClass("full-preview-svg-content")||(s.attr("class","full-preview-svg-content"),s.data("pageNum",t.pageNum),this._adjustSvgDimensions(s)),o=parseFloat(s.attr("width")),u=parseFloat(s.attr("height")),n.width("auto").height("auto"),n.css("max-height","none"),this._updateViewFormat(),e.isNGDocView()&&(this._estimateScrollPagesHeights(o,u),this._onScrollPageContentLoad(t.pageNum)))):(i.show(),o=i.width(),u=i.height(),this._removeBodyScrollEventListener(),i.width("auto").height("auto"),i.css("max-height","none"),this._addBodyScrollEventListener(),r.data("pageNum",t.pageNum),e.get("zoom_factor")!==1&&this._adjustImgDimensions(i),this._updateViewFormat(),e.isNGDocView()&&n.find(".full-preview-svg-content").length>0?i.hide():(i.show(),this._estimateScrollPagesHeights(o,u),this._onScrollPageContentLoad(t.pageNum)))}function h(n){var r;t=e.get("current_page"),n.isSVG||(n.$imgElement.removeAttr("src"),n.pageNum===t&&!this._isScrollPageLoaded(n.pageNum,!0)&&(r=!0)),r&&this._showScrollPageError(),this._gotRenditionLoadError()}var e=this.options.fullPreviewUiModel,t,n,r,i,o,u,a=e.get("enable_ngdoc"),l;t=e.get("current_page"),n=e.get("item_model"),r=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(t).find(".full-preview-image.scroll-pages"),this._isScrollPageLoaded(t)?r.show():r.hide(),a&&(i=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(t).find(".full-preview-svg.scroll-pages")),a&&e.isNGDocJobComplete()&&!this._isScrollPageRequested(t,!0)&&!this._isScrollPageLoaded(t,!0)&&(u=n.getNGDocUrl(t),f.loadSvg(i,u,{$svgElement:i,$imgElement:r,pageNum:t,isSVG:!0}).then(_.bind(c,this),_.bind(h,this))),!this._isScrollPageRequested(t)&&!this._isScrollPageLoaded(t)&&(l=this._isCommentMarkupRequired(),o=n.getRenditionUrl("preview",t,l),s.loadImage(r,o,{$imgElement:r,$svgElement:i,pageNum:t,isSVG:!1}).then(_.bind(c,this),_.bind(h,this)))},_getScrollPagesChunk:function(){var e,t,n,r,i,o,u,a,l,c,h,p=[],d,v;e=this.options.fullPreviewUiModel,t=e.get("item_model"),n=e.get("page_count"),r=e.get("current_page"),i=e.get("scroll_pages_chunk"),d=e.get("enable_ngdoc");if(!n)return;o=Math.max(Math.ceil(r-i/2),0),u=Math.min(o+i,n-1),l=this.$previewImageCn.find(".full-preview-image-container.scroll-pages"),v=this._isCommentMarkupRequired();for(a=o;a<=u;a+=1)c=l.eq(a).find(".full-preview-image.scroll-pages"),d&&e.isNGDocJobComplete()&&(h=l.eq(a).find(".full-preview-svg.scroll-pages"),!this._isScrollPageRequested(a,!0)&&!this._isScrollPageLoaded(a,!0)&&p.push(f.loadSvg(h,t.getNGDocUrl(a),{$svgElement:h,$imgElement:c,pageNum:a,isSVG:!0}))),!this._isScrollPageRequested(a)&&!this._isScrollPageLoaded(a)&&p.push(s.loadImage(c,t.getRenditionUrl("preview",a,v),{$svgElement:h,$imgElement:c,pageNum:a,isSVG:!1}));_.each(p,_.bind(function(t){t.then(_.bind(function(t){var n;h=t.$svgElement,c=t.$imgElement,t.isSVG?(n=h.find("svg"),n.length>0&&(n.hasClass("full-preview-svg-content")||(n.attr("class","full-preview-svg-content"),n.data("pageNum",t.pageNum),this._adjustSvgDimensions(n)),h.width("auto").height("auto"),h.css("max-height","none"))):(this._removeBodyScrollEventListener(),c.width("auto").height("auto"),c.css("max-height","none"),this._addBodyScrollEventListener(),c.data("pageNum",t.pageNum),e.get("zoom_factor")!==1&&this._adjustImgDimensions(c)),this._acknowledgePageLoading(t.pageNum)},this),function(e){e.isSVG||e.$imgElement.removeAttr("src"),LOG("AcFiles.FullPreviewView._onScrollPagesRenditionError pageNum="+e.pageNum)})},this)),$.when.apply(undefined,p).then(_.bind(function(){_.defer(_.bind(function(){this._renderPluginsOverlayViews(this.options),this._updateViewFormat()},this))},this),_.bind(function(){this._gotRenditionLoadError()},this))},_estimateScrollPagesHeights:function(e,t){var n,r,i,s,u,a,f,l=this.options.fullPreviewUiModel,c=l.get("enable_ngdoc");if(!e||!t||this._isHeightEstimated)return;i=this.$previewImageCn.find(".full-preview-image-container.scroll-pages");for(n=0,r=l.get("page_count");n<r;n+=1)c&&(f=i.eq(n).find(".full-preview-svg.scroll-pages"),a=f.find(".full-preview-svg-content"),a.length===0&&f.width(e).height(t)),s=i.eq(n),u=s.find(".full-preview-image.scroll-pages"),u.attr("src")||(s.height()===0&&s.height(t+o.getExtraHeight(u)),u.width(e).height(t));this._isHeightEstimated=!0},_showScrollPageError:function(){var e=this.options.fullPreviewUiModel.get("item_model");this.$previewBody.css("visibility","visible"),this.$previewBody.addClass("no-preview"),this.$noPreview.show(),this.$noPreview.css({top:this.$previewBody.scrollTop()+this.$previewBody.height()*.45+"px"}),this.options.appApi.siteCatalystApi.logScEvent([a.PREVIEW,e.isPDF()?a.PDF:a.NON_PDF,a.FAILED])},_show:function(e,t){var n=this.options,r=n.fullPreviewUiModel.get("item_model");this.$previewBody.css("visibility","visible"),_.isUndefined(e)||(this._hasImage=e),_.isUndefined(t)||(this._hasSvg=t),e=this._hasImage,t=this._hasSvg,this._updateViewFormat(),n.fullPreviewUiModel.isNGDocView()?t?(this.$previewBody.removeClass("no-preview"),this.$noPreview.hide(),this.$previewSvg.show(),this._acknowledgePageLoading(n.fullPreviewUiModel.get("current_page")),this._renderPluginsOverlayViews(n)):e?(this.$previewBody.removeClass("no-preview"),this.$noPreview.hide(),this.$previewSvg.fadeOut(),this.$previewImage.fadeIn(_.bind(function(e){_.defer(_.bind(function(e){this._acknowledgePageLoading(e),this._renderPluginsOverlayViews(n)},this,e))},this,n.fullPreviewUiModel.get("current_page")))):e===!1&&t===!1&&(this.$previewBody.addClass("no-preview"),this.$noPreview.show(),this.$noPreview.css("top","45%"),this.$previewImage.fadeOut(),this.$previewSvg.fadeOut(),n.appApi.siteCatalystApi.logScEvent([a.PREVIEW,r.isPDF()?a.PDF:a.NON_PDF,a.FAILED])):e?this.$previewImage.fadeIn(_.bind(function(e){_.defer(_.bind(function(e){this._acknowledgePageLoading(e),this._renderPluginsOverlayViews(n)},this,e))},this,n.fullPreviewUiModel.get("current_page"))):e===!1&&(this.$previewBody.addClass("no-preview"),this.$noPreview.show(),this.$noPreview.css("top","45%"),this.$previewImage.fadeOut(),this.$previewSvg.fadeOut(),n.appApi.siteCatalystApi.logScEvent([a.PREVIEW,r.isPDF()?a.PDF:a.NON_PDF,a.FAILED]))},_updateViewFormat:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;e=this.options.fullPreviewUiModel,h=e.get("current_page"),a=e.get("enable_ngdoc"),v=e.get("scroll_pages_chunk"),g=e.get("page_count"),u=e.isNGDocView(),t=e.get("scroll_bar_width"),n=this.$previewBody.width(),r=1,i=this.$previewImageCn.find(".full-preview-image.scroll-pages"),a&&(s=this.$previewImageCn.find(".full-preview-svg.scroll-pages")),o=this.$previewImageCn.find(".full-preview-image-container.scroll-pages"),this._removeBodyScrollEventListener();if(e.isScrollPagesView()){p=Math.max(Math.ceil(h-v/2),0),d=Math.min(p+v,g-1),this.$previewImage.addClass("hidden"),a&&this.$previewSvg.addClass("hidden"),o.removeClass("hidden"),w=i.filter(function(){return!$(this).data("loaded")}),y=(n-t-r*2)*e.get("zoom_factor"),i.css("max-width",y+"px"),b=y*(w.height()/w.width()),b>0&&w.css("max-height",b+"px");if(u){s.css({"max-width":y+"px","max-height":b+"px",display:"inline-block"}),s.find(".full-preview-svg-content").css({"max-width":y+"px","max-height":b+"px",display:"inline-block"});for(m=p;m<=d;m+=1)f=s.eq(m),l=f.find(".full-preview-svg-content"),c=i.eq(m),l.length>0&&(b=y/this._getAspectRatio(m,parseFloat(l.attr("width")),parseFloat(l.attr("height"))),l.css("max-height",b+"px"),f.css("max-height",b+"px"),c.css("max-height",b+"px"));s.removeClass("hidden"),i.addClass("hidden");for(m=p;m<=d;m+=1)f=s.eq(m),l=f.find(".full-preview-svg-content"),l.length===0&&(i.eq(m).removeClass("hidden"),f.addClass("hidden"))}else{a&&s.addClass("hidden"),i.removeClass("hidden");for(m=p;m<=d;m+=1)c=i.eq(m),c.data("loaded")&&(b=y/this._getAspectRatio(m,c.width(),c.height()),c.css("max-height",b+"px"))}this._isHeightEstimated&&this._setScrollPagesScrollPosition(h),this._addBodyScrollEventListener()}else o.addClass("hidden"),i.addClass("hidden"),a&&s.addClass("hidden"),u?this._hasSvg?(this.$previewImage.addClass("hidden"),this.$previewSvg.removeClass("hidden")):this._hasImage&&(this.$previewImage.removeClass("hidden"),this.$previewSvg.addClass("hidden")):this._hasImage&&(this.$previewSvg.addClass("hidden"),this.$previewImage.removeClass("hidden")),l=this.$previewSvg.find(".full-preview-svg-content"),e.isFitPageWidthView()?(y=(n-t-r*2)*e.get("zoom_factor"),l.length>0?(b=y/this._getAspectRatio(h,parseFloat(l.attr("width")),parseFloat(l.attr("height"))),l.css({"max-width":y+"px","max-height":b+"px"}),this.$previewSvg.css({"max-width":y+"px","max-height":b+"px"})):b=y/this._getAspectRatio(h,this.$previewImage.width(),this.$previewImage.height()),this.$previewImage.css({"max-width":y+"px","max-height":b+"px"})):(b=(this.$previewBody.height()-r)*e.get("zoom_factor"),l.length>0?(y=b*this._getAspectRatio(h,parseFloat(l.attr("width")),parseFloat(l.attr("height"))),l.css({"max-width":y+"px","max-height":b+"px"}),this.$previewSvg.css({"max-width":y+"px","max-height":b+"px"})):y=b*this._getAspectRatio(h,this.$previewImage.width(),this.$previewImage.height()),this.$previewImage.css({"max-width":y+"px","max-height":b+"px"})),this.$previewBody.scrollTop(0)},_addBodyScrollEventListener:function(){var e=this.options.fullPreviewUiModel.get("scroll_debounce_delay");this._allowBodyScrollEventListener=!0,this.$previewBody.off("scroll").on("scroll",_.debounce(this._onBodyScroll,e))},_removeBodyScrollEventListener:function(){this._allowBodyScrollEventListener=!1,this.$previewBody.off("scroll")},_onBodyScroll:function(){var e,t,n,r,i,s,u,a,f,l,c,h,p;if(!this._allowBodyScrollEventListener)return;e=this.$previewBody.scrollTop(),t=e+this.$previewBody.height(),n=this.$previewImageCn.find(".full-preview-image-container.scroll-pages"),r=1,u=this.options.fullPreviewUiModel;for(i=0,s=u.get("page_count");i<s;i+=1){a=n.eq(i),l=a.position(),c=l.top+o.getCssNum(a,"margin-top")+r;if(c>=e||i>=s-1){p=i;break}f=n.eq(i+1),h=c+a.height()+o.getCssNum(f,"margin-top")+r;if(h>t){p=i;break}}_.isUndefined(p)||u.set({current_page:p,align_current_page:!1})},_setScrollPagesScrollPosition:function(e){var t=this.$previewBody,n,r,i;n=this.$previewImageCn.find(".full-preview-image-container.scroll-pages").eq(e),r=n.position(),r&&(i=r.top,this.options.fullPreviewUiModel.get("align_current_page")&&(this._removeBodyScrollEventListener(),t.scrollTop(i+o.getCssNum(n,"margin-top")),this._addBodyScrollEventListener()))},_updateShowRhp:function(){this.options.fullPreviewUiModel.get("show_rhp")?(this.$previewMain.removeClass("full-screen"),this.$previewSidebar.removeClass("hide-rhp")):(this.$previewMain.addClass("full-screen"),this.$previewSidebar.addClass("hide-rhp"))},_areOverlaysEnabled:function(){var e=this.options,t=e.fullPreviewOverlaysUiModel,n=t.get("plugins"),r,i;if(n.length===0)return!1;for(i=0;i<n.length;i+=1){r=n.at(i).get("selector_api").getSelectorLabel();if(_.isString(r)&&r.length>0)break}return i===n.length?!1:!0},_renderChildViews:function(){var e=this.options,t=e.appApi.pluginsApi,n,r=e.fullPreviewUiModel;n=t.hasPluginType("full_preview_rhp"),this._renderHomeBtnView(),this._renderMenuView(),this._renderHudView(),e=_.extend({},this.options,{pluginsUiModel:n?e.fullPreviewRhpPluginsUiModel:e.fullPreviewPluginsUiModel}),this._renderPluginsContentView(e),this._renderPluginsOverlayViews(e),n?this.$pluginsSelector.hide():this._renderPluginsSelectorView(e),r.isNGDocView()&&r.isNGDocJobComplete()&&this._areOverlaysEnabled()?(this.$(".full-preview-svg").on("mousemove",this._onMouseMove),this.$(".full-preview-image").on("mousemove",this._onMouseMove),this.$(".full-preview-overlay-content").on("mousemove",this._onMouseMove)):(this.$(".full-preview-svg").off("mousemove"),this.$(".full-preview-image").off("mousemove"),this.$(".full-preview-overlay-content").off("mousemove"))},_renderHomeBtnView:function(){this._renderChildView("_fullPreviewHomeBtnView",t.FullPreviewHomeBtnView,this.$homeBtn)},_renderMenuView:function(){this._renderChildView("_fullPreviewActionMenuView",t.FullPreviewActionMenuView,this.$actionMenu,{$actionMenuBtn:this.$actionMenuBtn})},_renderHudView:function(){this._renderChildView("_fullPreviewHudView",t.FullPreviewHudView,this.$previewHud)},_renderPluginsContentView:function(e){this._renderChildView("_pluginsContentView",t.FullPreviewPluginsContentView,this.$pluginsContent,e)},_renderPluginsOverlayViews:function(e){var n,r,i;if(!this._areOverlaysEnabled())return;i=this.$previewImageCn.find(".full-preview-image-container.scroll-pages");for(n=0;n<i.length;n+=1)r="_pluginsOverlayView:"+n,this._renderChildView(r,t.FullPreviewOverlaysContentView,i.eq(n),_.extend(e,{bScrollPageView:!0}));this._renderChildView("_pluginsOverlayView",t.FullPreviewOverlaysContentView,this.$previewImageCn,_.extend(e,{bScrollPageView:!1}))},_renderPluginsSelectorView:function(e){this._renderChildView("_pluginsSelectorView",t.FullPreviewPluginsSelectorView,this.$pluginsSelector,e)},_removePluginsOverlayViews:function(){var e,t,n;if(!this._areOverlaysEnabled())return;n=this.$previewImageCn.find(".full-preview-image-container.scroll-pages");for(e=0;e<n.length;e+=1)t="_pluginsOverlayView:"+e,this.removeChildView(this[t]),delete this[t]},_getParentScContext:function(){return undefined},_getSiteCatalystContext:function(){return a.PREVIEW},_onHomeBtnClick:function(e){var t=this.options,n=t.fullPreviewUiModel;e.preventDefault(),n.isNGDocView()&&n.isNGDocJobComplete()?this._logSiteCatalystEvent([a.NGDOC,a.TOOLBAR,a.BACK,a.CLICKED]):this._logSiteCatalystEvent([a.TOOLBAR,a.BACK,a.CLICKED]),t.appApi.previewApi.closeFullPreview()},_onActionMenuBtnClick:function(){var e=this.options.fullPreviewUiModel;e.isNGDocView()&&e.isNGDocJobComplete()?this._logSiteCatalystEvent([a.NGDOC,a.TOOLBAR,a.GEAR_ICON,a.CLICKED]):this._logSiteCatalystEvent([a.TOOLBAR,a.GEAR_ICON,a.CLICKED]),this._triggerViewEvent(t.ViewEvents.FULL_PREVIEW_MENU_BTN_CLICK)},_onActionMenuBtnKeyDown:function(e){var t=this._fullPreviewActionMenuView,n=t.isMenuOpen(),r=e.which;switch(r){case 32:case 38:case 40:this._consumeEvent(e);if(r===38&&n||r!==38&&!n)return this._onActionMenuBtnClick(),!0}},_onDownloadClick:function(){var t=this.options,n=t.fullPreviewUiModel;n.isNGDocView()&&n.isNGDocJobComplete()?this._logSiteCatalystEvent([a.NGDOC,a.TOOLBAR,a.DOWNLOAD_ICON,a.CLICKED]):this._logSiteCatalystEvent([a.TOOLBAR,a.DOWNLOAD_ICON,a.CLICKED]),this._triggerViewEvent(e.ViewEvents.DOWNLOAD,{id:n.get("item_model").id})},_onSendClick:function(){var e=this.options,t=e.fullPreviewUiModel,n=t.get("item_model").id;t.isNGDocView()&&t.isNGDocJobComplete()?this._logSiteCatalystEvent([a.NGDOC,a.TOOLBAR,a.SEND_ICON,a.CLICKED]):this._logSiteCatalystEvent([a.TOOLBAR,a.SEND_ICON,a.CLICKED]),e.appApi.routerApi.navigate("send/file/"+n,{trigger:!0})},_onPreviewDownloadClick:function(){var t=this.options,n=t.fullPreviewUiModel;n.isNGDocView()&&n.isNGDocJobComplete()?this._logSiteCatalystEvent([a.NGDOC,a.DOWNLOAD_LINK,a.CLICKED]):this._logSiteCatalystEvent([a.DOWNLOAD_LINK,a.CLICKED]),this._triggerViewEvent(e.ViewEvents.DOWNLOAD,{id:n.get("item_model").id})},_onMouseMove:function(e){this.options.appApi.previewApi.mayActivatePluginElement(e)},_onWindowResize:function(){var e=this.options.fullPreviewUiModel,t,n,r,i=e.get("current_page");e.set("align_current_page",!0),e.isScrollPagesView()&&(r=this.$previewImageCn.find(".full-preview-image.scroll-pages"),n=this.$previewImageCn.find(".full-preview-svg.scroll-pages"),this._isHeightEstimated=!1,e.isNGDocView()?t=n.eq(i):t=r.eq(i),this._estimateScrollPagesHeights(t.width(),t.height()),this._updateViewFormat())},_addModelEventListeners:function(e){var t=e.collection;e.on("change",this._onModelChange),t&&t.on("change",this._onCollectionChange)},_removeModelEventListeners:function(e){var t=e.collection;e.off("change",this._onModelChange),t&&t.off("change",this._onCollectionChange)},_onModelChange:function(){this.render()},_onCollectionChange:function(e){e===this.options.fullPreviewUiModel.get("item_model")&&this.render()},_addUiModelEventListeners:function(){var e=this.options;e.fullPreviewUiModel.on("change:item_model",this._onItemModelChange).on("change:page_count",this._onPageCountChange).on("change:current_page",this._onCurrentPageChange).on("change:view_format",this._onViewFormatChange).on("change:view_type",this._onViewTypeChange).on("change:show_rhp",this._onShowRhpChange).on("change:show_action_menu",this._onShowActionMenuChange).on("change:ngdoc_job_status",this._onNGDocJobStatusChange).on("change:zoom_factor",this._onZoomFactorChange),e.fullPreviewPluginsUiModel.on("change:selected_plugin_id",this._onSelectedPluginIdChange),e.fullPreviewOverlaysUiModel.on("change:selected_plugin_id",this._onSelectedPluginIdChange)},_onItemModelChange:function(e,t){t?(this._open(),this._addModelEventListeners(t)):(this._close(),this._removeModelEventListeners(e.previous("item_model")))},_onPageCountChange:function(e,t){t&&this.render()},_onCurrentPageChange:function(e,t){_.isUndefined(t)||this.render()},_onViewFormatChange:function(){this.render()},_onViewTypeChange:function(){var e=this.options,t=e.fullPreviewUiModel;t.isNGDocView()?this.$(".full-preview-svg-content").each(_.bind(function(e,t){this._adjustSvgDimensions($(t))},this)):this.$(".full-preview-image").each(_.bind(function(e,t){this._adjustImgDimensions($(t))},this)),this.render()},_onShowRhpChange:function(){this._updateShowRhp(),_.delay(this.render,this.options.fullPreviewUiModel.get("toggle_rhp_duration"))},_onShowActionMenuChange:function(e,t){var n=this._fullPreviewActionMenuView,r=this.options.fullPreviewUiModel;if(!r.get("item_model"))return;t?n.open().always(function(){r.set("show_action_menu",!1)}):n.close()},_onNGDocJobStatusChange:function(e,t){e.isNGDocJobComplete()&&this.render()},_onZoomFactorChange:function(e){var t,n,r,i=e.get("current_page");e.isNGDocView()?this.$(".full-preview-svg-content").each(_.bind(function(e,t){this._adjustSvgDimensions($(t))},this)):this.$(".full-preview-image").each(_.bind(function(e,t){this._adjustImgDimensions($(t))},this)),e.isScrollPagesView()&&(n=this.$previewImageCn.find(".full-preview-image.scroll-pages"),r=this.$previewImageCn.find(".full-preview-svg.scroll-pages"),this._isHeightEstimated=!1,e.isNGDocView()?t=r.eq(i):t=n.eq(i),this._estimateScrollPagesHeights(t.width(),t.height())),this.render()},_onSelectedPluginIdChange:function(){this.render()},_addAppApiCallbacks:function(){this.options.appApi.routerApi.addHistoryChangeCallback(this._onHistoryChange)},_onHistoryChange:function(){var e=this.options.appApi;if(!this._isExpanded)return;if(e.previewApi.ignoreCurrentPath())return;e.previewApi.closeFullPreview({noHistoryEffect:!0})},_isCommentMarkupRequired:function(){return this._commentMarkupRequiredCached===undefined&&(this._commentMarkupRequiredCached=this._isCommentMarkupRequiredRaw()),this._commentMarkupRequiredCached},_isCommentMarkupRequiredRaw:function(){var e=this.options.fullPreviewUiModel.get("item_model"),t=e.get("content_type");return t&&t.toLowerCase()===l&&u.isCommentingEnabled(this.options)?!1:!0}}),t.FullPreviewView}),define("files/dev/templates/file-save-as-header-template",[],function(){return'<div class="file-save-as-error-container">    <div class="file-save-as-error"></div></div><div class="file-save-as-filename ui-theme theme-container unselectable"><label for="file-save-as-filename-input" class="file-save-as-filename-label theme-text"><%= filenameText %></label><input id="file-save-as-filename-input" name="filenameInput" class="file-save-as-filename-input ui-theme theme-container theme-text" required type="text" tabindex="1"></div><div class="file-save-as-options unselectable"></div>'}),define("files/dev/templates/export-options-template",[],function(){return'<div class="export-format-header theme-text"><%= exportFormatHeader %></div><div class="export-format-settings"><div class="export-format theme-hyperlink"> <%= exportFormat %> </div><div class="export-settings-btn"><div class="export-settings-btn-icon"></div><div class="export-settings-btn-text theme-text"><%= exportSettings %></div></div></div><div class="export-view-result"><div class="checkbox"></div><div class="checkbox-text theme-text"> <%= viewResult %> </div></div>'}),define("files/dev/views/export-options-view",["core/ac-core","files/ac-files","files/templates/export-options-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r){return t.ExportOptionsView=e.View.extend({events:{"click .export-settings-btn":"_onSettingsButtonClicked","click .export-view-result":"_onViewResultCheckboxClicked"},initialize:function(){e.View.prototype.initialize.call(this),this.saveAsApi=this.options.appApi.saveAsApi},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this._template=_.template(n)({exportFormatHeader:r.EXPORT_FILE_FORMAT,exportFormat:this.saveAsApi.getChosenFilterDescription(),exportSettings:r.EXPORT_SETTINGS,viewResult:r.EXPORT_VIEW_RESULT}),this.$el.html(this._template),this._initWrappers(),this._setInitialStateOfElements()),this},_initWrappers:function(){this.$settingsBtn=this.$(".export-settings-btn"),this.$viewResult=this.$(".export-view-result"),this.$viewResultCheckbox=this.$viewResult.find(".checkbox")},_setInitialStateOfElements:function(){this.saveAsApi.isSettingsButtonVisible().done(_.bind(function(e){e===!0?this.$settingsBtn.show():this.$settingsBtn.hide()},this)),this.saveAsApi.isViewResultVisible().done(_.bind(function(e){e===!0?this.saveAsApi.isViewResultChecked().done(_.bind(function(e){this.$viewResult.show(),this._setViewResultCheckboxState(e)},this)):this.$viewResult.hide()},this))},_onSettingsButtonClicked:function(){this.saveAsApi.settingsButtonExecute()},_onViewResultCheckboxClicked:function(){this.saveAsApi.isViewResultChecked().done(_.bind(function(e){var t=!e;this._setViewResultCheckboxState(t),this.saveAsApi.setViewResultChecked(t)},this))},_setViewResultCheckboxState:function(e){e?this.$viewResultCheckbox.addClass("selected"):this.$viewResultCheckbox.removeClass("selected")}}),t.ExportOptionsView}),define("files/dev/templates/file-save-as-options-template",[],function(){return'<div class="reduce-file-size-container"><div class="reduce-file-size" tabindex=-1><div class="checkbox"></div><div class="text theme-text"> <%= reduceFileSize %> </div></div></div><div class="restrict-editing" tabindex=-1><div class="checkbox"></div><div class="text theme-text"> <%= restrictEditing %> </div></div>'}),define("files/dev/views/file-save-as-options-view",["core/ac-core","files/ac-files","files/templates/file-save-as-options-template","i18n!files/nls/ui-strings","core/utils/view-util","core/views/view"],function(e,t,n,r,i){return t.FileSaveAsOptionsView=e.View.extend({events:{"click .restrict-editing":"_onRestrictEditingClicked","click .reduce-file-size":"_onReduceFileSizeClicked"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addFocusEventListener();var t=r.RESTRICT_EDITING;t=t||"Restrict Editing !!!";var i=r.REDUCE_FILE_SIZE;i=i||"Reduce File Size !!!",this._template=_.template(n)({restrictEditing:t,reduceFileSize:i})},render:function(){var t=this.$el;e.View.prototype.render.call(this);if(t.children().length===0){t.html(this._template),this._initWrappers(),this._disableOptionsIfNotAllowedOnDoc();var n=this.options.appApi.saveAsApi;n.isRestrictEditingVisible()||this.$(".restrict-editing").hide(),n.isReduceFileSizeVisible()||this.$(".reduce-file-size").hide()}return this.$(".reduce-file-size").attr("tabIndex","0"),this._refreshView(),this},_onFocusIn:function(e){var t=$(e.target);return this.$(":focusable").not(t).attr("tabIndex",-1),t.attr("tabindex",0),!0},_onFocusOut:function(e){},_onKeyDown:function(e){var t=this.$el,n=$(e.target),r,s=$.Event("click"),o=e.which,u=o===37,a=!1;if(!i.descendantHasFocus(t))return a;switch(o){case 13:case 32:n.trigger(s),a=!0;break;case 37:case 39:r=i.getNextFocusableDescendant(t,u,!0)}return r&&r.length===1&&(a=!0,r.focus()),a},_initWrappers:function(){this.$restrictEditing=this.$(".restrict-editing"),this.$reduceFileSize=this.$(".reduce-file-size")},_onRestrictEditingClicked:function(){var e=this.$restrictEditing,t=this.options.appApi.saveAsApi;if(!t.isRestrictEditingEnabled())return;var n=e.hasClass("selected"),r=!n,i=this;this.options.readerContextModel.done(function(s){var o=s.get("rna");if(o.hasProperty("viewData")){var u=o.get("viewData"),a=u.get("fileSelectData");a.invoke("restrictEditingChanged",r).done(function(n){var r=n!==undefined&&n!==!1;t.setRestrictEditing(r),i._setSelection(r,e)}).fail(function(){i._setSelection(n,e)})}}).fail(function(){i._setSelection(n,e)})},_onReduceFileSizeClicked:function(){var e=this.$reduceFileSize,t=this.options.appApi.saveAsApi;if(!t.isReduceFileSizeEnabled())return;var n=e.hasClass("selected"),r=!n;t.setReduceFileSize(r),this._setSelection(r,e)},_refreshView:function(){var e=this.options.appApi.saveAsApi;this._setSelection(e.isRestrictEditingSelected(),this.$restrictEditing),this._setSelection(e.isReduceFileSizeSelected(),this.$reduceFileSize)},_setSelection:function(e,t){var n=t.find(".checkbox");e?(t.addClass("selected"),n.addClass("selected")):(t.removeClass("selected"),n.removeClass("selected"))},_disableOptionsIfNotAllowedOnDoc:function(){var e=this.options.appApi.saveAsApi,t=e.isRestrictEditingEnabled();t||this._disableEl(this.$restrictEditing);var n=e.isReduceFileSizeEnabled();n||this._disableEl(this.$reduceFileSize)},_disableEl:function(e){e.addClass("disabled"),e.find(".checkbox").addClass("disabled")}}),t.FileSaveAsOptionsView}),define("files/dev/views/file-save-as-header-view",["core/ac-core","files/ac-files","files/templates/file-save-as-header-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/view-util","core/views/view","files/views/export-options-view","files/views/file-save-as-options-view"],function(e,t,n,r,i,s){var o=!1;return t.FileSaveAsHeaderView=e.View.extend({events:{"keydown .file-save-as-filename-input":"_onNewFileNameKeyDown","keyup   .file-save-as-filename-input":"_onNewFileNameKeyUp","paste   .file-save-as-filename-input":"_onNewFileNamePaste"},_onNewFileNameKeyDown:function(){this.options.selectionUiModel.clearSelection(),this._showIllegalNameError(!1)},_onNewFileNameKeyUp:function(){if(e.Util.isCEF()&&event.which===13)return;this._updateNewFileNameControls()},_onNewFileNamePaste:function(){this.options.selectionUiModel.clearSelection(),this._updateNewFileNameControls()},_updateNewFileNameControls:function(){var e=this._getNewFileName();this.options.appApi.saveAsApi.setFilename(e)},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)({filenameText:i.FILENAME_TEXT}),this._addUiModelEventListeners()},render:function(){var t=this.options,n=this.$el,r=t.appApi.saveAsApi.getFilename();return e.View.prototype.render.call(this),n.children().length===0&&(n.html(this._template),this._initWrappers(),this.$filenameInput.val(r),this.$filenameInput.attr("aria-label",r),o||(_.delay(_.bind(function(){this.$filenameInput.focus(),this.$filenameInput.select()},this),1e3),o=!0)),this._getNewFileName()!==r&&(this.$filenameInput.val(r),this.$filenameInput.attr("aria-label",r)),this._renderChildViews(),this},_initWrappers:function(){this.$error=this.$(".file-save-as-error"),this.$errorCn=this.$(".file-save-as-error-container"),this.$filenameInput=this.$(".file-save-as-filename-input"),this.$saveAsOptions=this.$(".file-save-as-options")},_addUiModelEventListeners:function(){var e=this.options,t=e.selectionUiModel;this.listenTo(t,"change:selected_item_models",this._onSelectedItemModelsChange),e.appApi.saveAsApi.addSaveAsErrorCallback(this._onSaveAsError)},_onSelectedItemModelsChange:function(e){var t=this.options.appApi.saveAsApi;t.isRunningInFileSaveAs()&&(_.each(e.get("selected_item_models"),function(e){e.isFile()&&t.setFilename(e.get("name"))}),this.$filenameInput.val(t.getFilename()),this.$filenameInput.attr("aria-label",t.getFilename()))},_onSaveAsError:function(t,n){if(n&&n.error&&(n.error.code===e.ErrorUiModel.CODE_ILLEGAL_NAME||n.error.code===e.ErrorUiModel.CODE_INVALID_PARAMETER)){this._showIllegalNameError(!0),this.$filenameInput.focus().select();return}},_showIllegalNameError:function(e){var t=this.$error,n=this.$errorCn,i=this.options;e?(t.text(_.template(r.RENAME_ILLEGAL_NAME,{renamedType:r.FILE})),t.slideDown("fast",function(){n.slideDown("fast",function(){i.searchUiModel.trigger("change:search_control_height")})})):s.isElementHidden(t)||(t.slideUp("fast",function(){n.hide(),t.hide(),i.searchUiModel.trigger("change:search_control_height")}),i.appApi.saveAsApi.clearError())},_getNewFileName:function(){return $.trim(this.$filenameInput.val())},_renderChildViews:function(){this._renderOptionsView()},_renderOptionsView:function(){var e=this.options.appApi.saveAsApi;e.shouldShowExportOptions()?this._renderChildView("_exportOptionsView",t.ExportOptionsView,this.$saveAsOptions):e.shouldDisplaySaveAsOptions()?(this.$el.addClass("file-save-as-acrobat ui-theme theme-container"),this._renderChildView("_fileSaveAsOptionsView",t.FileSaveAsOptionsView,this.$saveAsOptions)):this.$saveAsOptions.hide()}}),t.FileSaveAsHeaderView}),define("files/dev/views/files-view",["core/ac-core","files/ac-files","files/templates/files-template","core/utils/css-util","core/utils/util","core/views/view","files/views/files-header-view","files/views/files-body-view","files/views/files-rhp-view","files/views/full-preview-view","files/views/file-save-as-header-view","files/views/files-footer-view"],function(e,t,n,r,i){return t.FilesView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._addUiModelEventListeners(),this._addAppApiCallbacks()},render:function(){var t=this.options,n=this.$el,s,o,u;return e.View.prototype.render.call(this),n.children().length===0&&(n.html(this._template()),this._initWrappers()),this._renderChildViews(),s=this.$header,o=this.$body,u=this.$saveAsHeader,_.defer(function(){var e=r.getFullHeight(u),n=0;i.isCEF()?(t.appApi.saveAsApi.isRunningInFileSaveAs()?(s.css("top","0px"),s.css("min-height","0px")):s.css("top",e),t.noFilesHeader||(n=r.getFullHeight(s)),o.css("top",e+n)):o.css("top",r.getFullHeight(s))}),this},_initWrappers:function(){this.$header=this.$(".files-header"),this.$body=this.$(".files-body"),this.$rhp=this.$(".files-rhp"),this.$footer=this.$(".files-footer"),this.$saveAsHeader=this.$(".file-save-as-header"),this.$fullPreview=$(".full-preview")},_renderChildViews:function(){var e=this.options;this._renderFileSaveAsHeaderView(),this._renderFilesHeaderView(),this._renderFilesBodyView(),e.appApi.usersMeApi.isUserInCohort("bh-home20","enabled")&&this._renderRhpView(),this._renderFilesFooterView(),!e.noFullPreview&&!e.noFullPreviewImpl&&this._renderFullPreviewView()},_renderFileSaveAsHeaderView:function(){var e=this.$saveAsHeader,n=this.options;i.isCEF()&&n.appApi.saveAsApi.isRunningInFileSaveAs()?(e.show(),this._renderChildView("_fileSaveAsHeaderView",t.FileSaveAsHeaderView,e)):e.hide()},_renderFilesHeaderView:function(){this._renderChildView("_filesHeaderView",t.FilesHeaderView,this.$header),this.options.noFilesHeader?this.$header.hide():this.$header.show()},_renderFilesBodyView:function(){this._renderChildView("_filesBodyView",t.FilesBodyView,this.$body)},_renderRhpView:function(){this._renderChildView("_rhpView",t.FilesRhpView,this.$rhp)},_renderFilesFooterView:function(){var e=this.options,n=this.$body,r=this.$footer,s=e.appApi.pluginsApi,o=e.pluginId,u=$.Deferred();r.hide(),n.removeClass("with-footer"),i.isCEF()&&e.footerAnchorText&&e.footerAnchorText.length>0&&o&&o.length>0&&(o==="root"||o==="ccloud"?u.resolve():s.callPluginMethod(o,"getFilesFooterUrl",undefined,this._getResolvedPromise(),!0).done(_.bind(function(e){e&&e.uri.length>0?u.resolve():u.reject()},this)),u.done(_.bind(function(){r.show(),n.addClass("with-footer"),this._renderChildView("_filesFooterView",t.FilesFooterView,r)},this)))},_renderFullPreviewView:function(){this._renderChildView("_fullPreviewView",t.FullPreviewView,this.$fullPreview)},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.searchUiModel,"change:search_control_height",this._onSearchControlHeightChange).listenTo(e.collectionsUiModel,"change:view",this.updateChildViewSizes).listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange)},_onSearchControlHeightChange:function(){this.render()},_onSelectedItemModelsChange:function(e){var t=this.options,n=this.$header,i=this.$body,s=this.$rhp;if(!t.appApi.usersMeApi.isUserInCohort("bh-home20","enabled"))return;if(t.noHoverPreview)return;e.isItemSelected()?n.hasClass("with-rhp")||(n.addClass("animating"),n.addClass("with-rhp"),i.addClass("with-rhp"),s.removeClass("hidden").removeClass("invisible")):n.hasClass("with-rhp")&&(n.removeClass("with-rhp"),i.removeClass("with-rhp"),s.addClass("hidden")),r.addTransitionEndCallback(i,"right",_.bind(function(){n.removeClass("animating"),r.removeTransitionEndCallbacks(s),n.hasClass("with-rhp")||s.addClass("invisible"),this.render()},this))},_addAppApiCallbacks:function(){this.options.appApi.windowApi.addWindowResizeCallback(this.updateChildViewSizes)}}),t.FilesView}),define("files/dev/templates/files-offline-template",[],function(){return'<div class="icon"></div><div class="title theme-text"><%= title %></div><div class="content theme-text"><%= content %></div><div class="ok-button control-button theme-button theme-button-label" role="button" aria-label="<%= ok_button_label %>" tabindex = "0"><%= ok_button %></div>'}),define("files/dev/views/files-offline-view",["core/ac-core","files/ac-files","files/templates/files-offline-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r){t.FilesOfflineView=e.View.extend({_offline_display_location:19,_offline_display_context:155,initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this.options.appApi.rnaApi.done(_.bind(function(e){e.getIPMMessage([this._offline_display_location,this._offline_display_context]).done(_.bind(function(e){this.offlineTitle=e.get("title"),this.offlineContent=e.get("content"),this.acceptLabel=e.get("acceptLabel"),this.$el.empty(),this.render()},this))},this))},events:function(){return _.extend({},e.View.prototype.events,{"click .ok-button":"_onOKButtonClick"})},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({title:this.offlineTitle||r.FILE_OFFLINE_TITLE,content:this.offlineContent||r.FILE_OFFLINE_CONTENT,ok_button:this.acceptLabel||r.FILE_OFFLINE_OK_LABEL,ok_button_label:this._getAriaLabel()||r.FILE_OFFLINE_ARIA_LABEL})),this._initWrappers()),this},_initWrappers:function(){this.$title=this.$(".title"),this.$content=this.$(".content"),this.$ok_button=this.$(".ok-button")},_onOKButtonClick:function(){this.options.appApi.networkConnectivityApi.resetNetworkStatusToOnline({silent:!1})},_getAriaLabel:function(){return this.offlineTitle+this.acceptLabel}})}),define("files/dev/templates/files-sign-out-template",[],function(){return'<div class="files-sign-out-container ui-theme theme-container"><div class="files-sign-out-content unselectable"><div class="files-sign-out-image"/><div class="files-sign-out-title theme-text"><%= title %></div><div class="files-sign-out-text theme-text"><%= content %></div></div><div class="files-sign-out-btns">    <input type="button"           class="control-button files-sign-in-btn theme-button theme-button-label           id="files-sign-in-btn"           tabindex="1" value="<%= label %>">    </input></div></div>'}),define("files/dev/views/files-sign-out-view",["core/ac-core","files/ac-files","files/templates/files-sign-out-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r){return t.FilesSignOutView=e.View.extend({events:{"click .files-sign-in-btn":"_onSignInButtonClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){var t=this.$el;return e.View.prototype.render.call(this),t.children().length===0&&(t.html(this._template({title:this._getTitle(),content:this._getContent(),label:this._getButtonLabel()})),this._initWrappers()),this.options.noSignOutImage?this.$filesSignOutImage.hide():this._updateIcon(),this},_initWrappers:function(){this.$filesSignOutImage=this.$(".files-sign-out-image")},_updateIcon:function(){var e=this.options.appApi.connectorsApi.getConnectorSignOutImageClass(this.options.pluginId);e&&this.$filesSignOutImage.addClass(e)},_getTitle:function(){return this.options.filesSignOutTitle||this.options.appApi.connectorsApi.getConnectorSignOutTitle(this.options.pluginId)},_getContent:function(){return this.options.filesSignOutContent||this.options.appApi.connectorsApi.getConnectorSignOutContent(this.options.pluginId)},_getButtonLabel:function(){return this.options.filesSignInButtonLabel||r.FILES_SIGN_IN_LABEL},_onSignInButtonClick:function(){var e=this.options.appApi,t=this.$el;t.hide(),e.displayApi.showSpinner(!0),e.networkConnectivityApi.resetNetworkStatusToOnline({silent:!0}),e.sessionApi.ensureSignedIn().then(function(){e.displayApi.showSpinner(!1)},function(n){e.displayApi.showSpinner(!1),e.networkConnectivityApi.isOnline()&&(!n||n.errorString!=="NoAccessToPdfServices")&&t.show()})}}),t.FilesSignOutView}),define("files/dev/templates/files-no-access-template",[],function(){return'<div class="title theme-text"><%= title %></div><div class="content">	<span class="files-no-access-message theme-text"><%= no_access_message %></span>	<span class="files-no-access-sign-in-link"><%= sign_in_link %></span></div><div class="sent-files-footer ui-theme theme-container-prominent theme-border">	<div class="files-no-access-sfs-manage-link-btn theme-hyperlink"><%= sfs_manage_link_btn %></div></div>'}),define("files/dev/views/files-no-access-view",["core/ac-core","files/ac-files","files/templates/files-no-access-template","i18n!files/nls/ui-strings","core/views/view"],function(e,t,n,r){t.FilesNoAccessView=e.View.extend({events:{"click .files-no-access-sfs-manage-link-btn":"_onSFSManageLinkBtnClick","click .files-no-access-sign-in-link":"_onSignInLinkClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){var t=!1,n=this.options,i=n.appApi.rnaApi;return e.View.prototype.render.call(this),this.$el.children().length===0&&(i.done(_.bind(function(e){this.$el.html(this._template({title:r.FILES_NO_ACCESS_TITLE,no_access_message:r.FILES_NO_ACCESS_MESSAGE,sign_in_link:r.FILES_NO_ACCESS_SIGN_IN_LINK,sfs_manage_link_btn:r.MANAGE_DOCUMENTS_SENT_FOR_SIGNATURE}))},this)),this._initWrappers()),i.done(_.bind(function(e){e.rnaServicesAPI.isEnterpriseUser()&&!e.rnaServicesAPI.isPDFServicesEnabled()?this.$title.text()!==r.FILES_NO_ACCESS_TITLE&&(this.$title.text(r.FILES_NO_ACCESS_TITLE),this.$noAccessMsg.text(r.FILES_NO_ACCESS_MESSAGE),this.$noAccessSignInLink.text(r.FILES_NO_ACCESS_SIGN_IN_LINK)):e.rnaServicesAPI.isEnterpriseUser()&&!e.rnaServicesAPI.isEncryptionKeyValid()&&this.$title.text()!==r.ENCRYPTION_KEY_DISABLED_TITLE&&(this.$title.text(r.ENCRYPTION_KEY_DISABLED_TITLE),this.$noAccessMsg.text(r.ENCRYPTION_KEY_DISABLED_MESSAGE),this.$noAccessSignInLink.text(""))},this)),n.pluginId==="sentfiles"?i.done(_.bind(function(e){t=e.rnaServicesAPI.isEnterpriseUser()&&!e.rnaServicesAPI.isESignServicesEnabled(),t?this.$footer.hide():(this.$el.css({bottom:0}),this.$footer.show())},this)):this.$footer.hide(),this},_initWrappers:function(){this.$title=this.$(".title"),this.$content=this.$(".content"),this.$footer=this.$(".sent-files-footer"),this.$noAccessMsg=this.$(".files-no-access-message"),this.$noAccessSignInLink=this.$(".files-no-access-sign-in-link")},_onSFSManageLinkBtnClick:function(){var e=this.options;e.appApi.rnaApi.done(function(e){e.esApi.invokeMethod({methodName:"launchSFSManagePage"})})},_onSignInLinkClick:function(){var e=this.options,t=e.appApi;t.networkConnectivityApi.resetNetworkStatusToOnline({silent:!0}),t.sessionApi.signOut().then(function(){t.sessionApi.ensureSignedIn()})}})}),define("files/dev/views/files-container-view",["core/ac-core","files/ac-files","files/templates/files-container-template","core/utils/util","core/views/view","files/views/files-ipm-view","files/views/files-view","files/views/files-offline-view","files/views/files-sign-out-view","files/views/files-no-access-view"],function(e,t,n,r){return t.FilesContainerView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){var t=this.$el;return e.View.prototype.render.call(this),t.children().length===0&&(t.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$filesOfflineView=this.$(".files-offline-view"),this.$filesIpm=this.$(".files-ipm"),this.$files=this.$(".files"),this.$filesSignOut=this.$(".files-sign-out"),this.$filesNoAccessView=this.$(".files-no-access-view")},_renderChildViews:function(){var e=this.options;if(r.isCEF()&&this.options.rnaRecentFilesSelect){this.$files.show(),this._renderFilesView(),this.$filesOfflineView.hide(),this.$filesIpm.hide(),this.$filesSignOut.hide(),this.$filesNoAccessView.hide();return}r.isCEF()&&!e.appApi.networkConnectivityApi.isOnline()?(this.$filesOfflineView.show(),this._renderFilesOfflineView(),this.$filesIpm.hide(),this.$files.hide(),this.$filesSignOut.hide(),this.$filesNoAccessView.hide()):this._showFilesIpmView()?(this.$filesIpm.show(),this._renderFilesIpmView(),this.$filesOfflineView.hide(),this.$files.hide(),this.$filesSignOut.hide(),this.$filesNoAccessView.hide()):r.isCEF()?this._showFilesSignOutView()?(this.$filesSignOut.show(),this._renderFilesSignOutView(),this.$filesOfflineView.hide(),this.$files.hide(),this.$filesIpm.hide(),this.$filesNoAccessView.hide()):this._showFilesNoAccessView()?(this.$filesNoAccessView.show(),this._renderFilesNoAccessView(),this.$filesSignOut.hide(),this.$filesOfflineView.hide(),this.$files.hide(),this.$filesIpm.hide()):(this.$files.show(),this._renderFilesView(),this.$filesOfflineView.hide(),this.$filesIpm.hide(),this.$filesSignOut.hide(),this.$filesNoAccessView.hide()):(this.$files.show(),this._renderFilesView(),this.$filesOfflineView.hide(),this.$filesIpm.hide(),this.$filesSignOut.hide(),this.$filesNoAccessView.hide())},_renderFilesOfflineView:function(){this._renderChildView("_filesOfflineView",t.FilesOfflineView,this.$filesOfflineView)},_renderFilesIpmView:function(){this._renderChildView("_filesIpmView",t.FilesIpmView,this.$filesIpm)},_renderFilesSignOutView:function(){this._renderChildView("_filesSignOutView",t.FilesSignOutView,this.$filesSignOut)},_renderFilesNoAccessView:function(){this._renderChildView("_filesNoAccessView",t.FilesNoAccessView,this.$filesNoAccessView)},_renderFilesView:function(){this._renderChildView("_filesView",t.FilesView,this.$files)},_showFilesIpmView:function(){var e=this.options,t=e.pluginId,n=e.appApi.connectorsApi,r,i,s,o=n.getConnectorPluginName(t),u;return i=n.isConnectorPlugin(t),s=n.isConnectorRemovable(t),u=n.alwaysAppearInLeftRail(o),r=n.getConnectorPluginRoot(t),!e.noUrlUpdate&&i&&s&&u&&(_.isUndefined(r)||r==="")},_showFilesSignOutView:function(){var e=this.options,t=e.pluginId,n=e.appApi.sessionApi,r=e.appApi.connectorsApi,i,s,o,u,a=r.getConnectorPluginName(t),f;return s=r.isConnectorPlugin(t),o=r.isConnectorRemovable(t),f=r.isDesktopConnector(a),u=n.isSignedInReader()&&n.isSignedIn(),i=r.getConnectorPluginRoot(t),s&&!f&&!u&&(!o||!_.isUndefined(i)&&i!=="")},_showFilesNoAccessView:function(){var e=this.options,t=e.appApi.rnaApiObj,n=e.pluginId,r=e.appApi.connectorsApi,i=r.getConnectorPluginName(n),s,o,u=!1;return s=r.isConnectorPlugin(n),o=r.isDesktopConnector(i),(!s||!o)&&t&&(u=t.rnaServicesAPI.isEnterpriseUser()&&(!t.rnaServicesAPI.isPDFServicesEnabled()||!t.rnaServicesAPI.isEncryptionKeyValid())),u}}),t.FilesContainerView}),define("files/dev/templates/acrobat-footer-template",[],function(){return'<div class="acrobat-controls">    <div class="acrobat-file-filter-container">        <div class="acrobat-file-filter-label"><%= show %></div>        <select class="acrobat-file-filter"></select>    </div>     <div class="acrobat-control-btns">        <input class="acrobat-open-selected acrobat-control-btn"               type="button"               disabled="disabled"/>        <input class="acrobat-cancel acrobat-control-btn"               type="button"               aria-label="<%= cancel %>"               value="<%= cancel %>"/>    </div></div>'}),define("files/dev/templates/error-template",[],function(){return'<div class="error-title"><%= errorTitle %></div><div class="error-msg"><%= errorMsg %></div><div class="error-control-btns">    <input type="button" class="control-button error-btn1"           data-test-name="error-control-btn1"           aria-label="<%= errorBtn1 %>"           value="<%= errorBtn1 %>">    </input>    <input type="button" class="control-button error-btn2"           data-test-name="error-control-btn2"           aria-label="<%= errorBtn2 %>"           value="<%= errorBtn2 %>">    </input></div>'}),define("files/dev/templates/full-preview-home-btn-template",[],function(){return'<div class="toolbar-item plugin-selector">    <div class="plugin-selector-icon"></div>    <div class="toolbar-item-label"><%= label %></div></div>'}),define("files/dev/templates/page-header-template",[],function(){return'<div class="adc-logo"></div> <div class="page-header-tabs">    <div class="page-header-tab tools-tab"         data-test-name="page-header-tools-tab"><%= tools %></div>    <div class="page-header-tab files-tab selected"         data-test-name="page-header-files-tab"><%= files %></div></div> <div class="account-menu-btn"     data-test-name="page-header-account-menu-btn">    <div class="user-name"><%- userName %></div></div><div class="account-menu"></div>'}),define("files/dev/nls-cef/ui-strings",{root:!0,"ar-ae":!0,"bg-bg":!0,"ca-es":!0,"cs-cz":!0,"da-dk":!0,"de-de":!0,"en-ae":!0,"en-gb":!0,"en-il":!0,"es-es":!0,"eu-es":!0,"fi-fi":!0,"fr-fr":!0,"fr-ma":!0,"he-il":!0,"hr-hr":!0,"hu-hu":!0,"it-it":!0,"ja-jp":!0,"ko-kr":!0,"nb-no":!0,"nl-nl":!0,"pl-pl":!0,"pt-br":!0,"ro-ro":!0,"ru-ru":!0,"sk-sk":!0,"sl-si":!0,"sl-sl":!0,"sv-se":!0,"tr-tr":!0,"uk-ua":!0,"zh-cn":!0,"zh-tw":!0}),define("files/dev/nls-cef/root/ui-strings",{SHOW:"Show",OPEN_SELECTED:"Open Selected",SAVE:"Save",NEW_FOLDER:"New Folder",UPLOAD_FILE:"Upload File",CANCEL_UPLOAD:"Cancel upload",SORT:"Sort",NO_FILES_IN_ROOT:"There are currently no files in Document Cloud.",NO_FILES_IN_CONNECTOR:"There are currently no files in <%= connector %>.",NO_FILES_IN_FOLDER:"This folder is empty.",UPLOAD_TO_ACCESS:"Upload your files to have access to them anywhere.",UNSUPPORTED_CONNECTOR_MSG:"<%= actionName %> is currently not supported for files stored in <%= connectorLabel %>.",NO_SEARCH_RESULTS:"No Search Results.",TRY_DIFFERENT_SEARCH:"Please try a different search.",NO_SEARCH_RESULTS_FOLDER:"There are no applicable files in this folder.",TOO_MANY_SEARCH_TERMS_HEADER:"Maximum search queries exceeded.",TOO_MANY_SEARCH_TERMS_MESSAGE:"Please remove some search queries to see their search results.",NEW_FOLDER_TITLE:"New Folder",NEW_FOLDER_NAME_PLACEHOLDER:"Edit New Folder Name",CREATE_FOLDER:"Create Folder",SORT_BY:"Sort by:",SORT_BY_FILE_NAME:"File Name",SORT_BY_FILE_TYPE:"File Type",SORT_BY_SIZE:"Size",SORT_BY_DATE_ADDED:"Date Added",SORT_BY_DATE_MODIFIED:"Date Modified",SORT_BY_DATE_VIEWED:"Date Viewed",DISPLAY:"Sort",VIEW_BY:"View by:",LIST:"List",THUMBNAIL:"Thumbnail",SORT_BY_FILE_SIZE:"File Size",FILTER:"Filter",FILTER_BY:"Filter by...",TAGS_TITLE:"Tags: Coming soon...",TAGS:"Tags",SEARCH_TITLE:"Search for files",CLEAR_SEARCH_TITLE:"Clear search",SEARCH_RESULTS:"Search Results ...",SEARCH_RESULTS_COUNT:"Search Results (<%= count %>)",SEARCH_RESULTS_UNAVAILABLE:"Search Results Unavailable",ADD_FILTER:"Add Filter",REMOVE_FILTER:"Remove Filter",SELECT_ATTRIBUTE:"Select Attribute",SELECT_VALUE:"Select Value",SELECT_FORMAT:"Select Format",SELECT_DATES:"Select Dates",SELECT_TOOL:"Select Tool",ENTER_VALUE:"Enter Value",EXPORT_FROM_PDF:"Export PDF",CONVERT_TO_PDF:"Create PDF",COMBINE_TO_PDF:"Combine Files",FILL_SIGN:"Fill & Sign",ADOBE_ACROBAT:"Adobe Acrobat",ADOBE_READER_MOBILE:"Adobe Reader Mobile",ADOBE_READER:"Adobe Reader",MARK_AS_FAVORITE:"Mark As Favorite",FILE_INFO:"File Info",TYPE:"Type",ADDED:"Added",MODIFIED:"Modified",PAGES:"Pages",SIZE:"Size",SHARING_LINK:"Sharing Link",UNSHARE:"unshare",MARK_AS_FAVORITE_COMING_SOON:"Mark As Favorite: Coming soon...",COMING_SOON:"Coming soon...",PREV_PAGE_TITLE:"Previous Page",NEXT_PAGE_TITLE:"Next Page",PAGE_NUM_TITLE:"Page Number",PAGE_NUM_SEPARATOR:"/",PAGE_COUNT_TITLE:"Number of Pages",SCROLL_PAGES_TITLE:"Scroll Pages",FIT_PAGE_WIDTH_TITLE:"Fit Page Width",FIT_FULL_PAGE_TITLE:"Fit Full Page",SHOW_RHP:"Show Right-Hand Panel",HIDE_RHP:"Hide Right-Hand Panel",SHOW_FILE_INFO:"Show File Info",HIDE_FILE_INFO:"Hide File Info",UNDOCK:"Undock",DOCK_TO_BOTTOM:"Dock to Bottom",ZERO_ITEMS:"0 items",ONE_FILE:"1 file",N_FILES:"<%= numFiles %> files",ONE_FOLDER:"1 folder",N_FOLDERS:"<%= numFolders %> folders",ONE_FOLDER_ONE_FILE:"1 folder, 1 file",ONE_FOLDER_N_FILES:"1 folder, <%= numFiles %> files",N_FOLDERS_ONE_FILE:"<%= numFolders %> folders, 1 file",N_FOLDERS_N_FILES:"<%= numFolders %> folders, <%= numFiles %> files",UPLOADING:"Uploading...",PROCESSING:"Processing...",SHARED:"Shared",MAKE_PUBLIC:"Make Public",MAKE_PRIVATE:"Make Private",PRIVATE:"Private",PUBLIC:"Public",SHARE_FILES_PRIVATE_TEXT:"The selected files are private and only viewable by you.",SHARE_FILE_PRIVATE_TEXT:"The selected file is private and only viewable by you.",SHARE_FILES_PUBLIC_TEXT:"The selected files are public, and anyone with the links below can view the files.",SHARE_FILE_PUBLIC_TEXT:"The selected file is public, and anyone with the link below can view the file.",SHARE_FILES_MIXED_TEXT:"The selected files include both public and private files. Click one of the buttons below to share or unshare all files.",EMAIL_BUTTON_SINGLE:"Email Link",EMAIL_BUTTON_MULTI:"Email Links",EMAIL_LINK:"Email",SAVE_BUTTON:"Close",SHARE_FILES_ERROR:"There was an error changing the sharing state of the file(s): <%= error %>",SHARE_FILES_SESSION_TIMEOUT:'Your session has expired. Click "Close" below to return to the Sign In page.',SHARE_FILE_EMAIL_BODY:"To view the file, please click on the link below:",SHARE_FILES_EMAIL_BODY:"To view the files, please click on the links below:",SHARE_FILE_EMAIL_SUBJECT:"<%= firstName %> <%= lastName %> has shared a file with you.",SHARE_FILES_EMAIL_SUBJECT:"<%= firstName %> <%= lastName %> has shared files with you.",SHARE_FILES_AV_DISALLOWED:'Sharing of the file "<%= filename %>" failed because the sharing of audio and video files is not allowed.',SHARE_FILES_SHARING_DISALLOWED:'Sharing of the file "<%= filename %>" failed because sharing the file is not allowed.',FOLDER_UPLOAD_NOT_SUPPORTED_TITLE:"Folder Upload Not Available",FOLDER_UPLOAD_NOT_SUPPORTED_MSG:"We were unable to complete your upload request. Upload of a folder is not currently supported.",FILE_UPLOAD_FAILED_TITLE:"File Upload Failed",FILE_UPLOAD_FAILED_MSG:"We were unable to complete your upload request. You may have tried to upload a file too large or a folder.",FILE_OFFLINE_TITLE:"No Internet Connection",FILE_OFFLINE_CONTENT:"Connect to the internet to view your files stored online.",FILE_OFFLINE_OK_LABEL:"Ok",FILENAME_TEXT:"File Name",RESTRICT_EDITING:"Restrict Editing",REDUCE_FILE_SIZE:"Reduce File Size",EXPORT_FILE_FORMAT:"File Format",EXPORT_SETTINGS:"Settings",EXPORT_VIEW_RESULT:"Open file after export",FILES_SIGN_OUT_TITLE:"Adobe Document Cloud",FILES_SIGN_OUT_CONTENT:"Sign in to access files",FILES_SIGN_IN_LABEL:"Sign In Now",CCLOUD_SIGN_OUT_TITLE:"Creative Cloud",CCLOUD_SIGN_OUT_CONTENT:"Sign in to access files",FILES_NO_ACCESS_TITLE:"No Access To Service",FILES_NO_ACCESS_CONTENT:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID."}),define("files/dev/all-modules",["files-unmapped/dev/ac-files-init","files-unmapped/dev/ac-files","files-unmapped/dev/nls/ui-strings","files-unmapped/dev/nls/root/ui-strings","files-unmapped/dev/ops/preview/loading-full-preview-plugins-op","files-unmapped/dev/ops/preview/listening-for-ngdoc-job-status-op","files-unmapped/dev/ops/preview/creating-ngdoc-rendition-op","files-unmapped/dev/ops/preview/getting-full-preview-metadata-op","files-unmapped/dev/ops/preview/closing-full-preview-op","files-unmapped/dev/ops/preview/opening-full-preview-op","files-unmapped/dev/ops/preview/toggling-full-preview-action-menu-op","files-unmapped/dev/ops/preview/selecting-full-preview-plugin-op","files-unmapped/dev/ops/op-factory","files-unmapped/dev/ops/manipulation/deleting-full-preview-item-if-confirmed-op","files-unmapped/dev/ops/misc/opening-selected-collection-items-op","files-unmapped/dev/ops/misc/navigating-to-acroprefs-folder-op","files-unmapped/dev/ops/misc/save-as-selected-collection-items-op","files-unmapped/dev/ops/misc/changing-collection-view-op","files-unmapped/dev/ops/misc/toggling-sort-menu-op","files-unmapped/dev/ops/misc/navigating-to-folder-op","files-unmapped/dev/ops/misc/sorting-collection-op","files-unmapped/dev/ops/misc/opening-collection-item-op","files-unmapped/dev/ops/misc/navigating-to-scan-folder-op","files-unmapped/dev/ops/misc/toggling-filter-menu-op","files-unmapped/dev/ops/acrobat/initializing-acrobat-op","files-unmapped/dev/ops/acrobat/selecting-acrobat-filter-op","files-unmapped/dev/ops/creating/creating-folder-from-dlg-op","files-unmapped/dev/ops/searching/searching-op","files-unmapped/dev/ops/searching/scan-closing-search-op","files-unmapped/dev/ops/searching/scan-searching-if-asked-op","files-unmapped/dev/ops/searching/closing-search-op","files-unmapped/dev/ops/searching/searching-if-asked-op","files-unmapped/dev/ops/searching/removing-search-field-query-op","files-unmapped/dev/ops/searching/removing-removable-queries-op","files-unmapped/dev/ops/searching/opening-search-op","files-unmapped/dev/ops/searching/removing-last-field-query-op","files-unmapped/dev/ops/searching/adding-search-field-query-op","files-unmapped/dev/ops/dialogs/showing-new-folder-dlg-op","files-unmapped/dev/ops/listening/listening-for-search-queries-change-op","files-unmapped/dev/ops/listening/listening-for-current-folder-notifications-op","files-unmapped/dev/ops/listening/listening-for-file-upload-events-op","files-unmapped/dev/ops/listening/listening-for-search-invalidation-op","files-unmapped/dev/ops/listening/listening-for-selection-change-op","files-unmapped/dev/ops/listening/listening-for-dup-errors-op","files-unmapped/dev/ops/listening/listening-for-quota-errors-op","files-unmapped/dev/ops/listening/listening-for-view-events-op","files-unmapped/dev/ops/sharing/sharing-item-from-panel-op","files-unmapped/dev/ops/sharing/sharing-items-from-dlg-op","files-unmapped/dev/ops/user/restoring-files-prefs-op","files-unmapped/dev/ops/user/saving-files-prefs-op","files-unmapped/dev/models/model-factory","files-unmapped/dev/models/ui/ui-model-factory","files-unmapped/dev/models/ui/sharing-ui-model","files-unmapped/dev/models/ui/files-ui-model","files-unmapped/dev/views/sort-menu-view","files-unmapped/dev/views/files-body-view","files-unmapped/dev/views/files-footer-view","files-unmapped/dev/views/folder-navigation-view","files-unmapped/dev/views/search-message-view","files-unmapped/dev/views/search-results-view","files-unmapped/dev/views/full-preview-plugins-content-view","files-unmapped/dev/views/no-search-results-view","files-unmapped/dev/views/filter-file-type-menu-view","files-unmapped/dev/views/files-container-view","files-unmapped/dev/views/filter-added-by-menu-view","files-unmapped/dev/views/files-ipm-view","files-unmapped/dev/views/file-upload-progress-view","files-unmapped/dev/views/search-results-summary-view","files-unmapped/dev/views/files-rhp-view","files-unmapped/dev/views/files-header-view","files-unmapped/dev/views/file-save-as-header-view","files-unmapped/dev/views/filter-submenu-view","files-unmapped/dev/views/new-folder-dlg-view","files-unmapped/dev/views/folder-view","files-unmapped/dev/views/full-preview-home-btn-view","files-unmapped/dev/views/full-preview-hud-view","files-unmapped/dev/views/full-preview-action-menu-view","files-unmapped/dev/views/full-preview-view","files-unmapped/dev/views/full-preview-plugins-selector-view","files-unmapped/dev/views/full-preview-overlays-content-view","files-unmapped/dev/views/files-offline-view","files-unmapped/dev/views/filter-attr-menu-view","files-unmapped/dev/views/export-options-view","files-unmapped/dev/views/filter-date-menu-view","files-unmapped/dev/views/filter-menu-view","files-unmapped/dev/views/full-preview-file-info-view","files-unmapped/dev/views/files-sign-out-view","files-unmapped/dev/views/file-save-as-options-view","files-unmapped/dev/views/view-events","files-unmapped/dev/views/files-view","files-unmapped/dev/views/no-folder-items-view","files-unmapped/dev/views/files-no-access-view","files-unmapped/dev/templates/folder-navigation-template","files-unmapped/dev/templates/folder-template","files-unmapped/dev/templates/search-results-template","files-unmapped/dev/templates/files-template","files-unmapped/dev/templates/no-search-results-template","files-unmapped/dev/templates/full-preview-hud-template","files-unmapped/dev/templates/file-upload-progress-template","files-unmapped/dev/templates/search-message-template","files-unmapped/dev/templates/acrobat-footer-template","files-unmapped/dev/templates/error-template","files-unmapped/dev/templates/files-header-template","files-unmapped/dev/templates/full-preview-home-btn-template","files-unmapped/dev/templates/full-preview-plugins-content-template","files-unmapped/dev/templates/filter-date-menu-template","files-unmapped/dev/templates/file-save-as-options-template","files-unmapped/dev/templates/files-ipm-template","files-unmapped/dev/templates/files-no-access-template","files-unmapped/dev/templates/full-preview-file-info-template","files-unmapped/dev/templates/no-folder-items-template","files-unmapped/dev/templates/filter-file-type-menu-template","files-unmapped/dev/templates/full-preview-overlays-content-template","files-unmapped/dev/templates/filter-menu-template","files-unmapped/dev/templates/files-container-template","files-unmapped/dev/templates/file-save-as-header-template","files-unmapped/dev/templates/filter-added-by-menu-template","files-unmapped/dev/templates/files-body-template","files-unmapped/dev/templates/files-sign-out-template","files-unmapped/dev/templates/export-options-template","files-unmapped/dev/templates/files-rhp-template","files-unmapped/dev/templates/full-preview-toolbar-item-template","files-unmapped/dev/templates/full-preview-action-menu-template","files-unmapped/dev/templates/files-footer-template","files-unmapped/dev/templates/filter-attr-menu-template","files-unmapped/dev/templates/page-header-template","files-unmapped/dev/templates/sort-menu-template","files-unmapped/dev/templates/files-offline-template","files-unmapped/dev/templates/full-preview-template","files-unmapped/dev/templates/new-folder-dlg-template","files-unmapped/dev/nls-cef/ui-strings","files-unmapped/dev/nls-cef/root/ui-strings"],function(){return undefined}),define("plugins-common/dev/ac-tools",[],function(){var e=Ac.Tools;return e||(e=Ac.Tools={}),e}),define("plugins-common/dev/ac-account-menu-plugins",[],function(){var e=Ac.AccountMenuPlugins;return e||(e=Ac.AccountMenuPlugins={}),e}),define("plugins-common/dev/ac-full-preview-plugins",[],function(){var e=Ac.FullPreviewPlugins;return e||(e=Ac.FullPreviewPlugins={}),e}),define("plugins-common/dev/ac-home-views",[],function(){var e=Ac.HomeViews;return e||(e=Ac.HomeViews={}),e}),define("plugins-common/dev/all-modules",["plugins-common-unmapped/dev/ac-tools","plugins-common-unmapped/dev/ac-account-menu-plugins","plugins-common-unmapped/dev/ac-full-preview-plugins","plugins-common-unmapped/dev/ac-home-views","plugins-common-unmapped/dev/ac-plugins"],function(){return undefined}),define("versions/framework-dev",["aicx-unmapped/dev/all-modules","app-api-unmapped/dev/app-api","core-unmapped/dev/all-modules","files-unmapped/dev/all-modules","plugins-common-unmapped/dev/all-modules"],function(){return undefined});var JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),function(e){var t=navigator.userAgent.indexOf("MSIE")>=0,n=!0,r;t&&(r=new XMLHttpRequest,n="withCredentials"in r),n||(e.ajaxPrefilter(function(e,t,n){if(e.crossDomain&&!$.isEmptyObject(e.headers)){var r={},i="";e.data&&(e.processData&&typeof e.data=="string"&&e.type==="GET"?(e.url+=(e.url.indexOf("?")===-1?"?":"&")+e.data,delete e.data):typeof e.data=="string"?i=JSON.parse(e.data):i=e.data),$.each(e.headers,function(e,t){r["CORS_"+e]=t}),r.CORS_method=e.type,r.CORS_contentType=r["CORS_Content-Type"]||e.contentType,r.__body__=i,e.data=JSON.stringify(r),e.processData=!1,e.contentType="text/plain",e.type="POST",e.url.indexOf("redirect_uri=")===-1&&(e.url=e.url.replace(/\/api\//,"/limited/api/"),e.url+=(e.url.indexOf("?")===-1?"?":"&")+"CORS_lite=true")}}),e.ajaxTransport("+*",function(t,n,r){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var i;return{send:function(n,r){function o(t,n,s,o){i.onload=i.onerror=i.ontimeout=e.noop,i=undefined,r(t,n,s,o)}i=new XDomainRequest,i.open(t.type,t.url),i.onload=function(){if(i.responseText.indexOf('"status":')!==-1&&i.responseText.indexOf('"headers":')!==-1&&i.responseText.indexOf('"body":')!==-1){var e=JSON.parse(i.responseText),t={200:"OK",201:"Created",202:"Accepted",204:"No Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",429:"Too Many Requests",431:"Request Header Fields Too Large",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},n="";$.each(e.headers,function(e,t){n+=e+":"+t+"\n"});var r={text:JSON.stringify(e.body)},s=(t[e.status]||"").toUpperCase();o(e.status,s,r,n)}else o(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)},i.onerror=function(){o(404,"Not Found")},t.xdrTimeout?(i.ontimeout=function(){o(0,"timeout")},i.timeout=t.xdrTimeout):i.ontimeout=function(){o(408,"Request Timeout")},i.onprogress=function(){},i.send(t.hasContent&&t.data||null)},abort:function(){i&&(i.onerror=e.noop(),i.abort())}}}}))}(jQuery),define("xdr",["jquery"],function(){}),function(e){var t=8,n=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},r=function(e,t){return e>>>t|e<<32-t},i=function(e,t){return e>>>t},s=function(e,t,n){return e&t^~e&n},o=function(e,t,n){return e&t^e&n^t&n},u=function(e){return r(e,2)^r(e,13)^r(e,22)},a=function(e){return r(e,6)^r(e,11)^r(e,25)},f=function(e){return r(e,7)^r(e,18)^i(e,3)},l=function(e){return r(e,17)^r(e,19)^i(e,10)},c=function(e,t){var r=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),c=new Array(64),h,p,d,v,m,g,y,b,w,E,S,x;e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var w=0;w<e.length;w+=16){h=i[0],p=i[1],d=i[2],v=i[3],m=i[4],g=i[5],y=i[6],b=i[7];for(var E=0;E<64;E++)E<16?c[E]=e[E+w]:c[E]=n(n(n(l(c[E-2]),c[E-7]),f(c[E-15])),c[E-16]),S=n(n(n(n(b,a(m)),s(m,g,y)),r[E]),c[E]),x=n(u(h),o(h,p,d)),b=y,y=g,g=m,m=n(v,S),v=d,d=p,p=h,h=n(S,x);i[0]=n(h,i[0]),i[1]=n(p,i[1]),i[2]=n(d,i[2]),i[3]=n(v,i[3]),i[4]=n(m,i[4]),i[5]=n(g,i[5]),i[6]=n(y,i[6]),i[7]=n(b,i[7])}return i},h=function(e){var n=Array(),r=(1<<t)-1;for(var i=0;i<e.length*t;i+=t)n[i>>5]|=(e.charCodeAt(i/t)&r)<<24-i%32;return n},p=function(e){var t=[],n=e.length,r,i;for(r=0;r<n;r+=2){i=parseInt(e.substr(r,2),16);if(!!isNaN(i))return"INVALID HEX STRING";t[r>>3]|=i<<24-4*(r%8)}return t},d=function(e){var t="0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>(3-r%4)*8+4&15)+t.charAt(e[r>>2]>>(3-r%4)*8&15);return n},v=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=e.length*4,i,s,o,u="=";for(i=0;i<r;i+=3){o=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255;for(s=0;s<4;s+=1)i*8+s*6<=e.length*32?n+=t.charAt(o>>6*(3-s)&63):n+=u}return n},m=function(e,n){var r=h(e);r.length>16&&(r=c(r,e.length*t));var i=Array(16),s=Array(16);for(var o=0;o<16;o++)i[o]=r[o]^909522486,s[o]=r[o]^1549556828;var u=c(i.concat(h(n)),512+n.length*t);return c(s.concat(u),768)},g=function(t){return t=typeof t=="object"?e(t).val():t.toString(),t};e.extend({sha256:function(e){return e=g(e),d(c(h(e),e.length*t))},sha256b64:function(e){return e=g(e),v(c(h(e),e.length*t))},sha256hmachex:function(e,t){return e=g(e),t=g(t),d(m(e,t))},sha256hmacb64:function(e,t){return e=g(e),t=g(t),v(m(e,t))},sha256config:function(e){t=parseInt(e)||8}}),e.fn.sha256b64=function(t){e.sha256config(t);var n=e.sha256b64(e(this).val());return e.sha256config(8),n},e.fn.sha256hex=function(t){e.sha256config(t);var n=e.sha256hex(e(this).val());return e.sha256config(8),n}}(jQuery),define("jquery.sha256",["jquery"],function(){}),define("app/dev/models/ui/acrobat-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.AcrobatUiModel=e.UiModel.extend({recognized:{is_in_acrobat:{type:"boolean",optional:!1},file_filters:{type:"array",optional:!1},default_filter_index:{type:"number",optional:!1},selected_filter_index:{type:"number",optional:!1},selection_type:{type:"string",optional:!1,choices:["file","folder"]},allow_multiple_selection:{type:"boolean",optional:!1},file_open_max_count:{type:"number",optional:!1}},defaults:{is_in_acrobat:!1,file_filters:[],default_filter_index:0,selected_filter_index:0,selection_type:"file",allow_multiple_selection:!0,file_open_max_count:50},initialize:function(){var t=e.Acrobat,n,r;e.UiModel.prototype.initialize.call(this),this.set("is_in_acrobat",t!==undefined);if(!this.get("is_in_acrobat"))return;n=t.fileFilters,_.each(this.filters,function(e){_.each(e.extensions,function(e,t,n){n[t]=e.toLowerCase()})}),this.set("file_filters",n),r=t.defaultFileFilter||0,this.set("default_filter_index",r),this.set("selected_filter_index",r),this.set("selection_type",t.selectionType),this.set("allow_multiple_selection",t.allowMultipleSelection)},getSelectedFilterExtensions:function(){return this.get("file_filters")[this.get("selected_filter_index")].extensions},isFolderSelectionMode:function(){return this.get("selection_type")==="folder"}})}),define("app/dev/models/ui/ajax-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.AjaxUiModel=e.UiModel.extend({recognized:{ajax_spinner_threshold:{type:"number",optional:!1},ajax_transparent_threshold:{type:"number",optional:!1}},defaults:{ajax_spinner_threshold:1e3,ajax_transparent_threshold:2e3}})}),define("app/dev/models/ui/files-collection-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.FilesCollectionUiModel=e.UiModel.extend({recognized:{files_collection:{type:"object",optional:!1}},defaults:{}})}),define("app/dev/models/ui/full-overlay-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.FullOverlayUiModel=e.UiModel.extend({recognized:{show_overlay:{type:"boolean",optional:!1},overlay_element:{type:"object",optional:!1}},defaults:{show_overlay:!1}})}),define("app/dev/models/ui/modal-mask-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.ModalMaskUiModel=e.UiModel.extend({recognized:{modal:{type:"boolean",optional:!1},modal_ajax:{type:"boolean",optional:!1},modal_transparent:{type:"boolean",optional:!1},modal_ref_count:{type:"number",optional:!1},refresh_wait:{type:"number",optional:!1}},defaults:{modal:!1,modal_ajax:!1,modal_transparent:!1,modal_ref_count:0,refresh_wait:10}})}),define("app/dev/models/ui/notification-container-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){var n="idle",r="busy",i="complete",s="warning";t.NotificationContainerUiModel=e.UiModel.extend({recognized:{active_error_msg:{type:"object",optional:!1},mouse_leave_timeout:{type:"number",optional:!1},mouse_leave_timer:{type:"number",optional:!0},notification_items_by_category:{type:"object",optional:!1},show_download_all_by_category:{type:"object",optional:!1},net_status:{type:"string",optional:!1},show_remove_history:{type:"boolean",optional:!1},hide_error_msg:{type:"boolean",optional:!1},show_ready_map:{type:"object",optional:!1}},defaults:{active_error_msg:{},mouse_leave_timeout:400,mouse_leave_timer:undefined,notification_items_by_category:{},show_download_all_by_category:{},net_status:n,show_remove_history:!1,hide_error_msg:undefined,show_ready_map:{}},setStatusOfNotification:function(e,t,n){var r=this.get("notification_items_by_category"),i=r[n]||{};i[e]=t,r[n]=i,this.set("notification_items_by_category",r),this._updateDownloadAllStatus(n),this._updateShowReadyMap(n),this._updateRemoveHistoryStatus(),this._updateNetStatus()},removeNotification:function(e,t){var n=this.get("notification_items_by_category"),r=n[t]||{};delete r[e],this.set("notification_items_by_category",n),this._updateDownloadAllStatus(t),this._updateRemoveHistoryStatus(),this._updateNetStatus()},_updateShowReadyMap:function(e){var t=this.get("notification_items_by_category"),n=t[e]||{},r=this.get("show_ready_map"),s=0;_.each(n,function(e){e===i&&(s+=1)}),r[e]=s>=2,this.trigger("change:show_ready_map",this,r)},_updateDownloadAllStatus:function(e){var t=this.get("notification_items_by_category"),n=t[e]||{},s=this.get("show_download_all_by_category"),o=!0,u=0;_.each(n,function(e){e===i?u+=1:e===r&&(o=!1)}),s[e]=u>=2&&o,this.trigger("change:show_download_all_by_category",this,s)},_updateNetStatus:function(){var e=this.get("notification_items_by_category"),t=n,o=0;_.each(e,function(e){_.each(e,function(e,n){n=parseInt(n,10),e===r?t=r:e===s&&t!==r&&n>=o?(t=s,o=n):e===i&&t!==r&&n>=o&&(t=i,o=n)})}),this.set("net_status",t)},_updateRemoveHistoryStatus:function(){var e=this.get("notification_items_by_category"),t=!0,n=0;_.each(e,function(e){_.each(e,function(e){n+=1,e===r&&(t=!1)})}),n===0&&(t=!1),this.set("show_remove_history",t)}},{STATUS_IDLE:n,STATUS_BUSY:r,STATUS_COMPLETE:i,STATUS_WARNING:s})}),define("app/dev/models/ui/page-header-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.PageHeaderUiModel=e.UiModel.extend({recognized:{show_account_menu:{type:"boolean",optional:!1},show_help_menu:{type:"boolean",optional:!1}},defaults:{show_account_menu:!1,show_help_menu:!1}})}),define("app/dev/models/ui/preferences-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.PreferencesUiModel=e.UiModel.extend({recognized:{preferences:{type:"object",optional:!1}},defaults:{preferences:{}},setPreferences:function(e){var n;e.quota&&(n=e[t.APP_ID]={},_.extend(n,_.pick(e,"quota","lastToolUsed")),delete e.quota,delete e.lastToolUsed),this.set("preferences",e)},getPreferences:function(e){var t=this.get("preferences");return e&&(t=t[e]||{}),t}})}),define("app/dev/models/ui/sign-in-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.SignInUiModel=e.UiModel.extend({recognized:{is_signed_in:{type:"boolean",optional:!1},is_signing_in:{type:"boolean",optional:!1},auto_sign_in:{type:"boolean",optional:!1},ims_page:{type:"string",optional:!0},ims_iframe_height:{type:"number",optional:!0},page_reload_delay:{type:"number",optional:!1}},defaults:{is_signed_in:!1,is_signing_in:!1,auto_sign_in:!1,page_reload_delay:2e3},triggerAutoSignIn:function(){this.set("auto_sign_in",!0).set("auto_sign_in",!1,{silent:!0})}},{IMS_PAGE_SIGN_IN:"SignIn_Form",IMS_PAGE_FORGOT_PASSWORD_FORM:"ForgetPassword_Form",IMS_PAGE_FORGOT_PASSWORD_PAGE:"ForgetPassword_Page",IMS_PAGE_CREATE_ACCOUNT:"Create_Form",IMS_PAGE_TOU:"TOU_Display",IMS_PAGE_EMAIL_VERIFICATION:"EmailVerification_Required"})}),define("app/dev/models/ui/tuner-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){return t.TunerUiModel=e.UiModel.extend({recognized:{disable_web_connectors:{type:"boolean",optional:!1},disable_local_connectors:{type:"boolean",optional:!1},disable_document_cloud:{type:"boolean",optional:!1}},defaults:{disable_web_connectors:!1,disable_local_connectors:!1,disable_document_cloud:!1}}),t.TunerUiModel}),define("app/dev/models/ui/window-ui-model",["core/ac-core","app/ac-app","core/models/ui/ui-model"],function(e,t){t.WindowUiModel=e.UiModel.extend({recognized:{width:{type:"number",optional:!1},height:{type:"number",optional:!1},resize_debounce_delay:{type:"number",optional:!1},font_family:{type:"string",optional:!0}},defaults:{resize_debounce_delay:250},initialize:function(){var t;e.UiModel.prototype.initialize.call(this),t=this._$window=$(window),this.set("width",t.width(),{silent:!0}),this.set("height",t.height(),{silent:!0})}})}),define("app/dev/models/ui/ui-model-factory",["core/ac-core","app/ac-app","core/models/model","app/models/ui/acrobat-ui-model","app/models/ui/ajax-ui-model","app/models/ui/files-collection-ui-model","app/models/ui/full-overlay-ui-model","app/models/ui/modal-mask-ui-model","app/models/ui/notification-container-ui-model","app/models/ui/page-header-ui-model","app/models/ui/preferences-ui-model","app/models/ui/sign-in-ui-model","app/models/ui/status-menu-ui-model","app/models/ui/tuner-ui-model","app/models/ui/window-ui-model"],function(e,t){t.UiModelFactory=e.Model.extend({create:function(e,n,r){var i=t[e];if(!!i)return new i(n,r);LOG(0,"AcApp.UiModelFactory.create: Unrecognized class: "+e)}})}),define("app/dev/templates/content-page-template",[],function(){return'<div role="banner" class="page-header gray"></div><div class="page-main-container">    <div class="page-body-container">        <div class="tools"></div>    </div></div><div role="contentinfo" class="acrobat-footer"></div>'}),define("app/dev/templates/page-header-template",[],function(){return'<div class="adc-logo"></div><div class="adc-app-title">    <a href="javascript:void(0);" class="adc-app-name"       id="adc-app-name"><%= appName %></a>    <span class="adc-pdf-services unselectable"          id="adc-pdf-services"><%= pdfServices %></span></div> <button class="account-menu-btn page-header-menu-btn"        id="account-menu-btn"        aria-haspopup="true">    <div class="user-name"><%= userName %></div></button><div class="account-menu" id="account-menu" role="menu"></div> <button class="help-menu-btn page-header-menu-btn"        id="help-menu-btn"        aria-haspopup="true"        aria-label="<%= helpMenuTitle %>"        title="<%= helpMenuTitle %>">    <div class="help-menu-title"></div></button><div class="help-menu" id="help-menu" role="menu"></div> <button class="status-menu-btn page-header-menu-btn"        id="status-menu-btn"        aria-haspopup="true">    <div class="status-menu-btn-icon"></div>    <div class="status-menu-btn-label hidden-accessible"></div></button><div class="status-menu menu" id="status-menu"     role="dialog" aria-labelledby="status-menu-btn"></div>'}),define("app/dev/templates/account-menu-template",[],function(){return'<div class="account-menu-items"     id="account-menu-items"></div><div role="separator" class="account-menu-sep"></div><div class="account-menu-footer">    <a href="<%= privacyUrl %>"       class="account-menu-footer-item privacy"><%= privacy %></a>    <div role="separator" class="account-menu-footer-sep"></div>    <a href="<%= termsUrl %>"       class="account-menu-footer-item terms"><%= terms %></a>    <div role="separator" class="account-menu-footer-sep"></div>    <a href="<%= cookiesUrl %>"       class="account-menu-footer-item cookies"><%= cookies %></a></div><div class="menu-nub-grey"></div>'}),define("app/dev/views/account-menu-plugins-view",["core/ac-core","app/ac-app","core/templates/account-menu-item-template","core/utils/sc-analytics","core/views/plugins-selector-view"],function(e,t,n,r){t.AccountMenuPluginsView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this),this.options=_.extend({},this.options,{pluginsUiModel:this.options.accountMenuPluginsUiModel})},render:function(){e.PluginsSelectorView.prototype.render.call(this)},_getSelectorTemplate:function(){return n},_getSelectorViewEvent:function(){return t.ViewEvents.ACCOUNT_MENU_ITEM_CLICK},_logSiteCatalystEvent:function(e){this.options.appApi.siteCatalystApi.logScEvent([r.TOP_HEADER,r.USER_ACCOUNT_MENU,e[0]])},_onPluginSelectorClick:function(t){var n=this.options,r=n.appApi;r.dialogApi.closeAllDialogs(),r.pluginsApi.callPluginMethodForEachIfEnabled(n.accountMenuPluginsUiModel.getAllIds(),"deselectPlugin",undefined,undefined,!0),_.delay(_.bind(function(){e.PluginsSelectorView.prototype._onPluginSelectorClick.call(this,t)},this),n.accountMenuPluginsUiModel.get("deselect_delay"))}})}),define("app/dev/views/account-menu-view",["core/ac-core","core/ac-core-config","app/ac-app","app/templates/account-menu-template","i18n!app/nls/ui-strings","core/views/view","core/views/menu-view","app/views/account-menu-plugins-view"],function(e,t,n,r,i){n.AccountMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .account-menu-footer-item.privacy":"_onPrivacyClick","click .account-menu-footer-item.terms":"_onTermsClick","click .account-menu-footer-item.cookies":"_onCookiesClick"})},initialize:function(){e.MenuView.prototype.initialize.call(this)},render:function(){var n;e.MenuView.prototype.render.call(this),n=this.$el,n.children().length===0&&(n.html(_.template(r)({privacy:i.PRIVACY,terms:i.TERMS,cookies:i.COOKIES,privacyUrl:this._getOpenUrl(t.PRIVACY_URL,t.PRIVACY_URL_LOC),termsUrl:this._getOpenUrl(t.TERMS_URL,t.TERMS_URL),cookiesUrl:this._getOpenUrl(t.COOKIES_URL,t.COOKIES_URL_LOC)})),this._initWrappers()),this._renderChildViews()},open:function(){var t=e.MenuView.prototype.open.call(this);return this.$el.addClass("shown"),t},close:function(){e.MenuView.prototype.close.call(this,undefined,{doNotEmpty:!0}),this.$el.removeClass("shown")},_onPrivacyClick:function(e){e.preventDefault(),this.close(),window.open(this._getOpenUrl(t.PRIVACY_URL,t.PRIVACY_URL_LOC))},_onTermsClick:function(e){e.preventDefault(),this.close(),window.open(this._getOpenUrl(t.TERMS_URL,t.TERMS_URL_LOC))},_onCookiesClick:function(e){e.preventDefault(),this.close(),window.open(this._getOpenUrl(t.COOKIES_URL,t.COOKIES_URL_LOC))},_getOpenUrl:function(e,t){var n=this.options.appApi.localeApi.getLocale();return n!=="en-us"&&n!=="root"&&(e=_.template(t,{locale:n==="en-gb"?"uk":n.substr(3)})),e},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$menuItems=this.$(".account-menu-items"),this.$menuSep=this.$(".account-menu-sep"),this.$menuFooter=this.$(".account-menu-footer")},_renderChildViews:function(){this._renderAccountMenuPluginsView()},_renderAccountMenuPluginsView:function(){this._renderChildView("_accountMenuPluginsView",n.AccountMenuPluginsView,this.$menuItems)},_closedByClick:function(t){e.MenuView.prototype._closedByClick.call(this,t),this._consumeEvent(t)}})}),define("app/dev/templates/help-menu-template",[],function(){return'<div role="presentation"><button class="help-menu-item ask-us-menu-item"     id="help-menu-item-ask-us"     role="menuitem" tabindex="-1"><%= askUs %></button><button class="help-menu-item support-menu-item"     id="help-menu-item-support"     role="menuitem" tabindex="-1"><%= support %></button><button class="help-menu-item about-menu-item"     id="help-menu-item-about-app"     role="menuitem" tabindex="-1"><%= aboutApp %></button></div><div class="menu-nub-grey"></div>'}),define("app/dev/views/help-menu-view",["core/ac-core","app/ac-app","app/templates/help-menu-template","i18n!app/nls/ui-strings","core/utils/sc-analytics","core/views/view","core/views/menu-view"],function(e,t,n,r,i){return t.HelpMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .ask-us-menu-item":"_onAskUsClick","click .support-menu-item":"_onSupportClick","click .about-menu-item":"_onAboutClick"})},initialize:function(){e.MenuView.prototype.initialize.call(this),this._template=_.template(n)},render:function(){e.MenuView.prototype.render.call(this),this.$el.children().length===0&&this.$el.html(this._template({askUs:r.ASK_US_A_QUESTION,support:r.SUPPORT,aboutApp:r.ABOUT_APP})),this._initWrappers()},open:function(){var t=e.MenuView.prototype.open.call(this);return this.$el.addClass("shown"),t},close:function(){e.MenuView.prototype.close.call(this),this.$el.removeClass("shown")},_closedByClick:function(t){e.MenuView.prototype._closedByClick.call(this,t),this._consumeEvent(t)},_onMenuItemClick:function(){var e=this.options,t=e.appApi;t.dialogApi.closeAllDialogs(),t.pluginsApi.callPluginMethodForEachIfEnabled(e.accountMenuPluginsUiModel.getAllIds(),"deselectPlugin",undefined,undefined,!0),_.defer(this.close)},_onAskUsClick:function(e){this._onMenuItemClick(e),this.options.appApi.siteCatalystApi.logScEvent([i.TOP_HEADER,i.HELP_MENU,i.ASK_US]),_.defer(_.bind(function(){this._triggerViewEvent(t.ViewEvents.ASK_US_CLICK)},this))},_onSupportClick:function(e){this._onMenuItemClick(e),this.options.appApi.siteCatalystApi.logScEvent([i.TOP_HEADER,i.HELP_MENU,i.SUPPORT]),this._triggerViewEvent(t.ViewEvents.SUPPORT_CLICK)},_onAboutClick:function(e){this._onMenuItemClick(e),this.options.appApi.siteCatalystApi.logScEvent([i.TOP_HEADER,i.HELP_MENU,i.ABOUT_PRODUCT]),this._triggerViewEvent(t.ViewEvents.ABOUT_CLICK,{parentView:t.viewMgr,triggerEl:this.options.triggerEl})}}),t.HelpMenuView}),define("app/dev/templates/status-menu-template",[],function(){return'<div class="status-menu-content">    <div class="status-menu-items"></div>    <button class="status-menu-remove-history-btn"        ><%= removeHistory %></button>    <div class="menu-nub-grey"></div></div><div class="status-menu-tooltip" role="tooltip">    <div class="menu-nub-red status-menu-tooltip-nub"></div>    <div class="status-menu-tooltip-text"></div></div>'}),define("app/dev/templates/status-menu-item-template",[],function(){return'<div class="status-menu-item"     data-test-name="toolbar-status-menu-item"></div>'}),define("app/dev/views/status-menu-tooltip-view",["core/ac-core","app/ac-app","core/utils/css-util","core/views/menu-view"],function(e,t,n){var r={};return t.StatusMenuTooltipView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave"})},initialize:function(){e.MenuView.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){e.MenuView.prototype.render.call(this),this.$text||this._initWrappers(),this.$text.html(this.options.statusMenuUiModel.getActiveTooltipHtml()),this.$(e.ScAnalytics.ANALYTICS_SELECTOR).trigger(e.ScAnalytics.RENDER)},open:function(t){e.MenuView.prototype.open.call(this,t),this._positionTooltip()},close:function(t,n){e.MenuView.prototype.close.call(this,t,_.extend({},n,{doNotEmpty:!0}))},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$nub=this.$(".status-menu-tooltip-nub"),this.$text=this.$(".status-menu-tooltip-text")},_positionTooltip:function(){var e=this.$el,t,r,i=this.options.statusMenuUiModel,s=i.getActiveTooltipElement();if(!s)return;t=s.offset(),r=this.$nub,e.offset({top:t.top+n.getFullHeight(s)+r.height(),left:t.left+n.getFullWidth(s)-n.getFullWidth(e)})},_onMouseEnter:function(){this._clearMouseLeaveTimer()},_onMouseLeave:function(e){this._startMouseLeaveTimer(e)},_addUiModelEventListeners:function(){this.listenTo(this.options.statusMenuUiModel,"change:tooltips",this._onTooltipsChange)},_onTooltipsChange:function(){var e=this.options.statusMenuUiModel.get("tooltips"),t;_.each(r,function(e){e.purge=!0}),_.each(e,_.bind(function(e,n){t=r[n],t||(t=r[n]={tooltip:e},e.element.on("mouseenter",this._onTooltipElementMouseEnter).on("mouseleave",this._onTooltipElementMouseLeave).data("tooltip_id",n)),t.purge=!1},this)),_.each(r,_.bind(function(e,t){e.purge&&(e.tooltip.element.off("mouseenter",this._onTooltipElementMouseEnter).off("mouseleave",this._onTooltipElementMouseLeave).removeData("tooltip_id"),delete r[t])},this))},_onTooltipElementMouseEnter:function(e){this._clearMouseLeaveTimer(),this.options.statusMenuUiModel.set("active_tooltip_id",$(e.target).data("tooltip_id")),this.isMenuOpen()?(this._positionTooltip(),this.render()):this.open()},_onTooltipElementMouseLeave:function(e){this._startMouseLeaveTimer(e)},_startMouseLeaveTimer:function(){var e=this.options.statusMenuUiModel;this._clearMouseLeaveTimer(),e.set("mouse_leave_timer",setTimeout(_.bind(function(){e.unset("active_tooltip_id"),this.close()},this),e.get("mouse_leave_timeout")))},_clearMouseLeaveTimer:function(){var e=this.options.statusMenuUiModel,t=e.get("mouse_leave_timer");t&&(clearTimeout(t),e.unset("mouse_leave_timer"))}}),t.StatusMenuTooltipView}),define("app/dev/views/status-menu-view",["core/ac-core","app/ac-app","app/templates/status-menu-template","app/templates/status-menu-item-template","i18n!app/nls/ui-strings","core/utils/css-util","core/utils/event-util","core/utils/view-util","core/utils/sc-analytics","core/views/menu-view","app/views/status-menu-tooltip-view"],function(e,t,n,r,i,s,o,u,a){var f=Ac.Plugins.types.tools.plugin_ids;t.StatusMenuView=e.MenuView.extend({events:function(){return _.extend({},e.MenuView.prototype.events,{"click .status-menu-remove-history-btn":"_onRemoveHistoryClick"})},initialize:function(){e.MenuView.prototype.initialize.call(this),this._addDomEventListeners(),this._addUiModelEventListeners(),this._addAppApiCallbacks()},render:function(){var t=this.$el,o=t.width(),a,l,c,h,p=u.isElementEmpty(t),d=this.options.statusMenuUiModel,v=d.get("menu_item_by_id"),m=d.get("menu_item_shown"),g,y;if(!p&&!this.isMenuOpen())return this;e.MenuView.prototype.render.call(this),p&&(t.html(_.template(n)({removeHistory:i.REMOVE_HISTORY})),this._initWrappers()),a=this.$menuItems,a.children().length===0&&_.each(f,function(e){a.append(_.template(r)()),l=a.children().last(),l.width(o-s.getExtraWidth(l)),d.get("menu_item_by_id")[e]=l}),_.each(v,function(e,t){m[t]?(g=!0,e.show()):e.hide()}),y=d.hasCompletedItem(),h=this.$removeHistory,y?h.show():h.hide(),c=a.children(),d.getNumShownItems()===1&&!y?c.addClass("no-border"):c.removeClass("no-border"),a.css("max-height",d.get("max_height_frac")*(this.$body.height()-t.parent().height())+"px"),g?t.show():t.hide(),this._renderChildViews()},open:function(){var t=this.options,n=t.appApi,r=t.statusMenuUiModel,i=this.$menuItems;return clearTimeout(this._timeoutId),t.fullOverlayUiModel.get("show_overlay")?(r.set("show_menu",!1,{silent:!0}),this._getResolvedPromise()):this.isMenuOpen()?this._getResolvedPromise():(n.siteCatalystApi.logScEvent([a.PROGRESS_STATUS_MENU,a.SHOWN]),e.MenuView.prototype.open.call(this,function(){var e,t,n;i.addClass("scrollable"),n=r.get("scroll_to_id"),n?(t=r.get("menu_item_by_id"),e=t[n],e&&i.scrollTop(e.position().top)):i.scrollTop(0),r.statusMenuIsDisplayed()}))},close:function(){var n=this.options,r=this._tooltipView;if(!this.isMenuOpen())return;this.stopListening(),this.$menuItems.removeClass("scrollable"),e.MenuView.prototype.close.call(this,_.bind(function(){n.appApi.siteCatalystApi.logScEvent([a.PROGRESS_STATUS_MENU,a.HIDDEN]),this._triggerViewEvent(t.ViewEvents.STATUS_MENU_CLOSED),n.statusMenuUiModel.statusMenuIsClosed(),this._addUiModelEventListeners()},this),{doNotEmpty:!0}),r&&r.close()},_initWrappers:function(){e.MenuView.prototype._initWrappers.call(this),this.$body=$("body"),this.$menuItems=this.$(".status-menu-items"),this.$tooltip=this.$(".status-menu-tooltip"),this.$removeHistory=this.$(".status-menu-remove-history-btn")},_renderChildViews:function(){this._renderChildView("_tooltipView",t.StatusMenuTooltipView,this.$tooltip)},_onRemoveHistoryClick:function(){var e=this.options,n=t.StatusMenuUiModel,r=e.statusMenuUiModel,i=r.get("status_by_id"),s=e.appApi.pluginsApi;e.appApi.siteCatalystApi.logScEvent([a.PROGRESS_STATUS_MENU,a.REMOVE_HISTORY,a.CLICKED]),_.each(f,function(e){if(!s.getPluginApi(e))return!1;i[e]!==n.STATUS_BUSY&&(r.setStatus(e,n.STATUS_IDLE).hideMenuItem(e),s.callPluginMethod(e,"removeStatusHistory"))}),r.getNetStatus()===n.STATUS_BUSY&&this.render()},_addDomEventListeners:function(){var e=this.$el.get(0);o.addDomEventListener(e,"dragover",this._consumeEvent,!1).addDomEventListener(e,"dragenter",this._consumeEvent,!1).addDomEventListener(e,"drop",this._consumeEvent,!1)},_addUiModelEventListeners:function(){var e=this.options,t=e.statusMenuUiModel,n=e.fullOverlayUiModel;this.listenTo(t,"change:net_status",this._onNetStatusChange).listenTo(t,"change:menu_item_shown",this._onMenuItemShownChange).listenTo(t,"change:scroll_to_id",this._onScrollToIdChange).listenTo(n,"change:show_overlay",this._onShowOverlayChange)},_onNetStatusChange:function(e,n){var r=t.StatusMenuUiModel,i=this.options.statusMenuUiModel;n===r.STATUS_IDLE?i.set("show_menu",!1):(i.set("show_menu",!0),this.render())},_onMenuItemShownChange:function(){var e=this.options.statusMenuUiModel,t=_.debounce(_.bind(function(){this.options.statusMenuUiModel.isOneMenuItemShown()?this.open():this.close()},this),e.get("menu_item_shown_delay"));t()},_onScrollToIdChange:function(){this.render()},_onShowOverlayChange:function(e,t){t&&this.close()},_addAppApiCallbacks:function(){this.options.appApi.routerApi.addHistoryChangeCallback(this._onHistoryChange)},_onHistoryChange:function(){this.close()}})}),define("app/dev/views/page-header-view",["core/ac-core","app/ac-app","app/templates/page-header-template","i18n!app/nls/ui-strings","core/utils/util","core/utils/css-util","core/utils/truncate","core/utils/view-util","core/utils/sc-analytics","core/views/view","app/views/account-menu-view","app/views/help-menu-view","app/views/status-menu-view"],function(e,t,n,r,i,s,o,u,a){return t.PageHeaderView=e.View.extend({events:{"click .adc-logo":"_onAdcLogoClick","click .adc-app-name":"_onAdcAppNameClick","click .account-menu-btn":"_onAccountMenuBtnClick","click .help-menu-btn":"_onHelpMenuBtnClick","click .status-menu-btn":"_onStatusMenuBtnClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addAppApiCallbacks(),this._addUiModelEventListeners(),this._addKeyEventListener()},render:function(){var t=this._getUserFirstName();return e.View.prototype.render.call(this),this.$el.children().length===0?(this.$el.html(_.template(n)({appName:e.Config.APP_NAME_DC,pdfServices:r.PDF_SERVICES,userName:t,helpMenuTitle:r.HELP})),this._initWrappers()):this.$userName.text(t),this._renderChildViews(),this._positionHelpMenu(),this._positionStatusMenu(),this._updateStatusMenuButton(),this._truncateUserName(),this},_getUserFirstName:function(){var e=this.options.usersMeModel.get("identity"),t;return e&&(t=e.first_name),t||r.ACCOUNT},_initWrappers:function(){this.$body=$("body"),this.$appTitle=this.$(".adc-app-title"),this.$accountMenuBtn=this.$(".account-menu-btn"),this.$helpMenuBtn=this.$(".help-menu-btn"),this.$userName=this.$(".user-name"),this.$accountMenu=this.$(".account-menu"),this.$helpMenu=this.$(".help-menu"),this.$helpMenuTitle=this.$(".help-menu-title"),this.$statusMenuBtn=this.$(".status-menu-btn"),this.$statusMenuBtnIcon=this.$(".status-menu-btn-icon"),this.$statusMenuBtnLabel=this.$(".status-menu-btn-label"),this.$statusMenu=this.$(".status-menu")},_onViewEvent:function(e,n){if(e===t.ViewEvents.STATUS_MENU_CLOSED){this.options.statusMenuUiModel.set("show_menu",!1);return}this.trigger(e,n)},_getStatusTooltip:function(){var e=this.options.statusMenuUiModel.getNetStatus();return e===t.StatusMenuUiModel.STATUS_BUSY?r.SHOW_PROGRESS:r.PROGRESS_COMPLETE},_updateStatusMenuButton:function(){var e=this.$statusMenuBtn,n=this.$statusMenuBtnIcon,r=this.$statusMenuBtnLabel,i=t.StatusMenuUiModel,s=this.options.statusMenuUiModel,o=s.getNetStatus(),u=this._getStatusTooltip();n.removeClass("warning busy selected"),o===i.STATUS_IDLE?e.addClass("hidden"):(o===i.STATUS_BUSY?n.addClass("busy"):o===i.STATUS_WARNING&&n.addClass("warning"),s.get("show_menu")&&n.addClass("selected"),e.removeClass("hidden")),e.attr("title",u),r.text(u)},_truncateUserName:function(){var e=this.$appTitle,t=this.$userName,n;n=this.$el.width()-(e.position().left+e.width())-this.$statusMenuBtn.width()-this.$helpMenuBtn.width()-s.getExtraWidth(this.$userName),n>0&&t.css("max-width",n),o.truncateElementText(t)},_renderChildViews:function(){this._renderAccountMenuView(),this._renderHelpMenuView(),this._renderStatusMenuView()},_renderAccountMenuView:function(){this._renderChildView("_accountMenuView",t.AccountMenuView,this.$accountMenu,{animate:!1})},_renderHelpMenuView:function(){this._renderChildView("_helpMenuView",t.HelpMenuView,this.$helpMenu,{animate:!1})},_renderStatusMenuView:function(){this._renderChildView("_statusMenuView",t.StatusMenuView,this.$statusMenu)},_getSiteCatalystContext:function(){return a.TOP_HEADER},_positionHelpMenu:function(){var e=this.$helpMenuBtn,t=e.position();this._helpMenuView.$el.css("right",this.$el.width()-t.left-s.getFullWidth(e)-5+"px")},_positionStatusMenu:function(){var e=this.$statusMenuBtn,t=e.position();if(u.isElementHidden(e))return;this._statusMenuView.$el.css("right",this.$el.width()-t.left-s.getFullWidth(e)-2+"px")},_showAccountMenu:function(e){var t=this.options,n=this.$accountMenuBtn,r=this._accountMenuView;e?(n.addClass("pressed"),r.open().always(function(){t.pageHeaderUiModel.set("show_account_menu",!1)})):(n.removeClass("pressed"),r.close())},_showHelpMenu:function(e){var t=this.options,n=this.$helpMenuBtn,r=this._helpMenuView;e?(n.addClass("pressed"),r.open().always(function(){t.pageHeaderUiModel.set("show_help_menu",!1)})):(n.removeClass("pressed"),r.close())},_selectFilesTool:function(){var e=this.options.appApi,t=e.pluginsApi;e.dialogApi.closeAllDialogs(),t.callPluginMethodForEachIfEnabled(t.getPluginTypeConfig("account_menu").plugin_ids,"deselectPlugin",undefined,undefined,!0),e.previewApi.closeFullPreview({noHistoryEffect:!0}).then(function(){e.routerApi.navigate("folder/"+encodeURIComponent(e.folderApi.getRootFolderId()),{trigger:!0})})},_navigateToApollo:function(){var t;e.Features.isFeatureEnabled("redirect_to_apollo")?(t=e.Features.getFeature("apollo_url"),t?window.location=t:LOG("AcApp.PageHeaderView._navigateToApollo could not get apollo_url")):this._selectFilesTool()},_onAdcLogoClick:function(t){this._logSiteCatalystEvent([a.ACOM_TREFOIL,a.CLICKED]),!i.isCEF()&&t.shiftKey&&e.Features.isFeatureEnabled("no_collection_item_checkbox")&&this.options.appApi.routerApi.hasQueryParam("no_collection_item_checkbox","1")?this.options.appApi.selectionApi.selectFiles("home",{dialog:{singleFileSelection:!0},plugin:{filter:{extensions:[".pdf"]}}}).done(function(e){LOG("AcApp.PageHeaderView._onAdcLogoClick localFiles: "+e.localFiles.length+" uploadedFiles: "+_.keys(e.uploadedFileAttrs).length)}):this._navigateToApollo()},_onAdcAppNameClick:function(){this._logSiteCatalystEvent([a.A_DOT_COM,a.CLICKED]),this._navigateToApollo()},_onAdcAppNameKeyDown:function(e){return e.which===13||e.which===32?(this._consumeEvent(e),$(e.target).click(),!0):!1},_onKeyDown:function(e){var t=$(e.target),n=!1;return u.descendantHasFocus(this.$el)?(t.is(this.$accountMenuBtn)?n=this._onAccountMenuBtnKeyDown(e):t.is(this.$helpMenuBtn)?n=this._onHelpMenuBtnKeyDown(e):t.is(this.$statusMenuBtn)?n=this._onStatusMenuBtnKeyDown(e):this.$(".adc-app-name").is(t)&&(n=this._onAdcAppNameKeyDown(e)),n):n},_onMenuBtnKeyDown:function(e,t){var n=e.which,r=e.target,i=!1;switch(n){case 32:case 38:case 40:this._consumeEvent(e);if(n===38&&t||n!==38&&!t)r.click(),i=!0}return i},_onAccountMenuBtnClick:function(){this._logSiteCatalystEvent([a.USER_ACCOUNT_MENU,a.CLICKED]),this._triggerViewEvent(t.ViewEvents.ACCOUNT_MENU_BTN_CLICK)},_onAccountMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this.options.pageHeaderUiModel.get("show_account_menu"))},_onHelpMenuBtnClick:function(){this._logSiteCatalystEvent([a.HELP,a.CLICKED]),this._triggerViewEvent(t.ViewEvents.HELP_MENU_BTN_CLICK)},_onHelpMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this.options.pageHeaderUiModel.get("show_help_menu"))},_onStatusMenuBtnClick:function(){this.options.statusMenuUiModel.set("show_menu",!0)},_onStatusMenuBtnKeyDown:function(e){return this._onMenuBtnKeyDown(e,this.options.statusMenuUiModel.get("show_menu"))},_addAppApiCallbacks:function(){this.options.appApi.windowApi.addWindowResizeCallback(this.render)},_addUiModelEventListeners:function(){var e=this.options,t=e.fullOverlayUiModel,n=e.pageHeaderUiModel,r=e.statusMenuUiModel,i=e.usersMeModel;this.listenTo(n,"change:show_account_menu",this._onShowAccountMenuChange).listenTo(n,"change:show_help_menu",this._onShowHelpMenuChange).listenTo(i,"change:identity",this._onIdentityChange).listenTo(r,"change:net_status",this._onNetStatusChange).listenTo(r,"change:show_menu",this._onShowStatusMenuChange).listenTo(t,"change:show_overlay",this._onShowOverlayChange)},_onShowAccountMenuChange:function(e,t){this._showAccountMenu(t)},_onShowHelpMenuChange:function(e,t){this._showHelpMenu(t)},_onIdentityChange:function(){this.render()},_onNetStatusChange:function(){this._updateStatusMenuButton()},_onShowStatusMenuChange:function(e,t){var n=this._statusMenuView,r=this.options.statusMenuUiModel;t?n.isMenuOpen()||n.open().always(function(){r.set("show_menu",!1)}):n.close(),this.render()},_onShowOverlayChange:function(e,t){var n=this.$statusMenuBtn;t?n.addClass("disabled").attr("disabled","disabled"):n.removeClass("disabled").removeAttr("disabled")}}),t.PageHeaderView}),define("app/dev/templates/tools-template",[],function(){return'<div class="tools-navigation"        role="navigation" aria-labelledby="adc-app-name">    <div class="toolbar"         role="toolbar" aria-labelledby="adc-app-name">        <div class="toolbar-selection-pointer"></div>    </div></div><div class="tools-content"></div> <div class="full-preview unselectable"></div><div class="full-overlay unselectable ui-theme theme-container"></div>'}),define("app/dev/views/toolbar-view",["core/ac-core","app/ac-app","core/templates/toolbar-item-template","core/utils/css-util","core/utils/view-util","core/utils/sc-analytics","core/views/plugins-selector-view"],function(e,t,n,r,i,s){t.ToolbarView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this),this._addAppApiCallbacks(),this._addUiModelEventListeners()},render:function(){e.PluginsSelectorView.prototype.render.call(this),r.fitInOneRow(this.$selectors,this.$labels,{prefFontSize:16,minFontSize:12,prefLrPadding:12}),this._positionPointer()},_getSelectorTemplate:function(){return n},_getSelectorViewEvent:function(){return t.ViewEvents.TOOLBAR_ITEM_CLICK},_getSiteCatalystContext:function(){return s.TOOLS},_initWrappers:function(){e.PluginsSelectorView.prototype._initWrappers.call(this),this.$labels=this.$(".toolbar-item-label"),this.$pointer=this.$(".toolbar-selection-pointer"),this.$toolsContent=this.$el.parent().find(".tools-content")},_adjustItemLabelFontSize:function(){function h(){o.css("font-size",u+"px"),o.css("padding","0 "+l+"px")}var e=this.$el,t=this.$selectors,n=t.last(),s=n.position(),o=this.$labels,u=16,a=12,f=!1,l=12,c;if(i.isElementHidden(e))return;h();while(s){if(s.top===0)break;u-=1,l-=1,h(),s=n.position();if(u<=a){f=!0;break}}f&&s.top>0?c=e.width()/t.length-r.getExtraWidth(t.eq(0)):c="none",t.css("max-width",c)},_positionPointer:function(){var e=this._getSelectedSelectorElement(),t,n=this.$pointer,i;if(e){if(!e.is(":visible"))return;n.width(e.find(".toolbar-item-label").width()),i=r.getFullWidth(e),t=e.position(),n.show().css("left",t.left+1+(i-n.width())/2+"px")}else n.hide()},_addAppApiCallbacks:function(){this.options.appApi.windowApi.addWindowResizeCallback(this.render)},_addUiModelEventListeners:function(){this.listenTo(this.options.toolsUiModel,"change:plugins",this.render)}})}),define("app/dev/templates/tool-content-template",[],function(){return'<div class="tool-content plugin-content ui-theme theme-container"></div>'}),define("app/dev/views/tools-content-view",["core/ac-core","app/ac-app","app/templates/tool-content-template","core/views/plugins-content-view"],function(e,t,n){t.ToolsContentView=e.PluginsContentView.extend({_getContentTemplate:function(){return n}})}),define("app/dev/views/full-overlay-view",["core/ac-core","app/ac-app","core/views/view"],function(e,t){t.FullOverlayView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){e.View.prototype.render.call(this),this.options.fullOverlayUiModel.set("overlay_element",this.$el)},_addUiModelEventListeners:function(){this.listenTo(this.options.fullOverlayUiModel,"change:show_overlay",this._onShowOverlayChange)},_onShowOverlayChange:function(e,t){var n=this.$el;t?n.addClass("shown"):n.removeClass("shown")}})}),define("app/dev/views/tools-view",["core/ac-core","app/ac-app","core/utils/util","app/templates/tools-template","core/views/view","app/views/toolbar-view","app/views/tools-content-view","app/views/full-overlay-view"],function(e,t,n,r){t.ToolsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners(),this._addAppApiCallbacks()},render:function(){var t=this.$el;e.View.prototype.render.call(this),t.children().length===0&&(t.html(_.template(r)()),this._initWrappers()),this._renderChildViews()},_initWrappers:function(){this.$navigation=this.$(".tools-navigation"),this.$toolbar=this.$(".toolbar"),this.$toolsContent=this.$(".tools-content"),this.$fullOverlay=this.$(".full-overlay").first()},_renderChildViews:function(){var e=_.extend({},this.options,{pluginsUiModel:this.options.toolsUiModel});this._renderChildView("_toolsContentView",t.ToolsContentView,this.$toolsContent,e),this._renderChildView("_toolbarView",t.ToolbarView,this.$toolbar,e),e.noToolbar&&(this.$toolsContent.offset({top:this.$toolbar.offset().top}),this.$toolbar.hide()),this._renderChildView("_fullOverlayView",t.FullOverlayView,this.$fullOverlay,e)},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.toolsUiModel,"change:selected_plugin_id",this._onSelectedPluginIdChange),this.listenTo(e.fullOverlayUiModel,"change:show_overlay",this._onShowOverlayChange)},_onSelectedPluginIdChange:function(){this.render()},_addAppApiCallbacks:function(){this.options.appApi.previewApi.addItemModelChangeCallback(this._onFullPreviewModelChange)},_onFullPreviewModelChange:function(e){this._toggleOverlay(!!e)},_onShowOverlayChange:function(e,t){this._toggleOverlay(t)},_toggleOverlay:function(e){var t=this.$navigation.add(this.$toolsContent),r="hidden";n.isCEF()?this._toolbarView.render():e?t.addClass(r).attr("aria-hidden",!0):(t.removeClass(r).removeAttr("aria-hidden"),this._toolbarView.render())}})}),define("app/dev/views/acrobat-footer-view",["core/ac-core","files/ac-files","app/ac-app","files/templates/acrobat-footer-template","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/utils/view-util","core/views/view"],function(e,t,n,r,i,s,o){var u='<option class="acrobat-file-filter-menu-item">    <%= display %></option>';n.AcrobatFooterView=e.View.extend({events:{"change .acrobat-file-filter":"_onFileFilterChange","click  .acrobat-open-selected":"_onOpenSelectedClick","click  .acrobat-cancel":"_onCancelClick"},initialize:function(){var t=$("body");e.View.prototype.initialize.call(this),this._template=_.template(r),t.addClass("acrobat"),this._filterMenuItemTemplate=_.template(u),t.on("keydown",this._onBodyKeyDown),this._addAppApiCallbacks()},render:function(){e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({show:s.SHOW,cancel:i.CANCEL})),this._initWrappers(),this._renderFilterMenu()),this._updateControls(),this._updateFilterMenu()},_initWrappers:function(){this.$fileFilterMenu=this.$(".acrobat-file-filter"),this.$openSelectedBtn=this.$(".acrobat-open-selected"),this.$cancelBtn=this.$(".acrobat-cancel")},_renderFilterMenu:function(){var e,t,n,r;e=this.options.acrobatUiModel.get("file_filters"),t=this.$fileFilterMenu,r=this._filterMenuItemTemplate,_.each(e,function(e){t.append(r({display:e.display})),n=t.children().last(),n.attr("value",e.extensions)})},_updateFilterMenu:function(){var e,t;e=this.options.acrobatUiModel.get("selected_filter_index"),t=this.$fileFilterMenu.children(),t.removeAttr("selected"),t.eq(e).attr("selected","selected")},_updateControls:function(){var e=this.options,t=this.$openSelectedBtn,n=e.appApi.selectionApi.getSelectedItemModels(),r=n.length;e.acrobatUiModel.isFolderSelectionMode()?(t.attr("value",r>0?s.OPEN_SELECTED:s.SAVE),o.enableInput(t,!0)):(t.attr("value",s.OPEN_SELECTED),o.enableInput(t,r>0))},_onFileFilterChange:function(e){this._triggerViewEvent(n.ViewEvents.ACROBAT_SELECT_FILTER,{filterIndex:e.target.selectedIndex})},_onOpenSelectedClick:function(){var e=this.options,r=e.appApi,i=r.selectionApi,s,o,u;s=i.getSelectedItemModels();if(e.acrobatUiModel.isFolderSelectionMode()&&(!s||s.length===0)){this._triggerViewEvent(n.ViewEvents.ACROBAT_OPEN,{ids:[e.folderApi.getCurrentFolderId()]});return}if(!s)return;o=[],_.each(s,function(e){o.push(e.id);if(!u&&e.isFolder())return u=e,!1}),u?this._triggerViewEvent(t.ViewEvents.NAVIGATE_TO_FOLDER,{id:u.get("id")}):this._triggerViewEvent(n.ViewEvents.ACROBAT_OPEN,{ids:o})},_onCancelClick:function(){this._triggerViewEvent(n.ViewEvents.ACROBAT_CLOSE)},_onBodyKeyDown:function(e){var t=e.which;if(o.isElementHidden(this.$el))return;t===13?this._onOpenSelectedClick():t===27&&this._onCancelClick()},_addAppApiCallbacks:function(){this.options.appApi.selectionApi.addSelectedItemsModelsChangeCallback(this._onSelectionChange)},_onSelectionChange:function(){this._updateControls()}})}),define("app/dev/views/modal-mask-view",["core/ac-core","app/ac-app","core/utils/util","core/views/view"],function(e,t,n){t.ModalMaskView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),this._updateModal(),this},_updateModal:function(){var e=this.$el,t=this.options,r=t.appApi,i=t.modalMaskUiModel,s=r.selectionApi;if(!e)return;r.displayApi.isDebugLogging()&&LOG("AcApp.ModalMaskView._updateModal modal: "+i.get("modal")+", modal_ajax: "+i.get("modal_ajax")+", modal_transparent: "+i.get("modal_transparent")+", modal_ref_count: "+i.get("modal_ref_count")),i.get("modal")?(e.not(".shown").addClass("shown").prevAll().each(function(e,t){var n=$(t),r=n.data("ariaHidden"),i=n.attr("aria-hidden");i!==undefined&&r===undefined&&n.data("ariaHidden",i),(!i||i==="false")&&n.attr("aria-hidden","true")}),i.get("modal_ajax")&&(!n.isCEF()||!s.isRunningInFileSelection())?e.addClass("ajax"):e.removeClass("ajax"),i.get("modal_transparent")&&(!r.dialogApi.isDialogOpen()||s.isRunningInFileSelection())?e.addClass("transparent"):e.removeClass("transparent")):i.get("modal_ref_count")===0&&(e.filter(".shown").prevAll().each(function(e,t){var n=$(t),r=n.data("ariaHidden");r!==undefined?n.attr("aria-hidden",r).removeData("ariaHidden"):n.removeAttr("aria-hidden")}),e.removeClass("shown ajax transparent"))},_addUiModelEventListeners:function(){var e=this.options.modalMaskUiModel;e.on("change",_.debounce(_.bind(function(){this._onModalChange()},this),e.get("refresh_wait")))},_onModalChange:function(){this._updateModal()}})}),define("app/dev/views/content-page-view",["core/ac-core","app/ac-app","app/templates/content-page-template","app/views/page-header-view","app/views/tools-view","app/views/acrobat-footer-view","app/views/modal-mask-view"],function(e,t,n){t.ContentPageView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$header=this.$(".page-header"),this.$tools=this.$(".tools"),this.$fullPreview=this.$(".page-body.full-preview"),this.$acrobatFooter=this.$(".acrobat-footer"),this.$modalMask=$("#modal-mask")},_renderChildViews:function(){this._renderPageHeaderView(),this._renderToolsView(),this._renderAcrobatFooterView(),this._renderModalMaskView()},_renderPageHeaderView:function(){this._renderChildView("_pageHeaderView",t.PageHeaderView,this.$header)},_renderToolsView:function(){this._renderChildView("_toolsView",t.ToolsView,this.$tools)},_renderAcrobatFooterView:function(){this.options.acrobatUiModel.get("is_in_acrobat")&&this._renderChildView("_acrobatFooterView",t.AcrobatFooterView,this.$acrobatFooter)},_renderModalMaskView:function(){this._renderChildView("_modalMaskView",t.ModalMaskView,this.$modalMask)}})}),define("app/dev/templates/rhp-content-page-template",[],function(){return'<div class="rhp-main-container ui-theme theme-container"></div>'}),define("app/dev/templates/rhp-container-template",[],function(){return'<div class="rhp-container-content"></div>'}),define("app/dev/views/rhp-container-view",["core/ac-core","app/ac-app","files/ac-files","app/templates/rhp-container-template","core/views/view"],function(e,t,n,r){t.RHPContainerView=e.View.extend({events:{},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(r)},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template({})),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$pluginsContent=this.$(".rhp-container-content")},_renderChildViews:function(){this._renderChildView("_pluginsContentView",n.FullPreviewPluginsContentView,this.$pluginsContent,_.extend(this.options,{pluginsUiModel:this.options.fullPreviewPluginsUiModel}))}})}),define("app/dev/views/rhp-content-page-view",["core/ac-core","app/ac-app","app/templates/rhp-content-page-template","app/views/rhp-container-view"],function(e,t,n){t.RHPContentPageView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n)},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$rhpContainer=this.$(".rhp-main-container"),$("body").css("overflow","hidden")},_renderChildViews:function(){this.$rhpContainer.show(),this._renderRHPContainerView()},_renderRHPContainerView:function(){this._renderChildView("_rhpContainerView",t.RHPContainerView,this.$rhpContainer)}})}),define("app/dev/templates/notification-content-page-template",[],function(){return'<div class="notification-content-container ui-theme theme-container"><div class="notification-container"><div class="notification-error-view"></div></div><div class="notification-remove-history"><button class="notification-remove-history-button theme-hyperlink" tabindex="0"><%= remove_history %></button></div></div>'}),define("app/dev/templates/notification-error-view-template",[],function(){return'<div class="error-view-tooltip-nub"></div><div class="error-view-text"><div class="error-title"><%= title %></div><div class="error-description"><%= description %></div><div class="error-retry"><%= retry %></div></div>'}),define("app/dev/views/notification-error-view",["core/ac-core","app/templates/notification-error-view-template","i18n!core/nls/ui-strings","core/views/view"],function(e,t,n){var r=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addUiModelEventListeners(),this.render()},events:{mouseleave:"_startMouseLeaveTimer",mouseenter:"_clearMouseLeaveTimer","click .error-retry":"_onRetryClick"},render:function(){return e.View.prototype.render.call(this),this.$el.html(_.template(t)({title:"",description:"",retry:n.NOTIFICATION_RETRY})),this._initWrappers(),this},show:function(e,t){var n=e,r="",i=!1,s;try{s=JSON.parse(e)}catch(o){}s&&(n=s.errorTitle,r=s.errorBody,i=s.showRetry),this.$errorTitle.text(n),this.$errorDesc.text(r),this.$el.show(),i?this.$retry.show():this.$retry.hide(),this.$el.css("top",t.offset().top+15),this.$errorTitle.offset().top+this.$errorTitle.height()+this.$errorDesc.height()>this.$notificationParent.height()&&this.$notificationParent.height(this.$notificationParent.height()+this.$errorTitle.offset().top+this.$errorTitle.height()+this.$errorDesc.height()+10-this.$notificationParent.height()),this.options.notificationContainerUiModel.set("hide_error_msg",!1)},close:function(){this.$errorTitle.text(""),this.$errorDesc.text(""),this.notificationView=null,this.$el.hide(),this.$notificationParent.height("auto")},_initWrappers:function(){this.$errorTitle=this.$(".error-title"),this.$errorDesc=this.$(".error-description"),this.$retry=this.$(".error-retry"),this.$notificationParent=$(".notification-content-container")},_startMouseLeaveTimer:function(){var e=this.options.notificationContainerUiModel;this._clearMouseLeaveTimer(),e.set("mouse_leave_timer",setTimeout(_.bind(function(){e.unset("active_error_msg"),this.close()},this),e.get("mouse_leave_timeout")))},_clearMouseLeaveTimer:function(){var e=this.options.notificationContainerUiModel,t=e.get("mouse_leave_timer");t&&(clearTimeout(t),e.unset("mouse_leave_timer"))},_onRetryClick:function(e){this._consumeEvent(e),this.notificationView.retryDownload(),this.options.notificationContainerUiModel.unset("active_error_msg"),this.close()},_onActiveErrorChange:function(e,t){if(t&&t.error&&t.error.length){var n=t.error,r=t.elem;this.notificationView=t.view,this.show(n,r)}},_onHideErrorMsgChange:function(e,t){t&&this._startMouseLeaveTimer()},_addUiModelEventListeners:function(){this.listenTo(this.options.notificationContainerUiModel,"change:active_error_msg",this._onActiveErrorChange),this.listenTo(this.options.notificationContainerUiModel,"change:hide_error_msg",this._onHideErrorMsgChange)}});return r}),define("app/dev/templates/notification-subcontainer-template",[],function(){return'<div class="notification-sub-container"><div class="title theme-text"><%= title %></div><div class="notification-view-container"></div><input type="button" class="notification-download-all-link button-light-blue-small theme-hoverable" title="<%= download %>" value="<%= download %>"/></div>'}),define("app/dev/templates/notification-template",[],function(){return'<div class="notification-view">       <div class="notification-file-name theme-text hide"><%= filename %></div>       <button class="notification-download-link theme-text hide"><%= download %></button>       <div class="notification-error-msg theme-text hide"><%= error %></div>       <div class="progress-view">           <div class="progress-upload-bar">               <div class="progress-file-name upload"><%= filename %></div>               <div class="progress-state"><%= progress_state %></div>               <div class="progress-meter"></div>               <div class="cancel-upload core-remove-x" role="button" tabindex="0"></div>           </div>           <div class="progress-busy-bar hide">               <div class="progress-file-name busy"><%= filename %></div>               <div class="progress-state"><%= progress_state %></div>           </div>       </div>   </div>'}),define("app/dev/views/notification-view",["core/ac-core","app/ac-app","core/utils/util","core/utils/truncate","app/templates/notification-template","i18n!core/nls/ui-strings","core/models/rna/rna-notification-model","core/utils/sc-analytics","core/views/view"],function(e,t,n,r,i,s,o,u){var a=15;t.NotificationView=e.View.extend({initialize:function(t,n){e.View.prototype.initialize.call(this),this._template=_.template(i),this.options=n},events:{"click .notification-view":"_onNotificationViewClick","keydown .notification-view":"_onNotificationViewKeydown","click .cancel-upload":"_onCancelUploadClick","keydown .cancel-upload":"_onNotificationViewKeydown","mouseenter .notification-error-msg":"_onErrorMouseEnter","mouseleave .notification-error-msg":"_onErrorMouseLeave","mouseenter .notification-view":"_onNotificationViewEnter","focusin .notification-view":"_onNotificationViewEnter","mouseleave .notification-view":"_onNotificationViewLeave","focusout .notification-view":"_onNotificationViewLeave"},_onNotificationViewClick:function(e){var t=this.model.get("state");t===o.NOTIFICATION_STATES.DOWNLOADED&&this.fileExtn.toLowerCase()!=="pdf"?this._onShowInFolderClick(e):t===o.NOTIFICATION_STATES.COMPLETED?this._onDownloadClick(e):t===o.NOTIFICATION_STATES.DONE&&this._consumeEvent(e)},_onNotificationViewKeydown:function(e){if(e.which===13||e.which===32)this._consumeEvent(e),$(e.target).click()},_logAnalytics:function(e){if(this.siteCatalystName){var t=[u.TOOLS,this.siteCatalystName,u.PROGRESS_BAR];this.options.appApi.siteCatalystApi.logScEvent(t.concat(e))}},_onDownloadClick:function(e){e&&this._consumeEvent(e),this._logAnalytics([u.DOWNLOAD_CLICK,u.SAVE_AS,u.CLICKED]);var t={fileName:this.convertedFileName,fileExtension:this.fileExtn,showCustomSaveDialog:!0,allowNewFolder:!0},n=_.extend(this.options,{assetId:this.outputID});this.fileExtn.toLowerCase()==="pdf"?(n=_.extend(n,{fileName:""}),this._downloadFileInternal(n)):this.options.appApi.rnaApi.done(_.bind(function(e){e.getFileSaveAsLocation(t).then(_.bind(function(e){console.log(e),e.destFileSys=="BlueHeronFS"?(n=_.extend(n,{fileName:""}),this._downloadFileInternal(n,!1,!0,e.destFileName,e.destFilePath)):(n=_.extend(n,{fileObj:e.destFileProxyObj}),this._downloadFileInternal(n,e.isNative,!1,e.destFileName))},this),_.bind(function(e){if(e!==7){var t={errorTitle:s.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!0};this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.FAILED,error:JSON.stringify(t)})}else this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.COMPLETED})},this))},this))},_downloadFileInternal:function(t,n,r,i,u){var a=e.opFactory.create("DownloadingFileOp",t).run();a[1].done(_.bind(function(e){e.errorSet||(e.downloadedFileName?this.downloadedFileName=e.downloadedFileName:this.downloadedFileName=i,this.model.invoke("setProperty",{operationType:o.NOTIFICATION_OPERATIONS.DOWNLOAD,state:o.NOTIFICATION_STATES.IN_PROGRESS}))},this)),a[0].then(_.bind(function(a){this.downloadedFile=a.downloadedFile;var f={},l=this.downloadClickAction||o.DOWNLOAD_LINK_CLICK_ACTION.SAVE_FILE,c=n?o.NOTIFICATION_STATES.DOWNLOADED:o.NOTIFICATION_STATES.DONE,h=this.fileExtn.toLowerCase()==="pdf"?o.NOTIFICATION_STATES.COMPLETED:c;this.downloadedFile||(h=o.NOTIFICATION_STATES.COMPLETED),a.downloadedFileSys&&(f.downloadedFileSys=a.downloadedFileSys),a.downloadedFilePath&&(f.downloadedFilePath=a.downloadedFilePath),this._updateUserData(f),r?this._uploadToBH(this.downloadedFile,u,i).then(_.bind(function(){this.model.invoke("setProperty",{operationType:"",state:h})},this),_.bind(function(){var e={errorTitle:s.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!0};this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.FAILED,error:JSON.stringify(e)})},this)):(this.model.invoke("setProperty",{operationType:"",state:h}),this.downloadedFile&&l===o.DOWNLOAD_LINK_CLICK_ACTION.OPEN_FILE&&this.fileExtn.toLowerCase()==="pdf"&&(t=_.extend(this.options,{localFileModel:this.downloadedFile,displayName:this.convertedFileName,needSave:!0,updateRecentFilesAndFolders:!1}),e.opFactory.create("OpeningDocInReaderOp",t).run()))},this),_.bind(function(e){if(e!==7){var t={errorTitle:s.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!0};this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.FAILED,error:JSON.stringify(t)})}else this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.COMPLETED})},this))},_uploadToBH:function(t,r,i){function s(e,t){n.isIE9orBelow()?this.model.set({progress:-1}):this.model.set({progress:parseInt(e/t*100,10)})}var o=_.extend(this.options,{rnaFile:t,uploadType:"managed",parentID:r,fileName:i,onDuplicateName:"auto_rename",notificationObj:this.model.get("notification"),progressCB:_.bind(s,this),ignoreContentType:!0,showBezel:!1});return e.opFactory.create("UploadingFileOp",o).run()},retryDownload:function(){this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.COMPLETED,error:""}).done(_.bind(function(){this._onNotificationViewClick()},this))},_onErrorMouseEnter:function(){this.options.notificationContainerUiModel.set("active_error_msg",{error:this.model.get("error"),elem:this.$el,view:this}),this._logAnalytics([u.ERROR,u.HOVER_OVER,u.SHOWN])},_onErrorMouseLeave:function(){this.options.notificationContainerUiModel.set("hide_error_msg",!0)},_onNotificationViewEnter:function(){var e=this.model.get("state"),t=this.$notificationView.width(),n=this.$downloadLink.width()+a;if(e===o.NOTIFICATION_STATES.COMPLETED||e===o.NOTIFICATION_STATES.DOWNLOADED)this.$notificationView.addClass("hover"),e===o.NOTIFICATION_STATES.COMPLETED&&(this.$downloadLink.text(this.fileExtn.toLowerCase()==="pdf"?s.OPEN:s.SAVE_AS),n=this.$downloadLink.width()+a,r.truncateElementText(this.$fileName,t-n))},_onNotificationViewLeave:function(){var e=this.model.get("state"),t=this.$notificationView.width(),n=this.$downloadLink.width()+a;if(e===o.NOTIFICATION_STATES.COMPLETED||e===o.NOTIFICATION_STATES.DOWNLOADED)this.$notificationView.removeClass("hover"),e===o.NOTIFICATION_STATES.COMPLETED&&(this.$downloadLink.text(this.onNotificationLeaveText),n=this.$downloadLink.width()+a,r.truncateElementText(this.$fileName,t-n))},_updateStatus:function(){var e=this._getState();this.options.notificationContainerUiModel.setStatusOfNotification(this.notificationID,e,this.category)},_updateUserData:function(e){var t=this.model.get("userData"),n={},r={};try{n=JSON.parse(t)}catch(i){}r=$.extend(!0,{},n,e),this.model.invoke("setProperty",{userData:JSON.stringify(r)})},_onCancelUploadClick:function(){this._logAnalytics([u.UPLOAD_CANCELLED,u.CLICKED]),this.model.invoke("customNotification",{eventName:"stopFileUpload",eventData:""})},_onShowInFolderClick:function(e){var t;e&&this._consumeEvent(e),this._logAnalytics([u.DOWNLOAD_COMPLETE,u.SHOW_IN_FOLDER,u.CLICKED]),this.downloadedFile?(t={fileObj:this.downloadedFile},this.options.appApi.rnaApi.done(function(e){e.fileApi({methodName:"showFileInFinderOrExplorer",methodArgs:t})})):this.downloadedFileSys&&this.downloadedFilePath?(t={fileSys:this.downloadedFileSys,filePath:this.downloadedFilePath},this.options.appApi.rnaApi.done(function(e){e.fileApi({methodName:"showFileInFinderOrExplorer",methodArgs:t})})):this.model.invoke("setProperty",{operationType:"",state:o.NOTIFICATION_STATES.COMPLETED})},render:function(){e.View.prototype.render.call(this);var t=this.model,r=t.get("progressPercentage"),o=t.get("description"),u=t.get("userData"),a=t.get("operationType"),f=t.get("state"),l,c=t.get("error"),h,p="",d,v;this.notificationID=t.get("notificationID"),this.category=o;try{l=JSON.parse(u)}catch(m){}return l&&(p=l.customMessage,this.fileName=l.fileName||"",this.fileExtn=l.fileExtn||"",this.siteCatalystName=l.siteCatalystName||"",this.convertedFileName="",this.fileName&&(h=n.getExtension(this.fileName),h?this.convertedFileName=this.fileName.slice(0,-h.length)+this.fileExtn:this.convertedFileName=this.fileName+"."+this.fileExtn),l.outputID&&(this.outputID=l.outputID),this.downloadClickAction=l.downloadClickAction,this.canUploadBeCancelled=l.canUploadBeCancelled),this.onNotificationLeaveText=this.fileExtn.toLowerCase()==="pdf"?s.OPEN:s.SAVE_AS,this.$el.html(_.template(i)({progress:r,filename:p||this.fileName,download:this.onNotificationLeaveText,progress_state:s.NOTIFICATION_UPLOADING,error:s.NOTIFICATION_CONVERSION_FAILURE})),this._initWrappers(),this._updateStatus(),this.canUploadBeCancelled||this.$cancelUpload.hide(),this._addEventListeners(),this._onProgressChange(t,r),this._onStatusChange(t,f),this._onOperationChange(t,a),this._onErrorChange(t,c),this._onUserDataChange(t,u),this},truncateTextToFit:function(){var e=this.$notificationView.width(),t=this._getProgressStateWidth()+30,n=this.$downloadLink.width()+a,i=this.$errorMsg.width()+a;r.truncateElementText(this.$progressFileNameUpload,e-t),r.truncateElementText(this.$progressFileNameBusy,e-t),r.truncateElementText(this.$fileName,e-Math.max(n,i))},close:function(){this.options.notificationContainerUiModel.removeNotification(this.notificationID,this.category),this.remove()},refresh:function(){this.render()},_initWrappers:function(){this.$progressMeter=this.$(".progress-meter"),this.$progressView=this.$(".progress-view"),this.$progressUploadBar=this.$(".progress-upload-bar"),this.$progressBusyBar=this.$(".progress-busy-bar"),this.$progressState=this.$(".progress-state"),this.$downloadLink=this.$(".notification-download-link"),this.$errorMsg=this.$(".notification-error-msg"),this.$fileName=this.$(".notification-file-name"),this.$progressFileNameUpload=this.$(".progress-file-name.upload"),this.$progressFileNameBusy=this.$(".progress-file-name.busy"),this.$cancelUpload=this.$(".cancel-upload"),this.$notificationView=this.$(".notification-view")},_setProgress:function(e){if(this.$progressMeter.length){var t=this.$(".progress-upload-bar").width()/100;this.$progressMeter.width(t*e)}},_onProgressChange:function(e,t){this._setProgress(t)},_onStatusChange:function(e,t){var n=this.$notificationView.width(),i;t===o.NOTIFICATION_STATES.COMPLETED&&(this.$progressView.hide(),this.$downloadLink.show(),this.$downloadLink.text(this.onNotificationLeaveText),this.$fileName.text(this.convertedFileName),i=this.$downloadLink.width()+a,r.truncateElementText(this.$fileName,n-i),this.$fileName.show(),this._logAnalytics([u.COMPLETE,u.SHOWN])),t===o.NOTIFICATION_STATES.DOWNLOADED&&(this.$progressView.hide(),this.$downloadLink.show(),this.$fileName.text(this.downloadedFileName||this.convertedFileName),this.fileExtn.toLowerCase()!=="pdf"&&this.$downloadLink.text(s.SHOW_IN_FOLDER),i=this.$downloadLink.width()+a,r.truncateElementText(this.$fileName,n-i),this.$fileName.show(),this._logAnalytics([u.DOWNLOAD_COMPLETE,u.SHOWN])),t===o.NOTIFICATION_STATES.DONE&&(this.$progressView.hide(),this.$downloadLink.show(),this.$notificationView.removeClass("hover"),this.$fileName.text(this.downloadedFileName||this.convertedFileName),this.fileExtn.toLowerCase()!=="pdf"&&(this.$downloadLink.text(s.SAVED),this.$downloadLink.css("text-decoration","none"),this.$downloadLink.css("cursor","default")),i=this.$downloadLink.width()+a,r.truncateElementText(this.$fileName,n-i),this.$fileName.show(),this._logAnalytics([u.DOWNLOAD_COMPLETE,u.SHOWN])),t===o.NOTIFICATION_STATES.IN_PROGRESS&&(this.$progressView.show(),this.$notificationView.removeClass("hover")),t===o.NOTIFICATION_STATES.FAILED&&(this.$progressView.hide(),this.$downloadLink.hide(),this.$fileName.show(),this.$notificationView.removeClass("hover"),this._logAnalytics([u.CONVERT_FAILED,u.SHOWN])),this._updateStatus()},_getState:function(){var e=t.NotificationContainerUiModel.STATUS_BUSY,n=this.model.get("state");return n===o.NOTIFICATION_STATES.COMPLETED||n===o.NOTIFICATION_STATES.DONE||n===o.NOTIFICATION_STATES.DOWNLOADED?e=t.NotificationContainerUiModel.STATUS_COMPLETE:n===o.NOTIFICATION_STATES.FAILED&&(e=t.NotificationContainerUiModel.STATUS_WARNING),e},_onOperationChange:function(e,t){var n=this.$notificationView.width(),i;t===o.NOTIFICATION_OPERATIONS.UPLOAD?(i=this._getProgressStateWidth()+30,r.truncateElementText(this.$progressFileNameUpload,n-i),this.$progressUploadBar.show(),this.$fileName.hide(),this.$progressBusyBar.hide(),this._logAnalytics([u.UPLOADING,u.SHOWN])):t===o.NOTIFICATION_OPERATIONS.CONVERT?(this._logAnalytics([u.UPLOAD_COMPLETE,u.SHOWN]),this.$progressState.text(s.NOTIFICATION_CONVERTING),i=this._getProgressStateWidth()+a,this.$progressUploadBar.hide(),this.$fileName.hide(),this.$progressBusyBar.show(),r.truncateElementText(this.$progressFileNameBusy,n-i),this._logAnalytics([u.CONVERTING,u.SHOWN])):t===o.NOTIFICATION_OPERATIONS.DOWNLOAD?(this.$downloadLink.hide(),this.$progressState.text(s.NOTIFICATION_DOWNLOADING),i=this._getProgressStateWidth()+a,this.$progressUploadBar.hide(),this.$fileName.hide(),this.$progressBusyBar.show(),this.$progressFileNameBusy.text(this.downloadedFileName||this.convertedFileName),r.truncateElementText(this.$progressFileNameBusy,n-i),this._logAnalytics([u.DOWNLOADING,u.SHOWN])):t===o.NOTIFICATION_OPERATIONS.PROCESS&&(this.$downloadLink.hide(),this.$progressState.text(s.NOTIFICATION_PROCESSING),i=this._getProgressStateWidth()+a,this.$progressUploadBar.hide(),this.$fileName.hide(),this.$progressBusyBar.show(),this.$progressFileNameBusy.text(this.downloadedFileName||this.convertedFileName),r.truncateElementText(this.$progressFileNameBusy,n-i))},_getProgressStateWidth:function(){var e=$(this.$progressState[0]).width(),t=$(this.$progressState[1]).width();return e&&t?Math.max(e,t):e||t},_onUserDataChange:function(e,t){var n;try{n=JSON.parse(t)}catch(r){}n&&n.outputID&&(this.outputID=n.outputID),n&&n.downloadedFileName&&(this.downloadedFileName=n.downloadedFileName),n&&n.downloadedFileSys&&(this.downloadedFileSys=n.downloadedFileSys),n&&n.downloadedFilePath&&(this.downloadedFilePath=n.downloadedFilePath)},_onErrorChange:function(e,t){var n,i=this.$notificationView.width(),o;try{n=JSON.parse(t)}catch(u){}n&&(n.errorTitle||n.errorBody)?(n.downloadError===!0?this.$errorMsg.text(s.NOTIFICATION_DOWNLOAD_FAILURE):this.$errorMsg.text(s.NOTIFICATION_CONVERSION_FAILURE),o=this.$errorMsg.width()+a,r.truncateElementText(this.$fileName,i-o),this.$progressView.hide(),this.$errorMsg.show(),this.$fileName.show()):this.$errorMsg.hide()},_onShowReadyMapChange:function(e,t){this.model.get("state")===o.NOTIFICATION_STATES.COMPLETED&&(t[this.category]?this.onNotificationLeaveText=s.READY:this.onNotificationLeaveText=this.fileExtn.toLowerCase()==="pdf"?s.OPEN:s.SAVE_AS,this.$downloadLink.text(this.onNotificationLeaveText))},_addEventListeners:function(){this.model.on("change:progressPercentage",this._onProgressChange,this),this.model.on("change:state",this._onStatusChange,this),this.model.on("change:userData",this._onUserDataChange,this),this.model.on("change:operationType",this._onOperationChange,this),this.model.on("change:error",this._onErrorChange,this),this.model.on("remove",this.close,this),this.listenTo(this.options.notificationContainerUiModel,"change:show_ready_map",this._onShowReadyMapChange)}})}),define("app/dev/views/notification-subcontainer-view",["core/ac-core","app/ac-app","app/templates/notification-subcontainer-template","core/models/rna/rna-notification-model","i18n!core/nls/ui-strings","core/utils/sc-analytics","app/views/notification-view","core/views/view"],function(e,t,n,r,i,s){t.NotificationSubcontainerView=e.View.extend({initialize:function(t){e.View.prototype.initialize.call(this),this._template=_.template(n),this.category=t.category,this.siteCatalystName=t.siteCatalystName,this.showDownloadAll=t.showDownloadAll,this.title=t.title,this.notificationCollection=t.collection,this._addEventListeners()},events:{"click .notification-download-all-link":"_onDownloadAllClick"},render:function(){e.View.prototype.render.call(this),this.$el.html(_.template(n)({title:this.title,download:i.DOWNLOAD_ALL})),this._initWrappers();var t=this.options.notificationContainerUiModel;return t.get("show_download_all_by_category")[this.category]&&this.showDownloadAll?this.$downloadAll.show():this.$downloadAll.hide(),this},close:function(){this.remove()},createNotificationView:function(e){var n=new t.NotificationView({model:e},this.options);return this.addChildView(n),this.$notificationViewContainer.append(n.render().el),n.truncateTextToFit(),n},_initWrappers:function(){this.$notificationViewContainer=this.$(".notification-view-container"),this.$downloadAll=this.$(".notification-download-all-link")},_addEventListeners:function(){this.listenTo(this.options.notificationContainerUiModel,"change:show_download_all_by_category",this._onDownloadAllStausChange)},_onDownloadAllStausChange:function(e,t){t[this.category]&&this.showDownloadAll?this.$downloadAll.show():this.$downloadAll.hide()},_getFilteredNotificationCollection:function(){var e=this.category,t=this.notificationCollection.filter(function(t){return t.get("description")===e});return t},_getDownloadAssetIdArray:function(){var e=this._getFilteredNotificationCollection(),t=[];return e.forEach(function(e){var n=e.get("userData"),r=JSON.parse(n);r.outputID&&t.push(r.outputID)},this),t},_onDownloadAllClick:function(t){var n=this._getDownloadAssetIdArray(),i=n.join(";"),o={notificationHeading:this.title},u;this._consumeEvent(t),this.siteCatalystName&&(u=[s.TOOLS,this.siteCatalystName,s.PROGRESS_BAR,s.DOWNLOAD_CLICK,s.ALL_BUTTON,s.CLICKED],this.options.appApi.siteCatalystApi.logScEvent(u)),this.options.appApi.sessionApi.ensureSignedIn().done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(t){o.fileName="binder.zip",o.fileExtn="zip",t.notificationAPI.createNotification({operationType:r.NOTIFICATION_OPERATIONS.PROCESS,state:r.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(o),progress:0,description:this.category}).done(_.bind(function(t){e.opFactory.create("DownloadingZipStartOp",_.extend({},this.options,{id_list:i,numForms:0,fileName:"binder.zip",notificationObj:t})).run().then(_.bind(function(e){this._onDownloadCompletion(t,e)},this),_.bind(function(e){this._onDownloadFailed(t,e)},this))},this))},this))},this))},_onDownloadCompletion:function(e,t){var n=e.get("userData"),i={};try{i=JSON.parse(n)}catch(s){}t.downloadedFileSys&&(i.downloadedFileSys=t.downloadedFileSys),t.downloadedFilePath&&(i.downloadedFilePath=t.downloadedFilePath),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(i),state:r.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,t){if(t!==7){var n={errorTitle:i.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:r.NOTIFICATION_STATES.FAILED,error:JSON.stringify(n)})}}})}),define("app/dev/views/notification-content-page-view",["core/ac-core","app/ac-app","i18n!app/nls/ui-strings","app/templates/notification-content-page-template","app/views/notification-error-view","core/models/rna/rna-notification-model","core/views/view","app/views/notification-subcontainer-view"],function(e,t,n,r,i,s){t.NotificationContentPageView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this.options.appApi.displayApi.applyUIThemeStyles(this.$el).then(_.bind(function(){this.render()},this)),this._template=_.template(r),this.notificationSubContainerMap={},this.options.appApi.rnaApi.done(_.bind(function(e){this.notificationCollection=e.notificationAPI.getNotificationList(),this._addEventListeners()},this)),this.options.appApi.sessionApi.addSignedInChangeCallback(this._onSignedInChange),this._addUiModelEventListeners()},_onSignedInChange:function(e,t){t||this._removeAllNotifications()},_addUiModelEventListeners:function(){var e=this.options,t=e.notificationContainerUiModel;this.listenTo(t,"change:net_status",this._onNetStatusChange)},_onNetStatusChange:function(e,n){n===t.NotificationContainerUiModel.STATUS_COMPLETE?this._showNotificationProgressWidget(!0,"completed"):n===t.NotificationContainerUiModel.STATUS_BUSY?this._showNotificationProgressWidget(!0,"busy"):n===t.NotificationContainerUiModel.STATUS_WARNING?this._showNotificationProgressWidget(!0,"warning"):n===t.NotificationContainerUiModel.STATUS_IDLE&&this._showNotificationProgressWidget(!1,"")},_showNotificationProgressWidget:function(e,t){this.options.appApi.rnaApi.done(_.bind(function(n){n.rnaServicesAPI.showServicesProgressWidget(e,!1,t,!0)},this))},events:{"click .notification-remove-history-button":"_onRemoveHistoryClick","keydown .notification-remove-history-button":"_onRemoveHistoryKeyDown"},render:function(){return e.View.prototype.render.call(this),this.$el.children().length===0&&(this.$el.html(_.template(r)({remove_history:n.REMOVE_HISTORY})),this._initWrappers(),this.notificationCollection&&this._renderChildViews()),this.options.notificationContainerUiModel.get("show_remove_history")===!1?this.$notificationClearButton.hide():this.$notificationClearButton.show(),this},_initWrappers:function(){this.$notificationContainer=this.$(".notification-container"),this.$notificationErrorView=this.$(".notification-error-view"),this.$notificationClearButton=this.$(".notification-remove-history-button")},_renderChildViews:function(){var e=this;this.notificationCollection.each(function(t){e._addNewNotification(t)}),this._renderErrorView()},_renderErrorView:function(){this.errorView=this._renderChildView("_notificationErrorView",i,this.$notificationErrorView,this.options)},_addNewNotification:function(e){var n=e.get("userData"),r;try{r=JSON.parse(n)}catch(i){}var s=r&&r.notificationHeading||"",o=e.get("description"),u=this.notificationSubContainerMap[o],a="",f,l,c=!0;try{r=JSON.parse(n)}catch(i){}r&&(a=r.siteCatalystName||"",r.showDownloadAll===!1&&(c=!1));if(!u){var h=_.extend({title:s,category:o,siteCatalystName:a,showDownloadAll:c,collection:this.notificationCollection},this.options);delete h.el,u=new t.NotificationSubcontainerView(h),this.addChildView(u),this.notificationSubContainerMap[o]=u,this.$notificationContainer.append(u.render().el)}f=u.createNotificationView(e),l=$(f.el).offset().top+this.$notificationContainer.scrollTop(),this.$notificationContainer.animate({scrollTop:l},200)},_addEventListeners:function(){this.listenTo(this.notificationCollection,"add",this._onNotificationAdded),this.listenTo(this.notificationCollection,"remove",this._onNotificationRemoved),this.listenTo(this.options.notificationContainerUiModel,"change:show_remove_history",this.render)},_onNotificationAdded:function(e){this._addNewNotification(e)},_onNotificationRemoved:function(e){var t=e.get("description"),n=this.notificationSubContainerMap[t],r=this.notificationCollection.filter(function(e){return e.get("description")===t});r.length===0&&(n.close(),this.notificationSubContainerMap[t]=null)},_removeIdleNotifications:function(){this.options.appApi.rnaApi.done(_.bind(function(e){this.notificationCollection.each(function(t){t.get("state")!==s.NOTIFICATION_STATES.NOT_STARTED&&t.get("state")!==s.NOTIFICATION_STATES.IN_PROGRESS&&e.notificationAPI.removeNotification(t.get("notificationID"))})},this))},_removeAllNotifications:function(){this.options.appApi.rnaApi.done(_.bind(function(e){this.notificationCollection.each(function(t){e.notificationAPI.removeNotification(t.get("notificationID"))})},this))},_onRemoveHistoryClick:function(){this._removeIdleNotifications()},_onRemoveHistoryKeyDown:function(e){if(e.which===13||e.which===32)this._consumeEvent(e),$(e.target).click()}})}),define("app/dev/templates/file-selection-dlg-template",[],function(){return'<div class="file-selection-dlg generic-dialog" role="dialog">    <div class="file-selection-dlg-header unselectable ui-theme theme-container"         role="heading">        <div class="file-selection-dlg-header-text dialog-title theme-text"            ><%= headerLabel %></div>    </div>    <div class="file-selection-dlg-home-views home-views"></div>    <div class="file-selection-dlg-controls ui-theme theme-container">        <div class="file-selection-dlg-control-buttons">            <input class="file-selection-dlg-cancel-btn                          control-button                          dialog-control-button button-grey ui-theme theme-text"                   type="button"                   id="file-selection-dlg-cancel-btn"                   aria-label="<%= cancel %>"                   value="<%= cancel %>"/>            <input class="file-selection-dlg-continue-btn                          control-button dialog-control-button theme-button theme-button-label                          disabled"                   type="button"                   id="file-selection-dlg-continue-btn"                   aria-label="<%= continueLabel %>"                   value="<%= continueLabel %>"                   disabled="disabled"/>        </div>    </div></div>'}),define("app/dev/templates/files-selection-dlg-home-views-template",[],function(){return'<div class="file-selection-dlg-home-views-selector               home-views-selector ui-theme theme-container" role="menubar"    aria-controls="home-views-content-<%= viewId %>"></div><div class="file-selection-dlg-home-views-content            home-views-content ui-theme theme-container"    id="home-views-content-<%= viewId %>"></div>'}),define("app/dev/views/view-events",["app/ac-app"],function(e){e.ViewEvents={ACCOUNT_MENU_ITEM_CLICK:"app:account-menu-item-click",ACCOUNT_MENU_BTN_CLICK:"app:account-menu-button-click",MANAGE_SUB_CLICK:"app:manage-sub-click",SIGN_OUT_CLICK:"app:sign-out-click",HELP_MENU_BTN_CLICK:"app:help-menu-button-click",ABOUT_CLICK:"app:about-click",SUPPORT_CLICK:"app:support-click",ASK_US_CLICK:"app:ask-us-click",TOOLBAR_ITEM_CLICK:"app:toolbar-item-click",STATUS_MENU_CLOSED:"app:status-menu-closed",ACROBAT_SELECT_FILTER:"app:acrobat-select-filter",ACROBAT_OPEN:"app:acrobat-open",ACROBAT_CLOSE:"app:acrobat-close",FILE_SELECTION_DLG_SELECTOR_CLICK:"app:file-selection-dlg-selector-click",FILE_SELECTION_DLG_SELECTION_CHANGE:"app:file-selection-dlg-selection-change",FILE_SELECTION_DLG_SELECTION_COMMIT:"app:file-selection-dlg-selection-commit",FILE_SAVE_AS_DLG_FILENAME_CHANGE:"app:file-save-as-dlg-filename-change",FILE_SAVE_AS_DLG_CANSAVE_CHANGE:"app:file-save-as-dlg-cansave-change",SETTINGS_DLG_SELECTOR_CLICK:"app:settings-dlg-selector-click"}}),define("app/dev/views/file-selection-dlg-selector-view",["core/ac-core","app/ac-app","core/utils/util","core/views/left-rail-view","app/views/view-events"],function(e,t,n){return t.FileSelectionDlgSelectorView=e.LeftRailView.extend({events:function(){return _.extend({},e.LeftRailView.prototype.events,{click:"_onClick"})},initialize:function(){e.LeftRailView.prototype.initialize.call(this)},_getSelectorClickEvent:function(){return t.ViewEvents.FILE_SELECTION_DLG_SELECTOR_CLICK},_getSelectorDeleteEvent:function(){return undefined},_getSiteCatalystContext:function(){return undefined},_getSelectorViewEvent:function(){return t.ViewEvents.FILE_SELECTION_DLG_SELECTOR_CLICK},_enableEditing:function(){return!1},_onClick:function(e){var t=this.options,r=t.appApi,i;e.target===this.$el.get(0)&&(i=r.pluginsApi.callPluginMethod(t.pluginsUiModel.get("selected_plugin_id"),"hasCollectionItemCheckbox",undefined,!n.isCEF(),!0),i||r.selectionApi.clearSelection())}}),t.FileSelectionDlgSelectorView}),define("app/dev/templates/file-selection-dlg-selector-template",[],function(){return'<div class="home-view-selector plugin-selector">    <div class="home-view-selector-label unselectable"><%= label %>    </div></div>'}),define("app/dev/views/file-selection-dlg-old-selector-view",["core/ac-core","app/ac-app","app/templates/file-selection-dlg-selector-template","core/views/plugins-selector-view","app/views/view-events"],function(e,t,n){t.FileSelectionDlgOldSelectorView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this)},_getSelectorTemplate:function(){return n},_getSelectorViewEvent:function(){return t.ViewEvents.FILE_SELECTION_DLG_SELECTOR_CLICK}})}),define("app/dev/templates/file-selection-dlg-content-template",[],function(){return'<div class="home-view-content plugin-content ui-theme theme-container"></div>'}),define("app/dev/views/file-selection-dlg-content-view",["core/ac-core","app/ac-app","app/templates/file-selection-dlg-content-template","core/views/plugins-content-view"],function(e,t,n){t.FileSelectionDlgContentView=e.PluginsContentView.extend({_getContentTemplate:function(){return n}})}),define("app/dev/views/file-selection-dlg-home-views-view",["core/ac-core","app/ac-app","app/templates/files-selection-dlg-home-views-template","core/utils/file-types","core/utils/sc-analytics","core/utils/util","core/views/view","app/views/file-selection-dlg-selector-view","app/views/file-selection-dlg-old-selector-view","app/views/file-selection-dlg-content-view"],function(e,t,n,r,i,s){var o={},u={},a=!1;t.FileSelectionDlgHomeViewsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners()},render:function(){var t=this.$el;e.View.prototype.render.call(this),t.children().length===0&&(t.html(_.template(n)({viewId:this.options.viewId})),this._initWrappers()),this._renderChildViews()},selectHomeView:function(e,n){var r;return e||(e=this.options,n?(r=e.appApi.pluginsApi.getDefaultPluginId("file_selection_dlg"),this._logSiteCatalystEvent([i.INITIAL_VIEW,e.appApi.pluginsApi.callPluginMethod(r,"getSiteCatalystName",undefined,i.UNKNOWN,!0)])):r=e.fileSelectionDlgHomeViewsUiModel.getSelectedId(),e=_.extend({},e,{pluginId:r})),n=n||{},n.scContext=this._getFullScContext(),s.isCEF()&&this.options.appApi.saveAsApi.isRunningInFileSaveAs()&&this._addHomeViewSaveAsListeners(),t.opFactory.create("SelectingFileSelectionDlgHomeViewOp",e||this.options).run(n).then(_.bind(function(){this._addHomeViewSelectionListeners()},this))},releaseHomeViews:function(){var e=this.options.appApi.pluginsApi;return o={},a=!1,this.options.fileSelectionDlgHomeViewsUiModel.get("plugins").each(function(t){var n=t.get("plugin_api");n&&e.callPluginApiMethod(n,"releasePlugin")}),this},clearSelection:function(e){var t=this.options.appApi.pluginsApi,n,r,i,s,o;return n=this.options.fileSelectionDlgHomeViewsUiModel.get("plugins"),e&&(r=e.except,s=n.get(r),s&&(o=s.cid),i=e.silent),n.each(function(e){var n=e.get("plugin_api");if(e.cid===o)return!0;if(n){var r=t.callPluginApiMethod(n,"getSelectionUiModel");r&&r.clearSelection(i)}}),this},getSelection:function(){var e=this.options,t=e.appApi.pluginsApi,n=[],i=[],s={},o,u,a,f,l;return e.fileSelectionDlgHomeViewsUiModel.get("plugins").each(function(e){a=e.get("plugin_api"),a&&(f=t.callPluginApiMethod(a,"getSelectionUiModel"),f&&(_.each(f.get("selected_local_files"),function(e){_.isArray(e)?i.push(e[0]):r.isFolder(e)||n.push(e)}),_.each(f.get("selected_item_models"),function(e){e.isFile()&&(u=e.id,s[u]=e.attributes)}),f.isSelectionComplete()&&(o=!0),f.getNumSelectedFolders()>0&&(l=!0)))}),{localFiles:n,localFileInputs:i,uploadedFileAttrs:s,isSelectionComplete:o,isFolderInSelection:l}},getSaveAsFilename:function(){return this.options.appApi.saveAsApi.getFilename()},stopListening:function(t,n,r){e.View.prototype.stopListening.call(this,t,n,r),o={},a=!1},_initWrappers:function(){this.$selector=this.$(".home-views-selector"),this.$content=this.$(".home-views-content")},_renderChildViews:function(){var e=_.extend({},this.options,{pluginsUiModel:this.options.fileSelectionDlgHomeViewsUiModel});this._renderChildView("_contentView",t.FileSelectionDlgContentView,this.$content,e),this._renderChildView("_selectorView",t.FileSelectionDlgSelectorView,this.$selector,e)},_addUiModelEventListeners:function(){this.listenTo(this.options.fileSelectionDlgHomeViewsUiModel,"change:selected_plugin_id",this._onSelectedPluginIdChange)},_addHomeViewSelectionListeners:function(){var e=this.options,t=e.appApi.pluginsApi,n,r,i;e.fileSelectionDlgHomeViewsUiModel.get("plugins").each(_.bind(function(e){n=e.get("id"),o[n]||(r=e.get("plugin_api"),r&&(i=t.callPluginApiMethod(r,"getSelectionUiModel"),i&&(u[n]=i,this.listenTo(i,"change:selected_local_files",this._onHomeViewSelectedLocalFilesChange),this.listenTo(i,"change:selected_item_models",this._onHomeViewSelectedItemModelsChange),this.listenTo(i,"change:commit_selection",this._onHomeViewCommitSelectionChange),o[n]=!0)))},this))},_addHomeViewSaveAsListeners:function(){a||(this.listenTo(this.options.saveAsUiModel,"change:filename",this._onHomeViewSaveAsFilenameChange),this.listenTo(this.options.saveAsUiModel,"change:canSave",this._onHomeViewSaveAsCanSaveChange),a=!0)},_onSelectedPluginIdChange:function(){this.render()},_getPluginId:function(e){var t;return _.each(u,function(n,r){n.cid===e.cid&&(t=r)}),t},_clearOthersIfSingle:function(e){var t=this._getPluginId(e);e.get("multiple_selection")||this.clearSelection({except:t,silent:!0})},_onHomeViewSelectedLocalFilesChange:function(e){this._clearOthersIfSingle(e),this._triggerViewEvent(t.ViewEvents.FILE_SELECTION_DLG_SELECTION_CHANGE)},_onHomeViewSelectedItemModelsChange:function(e){this._clearOthersIfSingle(e),this._triggerViewEvent(t.ViewEvents.FILE_SELECTION_DLG_SELECTION_CHANGE)},_onHomeViewCommitSelectionChange:function(e,n){n&&this._triggerViewEvent(t.ViewEvents.FILE_SELECTION_DLG_SELECTION_COMMIT)},_onHomeViewSaveAsFilenameChange:function(){this._triggerViewEvent(t.ViewEvents.FILE_SAVE_AS_DLG_FILENAME_CHANGE)},_onHomeViewSaveAsCanSaveChange:function(){this._triggerViewEvent(t.ViewEvents.FILE_SAVE_AS_DLG_CANSAVE_CHANGE)}})}),define("app/dev/views/file-selection-dlg-view",["core/ac-core","app/ac-app","core/utils/util","app/templates/file-selection-dlg-template","i18n!core/nls/ui-strings","core/utils/css-util","core/utils/view-util","core/utils/string-util","core/utils/sc-analytics","core/views/dialog-view","app/views/file-selection-dlg-home-views-view","app/views/modal-mask-view"],function(e,t,n,r,i,s,o,u,a){t.FileSelectionDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .file-selection-dlg-continue-btn":"_onContinueClick","click .file-selection-dlg-cancel-btn":"_onCancelClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this._setParentScContext(this.options.scContext)},render:function(){return e.DialogView.prototype.render.call(this,!1),this.$el.empty().html(_.template(r)({cancel:i.CANCEL,continueLabel:this._getContinueLabel(),headerLabel:this._getHeaderLabel()})),this._initWrappers(),(!n.isCEF()||!this.options.runningInFileSelection)&&this._center({horizontalOnly:!0}),n.isWindows()&&o.swapChildElements(this.$dlgControlBtns),this.$dlg.addClass("shown unselectable"),this.$cancelBtn.focus(),this._renderChildViews(),this._enableContinueBtn(),this},open:function(r){var i,s=this.options,o=s.appApi,u=o.pluginsApi,a=o.saveAsApi,f,l,c,h,p=a.isRunningInFileSaveAs();return s.nonDefaultRecent&&!p&&u.setDefaultPluginId("file_selection_dlg","my_computer_select"),this._pluginOptions=r,f=t.opFactory.create("LoadingFileSelectionDlgHomeViewsOp",s),f.run(!1).then(_.bind(function(){return n.isCEF()&&(p&&this._settingDefaultForSaveAsDlg(),o.connectorsApi.addConnectorsChangeCallback(this._onConnectorsChange),o.connectorsApi.addConnectorsUiHelpersChangeCallback(this._onConnectorsChange),o.sessionApi.addSignedInChangeCallback(this._enableContinueBtn)),u.callPluginMethodForEach(s.fileSelectionDlgHomeViewsUiModel.getAllIds(),"setPluginOptions",r,undefined,!0),u.callSelectorMethodForEach(s.fileSelectionDlgHomeViewsUiModel.getAllIds(),"setPluginOptions",r,undefined,!0),i=e.DialogView.prototype.open.call(this),this._repositionSpinner(),(!p||p&&this._setDefaultForSaveAs)&&this._homeViewsView.clearSelection().selectHomeView(undefined,r),i},this))},close:function(t,r){var i=this.$dlg,o,u=r&&r.noAnimation||n.isCEF(),a=this.options,f=a.appApi;delete this._pluginOptions,delete this._setDefaultForSaveAs,o=_.bind(function(){n.isCEF()&&(f.connectorsApi.removeConnectorsChangeCallback(this._onConnectorsChange),f.connectorsApi.removeConnectorsUiHelpersChangeCallback(this._onConnectorsChange),f.sessionApi.removeSignedInChangeCallback(this._enableContinueBtn)),s.removeTransitionEndCallbacks(i),a.selectionUiModel.clearSelection(),this._restoreSpinnerPosition(),this._homeViewsView.releaseHomeViews(),a.fileSelectionDlgHomeViewsUiModel.set("plugins",e.uiCollectionFactory.create("PluginsUiCollection")),e.DialogView.prototype.close.call(this,t,r)},this);if(!i)return;i.removeClass("shown"),u?o():s.addTransitionEndCallback(i,"top",o)},_onViewEvent:function(e,r){var i=t.ViewEvents,s=this.options.appApi.saveAsApi;if(e===i.FILE_SELECTION_DLG_SELECTION_CHANGE){this._enableContinueBtn();return}if(e===i.FILE_SELECTION_DLG_SELECTION_COMMIT){this._onContinueClick();return}if(e===i.FILE_SELECTION_DLG_SELECTOR_CLICK){n.isCEF()&&(r&&r.pluginId&&(o.enableInput(this.$continueBtn,!1),this.$continueBtn.val(this._getContinueLabel(r.pluginId))),s.isRunningInFileSaveAs()&&s.clearNonSharedSaveAsAttributes()),this._homeViewsView.clearSelection().selectHomeView(r,this._pluginOptions).always(_.bind(function(){n.isCEF()&&this._enableContinueBtn()},this));return}if(n.isCEF()){if(e===i.FILE_SAVE_AS_DLG_FILENAME_CHANGE){this._enableContinueBtn();return}if(e===i.FILE_SAVE_AS_DLG_CANSAVE_CHANGE){this._enableContinueBtn();return}}this.trigger(e,r)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$pageHeader=$(".page-header"),this.$spinner=$(".spinner"),n.isCEF()&&(this.$modalMask=$("#modal-mask")),this.$dlg=this.$(".generic-dialog"),this.$homeViews=this.$(".home-views"),this.$dlgControlBtns=this.$(".file-selection-dlg-control-buttons"),this.$continueBtn=this.$(".file-selection-dlg-continue-btn"),this.$cancelBtn=this.$(".file-selection-dlg-cancel-btn")},_getContinueLabel:function(e){var t=this.options,r=t.appApi.pluginsApi,s=e||r.getSelectedPluginId("file_selection_dlg")||r.getDefaultPluginId("file_selection_dlg");return n.isCEF()&&s==="my_computer_select"?t.appApi.saveAsApi.isRunningInFileSaveAs()?i.CHOOSE_DIFFERENT_FOLDER:i.BROWSE_FOLDER:t.addSelectedButtonLabel||i.CONTINUE},_getHeaderLabel:function(){var e,t=this._pluginOptions;return e=t&&t.singleFileSelection===!0?i.SELECT_FILE:i.SELECT_FILES,this.options.fileSelectionDlgHeaderLabel||e},_enableContinueBtn:function(){var e=this._getSelection(),t,r,i,s,u=this.options,a=u.appApi,f=a.pluginsApi,l=a.saveAsApi,c=!0,h,p=a.sessionApi.isSignedIn();n.isCEF()&&(this.$continueBtn.val(this._getContinueLabel()),this.$continueBtn.attr("aria-label",this._getContinueLabel())),i=f.getSelectedPluginId("file_selection_dlg")||f.getDefaultPluginId("file_selection_dlg"),s=a.connectorsApi.isConnectorPlugin(i)&&a.connectorsApi.isDesktopConnector(a.connectorsApi.getConnectorPluginName(i)),t=e.localFiles.length+e.localFileInputs.length+_.keys(e.uploadedFileAttrs).length,n.isCEF()&&l.isRunningInFileSaveAs()?(r=this._getSaveAsFilename(),i==="my_computer_select"?o.enableInput(this.$continueBtn,!0):(c=l.getCanSave()&&e.isFolderInSelection!==!0&&r!==undefined&&r.length>0&&(s||p),!s&&p?a.rnaApi.done(_.bind(function(e){a.sessionApi.ensureSignedIn().done(_.bind(function(){h=e.rnaServicesAPI.isEnterpriseUser()&&(!e.rnaServicesAPI.isPDFServicesEnabled()||!e.rnaServicesAPI.isEncryptionKeyValid()),h&&(c=!1),o.enableInput(this.$continueBtn,c)},this))},this)):o.enableInput(this.$continueBtn,c)),e.isSelectionComplete&&r!==undefined&&this._onContinueClick()):(n.isCEF()&&i==="my_computer_select"?o.enableInput(this.$continueBtn,!0):n.isCEF()&&i==="my_recent_files_select"?o.enableInput(this.$continueBtn,t>0):o.enableInput(this.$continueBtn,t>0&&(s||this.options.appApi.sessionApi.isSignedIn())),e.isSelectionComplete&&this._onContinueClick())},_getSelection:function(){var e=this._homeViewsView;return e?e.getSelection():{localFiles:[],localFileInputs:[],uploadedFileAttrs:{},isSelectionComplete:!1,isFolderInSelection:!1}},_getSaveAsFilename:function(){var e=this._homeViewsView;return e?e.getSaveAsFilename():undefined},_sanitizeFileNameForExtension:function(){var e=this._getSaveAsFilename(),t=this.options.appApi.saveAsApi,r,i,s,o,a;_.isUndefined(e)||(a=u.getNormalizedString(e,"NFC"),_.isUndefined(a)||(e=a),r=t.getChosenFileFilter(),i=r.fileFilterExtensions,s=n.getExtension(e),i.length>=1&&(_.isUndefined(s)||(o=_.find(i,function(e){return e.toLowerCase()===s})),_.isUndefined(o)&&(e+=".",e+=i[0])),t.setFilename(e))},_releaseFileInputCallback:function(e){var t=$("#"+e);t.remove()},_renderChildViews:function(){this._renderHomeViewsView(),n.isCEF()&&this._renderModalMaskView()},_renderHomeViewsView:function(){this._renderChildView("_homeViewsView",t.FileSelectionDlgHomeViewsView,this.$homeViews,{childViewId:"_homeViewsView"})},_renderModalMaskView:function(){this.options.modalMaskUiModel.set({modal_transparent:!0}),this._renderChildView("_modalMaskView",t.ModalMaskView,this.$modalMask,{childViewId:"_modalMaskView"})},_repositionSpinner:function(){this.options.appApi.displayApi.setSpinnerOptions({refElem:this.$(".home-views-content")})},_restoreSpinnerPosition:function(){this.options.appApi.displayApi.clearSpinnerOptions()},_onKeyDown:function(t){var r=$(t.target);return n.isCEF()&&t.which===9?!1:t.which===13&&o.isInputEnabled(this.$continueBtn)&&t.target!==this.$cancelBtn.get(0)?(this._consumeEvent(t),this._onContinueClick(),!0):n.isCEF()&&t.which===8&&(!r.is("input")||r.hasClass("control-button"))&&!r.is("textarea")&&this.options.appApi.selectionApi.isRunningInFileSelection()?(this._consumeEvent(t),!0):e.DialogView.prototype._onKeyDown.call(this,t)},_onContinueClick:function(){var e=this.options,t=e.appApi,r=t.pluginsApi,i=[],s,o=[],u=r.getSelectedPluginId("file_selection_dlg")||r.getDefaultPluginId("file_selection_dlg");if(!n.isCEF())return this._closeOnContinue();if(u==="my_computer_select")return this._logSiteCatalystEvent([a.MY_COMPUTER,a.BROWSE,a.CLICKED]),t.rnaApi.done(function(e){e.rnaFileAPI.openPlatformDialog()});u==="my_recent_files_select"?(s=t.selectionApi.getSelectedItemModels(),t.rnaApi.done(function(e){e.whitelistRecentFile(s)})):e.fileSelectionDlgHomeViewsUiModel.get("plugins").each(function(t){if(t.id===u){var n=t.get("plugin_api");n&&(i=e.appApi.pluginsApi.callPluginApiMethod(n,"getFolderAncestorIds"))}}),e.readerContextModel.done(_.bind(function(e){var n=e.get("rna"),r=0,a,f=0;this.fsData=n.get("viewData").get("fileSelectData");if(u==="root-select"||u==="ccloud-select")f=1;_.each(s,function(e){o[r++]=e.get("index")+1}),a=[i,f,o],this.fsData.invoke("setFileAncestors",a).then(_.bind(function(){return t.saveAsApi.isRunningInFileSaveAs()?(t.saveAsApi.setChosenFileFilterAsPerFilename(),this._sanitizeFileNameForExtension(),this._checkForIllegalName().then(_.bind(function(){return this._checkForExistingFileAndClose()},this))):this._closeOnContinue()},this))},this))},_checkForIllegalName:function(){var t=this.options,n,r,i=t.appApi.pluginsApi,s=t.appApi.connectorsApi,o=t.appApi.saveAsApi,u;return r=i.getSelectedPluginId("file_selection_dlg"),s.isConnectorPlugin(r)&&s.isDesktopConnector(s.getConnectorPluginName(r))?(u=this.options.appApi.pluginsApi.callPluginMethod(r,"isFilenameValid",this._getSaveAsFilename(),this._getResolvedPromise(),!0),u.then(undefined,function(e){o.setError(e)})):(n=e.opFactory.create("ValidatingNameOp",_.extend(t,{name:this._getSaveAsFilename()})),n.run().then(undefined,function(e){o.setError(e)}))},_checkForExistingFileAndClose:function(){var e=this._getSelection(),t=this._getSaveAsFilename(),n=this.options,r,i,s,o;return _.keys(e.uploadedFileAttrs).length===1&&_.each(e.uploadedFileAttrs,function(e,n){if(t===e.name){i=n,o=e.name;return}}),i===undefined&&(r=n.appApi.pluginsApi.callPluginMethod(n.appApi.pluginsApi.getSelectedPluginId("file_selection_dlg"),"doesFileExists",t,undefined,!0),r&&(i=r.get("id"),o=r.get("name"),s=r)),i||s?this._showReplaceFileDialog().then(_.bind(function(){return i&&n.appApi.saveAsApi.setReplaceFileId(i),s&&n.appApi.saveAsApi.setReplaceFileObj(s),n.appApi.saveAsApi.setFilename(o),this._closeOnContinue()},this)):this._closeOnContinue()},_showReplaceFileDialog:function(){var e={},t;return n.isCEF()&&(e.okButtonClass="replace-file-aria-label"),t=this.options.appApi.dialogApi.displayTextAlert(this.options.appApi.dialogApi.SEVERITY_WARNING,i.REPLACE_EXISTING_FILE_TITLE,i.REPLACE_EXISTING_FILE_MSG,i.YES,i.NO,e),n.isCEF()&&$(".replace-file-aria-label").attr("aria-label",i.REPLACE_EXISTING_FILE_ARIA_LABEL),t},_closeOnContinue:function(){var e=this._getSelection(),t=e.localFiles.length,r=_.keys(e.uploadedFileAttrs).length,i=t+r,s=[];this._logSiteCatalystEvent(a.CONTINUE),n.isCEF()||(t>0?r>0?(s.push(a.ACOM_AND_MY_COMPUTER),s.push(a.SUCCESS),s.push(a.getCountCode(i))):(s.push(a.MY_COMPUTER_ONLY),s.push(a.SUCCESS),s.push(a.getCountCode(t))):(s.push(a.ACOM_ONLY),s.push(a.SUCCESS),s.push(a.getCountCode(r))),this._logSiteCatalystEvent(s)),this.close(!0,{resolveArgs:_.extend(e,{releaseFileInputCallback:this._releaseFileInputCallback})})},_onCancelClick:function(){this.close(!1)},_settingDefaultForSaveAsDlg:function(){var e,t,n,r=this.options.appApi,i=r.saveAsApi,s=r.pluginsApi;e=i.getSourceKey(),t=i.getAccountId(),!_.isUndefined(e)&&e!==""&&e!=="local"&&(!_.isUndefined(t)&&t!==""||e==="root"||e==="ccloud")?(this._setDefaultForSaveAs=!1,n=r.connectorsApi.getConnectorPluginId(e,t,!0),s.setDefaultPluginId("file_selection_dlg",n),s.getDefaultPluginId("file_selection_dlg")===n?(this._setDefaultForSaveAs=!0,s.getPluginsUiModel(n).setSelectedId(n)):s.setDefaultPluginIdAsUndefined("file_selection_dlg")):(s.setDefaultPluginId("file_selection_dlg","my_computer_select"),this._setDefaultForSaveAs=!0)},_onConnectorsChange:function(){e.opFactory.create("InstantiatingConnectorsOp",this.options).run({pluginsUiModel:this.options.fileSelectionDlgHomeViewsUiModel,inFileSelectionDlg:!0}).then(_.bind(function(){this.options.appApi.saveAsApi.isRunningInFileSaveAs()&&!this._setDefaultForSaveAs&&(this._settingDefaultForSaveAsDlg(),this._setDefaultForSaveAs&&this._homeViewsView.clearSelection().selectHomeView(undefined,this._pluginOptions)),this._renderHomeViewsView()},this))}})}),define("app/dev/views/acrobat-command-page-view",["app/ac-app","app/views/content-page-view"],function(e){e.AcrobatCommandPageView=e.ContentPageView.extend({_initWrappers:function(){e.ContentPageView.prototype._initWrappers.call(this),this.$el.css("overflow","hidden")},_renderPageHeaderView:function(){},_renderAcrobatFooterView:function(){},_renderModalMaskView:function(){}})}),define("app/dev/views/view-mgr",["core/ac-core","app/ac-app","core/utils/util","core/views/view","app/views/content-page-view","app/views/rhp-content-page-view","app/views/notification-content-page-view","app/views/file-selection-dlg-view","app/views/acrobat-command-page-view"],function(e,t,n){var r;t.ViewMgr=e.View.extend({getContentPageView:function(e){var i,s=".content-page";if(n.isCEF())if(e.runningInRHP)s=".rhp-content-page";else if(e.runningInNotification)s=".notification-content-page";else if(e.runningInFileSelection||e.runningInFileSaveAs)s=".dialog-container";return r||(i=_.extend({},e,{el:s}),n.isCEF()?e.runningInRHP?r=new t.RHPContentPageView(i):e.runningInNotification?r=new t.NotificationContentPageView(i):e.runningInFileSelection||e.runningInFileSaveAs?r=new t.FileSelectionDlgView(i):e.runningInCommand?r=new t.AcrobatCommandPageView(i):r=new t.ContentPageView(i):r=new t.ContentPageView(i),this.addChildView(r),e.rootView=r),r},showContentPageView:function(e){var t;t=this.getContentPageView(e),t.$el.show(),t.render()},unsetContentPageView:function(){r&&(this.removeChildView(r),r=undefined)},isContentPageViewUnset:function(){return r===undefined}})}),define("app/dev/ops/account-menu/loading-account-menu-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.LoadingAccountMenuOp=e.Op.extend({run:function(){var t=this.options,r=t.appApi.pluginsApi,i;return n.isCEF()&&(i={readerContextModel:t.readerContextModel}),e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:r.getPluginTypeConfig("account_menu"),pluginsUiModel:t.accountMenuPluginsUiModel,pluginContext:i},_.pick(t,"appApi","pluginId","force"))).run()}}),t.LoadingAccountMenuOp}),define("app/dev/ops/account-menu/selecting-account-menu-item-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.SelectingAccountMenuItemOp=e.Op.extend({run:function(){var t=this.options;return t.pageHeaderUiModel.set("show_account_menu",!1),e.opFactory.create("SelectingPluginOp",t).run()}})}),define("app/dev/ops/acrobat/closing-in-acrobat-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ClosingInAcrobatOp=e.Op.extend({run:function(){return document.location="acrobatskybox://closewindow",this._getResolvedPromise()}})}),define("app/dev/ops/acrobat/opening-in-acrobat-op",["core/ac-core","app/ac-app","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,n){t.OpeningInAcrobatOp=e.Op.extend({run:function(){var e=this.options,t=e.acrobatUiModel,r=$.Deferred(),i,s,o,u,a,f;return u=e.ids,a=u.length,a>t.get("file_open_max_count")?(e.errorUiModel.enqueueMiscError(n.MISC_ERROR_ACROBAT_FILE_OPEN_MAX_TITLE,n.MISC_ERROR_ACROBAT_FILE_OPEN_MAX_MSG),r.reject().promise()):(e.selectionUiModel.clearSelection(),i=t.isFolderSelectionMode(),a>1?(f=[],_.each(u,function(e){f.push(encodeURIComponent(e))}),s=i?"openFolders":"openDocuments",o="acrobatskybox://"+s+"/?assetIDs="+f.join(";")):(s=i?"openFolder":"openDocument",o="acrobatskybox://"+s+"/?assetID="+encodeURIComponent(u[0])),document.location=o,r.resolve().promise())}})}),define("app/dev/ops/acrobat/selecting-acrobat-filter-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.SelectingAcrobatFilterOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.acrobatApi,n;return n=e.filterIndex,n===undefined?n=t.getSelectedFilterIndex():t.setSelectedFilterIndex(n),this._getResolvedPromise()}})}),define("app/dev/ops/app/rna-starting-app-op",["core/ac-core","app/ac-app","core/utils/date-util","core/utils/view-util","core/ops/op"],function(e,t,n,r){return t.RNAStartingAppOp=e.Op.extend({run:function(){var r=this.options,i,s,o,u,a,f,l,c,h,p,d=this._getResolvedPromise(),v,m,g;return i=e.opFactory,s=t.opFactory,s.create("OverridingJQueryAjaxOp",r).run(),s.create("LoadingCustomCssOp",r).run(),s.create("ListeningForAjaxEventsOp",r).run(),s.create("ListeningForServerErrorsOp",r).run(),o=s.create("RegisteringAppApisOp",r),u=s.create("InitializingAppRoutesOp",r),f=s.create("HandlingUncaughtExceptionsOp",r),a=s.create("ListeningForDownloadErrorsOp",r),h=s.create("StartingHistoryOp",r),l=s.create("LoadingPluginConfigsOp",r),p=s.create("RegisteringPluginsUiModels",r),c=s.create("RNARunningAppOp",r),v=s.create("InitializingRNAOp",r),m=s.create("ConfiguringRNAOp",r),g=i.create("GettingSiteCatalystBaseFileOp",r),n.logElapsedTime("before loading app-apis"),v.run().then(function(){return o.run(),u.run(),p.run(),f.run(),a.run(),n.logElapsedTime(" after initializingRNAOp"),$.when(l.run()).always(function(){return n.logElapsedTime("after RNA + plugin configs"),m.run().then(function(){return h.run(),e.isJasmine()?d:c.run()})})})}}),t.RNAStartingAppOp}),define("app/dev/ops/app/rna-running-app-op",["core/ac-core","files/ac-files","app/ac-app","core/ops/op"],function(e,t,n){n.RNARunningAppOp=e.Op.extend({run:function(){var r=this.options,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;return i=e.opFactory,s=t.opFactory,o=n.opFactory,u=o.create("ListeningForWindowEventsOp",r),p=o.create("ListeningForFolderNotificationsOp",r),a=i.create("ListeningForKeyEventsOp",r),f=o.create("ListeningForViewEventsOp",r),l=o.create("ListeningForInactivityOp",r),c=o.create("ListeningForNetworkConnectivityOp",r),y=i.create("ListeningForFocusEventsOp",r),h=s.create("ListeningForQuotaErrorsOp",r),d=o.create("ListeningForRNAEventsOp",r),v=i.create("ListeningForActions",r),m=o.create("ListeningForSessionEventsOp",r),g=o.create("ListeningForDialogAlertEventsOp",r),$.when(u.run(),a.run(),y.run(),f.run(),l.run(),c.run(),h.run(),p.run(),d.run(),v.run(),m.run(),g.run())}})}),define("app/dev/ops/app/running-app-op",["core/ac-core","files/ac-files","app/ac-app","core/ops/op"],function(e,t,n){n.RunningAppOp=e.Op.extend({run:function(){var r=this.options,i,s,o,u,a,f,l,c,h,p;return i=e.opFactory,s=t.opFactory,o=n.opFactory,u=o.create("ListeningForWindowEventsOp",r),a=i.create("ListeningForKeyEventsOp",r),f=i.create("ListeningForFocusEventsOp",r),l=o.create("ListeningForViewEventsOp",r),c=o.create("ListeningForInactivityOp",r),h=s.create("ListeningForQuotaErrorsOp",r),p=o.create("ListeningForFolderNotificationsOp",r),$.when(u.run(),a.run(),f.run(),l.run(),c.run(),h.run(),p.run())}})}),define("app/dev/ops/app/starting-app-op",["core/ac-core","app/ac-app","core/utils/date-util","core/utils/view-util","core/ops/op"],function(e,t,n,r){return t.StartingAppOp=e.Op.extend({run:function(){var i=this.options,s,o,u,a,f,l,c,h,p,d,v,m,g,y;n.logElapsedTime("begin starting-app-op"),r.init(),s=e.opFactory,o=t.opFactory,o.create("OverridingJQueryAjaxOp",i).run(),o.create("LoadingCustomCssOp",i).run(),o.create("ListeningForAjaxEventsOp",i).run(),o.create("ListeningForServerErrorsOp",i).run(),u=o.create("LoadingTypekitOp",i),a=o.create("LoadingFrameworkVersionsOp",i),f=o.create("RegisteringAppApisOp",i),l=o.create("InitializingAppRoutesOp",i),c=o.create("RegisteringPluginsUiModels",i),h=o.create("HandlingUncaughtExceptionsOp",i),p=o.create("ListeningForDownloadErrorsOp",i),d=o.create("GettingAllBaseUrisOp",i),v=o.create("LoadingPluginConfigsOp",i),m=o.create("LoadingPluginConfigsVersionsOp",i),g=s.create("StartingSusiSessionOp",i),y=o.create("StartingAuthenticatedAppOp",i),u.run(),a.run().always(function(){return n.logElapsedTime("before loading app-apis"),f.run(),l.run(),c.run(),h.run(),p.run(),n.logElapsedTime("before base uris + plugin configs"),$.when(d.run(),v.run()).always(function(){return n.logElapsedTime("after base uris + plugin configs"),m.run().then(function(){return g.run().then(function(){return n.logElapsedTime("after starting susi"),y.run()})})})})}}),t.StartingAppOp}),define("app/dev/ops/app/starting-authenticated-app-op",["core/ac-core","app/ac-app","core/utils/date-util","core/ops/op"],function(e,t,n){return t.StartingAuthenticatedAppOp=e.Op.extend({run:function(){var r=this.options,i,s,o,u,a,f,l,c,h,p,d,v=this._getResolvedPromise();return n.logElapsedTime("begin starting-app-op"),i=t.opFactory,h=i.create("StartingHistoryOp",r),s=i.create("GettingAllUserInfoOp",r),u=i.create("LoadingToolsOp",r),a=i.create("LoadingDeepLinkPluginsOp",r),f=i.create("LoadingTemplatePluginsOp",r),l=i.create("LoadingAccountMenuOp",r),c=i.create("GettingStorageInfoOp",r),p=i.create("ShowingLoadFailuresDlgOp",r),o=i.create("RunningAppOp",r),d=i.create("RedirectingToApolloOp",r),n.logElapsedTime("initializing authenticated session"),s.run().always(function(){return d.run(),$.when.apply(undefined,[c.run(),l.run(),u.run(),a.run(),f.run()]).always(function(){return n.logElapsedTime("after loading plugins + connector info"),t.viewMgr.showContentPageView(r),h.run(),e.isJasmine()?v:(p.run(),o.run())})})}}),t.StartingAuthenticatedAppOp}),define("app/dev/ops/file-selection-dlg/loading-file-selection-dlg-home-views-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){t.LoadingFileSelectionDlgHomeViewsOp=e.Op.extend({run:function(t){var r=this.options,i=r.appApi.pluginsApi,s=r.fileSelectionDlgHomeViewsUiModel,o=e.opFactory,u,a;return n.isCEF()&&(a={readerContextModel:r.readerContextModel}),u=o.create("LoadingPluginsOp",_.extend({pluginsConfig:i.getPluginTypeConfig("file_selection_dlg"),pluginsUiModel:s,pluginContext:a},_.pick(r,"appApi","pluginId","force"))),u.run().then(function(){if(!t)return o.create("InstantiatingConnectorsByCohortOp",r).run({pluginsUiModel:s,inFileSelectionDlg:!0})})}})}),define("app/dev/ops/file-selection-dlg/selecting-file-selection-dlg-home-view-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.SelectingFileSelectionDlgHomeViewOp=e.Op.extend({run:function(t){return e.opFactory.create("SelectingPluginOp",this.options).run(t)}})}),define("app/dev/ops/file-selection-dlg/showing-file-selection-dlg-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op","app/views/file-selection-dlg-view"],function(e,t,n){t.ShowingFileSelectionDlgOp=e.Op.extend({run:function(e){var r,i=this.options;return n.isCEF()&&(i.runningInFileSelection||i.runningInFileSaveAs)?r=t.viewMgr.getContentPageView(i):r=new t.FileSelectionDlgView(i),r.open(e)}})}),define("app/dev/ops/file-selection-dlg/loading-file-selection-dlg-op",["app/ac-app","core/ac-core","core/utils/file-types","core/ops/op"],function(e,t){return e.LoadingFileSelectionDlgOp=t.Op.extend({run:function(){return this.options.readerContextModel.done(_.bind(function(e){var t=e.get("rna"),n,r,i;if(t.hasProperty("viewData")){this.fsData=t.get("viewData").get("fileSelectData"),n="home",i={dialog:{singleFileSelection:!0},plugin:{filter:{minSize:1,maxSize:1e8,mimeTypes:[],extensions:[]}}},this.fsData.hasProperty("nonDefaultRecent")&&(this.options.nonDefaultRecent=this.fsData.get("nonDefaultRecent")),this.fsData.hasProperty("showRecent")&&(i.plugin.showRecent=this.fsData.get("showRecent")),this.fsData.hasProperty("actionButtonText")&&(i.dialog.addSelectedButtonLabel=this.fsData.get("actionButtonText")),this.fsData.hasProperty("headerLabel")&&(i.dialog.fileSelectionDlgHeaderLabel=this.fsData.get("headerLabel")),this.fsData.hasProperty("fileFilterList")&&(r=this.fsData.get("fileFilterList"),r.forEach(function(e){var t=e.get("fileFilterExtensions");t.forEach(function(e){if(i.plugin.filter.extensions.indexOf(e)!==-1)return;i.plugin.filter.extensions.push(e)})})),this.fsData.hasProperty("fileMimeTypes")&&(i.plugin.filter.mimeTypes=this.fsData.get("fileMimeTypes")),this.options.appApi.saveAsApi.isRunningInFileSaveAs()?(i.dialog.singleFileSelection=!0,i.plugin.filter.minSize=undefined,i.plugin.filter.maxSize=undefined):this.fsData.hasProperty("allowMultiple")&&(i.dialog.singleFileSelection=!this.fsData.get("allowMultiple")),i.plugin.showRecent||(this.options.nonDefaultRecent=!0),this.fsData.hasProperty("disableDocumentCloud")&&this.options.tunerUiModel.set("disable_document_cloud",this.fsData.get("disableDocumentCloud")),this.fsData.hasProperty("disableWebConnectors")&&this.options.tunerUiModel.set("disable_web_connectors",this.fsData.get("disableWebConnectors")),this.fsData.hasProperty("disableLocalConnectors")&&this.options.tunerUiModel.set("disable_local_connectors",this.fsData.get("disableLocalConnectors")),this.fsData.hasProperty("initialSaveAsFilename")&&this.options.appApi.saveAsApi.setFilename(this.fsData.get("initialSaveAsFilename")),this.fsData.hasProperty("selectedToolPlugin")&&(i.plugin.selectedToolPlugin=this.fsData.get("selectedToolPlugin")),this.fsData.hasProperty("scContext")&&(i.plugin.pluginScContext=this.fsData.get("scContext"));var s=this.options.saveAsUiModel;return this.fsData.hasProperty("fileFilterList")&&s.set("fileFilterList",this.fsData.get("fileFilterList")),this.fsData.hasProperty("defaultFileFilter")&&s.set("chosenFileFilter",this.fsData.get("defaultFileFilter")),this.fsData.hasProperty("showExportOptions")&&s.set("showExportOptions",this.fsData.get("showExportOptions")),this.fsData.hasProperty("allowSettingsButton")&&s.set("allowSettingsButton",this.fsData.get("allowSettingsButton")),this.fsData.hasProperty("allowViewResult")&&s.set("allowViewResult",this.fsData.get("allowViewResult")),this.fsData.hasProperty("isReduceFileSizeEnabled")&&s.set("reduceFileSizeEnabled",this.fsData.get("isReduceFileSizeEnabled")),this.fsData.hasProperty("isRestrictEditingEnabled")&&s.set("restrictEditingEnabled",this.fsData.get("isRestrictEditingEnabled")),this.fsData.hasProperty("isReduceFileSizeVisible")&&s.set("reduceFileSizeVisible",this.fsData.get("isReduceFileSizeVisible")),this.fsData.hasProperty("isRestrictEditingVisible")&&s.set("restrictEditingVisible",this.fsData.get("isRestrictEditingVisible")),this.fsData.hasProperty("initialSourceKey")&&s.set("sourceKey",this.fsData.get("initialSourceKey")),this.fsData.hasProperty("initialAccountId")&&s.set("accountId",this.fsData.get("initialAccountId")),_.extend(this.options,{fileSelectionDlgOptions:i}),this.options.appApi.selectionApi.selectFiles(n,i).then(_.bind(function(e){var t=this.options.appApi,n=t.saveAsApi,r=e.uploadedFileAttrs,i=[],s=[],o={},u="pdf",a="",f=!1,l=!1,c=!1,h,p,d=[],v;h=t.pluginsApi.getSelectedPluginId("file_selection_dlg"),c=t.connectorsApi.isConnectorPlugin(h)&&t.connectorsApi.isDesktopConnector(t.connectorsApi.getConnectorPluginName(h)),c||h==="my_recent_files_select"?$.each(r,function(e,t){t._proxy&&i.push(t._proxy)}):$.each(r,function(e,t){undefined===t._proxy&&s.push(t)}),t.displayApi.showSpinner(!0),n.isRunningInFileSaveAs()?(a=n.getFilename(),f=n.isRestrictEditingSelected(),l=n.isReduceFileSizeSelected(),u=n.getChosenFileExtension()||"",o={selectedExtension:u,saveAsFilename:a,closeWindow:!0},f!==undefined&&_.extend(o,{restrictEditing:f}),l!==undefined&&_.extend(o,{reduceFileSize:l}),c?(p=n.getCurrentFolderProxy(),p&&_.extend(o,{saveAsParentFolderObject:p}),v=n.getReplaceFileObj(),v&&(d.push(v._proxy),_.extend(o,{selectedFileObjects:d}))):_.extend(o,{selectedBHFiles:[{id:n.getReplaceFileId()}],saveAsParentFolderid:n.getCurrentFolderId()})):o={selectedBHFiles:s,selectedExtension:u,selectedFileObjects:i,closeWindow:!0},this.fsData.invoke("setSelectedFiles",o).then(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this))},this),_.bind(function(){this.options.appApi.displayApi.showSpinner(!0),this.fsData.invoke("cancelDialog").then(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this))},this))}},this))}}),e.LoadingFileSelectionDlgOp}),define("app/dev/ops/getting/getting-all-base-uris-op",["core/ac-core","app/ac-app","aicx/ac-aicx","core/ops/op"],function(e,t,n){return t.GettingAllBaseUrisOp=e.Op.extend({run:function(){var t=this.options,r=e.opFactory,i=n.opFactory;return $.when.apply(undefined,[r.create("GettingBaseFilesUrisOp",t).run(),r.create("GettingBaseCloudUrisOp",t).run()]).then(function(){return Ac.Aicx&&(Ac.Aicx.baseCpdfUri=t.appApi.baseCloudUrisApi.getCpdfUri()),i.create("GettingBaseAicUrisOp",t).run()})}}),t.GettingAllBaseUrisOp}),define("app/dev/ops/getting/getting-storage-info-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.GettingStorageInfoOp=e.Op.extend({run:function(){var t=this.options,r=e.opFactory,i=this._getResolvedPromise();return n.isCEF()&&(i=r.create("GettingRootOp",t).run()),$.when(r.create("GettingSystemFoldersOp",t).run(),r.create("GettingConnectorsUiHelpersOp",_.extend({},t,{forceFresh:!1,useReaderSyncMode:!1})).run(),i)}}),t.GettingStorageInfoOp}),define("app/dev/ops/listening/listening-for-ajax-events-op",["core/ac-core","app/ac-app","core/utils/util","core/utils/ajax-util","core/ops/op"],function(e,t,n,r){t.ListeningForAjaxEventsOp=e.Op.extend({run:function(){var e=$.Deferred();return r.addGlobalAjaxHandlers({ajaxStart:this._onAjaxStart,ajaxSend:this._onAjaxSend,ajaxComplete:this._onAjaxComplete,ajaxStop:this._onAjaxStop,ajaxError:this._onAjaxError}),this._deferred=e,e.promise()},_onAjaxStart:function(){this.options.networkUiModel.set("is_ajax_request_active",!0)},_onAjaxSend:function(e,t,n){var r=n.modal;_.isUndefined(r)&&(r=!0),r&&this._showModalUi(!0)},_onAjaxComplete:function(e,t,r){var i=this.options,s=i.appApi,o=Ac.Plugins.rna_resource_url,u=r.modal,a;_.isUndefined(u)&&(u=!0),u&&this._showModalUi(!1),n.isCEF()&&(r.url.startsWith(o)||(a=t.status===0?!1:!0,a!==s.networkConnectivityApi.isOnline()&&i.networkConnectivityModel.set({is_connected:a,ajax_status:a})))},_onAjaxStop:function(){this.options.networkUiModel.set("is_ajax_request_active",!1)},_onAjaxError:function(t,r,i,s){var o=this.options,u=o.appApi,a=r.status,f,l;n.isCEF()&&(f=a===0?!1:!0,f===!1&&u.rnaApi.done(function(e){var t;e.isFeatRunning()&&e.isASTestAllowInstantiation()&&(t="jqXHR.statusText = ",t+=r.statusText,t+="\n",t+="jqXHR.status = ",t+=r.status,t+="\n",t+="jqXHR.state = ",t+=r.state(),t+="\n",t+="thrownError = ",t+=s,t+="\n",t+="ajaxSettings.url = ",t+=i.url,t+="\n",t+="ajaxSettings.base_url = ",t+=i.base_url,console.log("Ajax call error due to either network being offline or something else."),console.log(t))}),f!==u.networkConnectivityApi.isOnline()&&o.networkConnectivityModel.set({is_connected:f,ajax_status:f}));if(a===0||r.readyState===0)return;u.errorApi.logAjaxError(r),_.isUndefined(i.ignoreErrors)||(l=_.find(i.ignoreErrors,function(e){return e===404}));if(a===401)u.sessionApi.signedOut(),e.Util.isClassic()||o.errorUiModel.enqueueAjaxError(r);else if(a!==200){if(a===404&&!_.isUndefined(l))return;o.errorUiModel.enqueueAjaxError(r)}},_showModalUi:function(t){function u(t){if(e.isJasmine())return;if(!o)return;o.displayApi.showSpinner(t)}var n=this.options,r,i=n.ajaxUiModel,s=n.modalMaskUiModel,o=n.appApi;o.displayApi.isDebugLogging()&&LOG("AcApp.ListeningForAjaxEventsOp._showModalUi "+t),r=_.bind(function(){var e=this._ajaxSpinnerThresholdTimerId;e&&(clearTimeout(e),this._ajaxSpinnerThresholdTimerId=undefined),e=this._ajaxTransparentThresholdTimerId,e&&(clearTimeout(e),this._ajaxTransparentThresholdTimerId=undefined)},this),t?(n.ajaxModalRefs+=1,s.set({modal:!0,modal_ajax:!0,modal_transparent:!0}),this._ajaxSpinnerThresholdTimerId||(this._ajaxSpinnerThresholdTimerId=setTimeout(function(){s.get("modal")&&(n.ajaxSpinnerShown||(n.ajaxSpinnerShown=!0,u(!0)))},i.get("ajax_spinner_threshold"))),this._ajaxTransparentThresholdTimerId||(this._ajaxTransparentThresholdTimerId=setTimeout(_.bind(function(){s.get("modal")&&s.set("modal_transparent",!1)},this),i.get("ajax_transparent_threshold")))):(r(),n.ajaxModalRefs-=1,n.ajaxModalRefs<=0&&(s.set("modal_ajax",!1),o.dialogApi.isDialogOpen()||s.set("modal",!1),n.ajaxSpinnerShown&&(n.ajaxSpinnerShown=!1,u(!1))))}})}),define("app/dev/ops/listening/listening-for-download-errors-op",["core/ac-core","app/ac-app","core/utils/event-util","core/ops/op"],function(e,t,n){return t.ListeningForDownloadErrorsOp=e.Op.extend({run:function(){var e=this.options,t;return t=function(t){var n,r,i;try{n=JSON.parse(t.data),i=Ac.baseFilesUrisModel.getDownloadUri(),i&&i.indexOf(t.origin)===0&&n.name==="file-download-error"&&_.has(n,"status")&&(r={status:n.status,responseText:JSON.stringify(n.body)},e.appApi.errorApi.logAjaxError(r),e.appApi.errorApi.enqueueAjaxError(r))}catch(s){LOG(s)}},n.addPostMessageListener(t),this._getResolvedPromise()}}),t.ListeningForDownloadErrorsOp}),define("app/dev/ops/listening/listening-for-folder-notifications-op",["core/ac-core","app/ac-app","core/utils/util","core/utils/http-util","core/ops/op"],function(e,t,n,r){t.ListeningForFolderNotificationsOp=e.Op.extend({run:function(){var t=this.options,n=e.opFactory;return this._creatingEndpointsOp=n.create("CreatingNotificationsEndpointsOp",t),this._gettingFolderNotificationsOp=n.create("GettingFolderNotificationsOp",t),this._enablingFolderNotificationsOp=n.create("EnablingFolderNotificationsOp",t),this._addAppApiCallbacks(),this._addUiModelEventListeners(),this.options.appApi.sessionApi.isSignedIn()&&this._restart("initial"),$.Deferred().promise()},_start:function(){var t=this.options,r=t.appApi,i,s=t.notificationUiModel,o=t.appApi.pluginsApi;if(r.acrobatApi.isInAcrobat()&&e.Util.isMac())return this._getRejectedPromise();if(n.isCEF()&&!r.selectionApi.isRunningInFull())return this._getRejectedPromise();if(n.isCEF())if(!t.appApi.selectionApi.isRunningInFull()||o.getSelectedPluginId("tools")!=="home")return this._getRejectedPromise();return i=_.bind(function(e,t,r){n.isCEF()&&s.set("is_starting_notification",!1),this._onError(e,t,r)},this),this._creatingEndpointsOp.run().then(_.bind(function(){return this._startResubscribeTimer(),this._monitorFolders().then(_.bind(function(){this._isGetting||(this._gettingFolderNotificationsOp.run(),this._isGetting=!0)},this))},this),i)},_monitorFolders:function(){var e=this.options,t,n=e.notificationUiModel;return this._enablingFolderNotificationsOp.run(n.getFolderIds()).fail(_.bind(function(e,r,i){if(e.status===404)try{t=JSON.parse(e.responseText).error,t.code==="ObjectNotFound"&&n.removeCallback(t.details.id)}catch(s){}else this._onError(e,r,i)},this))},_stop:function(){return this._cancelPending(),e.opFactory.create("StoppingNotificationsOp",this.options).run()},_restart:function(e){function s(e){return _.isBoolean(e)&&n.set("is_restarting",e),n.get("is_restarting")}var t=this.options,n=t.notificationUiModel,r,i;if(s())return;s(!0),_.isUndefined(this._prevRestartTime)?this._prevRestartTime=(new Date).getTime():(r=(new Date).getTime(),i=r-this._prevRestartTime,i<n.get("resubscribe_timeout")&&LOG("Restarting notifications after "+i+" msecs: "+(e||""),{logServer:!0}),this._prevRestartTime=r),this._stop().then(_.bind(function(){this._start().always(function(){s(!1)})},this),function(){s(!1)})},_cancelPending:function(){this._stopResubscribeTimer()},_onError:function(t){var n=t.status,i=this.options,s=i.notificationUiModel,o;if(n===0)return;this._cancelPending(),n===401?(r.clearSessionAttrs(i.sessionUiModel),this._stop().always(function(){e.hasValidAccessToken||i.appApi.sessionApi.signedOut()})):n>=500&&(this._debounced500Listener||(o=s.get("restart_500_debounce_delay"),this._debounced500Listener=_.debounce(_.bind(function(){this._restart(n)},this),o)),this._debounced500Listener())},_startResubscribeTimer:function(){var e=this.options.notificationUiModel,t;this._stopResubscribeTimer(),t=_.delay(_.bind(function(){this._restart("resubscribe timer")},this),e.get("resubscribe_timeout")),e.set("resubscribe_timeout_id",t)},_stopResubscribeTimer:function(){var e=this.options.notificationUiModel,t=e.get("resubscribe_timeout_id");t&&(window.clearTimeout(t),e.unset("resubscribe_timeout_id"))},_addAppApiCallbacks:function(){var e=this.options.appApi;e.sessionApi.addSignedInChangeCallback(this._onSignedInChange),e.inactivityApi.addIdleChangeCallback(this._onIsIdleChange),n.isCEF()&&e.networkConnectivityApi.addNetworkConnectivtyChangeCallback(this._onIsConnectivityChange)},_onSignedInChange:function(e,t){t?this._restart("signed in"):this._stop()},_onIsIdleChange:function(e,t){t?this._stop():this.options.appApi.sessionApi.isSignedIn()&&this._restart("no longer idle")},_onIsConnectivityChange:function(e,t){t?this.options.appApi.sessionApi.isSignedIn()&&this._restart():this._stop()},_addUiModelEventListeners:function(){this.options.notificationUiModel.on("change:callbacks_by_folder_id",this._onCallbacksByFolderIdChange).on("change:resubscribe_trigger",this._onResubscribeTriggerChange)},_onCallbacksByFolderIdChange:function(){this._monitorFolders()},_onResubscribeTriggerChange:function(e,t){t&&this._restart("404 resubscribe")}})}),define("app/dev/ops/listening/listening-for-inactivity-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){t.ListeningForInactivityOp=e.Op.extend({run:function(){var e=$.Deferred(),t=this.options;return this._addActivityListeners(),this._addUiModelEventListeners(),t.notificationModel.get("update_url")?this._startInactivityTimer():n.isCEF()&&t.appApi.rnaApi.then(_.bind(function(){t.inactivityUiModel.get("timeout_id")||this._startInactivityTimer()},this)),e.promise()},_startInactivityTimer:function(){var e=this.options.inactivityUiModel;this._stopInactivityTimer(),e.set({is_active:!1,is_idle:!1},{silent:!0}),e.set("timeout_id",_.delay(function(){e.get("is_active")||(LOG(0,"AcApp.ListeningForInactivityOp._startInactivityTimer: setting is_idle=true"),e.set("is_idle",!0))},e.get("idle_timeout")),{silent:!0})},_stopInactivityTimer:function(){var e=this.options.inactivityUiModel,t;t=e.get("timeout_id"),t&&(clearTimeout(t),e.unset("timeout_id"))},_addActivityListeners:function(){var e=this.options.inactivityUiModel,t,n;t=_.debounce(_.bind(function(){this._startInactivityTimer()},this),e.get("restart_debounce_delay")),n=function(n){e.set({is_active:!0,is_idle:!1}),t(n)},$("body").on("mousemove.inactivity",n).on("click.inactivity",n).on("keydown.inactivity",n)},_addUiModelEventListeners:function(){this.options.inactivityUiModel.on("change:is_idle",this._onIsIdleChange)},_onIsIdleChange:function(t,n){var r=this.options,i,s;n?(i=r.sessionUiModel,s=i.get("refresh_timer_id"),s&&(window.clearTimeout(s),i.unset("refresh_timer_id"))):t.previous("is_idle")===!0&&r.signInUiModel.get("is_signed_in")&&e.opFactory.create("RefreshingSessionInitiallyOp",r).run()}})}),define("app/dev/ops/listening/listening-for-network-connectivity-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ListeningForNetworkConnectivityOp=e.Op.extend({run:function(){var e=$.Deferred();return this._addConnectivityListeners(),this._deferred=e,e.promise()},_addConnectivityListeners:function(){var e=this.options.networkConnectivityModel,t=this.options.appApi,n;t.rnaApi.done(function(e){e.isFeatRunning()&&e.isASTestAllowInstantiation()&&console.log(navigator.onLine?"network connectivity status while loading this renderer is connected":"network connectivity status while loading this renderer is notConnected")}),n=function(){t.rnaApi.done(function(t){var n;t.isFeatRunning()&&t.isASTestAllowInstantiation()&&(n="network connectivity changed from ",n+=e.get("is_connected")?"connected":"notConnected",n+=" to ",n+=navigator.onLine?"connected":"notConnected",console.log(n))}),e.set({is_connected:navigator.onLine,ajax_status:navigator.onLine})},window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1)}})}),define("app/dev/ops/listening/listening-for-server-errors-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ListeningForServerErrorsOp=e.Op.extend({run:function(){var e=$.Deferred();return this._addUiModelEventListeners(),this._deferred=e,e.promise()},_showError:function(){var e=this.options,t=e.errorUiModel,n=t.get("error"),r,i=e.appApi,s;if(!i)return;s=i.dialogApi,n&&(r=t.getErrorStrings(n),s.displayTextAlert(s.SEVERITY_ERROR,r.title,r.msg,r.btn1).always(_.bind(function(){this._onButtonClick()},this)))},_onButtonClick:function(){var e=this.options,n=e.errorUiModel.get("error"),r,i=t.opFactory;if(!n)return;r=n.data.status,r===401?i.create("SigningInFromErrorOp",e).run():r===403?i.create("ShowingNextErrorOp",e).run():i.create("ShowingNextErrorOp",e).run()},_addUiModelEventListeners:function(){this.options.errorUiModel.on("change:error",this._onErrorChange)},_onErrorChange:function(t,n){if(n&&n.type!==e.ErrorUiModel.ERROR_TYPE_AJAX&&n.type!==e.ErrorUiModel.ERROR_TYPE_MISC)return;this._showError()}})}),define("app/dev/ops/listening/listening-for-view-events-op",["core/ac-core","app/ac-app","core/ops/op","core/views/view-events","app/views/view-events"],function(e,t){t.ListeningForViewEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._initEventMap()},run:function(){var e=$.Deferred();return t.viewMgr.on("all",this._onViewEvent),this._deferred=e,this._deferred.resolve(),e.promise()},_onViewEvent:function(t,n){var r,i;r=this._eventMap[t],r&&(i=r[0].create(r[1],n));if(!i){t!==e.ViewEvents.MENU_CLOSED&&LOG(0,"AcApp.ListeningForViewEventsOp._onViewEvent ignoring "+t);return}i.run().then(function(){return undefined},function(){return undefined})},_mapEvent:function(e,t,n,r,i){e[t]=[n,r,i]},_initEventMap:function(){var e,n,r,i;e=this._eventMap={},n=this._mapEvent,r=t.opFactory,i=t.ViewEvents,n(e,i.ACCOUNT_MENU_ITEM_CLICK,r,"SelectingAccountMenuItemOp"),n(e,i.ACCOUNT_MENU_BTN_CLICK,r,"TogglingAccountMenuOp"),n(e,i.HELP_MENU_BTN_CLICK,r,"TogglingHelpMenuOp"),n(e,i.ABOUT_CLICK,r,"NavigatingToAboutDlgOp"),n(e,i.ASK_US_CLICK,r,"ShowingUserForumOp"),n(e,i.SUPPORT_CLICK,r,"ShowingSupportHomeOp"),n(e,i.CHAT_WITH_US_CLICK,r,"ShowingChatPodOp"),n(e,i.TOOLBAR_ITEM_CLICK,r,"SelectingToolOp"),n(e,i.ACCOUNT_MENU_ITEM_CLICK,r,"SelectingAccountMenuItemOp"),n(e,i.ACROBAT_SELECT_FILTER,r,"SelectingAcrobatFilterOp"),n(e,i.ACROBAT_OPEN,r,"OpeningInAcrobatOp"),n(e,i.ACROBAT_CLOSE,r,"ClosingInAcrobatOp")}})}),define("app/dev/ops/listening/listening-for-window-events-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ListeningForWindowEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._updateWindowUiModel(!0)},run:function(){var e,t=$.Deferred();return e=$(window),e.resize(_.bind(function(){this._updateWindowUiModel(!1)},this)),this._deferred=t,this._deferred.resolve(),t.promise()},_updateWindowUiModel:function(e){var t=$(window),n=t.width(),r=t.height();if(this._oldWidth!==n||this._oldHeight!==r)this._oldWidth=n,this._oldHeight=r,this.options.windowUiModel.set({width:n,height:r},{silent:e})}})}),define("app/dev/ops/misc/handling-uncaught-exceptions-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){var n=0,r=10;return t.HandlingUncaughtExceptionsOp=e.Op.extend({run:function(){var e=this.options;return window.onerror=function(t,i,s,o,u){var a=e.appApi,f,l,c;if(!a)return!1;f=a.errorApi,l="window.onerror: "+t+" "+i+" line "+s,o&&(l+=", col "+o),u&&(c=u.stack,c&&(l+="\n"+c));try{f.notifyUncaughtExceptionCallbacks(t,i,s,o,u)&&n<r&&(n+=1,f.sendLogEvent(l))}catch(h){LOG.error("AcApp.StartingAppOp.run.initGlobalErrorHandler: "+(h.stack||h.message))}return!1},$.Deferred().resolve().promise()}}),t.HandlingUncaughtExceptionsOp}),define("app/dev/ops/misc/loading-custom-css-op",["core/ac-core","app/ac-app","core/utils/util","core/utils/css-util","core/ops/op"],function(e,t,n,r){return t.LoadingCustomCssOp=e.Op.extend({run:function(){var e=screen.width,t=screen.height,i=e/t;return n.isCEF()?(r.loadCss("static/css/main-cef.css"),r.loadCss("static/css/main-cef-ui-theme.css"),n.isWindows()?n.isWindows8()?r.loadCss("static/css/main-cef-win8.css"):r.loadCss("static/css/main-cef-win.css"):n.isMac()&&r.loadCss("static/css/main-cef-mac.css"),this._getResolvedPromise()):(n.isIE9orBelow()&&r.loadCss("css/main-lte-ie9.css"),n.isIE8()&&r.loadCss("css/main-lte-ie8.css"),e>=768&&e<=1024&&r.loadCss("css/main-ipad.css"),(e<=480||i>.56&&i<.57)&&r.loadCss("css/main-iphone.css"),this._getResolvedPromise())}}),t.LoadingCustomCssOp}),define("app/dev/ops/misc/loading-deep-link-plugins-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingDeepLinkPluginsOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi.pluginsApi;return e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:n.getPluginTypeConfig("deep_link"),pluginsUiModel:t.deepLinkPluginsUiModel},_.pick(t,"appApi","pluginId","force"))).run()}}),t.LoadingDeepLinkPluginsOp}),define("app/dev/ops/misc/loading-framework-versions-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingFrameworkVersionsOp=e.Op.extend({run:function(){var t=e.opFactory,n=[];return _.each(Ac.config.frameworkVersions,function(e){n.push(t.create("LoadingModuleOp").run({displayName:"Framework version "+e,url:"versions/framework-"+e}))}),$.when.apply(this,n)}}),t.LoadingFrameworkVersionsOp}),define("app/dev/ops/misc/loading-plugin-configs-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingPluginConfigsOp=e.Op.extend({run:function(){function f(){u+=1,u===o&&e.resolve()}function l(e){var t=n[e];return!_.isUndefined(_.find(r,function(e){return _.find(e.plugin_ids,function(e){return!_.isUndefined(t[e])})}))}var e=$.Deferred(),t=Ac.Plugins,n=t.groups,r=t.types,i=this.options.appApi.pluginsApi,s,o=0,u=0,a;return o=_.reduce(n,function(e,t){return t.config_url&&(e+=1),t.analytics_url&&(e+=1),e},0),o===0?e.resolve():(_.each(_.keys(n),function(e){if(!l(e)){LOG("AcApp.LoadingPluginConfigsOp.run '"+e+"' group has no configured plugins"),f();return}s=i.getGroupConfigUrl(e),s&&require([s],function(){i.setPluginGroupConfigLoaded(e,!0),f()},function(e){LOG("Ac.LoadingPluginConfigsOp.run '"+e.requireModules[0]+"' failed to load"),f()}),a=i.getGroupAnalyticsUrl(e),a&&require([a],function(){f()},function(e){LOG(0,"Ac.LoadingPluginConfigsOp.run '"+e.requireModules[0]+"' failed to load"),f()})}),e.promise())}}),t.LoadingPluginConfigsOp}),define("app/dev/ops/misc/loading-plugin-configs-versions-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingPluginConfigsVersionsOp=e.Op.extend({run:function(){var t=this.options,n=[],r,i;return i=e.opFactory.create("LoadingFrameworkVersionOp",t),_.each(Ac.Plugins.groups,function(e){r=e.FRAMEWORK_VERSION,r&&n.push(i.run(r))}),$.when.apply(this,n)}}),t.LoadingPluginConfigsVersionsOp}),define("app/dev/ops/misc/loading-rna-variant-info-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.LoadingRNAVariantInfoOp=e.Op.extend({run:function(){var e=$.Deferred(),t,r=this.options;return n.isCEF()?Ac.config.getEnvironment()==="dev"||Ac.config.getEnvironment()==="local"||Ac.config.getEnvironment()==="lint"?e.resolve().promise():(t=window.location.origin+"/variant.js",Ac.currentRNAVariants={},r.appApi.rnaApi.done(_.bind(function(t){var n=t.getVariantJsonFromRegistry();if(n&&n.length>0){var r=JSON.parse(n);r&&r[0]&&$.each(r[0],function(e,t){Ac.currentRNAVariants[e]=t})}e.resolve()},this),_.bind(function(){e.resolve()},this)),e.promise()):e.resolved().promise()}}),t.LoadingRNAVariantInfoOp}),define("app/dev/ops/misc/loading-rna-version-info-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.LoadingRNAVersionInfoOp=e.Op.extend({run:function(){var t=$.Deferred(),r,i,s;return n.isCEF()?(r=Ac.config.getEnvironment(),r==="dev"||r==="local"||r==="lint"?t.resolve().promise():(i=e.getBaseCloudUrl()+"rnaversion.js",s=window.location.origin+"/version.js",i?(require([i],function(){$.getJSON(s,function(e){var n;e?(Ac.currentRNAVersions={},n=_.values(e),_.each(n,function(e){_.each(e.plugin_ids,function(t){Ac.currentRNAVersions[t]=e["rna-version"]})}),t.resolve()):t.resolve()})},function(e){LOG("AcApp.LoadingRNAVersionInfoOp.run '"+e.requireModules[0]+"' failed to load"),t.resolve()}),t.promise()):t.resolve().promise())):t.resolved().promise()}}),t.LoadingRNAVersionInfoOp}),define("app/dev/ops/misc/loading-template-plugins-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingTemplatePluginsOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi.pluginsApi,r=t.templatePluginsUiModel;return r.set("instantiate_on_load",!1),e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:n.getPluginTypeConfig("template"),pluginsUiModel:r},_.pick(t,"appApi","pluginId","force"))).run()}}),t.LoadingTemplatePluginsOp}),define("app/dev/ops/misc/loading-typekit-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingTypekitOp=e.Op.extend({run:function(){var e={kitId:"eow2xot",scriptTimeout:3e3},t=document.getElementsByTagName("html")[0];t.className+=" wf-loading";var n=setTimeout(function(){t.className=t.className.replace(/(\s|^)wf-loading(\s|$)/g," "),t.className+=" wf-inactive"},e.scriptTimeout),r=document.createElement("script"),i=!1;r.src="//use.typekit.net/"+e.kitId+".js",r.type="text/javascript",r.async="true",r.onload=r.onreadystatechange=function(){var t=this.readyState;if(i||t&&t!="complete"&&t!="loaded")return;i=!0,clearTimeout(n);try{Typekit.load(e)}catch(r){}};var s=document.getElementsByTagName("script")[0];return s.parentNode.insertBefore(r,s),this._getResolvedPromise()}}),t.LoadingTypekitOp}),define("app/dev/templates/about-dlg-template",[],function(){return'<div class="about-dlg-content">    <div class="about-dlg-para about-dlg-copyright-para"         id="about-dlg-copyright-para">        <%= copyrightPara %>    </div>    <div class="about-dlg-para about-dlg-trademark-para"         id="about-dlg-trademark-para">        <%= trademarkPara %>    </div>    <div class="about-dlg-para about-dlg-portions-para"         id="about-dlg-portions-para">        <%= portionsPara %>    </div>    <div class="about-dlg-para about-dlg-microsoft-para"         id="about-dlg-microsoft-para">        <%= microsoftPara %>    </div>    <div class="about-dlg-para about-dlg-iris-para"         id="about-dlg-iris-para">        <%= irisPara %>    </div>    <div class="about-dlg-para about-dlg-solid-para"         id="about-dlg-solid-para">        <%= solidPara %>    </div>    <div class="about-dlg-para about-dlg-third-party-para"         id="about-dlg-third-party-para">        <%= thirdPartyPara %>    </div>     <div class="about-dlg-para about-dlg-build-num select-text"         id="about-dlg-build-num">        <%= buildNum %>    </div>    <div class="about-dlg-para about-dlg-plugin-versions select-text"         id="about-dlg-plugin-versions">    </div> </div><input class="control-button dialog-control-button              about-dlg-ok-btn"       type="button" id="about-dlg-ok-btn"       aria-label="<%= okBtn %>"       value="<%= okBtn %>" />'}),define("build-url",["core/ac-core"],function(e){e.buildUrl="#",e.buildNumber="000001",e.buildBranch="local/unknown",e.buildCommit="this-is-a-fake-gitish---of-proper-length",e.buildUntaggedVersion="1.0.0L",e.buildTaggedVersion="1.0.0L.dev000001"}),define("app/dev/views/about-dlg-view",["core/ac-core","app/ac-app","app/templates/about-dlg-template","i18n!core/nls/ui-strings","i18n!app/nls/ui-strings","core/utils/sc-analytics","core/utils/truncate","core/views/dialog-view","build-url"],function(e,t,n,r,i,s,o){var u="adobe.skybox.";t.AboutDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .about-dlg-ok-btn":"_onOkClick","click .about-dlg-build-num":"_onBuildNumClick","click .about-dlg-third-party-link":"_onThirdPartyClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this)},render:function(){return e.DialogView.prototype.render.call(this),this._appendToDialog(_.template(n)({copyrightPara:i.ABOUT_DLG_COPYRIGHT_PARA,trademarkPara:i.ABOUT_DLG_TRADEMARK_PARA,portionsPara:i.ABOUT_DLG_PORTIONS_PARA,microsoftPara:i.ABOUT_DLG_MICROSOFT_PARA,irisPara:i.ABOUT_DLG_IRIS_PARA,solidPara:i.ABOUT_DLG_SOLID_PARA,thirdPartyPara:this._getThirdPartyPara(),buildNum:this._getBuildNumText(),okBtn:r.OK})),this._initWrappers(),this._center(),this._truncateText(),this.$okBtn.focus(),this},close:function(t,n){return(!n||!n.noHistoryEffect)&&window.history.back(),e.DialogView.prototype.close.call(this,t,n)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$title=this.$(".about-dlg-title"),this.$thirdPartyLink=this.$(".about-dlg-third-party-link"),this.$okBtn=this.$(".about-dlg-ok-btn"),this.$pluginVersions=this.$(".about-dlg-plugin-versions")},_getThirdPartyPara:function(){var e=this._getLocalizedThirdPartyUrl();return _.template(i.ABOUT_DLG_THIRD_PARTY_PARA,{thirdPartyLink:"<a class='about-dlg-third-party-link' href='"+e+"' target='_blank'>"+e+"</a>"})},_getLocalizedThirdPartyUrl:function(){var t=e.Locale.getImsLocale(),n=t.substr(0,2),r=e.Config;return n==="en"?r.THIRD_PARTY_URL:(n==="ja"?n="jp":n==="nb"&&(n="no"),_.template(r.THIRD_PARTY_URL_TEMPLATE,{loc:n}))},_getBuildNumText:function(){return _.template(i.ABOUT_DLG_BUILD_NUMBER,{buildNum:e.buildTaggedVersion.replace(u,"")})},_truncateText:function(){o.truncateElementText(this.$title),o.truncateButtonLabel(this.$okBtn)},_showAllVersions:function(){var e=_.extend({},this.options,{force:!0}),n=e.appApi,r=n.displayApi,i=t.opFactory,s,o,a,f=this.$pluginVersions;s=i.create("LoadingAccountMenuOp",e),o=i.create("LoadingToolsOp",e),a=i.create("LoadingFileSelectionDlgHomeViewsOp",e),r.showSpinner(!0),$.when(s.run(),o.run(),a.run()).then(_.bind(function(){var t=e.appApi.pluginsApi.getVersionLists(),n=[];f.empty().append("Plugin Versions<br>"),_.each(t,function(e,t){var r=e.versionList;n.push(r),$.when(r).then(function(){f.append(t+": "),_.each(r,function(t){t&&f.append(t.replace(u,"")+" "+e.frameworkVersion)}),f.append("<br>")})}),this._center(),$.when.apply($,n).always(_.bind(function(){r.showSpinner(!1),this._center()},this))},this))},_onHistoryChange:function(){this.options.appApi.routerApi.isCurrentPath("about")||e.DialogView.prototype._onHistoryChange.call(this)},_onOkClick:function(){this.close()},_onBuildNumClick:function(){this._showAllVersions()},_onThirdPartyClick:function(){this._logSiteCatalystEvent([s.ADOBE_DOT_COM,s.PRODUCTS,s.EULA,s.THIRD_PARTY])}})}),define("app/dev/ops/misc/navigating-to-about-dlg-op",["core/ac-core","app/ac-app","core/ops/op","app/views/about-dlg-view"],function(e,t){return t.NavigatingToAboutDlgOp=e.Op.extend({run:function(){return this.options.appApi.routerApi.navigate("about",{trigger:!0}),this._getResolvedPromise()}}),t.NavigatingToAboutDlgOp}),define("app/dev/ops/misc/overriding-jquery-ajax-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.OverridingJQueryAjaxOp=e.Op.extend({run:function(){var e=$.ajax,t,n,r;return $.ajax=function(i,s){return s&&s.async===!1?(t=$.Deferred(),n=s.success,s.success=function(e,r,i){n&&n.call(undefined,e,r,i),t.resolve(e,r,i)},r=s.error,s.error=function(e,n,i){r&&r.call(undefined,e,n,i),t.reject(e,n,i)},e.call($,i,s),t.promise()):e.call($,i,s)},this._getResolvedPromise()}}),t.OverridingJQueryAjaxOp}),define("app/dev/ops/misc/redirecting-to-apollo-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.RedirectingToApolloOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi,r=t.usersMeSubscriptionsModel.get("subscriptions"),i,s=!0,o,u=n.usersMeApi.getCommonUserPrefs().lastToolUsed,a=n.routerApi.getPathname();if(e.Features.isFeatureEnabled("redirect_to_apollo")){if(_.isArray(r))for(o=0;o<r.length;o+=1){i=r[o];if(i.subscription_level!=="Free"){s=!1;break}}s&&!u&&a==="/"&&(window.location=e.Features.getFeature("apollo_url"))}return this._getResolvedPromise()}}),t.RedirectingToApolloOp}),define("app/dev/ops/misc/registering-app-apis-op",["core/ac-core","app/ac-app","core-unmapped/dev/utils/app-api-mgr","core/ops/op"],function(e,t,n){return t.RegisteringAppApisOp=e.Op.extend({run:function(){var e=this.options,t,r;return t=_.union(["dev"],Ac.config.frameworkVersions),_.each(t,function(t){n.addAppApi(t,new Ac.AppApi[t].AppApi(e))}),r=e.appApi=n.getAppApi(),LOG.setAppApi(r),$.Deferred().resolve().promise()}}),t.RegisteringAppApisOp}),define("app/dev/ops/misc/registering-plugins-ui-models-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.RegisteringPluginsUiModels=e.Op.extend({run:function(){var e=this.options,t=e.appApi.pluginsApi;return t.registerPluginsUiModel(t.getPluginTypeConfig("account_menu"),e.accountMenuPluginsUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("deep_link"),e.deepLinkPluginsUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("file_selection_dlg"),e.fileSelectionDlgHomeViewsUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("settings_dlg"),e.settingsDlgUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("tools"),e.toolsUiModel),n.isCEF()&&(t.registerPluginsUiModel(t.getPluginTypeConfig("full_preview"),e.fullPreviewPluginsUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("home_views"),e.homeViewsUiModel)),n.isCEF()&&(t.registerPluginsUiModel(t.getPluginTypeConfig("full_preview"),e.fullPreviewPluginsUiModel),t.registerPluginsUiModel(t.getPluginTypeConfig("home_views"),e.homeViewsUiModel)),$.Deferred().resolve().promise()}}),t.RegisteringPluginsUiModels}),define("app/dev/ops/misc/showing-about-dlg-op",["core/ac-core","app/ac-app","i18n!app/nls/ui-strings","core/ops/op","app/views/about-dlg-view"],function(e,t,n){t.ShowingAboutDlgOp=e.Op.extend({run:function(){var e=this.options,r=e.appApi.routerApi,i;return r.currentPathStartsWith("about")||r.navigate("about"),e.appApi.displayApi.showAccountMenu(!1),e.parentView||(e.parentView=t.viewMgr),i=new t.AboutDlgView(_.extend({},e,{title:n.ABOUT_DLG_TITLE})),i.open()}})}),define("app/dev/ops/misc/showing-load-failures-dlg-op",["core/ac-core","app/ac-app","i18n!app/nls/ui-strings","core/ops/op"],function(e,t,n){return t.ShowingLoadFailuresDlgOp=e.Op.extend({run:function(){var t=this.options,r=t.appApi,i=r.errorApi,s=r.dialogApi,o=i.getModulesNotLoaded();return e.Features.isFeatureEnabled("show_load_failures_ui")&&o.length>0?(o=_.sortBy(o,function(e){return e}),s.displayHtmlAlert(s.SEVERITY_ERROR,n.LOAD_FAILURES,_.template(n.MODULES_NOT_LOADED,{modules:o.join("<br/>")}))):$.Deferred().resolve().promise()}}),t.ShowingLoadFailuresDlgOp}),define("app/dev/ops/misc/showing-next-error-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ShowingNextErrorOp=e.Op.extend({run:function(){return this.options.errorUiModel.dequeueError(),this._getResolvedPromise()}})}),define("app/dev/ops/misc/showing-support-home-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ShowingSupportHomeOp=e.Op.extend({run:function(){var t;return this.options.pageHeaderUiModel.set("show_account_menu",!1),t=_.template(e.Config.SUPPORT_URL,{locale:e.Locale.getHelpLocale()}),window.open(t),this._getResolvedPromise()}})}),define("app/dev/ops/misc/showing-user-forum-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ShowingUserForumOp=e.Op.extend({run:function(){var t;return this.options.pageHeaderUiModel.set("show_account_menu",!1),t=_.template(e.Config.FORUM_URL,{locale:e.Locale.getHelpLocale()}),window.open(t),this._getResolvedPromise()}})}),define("app/dev/ops/misc/starting-history-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.StartingHistoryOp=e.Op.extend({run:function(){var e=this.options.appApi.routerApi,t,n,r,i={pushState:!0};n=!e.hasPushState()&&e.getPathname().indexOf("/send/jump")===0,n&&(i.pushState=!1,i.silent=!0),Backbone.History.started&&LOG.warn("AcApp.StartingHistoryOp.run: Already started",{logServer:!0}),t=Backbone.history;try{t.start(i)}catch(s){LOG.warn("AcApp.StartingHistoryOp: "+(s.stack||s.message),{logServer:!0})}return n&&(r=t.getFragment(null,!0),t.loadUrl(r)),$.Deferred().resolve().promise()}}),t.StartingHistoryOp}),define("app/dev/ops/misc/switching-language-op",["core/ac-core","app/ac-app","core/utils/cookie-util","core/utils/util","core/ops/op","jquery.cookie"],function(e,t,n,r){t.SwitchingLanguageOp=e.Op.extend({run:function(){var t=this.options;return r.isCEF()||(n.setCookie(e.Config.LANGUAGE_COOKIE,e.Locale.getImsLocale(t.locale)),t.appApi.routerApi.reloadPage({reason:"Switching language"})),this._getResolvedPromise()}})}),define("app/dev/ops/misc/toggling-account-menu-op",["core/ac-core","app/ac-app","core/utils/sc-analytics","core/ops/op"],function(e,t,n){t.TogglingAccountMenuOp=e.Op.extend({run:function(){var e=this.options,t=e.pageHeaderUiModel,r;return r=!t.get("show_account_menu"),t.set("show_account_menu",r),r&&e.appApi.siteCatalystApi.logScEvent([n.TOP_HEADER,n.USER_ACCOUNT_MENU,n.SHOWN]),this._getResolvedPromise()}})}),define("app/dev/ops/misc/toggling-help-menu-op",["core/ac-core","app/ac-app","core/utils/sc-analytics","core/ops/op"],function(e,t,n){t.TogglingHelpMenuOp=e.Op.extend({run:function(){var e=this.options,t=e.pageHeaderUiModel,r;return r=!t.get("show_help_menu"),t.set("show_help_menu",r),r&&e.appApi.siteCatalystApi.logScEvent([n.TOP_HEADER,n.HELP_MENU,n.SHOWN]),this._getResolvedPromise()}})}),define("app/dev/ops/misc/validating-rna-version-info-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.ValidatingRNAVersionInfoOp=e.Op.extend({run:function(e){var t=this.options,n,r,i=t.appApi.pluginsApi;return!Ac.rnaVersionInfo||!Ac.currentRNAVersions?this._getResolvedPromise():(r=i.getMinimumSupportedRNAVersion(e),n=i.getRNAVersion(e),n<r?this._getRejectedPromise():this._getResolvedPromise())}}),t.ValidatingRNAVersionInfoOp}),define("app/dev/ops/preferences/restoring-preferences-op",["core/ac-core","app/ac-app","core/utils/cookie-util","core/ops/op"],function(e,t,n){t.RestoringPreferencesOp=e.Op.extend({run:function(){var r=this.options,i=r.preferencesUiModel,s,o,u,a=r.quotaDlgUiModel;try{s=JSON.parse(n.getPersonalCookie(e.Config.PREFERENCES_COOKIE_PREFIX,r.appApi.usersMeApi.getUserIdentity().email)),i.setPreferences(s),o=i.getPreferences(t.APP_ID),u=o.quota,u&&a.set("running_out_shown",u.running_out_shown),r.appApi.pluginsApi.setPreferences(i.getPreferences())}catch(f){}return this._getResolvedPromise()}})}),define("app/dev/ops/preferences/saving-preferences-op",["core/ac-core","app/ac-app","core/utils/cookie-util","core/ops/op"],function(e,t,n){t.SavingPreferencesOp=e.Op.extend({run:function(){var r=this.options,i=$.Deferred(),s=r.preferencesUiModel,o=r.quotaDlgUiModel,u=r.appApi,a,f,l;return u&&(a=u.usersMeApi.getUserIdentity().email),a?(f=s.get("preferences"),l=f[t.APP_ID],l||(l=f[t.APP_ID]={}),l.quota={running_out_shown:o.get("running_out_shown")},l.lastToolUsed=r.toolsUiModel.getSelectedId(),u&&_.extend(f,u.pluginsApi.getPreferences()),n.setPersonalCookie(e.Config.PREFERENCES_COOKIE_PREFIX,a,JSON.stringify(f)),i.resolve().promise()):i.resolve().promise()}})}),define("app/dev/ops/rna/configuring-rna-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.ConfiguringRNAOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi;return this._getResolvedPromise()}}),t.ConfiguringRNAOp}),define("app/dev/ops/rna/initializing-rna-op",["core/ac-core","app/ac-app","core/utils/date-util","core/ops/op"],function(e,t,n){return t.InitializingRNAOp=e.Op.extend({run:function(){var t=this.options,r=t.appApi,i=e.opFactory,s,o;return s=i.create("InitializingCEFOp",t),o=i.create("InitializingReaderOp",t),n.logElapsedTime("before CreatingBrowserContext"),s.run().then(function(){n.logElapsedTime("after CreatingBrowserContext"),o.run()})}}),t.InitializingRNAOp}),define("app/dev/ops/rna/listening-for-dialog-alert-events-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.ListeningForDialogAlertEventsOp=e.Op.extend({run:function(){var e=this.options.dialogsUiModel;return e.on("change:open",this._onDialogCountChange),this._getResolvedPromise()},_onDialogCountChange:function(e){this.options.appApi.rnaApi.done(_.bind(function(t){e.length>0?t.rnaServicesAPI.setCanHandleCEFEvent(0,!0):t.rnaServicesAPI.setCanHandleCEFEvent(0,!1)},this))}}),t.ListeningForDialogAlertEventsOp}),define("app/dev/ops/rna/listening-for-notification-window-events-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.ListeningForNotificationWindowEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this)},run:function(){return this.$notificationContainer=$(".notification-content-container"),setInterval(_.bind(function(){this._handleResize()},this),250),this._handleResize(),(this._deferred=$.Deferred()).promise()},_handleResize:function(){var e,t;this.$notificationContainer.length===0&&(this.$notificationContainer=$(".notification-content-container"));if(this.$notificationContainer.length){e=this.$notificationContainer.width(),t=this.$notificationContainer.outerHeight(!0);if(this._oldWidth!==e||this._oldHeight!==t)this._oldWidth=e,this._oldHeight=t,this.options.appApi.rnaApi.done(function(n){n.cefBrowserApi({methodName:"setContainerSize",parameters:[e,t]})})}}})}),define("app/dev/ops/rna/listening-for-rhp-window-events-op",["core/ac-core","app/ac-app","core/utils/css-util","core/ops/op"],function(e,t,n){t.ListeningForRHPWindowEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this)},run:function(){return this.$rhpContainer=$(".rhp-container-content"),this.$alertDialogContainer=$(".generic-dialog-rhp"),setInterval(_.bind(function(){this._handleResize()},this),250),this._handleResize(),(this._deferred=$.Deferred()).promise()},_handleResize:function(){var e,t;this.$rhpContainer.length===0&&(this.$rhpContainer=$(".rhp-container-content")),this.$alertDialogContainer&&this.$alertDialogContainer.length===0&&(this.$alertDialogContainer=$(".generic-dialog-rhp")),e=this.$rhpContainer.width(),t=this.$rhpContainer.height(),this.$alertDialogContainer&&this.$alertDialogContainer.length>0&&t<this.$alertDialogContainer.height()&&(t=n.getFullHeight(this.$alertDialogContainer)),e&&t&&(this._oldWidth!==e||this._oldHeight!==t)&&(this._oldWidth=e,this._oldHeight=t,this.options.appApi.rnaApi.done(function(n){n.cefBrowserApi({methodName:"setContainerSize",parameters:[e,t]})}))}})}),define("app/dev/views/reader-events",["app/ac-app"],function(e){e.ReaderEvents={}}),define("app/dev/views/cef-events",["app/ac-app"],function(e){e.CefEvents={}}),define("app/dev/ops/rna/listening-for-rna-events-op",["core/ac-core","app/ac-app","core/ops/op","app/views/reader-events","app/views/cef-events"],function(e,t){t.ListeningForRNAEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._initEventMap()},run:function(){return(this._deferred=$.Deferred()).promise()},_onRNAEvent:function(e,t,n){var r,i;r=this._eventMap[e],r&&(i=r[0].create(r[1],options));if(!i){LOG(0,"AcApp.ListeningForRNAEventsOp._onRNAEvent ignoring "+e);return}i.run().then(function(){},function(){})},_mapEvent:function(e,t,n,r,i){e[t]=[n,r,i]},_initEventMap:function(){var n,r,i,s,o,u;n=this._eventMap={},r=this._mapEvent,i=e.opFactory,s=t.opFactory,o=t.ReaderEvents,u=t.CefEvents}})}),define("app/dev/ops/rna/listening-for-session-events-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.ListeningForSessionEventsOp=e.Op.extend({run:function(){var e=$.Deferred();return this.options.appApi.rnaApi.done(_.bind(function(e){var t=e._sessionAPI;t.on("custom:sessionChange",this._onSessionChange)},this)),this._deferred=e,e.promise()},_onSessionChange:function(e,t){var n=this.options,r=t.params.selfInit,i=t.params.isSignedIn,s=n.appApi,o=n.signInUiModel.get("is_signed_in");if(!r)if(i===!1)o?s.sessionApi.signedOut(!0):n.signInUiModel.trigger("change:is_signed_in");else if(o===!1)return s.sessionApi.ensureSignedIn()}}),t.ListeningForSessionEventsOp}),define("app/dev/ops/routing/initializing-app-routes-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){return t.InitializingAppRoutesOp=e.Op.extend({run:function(){var e=this.options.appApi.routerApi;return e.getQueryParams(),e.getHash(),e.getPathname(),e.removeSusiHashParams(),n.isCEF()?(e.route("",this._onBlankContentPage),e.route(":pluginId",this._onRNAContentPage),e.route("notification",this._onNotificationContentPage),e.route(":pluginId/:command(/:argument)",this._onRNACommandPage),e.route("rhp/:pluginId",this._onRHPContentPage),e.route("file_select",this._onFileSelectionPage),e.route("file_save_as",this._onFileSaveAsPage)):(e.route("*params",this._onSusiRedirect),e.route("content",this._onContentPage),e.route("about",this._onAbout)),this._getResolvedPromise()},_onBlankContentPage:function(){return this.options.runningInFull=!0,document.title=document.location.href,this._getRoutingAtContentPagePromise()},_onRNAContentPage:function(e){this.options.runningInFull=!0,document.title=document.location.href;if(e)return this.options.appApi.pluginsApi.selectPlugin(e)},_onRNACommandPage:function(e,t,n){this.options.runningInFull=!0,this.options.runningInCommand=t,this.options.runningInArgument=n,document.title=document.location.href;if(e)return this.options.appApi.pluginsApi.selectPlugin(e)},_onRHPContentPage:function(e){return this._unsetRoutingAtContentPagePromise(),this.options.runningInRHP=!0,Ac.Plugins.types.full_preview.default_plugin_id=e,document.title=document.location.href,t.opFactory.create("ListeningForRHPWindowEventsOp",this.options).run(),this._getRoutingAtContentPagePromise()},_onNotificationContentPage:function(){return this._unsetRoutingAtContentPagePromise(),this.options.runningInNotification=!0,document.title=document.location.href,t.opFactory.create("ListeningForNotificationWindowEventsOp",this.options).run(),this._getRoutingAtContentPagePromise()},_onFileSelectionPage:function(){return this._unsetRoutingAtContentPagePromise(),this.options.runningInFileSelection=!0,document.title=document.location.href,this._getRoutingAtContentPagePromise()},_onFileSaveAsPage:function(){return this._unsetRoutingAtContentPagePromise(),this.options.runningInFileSelection=!0,this.options.runningInFileSaveAs=!0,document.title=document.location.href,this._getRoutingAtContentPagePromise()},_onContentPage:function(){return this._getRoutingAtContentPagePromise()},_onSusiRedirect:function(e){return this._getRoutingAtContentPagePromise()},_onAbout:function(){var e=this.options,n=t.opFactory.create("ShowingAboutDlgOp",e);this._getRoutingAtContentPagePromise().then(function(){_.delay(function(){n.run()},e.accountMenuPluginsUiModel.get("deselect_delay"))})},_unsetRoutingAtContentPagePromise:function(){var e=this.options;e.runningInFull===!0&&(e.runningInFull=!1,t.viewMgr.unsetContentPageView(),e.appApi.sessionApi.setRoutingAtContentPagePromise(undefined))},_getRoutingAtContentPagePromise:function(){return this.options.appApi.sessionApi.getRoutingAtContentPagePromise()}}),t.InitializingAppRoutesOp}),define("app/dev/ops/routing/initializing-sc-logging-op",["core/ac-core","app/ac-app","core/utils/sc-analytics","core/ops/op"],function(e,t,n){return t.InitializingScLoggingOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi,r=t.siteCatalystApi.logScEvent,i=n.INITIAL_STARTUP,s,o;return r(i),r([i,t.usersMeApi.getUserIdentity().first_time?n.FIRST_TIME_USER:n.RETURNING_USER]),s=t.usersMeApi.getUserCohorts(),_.each(s,function(e,t){o=t.indexOf("-")>0?t.split("-")[0]:n.UNKNOWN,r([n.AB_TEST,o,n.UNKNOWN,t,e])}),Ac.currentRNAVariants&&_.each(Ac.currentRNAVariants,function(e,i){var s=t.pluginsApi.getSiteCatalystName(i,i,!0);r([n.WEB_PLUGIN_VARIANT,s,e])}),this._getResolvedPromise()}}),t.InitializingScLoggingOp}),define("app/dev/ops/routing/rna-routing-at-content-page-op",["core/ac-core","files/ac-files","app/ac-app","plugins-common/ac-plugins","core/utils/app-api-mgr","core/utils/date-util","core/utils/view-util","core/ops/op"],function(e,t,n,r,i,s,o){return n.RNARoutingAtContentPageOp=e.Op.extend({run:function(r,u){function O(){return Ac.Plugins.types.tools.default_plugin_id}function M(){return Ac.Plugins.types.full_preview.default_plugin_id}function _(){d.run(),L.run().always(function(){g.run()}),o.init(a);if(a.toolsUiModel.get("pending_plugin_id"))return n.viewMgr.showContentPageView(a),C;if(a.runningInRHP&&n.viewMgr.isContentPageViewUnset())return n.viewMgr.showContentPageView(a),w.run(M());if(a.runningInFull)return n.viewMgr.showContentPageView(a),p.run(O());if(a.runningInFileSelection&&n.viewMgr.isContentPageViewUnset())return T.run();if(a.runningInNotification&&n.viewMgr.isContentPageViewUnset())return n.viewMgr.showContentPageView(a),C}var a=this.options,f=a.appApi,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C=this._getResolvedPromise(),k,L,A;s.logElapsedTime("routing-at-content-page-op start"),l=e.opFactory,c=n.opFactory,h=t.opFactory,d=c.create("ShowingLoadFailuresDlgOp",a),E=c.create("GettingAllBaseUrisOp",a),v=c.create("GettingStorageInfoOp",a),m=c.create("GettingAllUserInfoOp",a),g=c.create("InitializingScLoggingOp",a),S=l.create("StartingSusiSessionOp",a),x=c.create("LoadingTemplatePluginsOp",a),y=c.create("LoadingToolsOp",a),p=c.create("SelectingToolOp",a),b=h.create("LoadingFullPreviewPluginsOp",a),w=h.create("SelectingFullPreviewPluginOp",a),T=c.create("LoadingFileSelectionDlgOp",a),N=c.create("LoadingFileSelectionDlgHomeViewsOp",a),k=c.create("LoadingRNAVersionInfoOp",a),L=c.create("LoadingRNAVariantInfoOp",a),A=l.create("GettingDocumentCloudStorageInfoOp",a);if(!r)return s.logElapsedTime("before base uris + plugin configs"),$.when(S.run(),E.run(),k.run()).then(function(){return f.pluginsApi.validateRNAPlugin(u).then(function(){return s.logElapsedTime("after starting susi"),A.run().then(function(){return $.when(v.run(),m.run()).then(function(){a.signInUiModel.set("is_signed_in",!0)})},function(e){return e.errorString==="NoAccessToPdfServices"&&a.signInUiModel.set("is_signed_in",!0),$.Deferred().reject(e).promise()})})});i.appApisAreReady();if(a.runningInRHP)return b.run().then(function(){return _()});if(a.runningInFull)return x.run().then(function(){if(a.runningInFull)return y.run().then(function(){return _()})});if(a.runningInFileSelection)return x.run().then(function(){return e.opFactory.create("GettingConnectorsUiHelpersOp",a).run(),e.opFactory.create("GettingSystemFoldersOp",a).run(),_()});if(a.runningInNotification)return _()}}),n.RNARoutingAtContentPageOp}),define("app/dev/ops/routing/routing-at-content-page-op",["core/ac-core","app/ac-app","plugins-common/ac-plugins","core/utils/app-api-mgr","core/utils/date-util","core/utils/ipm-util","core/ops/op"],function(e,t,n,r,i,s){return t.RoutingAtContentPageOp=e.Op.extend({run:function(){function h(){var e=u.getSubscriptionName(),t;switch(e){case u.SUBSCRIPTION_ACROBATPLUS:case u.SUBSCRIPTION_ACROBATSTD:t=n.ACROBAT;break;case u.SUBSCRIPTION_CREATEPDF:case u.SUBSCRIPTION_PDFPACK:t=n.CONVERTPDF;break;case u.SUBSCRIPTION_EXPORTPDF:t=n.EXPORTPDF;break;case u.SUBSCRIPTION_FILES:t=n.HOME;break;case u.SUBSCRIPTION_FILLANDSIGN:t=n.FILLSIGN;break;case u.SUBSCRIPTION_FORMSCENTRAL:t=n.FORMSCENTRAL;break;case u.SUBSCRIPTION_SENDNOW:t=n.SEND}return t}var e=this.options,o=e.appApi,u=o.usersMeApi,a=o.pluginsApi,f,l,c;return i.logElapsedTime("routing-at-content-page-op start"),l=t.opFactory,c=l.create("SelectingToolOp",e),r.appApisAreReady(),e.toolsUiModel.get("pending_plugin_id")?this._getResolvedPromise():(f=u.getCommonUserPrefs(),c.run(a.getEnabledPlugin(f.lastToolUsed)||s.getMarketingTool()||a.getEnabledPlugin(h())))}}),t.RoutingAtContentPageOp}),define("app/dev/ops/session/handling-401-error-op",["core/ac-core","app/ac-app","core/utils/http-util","core/utils/util","core/ops/op"],function(e,t,n,r){var i;t.Handling401ErrorOp=e.Op.extend({run:function(e){var t=this.options,s=t.appApi,o=this._getResolvedPromise();return t.acrobatUiModel.get("is_in_acrobat")?o:(r.isCEF()&&s.usersMeApi.clearUserInfo(),t.signInUiModel.set("is_signed_in",!1),i||(n.clearSessionAttrs(t.sessionUiModel),r.isCEF()?e||(o=s.sessionApi.ensureSignedIn().then(function(){i=!1}),i=!0):(s.routerApi.reloadPage({reason:"401"}),i=!0)),o)}})}),define("app/dev/ops/session/signing-in-from-error-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){t.SigningInFromErrorOp=e.Op.extend({run:function(){var e=this.options;return e.errorUiModel.clearQueue(),n.isCEF()?this._getResolvedPromise():t.opFactory.create("SigningOutOp",e).run()}})}),define("app/dev/ops/session/signing-out-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.SigningOutOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi.displayApi;return n.showModal(!0),n.showSpinner(!0),e.opFactory.create("StoppingSessionOp",t).run().then(function(e){window.location=e.uri})}})}),define("app/dev/ops/settings-dlg/loading-settings-dlg-views-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.LoadingSettingsDlgViewsOp=e.Op.extend({run:function(){var t=this.options,n=t.appApi.pluginsApi;return e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:n.getPluginTypeConfig("settings_dlg"),pluginsUiModel:t.settingsDlgUiModel},_.pick(t,"appApi","pluginId","force"))).run()}}),t.LoadingSettingsDlgViewsOp}),define("app/dev/ops/settings-dlg/selecting-settings-dlg-plugin-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.SelectingSettingsDlgPluginOp=e.Op.extend({run:function(t){return e.opFactory.create("SelectingPluginOp",this.options).run(t)}}),t.SelectingSettingsDlgPluginOp}),define("app/dev/templates/settings-dlg-template",[],function(){return'<div role="dialog" class="generic-dialog settings-dlg ui-theme theme-container" data-test-name="dlg"><div class="dialog-title-bar"><div class="dialog-icon"></div><div class="dialog-title theme-text"><%- title %></div></div><div class="settings-dlg-content dialog-content"><div class="settings-dlg-view"><div class="settings-dlg-views-selector views-selector"></div><div class="settings-dlg-views-content views-content"><div class="settings-dlg-plugin-content"></div><div class="settings-dlg-btns"><input type="button"class="control-button dialog-control-button settings-dlg-done-btn theme-button theme-button-label" aria-label="<%= done %>" value="<%= done %>"/></div></div></div></div></div>'}),define("app/dev/templates/settings-dlg-selector-template",[],function(){return'<div class="settings-dlg-selector plugin-selector">    <div class="settings-dlg-selector-label unselectable"><%= label %>    </div></div>'}),define("app/dev/views/settings-dlg-selector-view",["core/ac-core","app/ac-app","app/templates/settings-dlg-selector-template","core/views/plugins-selector-view","app/views/view-events"],function(e,t,n){t.SettingsDlgSelectorView=e.PluginsSelectorView.extend({initialize:function(){e.PluginsSelectorView.prototype.initialize.call(this)},_getSelectorTemplate:function(){return n},_getSelectorViewEvent:function(){return t.ViewEvents.SETTINGS_DLG_SELECTOR_CLICK}})}),define("app/dev/templates/settings-dlg-content-template",[],function(){return'<div class="settings-dlg-content"></div>'}),define("app/dev/views/settings-dlg-content-view",["core/ac-core","app/ac-app","app/templates/settings-dlg-content-template","core/views/plugins-content-view"],function(e,t,n){t.SettingsDlgContentView=e.PluginsContentView.extend({_getContentTemplate:function(){return n}})}),define("app/dev/views/settings-dlg-view",["core/ac-core","app/ac-app","core/utils/util","app/templates/settings-dlg-template","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/views/dialog-view","app/views/settings-dlg-selector-view","app/views/settings-dlg-content-view"],function(e,t,n,r,i,s){t.SettingsDlgView=e.DialogView.extend({events:function(){return _.extend({},e.DialogView.prototype.events,{"click .settings-dlg-done-btn":"_onDoneClick"})},initialize:function(){e.DialogView.prototype.initialize.call(this),this._setParentScContext(this.options.scContext)},render:function(){return e.DialogView.prototype.render.call(this,!1),this.$el.empty().html(_.template(r)({title:this._getTitle(),done:i.DONE})),this._initWrappers(),n.isCEF()&&this.$dlg.addClass("cef"),this._center(),this.$dlg.addClass("shown"),this._renderChildViews(),this},open:function(n){var r,i=this.options,s=i.appApi.pluginsApi,o;return this._pluginOptions=n,o=t.opFactory.create("LoadingSettingsDlgViewsOp",i),o.run().then(_.bind(function(){return s.callPluginMethodForEach(s.getPluginTypeConfig("settings_dlg").plugin_ids,"setPluginOptions",n,undefined,!0),r=e.DialogView.prototype.open.call(this),this._selectPlugin(undefined,n),r},this))},close:function(t,n){var r=this.$dlg,i;delete this._pluginOptions,i=_.bind(function(){e.DialogView.prototype.close.call(this,t,n)},this),r.removeClass("shown"),i()},_onViewEvent:function(e,n){var r=t.ViewEvents;if(e===r.SETTINGS_DLG_SELECTOR_CLICK)return this._selectPlugin(n);this.trigger(e,n)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$selector=this.$(".views-selector"),this.$content=this.$(".settings-dlg-plugin-content")},_renderChildViews:function(){var e=_.extend({},this.options,{pluginsUiModel:this.options.settingsDlgUiModel});this._renderChildView("_contentView",t.SettingsDlgContentView,this.$content,e),this._renderChildView("_selectorView",t.SettingsDlgSelectorView,this.$selector,e)},_getTitle:function(){return i.SETTINGS},_selectPlugin:function(e){var n,r=this._pluginOptions;return e||(e=this.options,n=e.settingsDlgUiModel.getSelectedId()||e.appApi.pluginsApi.getPluginTypeConfig("settings_dlg").default_plugin_id,this._logSiteCatalystEvent([s.SHOWN]),e=_.extend({},e,{pluginId:n})),r=r||{},r.scContext=this._getFullScContext(),t.opFactory.create("SelectingSettingsDlgPluginOp",e||this.options).run(r).then(_.bind(function(){return undefined},this))},_onDoneClick:function(){this._logSiteCatalystEvent([s.COMPLETED]),this.close(!0)}})}),define("app/dev/ops/settings-dlg/showing-settings-dlg-op",["core/ac-core","app/ac-app","core/ops/op","app/views/settings-dlg-view"],function(e,t){return t.ShowingSettingsDlgOp=e.Op.extend({run:function(){return(new t.SettingsDlgView(this.options)).open()}}),t.ShowingSettingsDlgOp}),define("app/dev/ops/site-catalyst/get-framework-pages-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){t.GetFrameworkPagesOp=e.Op.extend({run:function(){var e={Term:{kind:"value",values:["Monthly","AnnualBilledMonthly","AnnualBilledAnnually","None"]},FileList:{kind:"value",values:["DOCCLD:FileList","CCLOUD:FileList","ONEDRV:FileList","RecentFiles"]},Connector:{kind:"value",values:["DOCCLD","CCLOUD","ONEDRV"]},BusinessSource:{kind:"value",values:["Dell","AcPr","CCM","Tril","None","TEAM"]},PreviewType:{kind:"value",values:["Preview","Preview:NGDoc"]},CountValue2:{kind:"value",values:["2to5","6to10","11orMore"]},CountValue1:{kind:"value",values:["1","2to5","6to10","11orMore"]},CountValue0:{kind:"value",values:["0","1","2to5","6to10","11orMore"]}},t=[{pageName:"free:InitialStartup",selector:""},{pageName:"adobe.com:products:eula:third_party",selector:""},{pageName:"InitialStartup",selector:""},{pageName:"InitialStartup:FirstTimeUser",selector:""},{pageName:"InitialStartup:ReturningUser",selector:""},{pageName:"ABTEST:<TestName>:<VariantName>",selector:""},{pageName:"ChatPod:Expanded",selector:""},{pageName:"ChatPod:Shrunk",selector:""},{pageName:"ChatPod:Hidden",selector:""},{pageName:"ChatPod:Entered",selector:""},{pageName:"ChatPod:Left",selector:""},{pageName:"ChatPod:Sent",selector:""},{pageName:"ABTest:Control:CHAT_POD_TEST",selector:""},{pageName:"ABTest:Var1:CHAT_POD_TEST",selector:""},{pageName:"ABTest:Var2:CHAT_POD_TEST",selector:""},{pageName:"General:Error:400",selector:""},{pageName:"General:Error:401",selector:""},{pageName:"General:Error:403:Forbidden:FolderNotEmpty",selector:""},{pageName:"General:Error:403:Forbidden:QuotaExceeded",selector:""},{pageName:"General:Error:403:Forbidden:VirusDetected",selector:""},{pageName:"General:Error:403:Generic",selector:""},{pageName:"General:Error:404:NotFound",selector:""},{pageName:"General:Error:405",selector:""},{pageName:"General:Error:406",selector:""},{pageName:"General:Error:412",selector:""},{pageName:"General:Error:415",selector:""},{pageName:"General:Error:500",selector:""},{pageName:"General:Error:501",selector:""},{pageName:"General:Error:503",selector:""},{pageName:"General:Error:504",selector:""},{pageName:"SignIn:Shown",selector:""},{pageName:"TopHeader:AcomTrefoil:Clicked",selector:""},{pageName:"TopHeader:Acrobat.com:Clicked",selector:""},{pageName:"TopHeader:Apps:Clicked",selector:""},{pageName:"TopHeader:AppsMenu:Shown",selector:""},{pageName:"TopHeader:Help:Clicked",selector:""},{pageName:"TopHeader:HelpMenu:Shown",selector:""},{pageName:"TopHeader:UserAcctMenu:Clicked",selector:""},{pageName:"TopHeader:UserAcctMenu:Shown",selector:""},{pageName:"TopHeader:UserAcctMenu:MyInformation",selector:""},{pageName:"TopHeader:UserAcctMenu:Language",selector:""},{pageName:"TopHeader:UserAcctMenu:MyPlan",selector:""},{pageName:"TopHeader:UserAcctMenu:SignOut",selector:""},{pageName:"TopHeader:UserAcctMenu:StorageLearnMore:Clicked",selector:""},{pageName:"TopHeader:HelpMenu:AskUs",selector:""},{pageName:"TopHeader:HelpMenu:AboutProduct",selector:""},{pageName:"TopHeader:HelpMenu:ProductHelp",selector:""},{pageName:"TopHeader:User:acctMenu:SettingsDlg",selector:""},{pageName:"Tools:Files:Clicked",selector:""},{pageName:"Toolbar:AddFiles:Clicked",selector:""},{pageName:"<FileList>:SmallPreview:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SmallPreview:NextPg",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SmallPreview:PrevPg",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:InitialView:NumFilesShown:<CountValue0>",selector:"",variables:{FileList:e.FileList,CountValue0:e.CountValue0},values:e.CountValue0},{pageName:"<FileList>:InitialView:NumFoldersShown:<CountValue0>",selector:"",variables:{FileList:e.FileList,CountValue0:e.CountValue0},values:e.CountValue0},{pageName:"FileList:AllFiles:Clicked",selector:""},{pageName:"<FileList>:NewFolderIcon:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NewFolderDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NewFolderDlg:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NewFolderDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NewFolderDlg:Error:FolderExists",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:UploadIcon:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:Empty:UploadIcon:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:Upload:NumFiles:<CountValue1>",selector:"",variables:{FileList:e.FileList,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"<FileList>:Upload:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"FileList:RecentFiles:Clicked",selector:""},{pageName:"<FileList>:<Connector>:Clicked",selector:"",variables:{FileList:e.FileList,Connector:e.Connector},values:e.Connector},{pageName:"<FileList>:IPM:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Existing",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Uploaded",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Rename",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Continue",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:DeleteExisting:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:DeleteUploaded:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:RenameFile:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:RenameFile:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:RenameFile:Error:FileExists",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:DupFileNameDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Keyword:Cleared",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Keywords:Dismissed",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SearchTextEntered",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Results:<CountValue1>",selector:"",variables:{FileList:e.FileList,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"<FileList>:SearchBar:Results:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:FilterIcon:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:NameContains",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:Name:Entered",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:DateAddedIs",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:Date:Entered",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:DateModifiedIs",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:DateModified:Entered",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Excel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:HTML",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Image",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:InDesign",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:PDF",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Photoshop",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Powerpoint",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Text",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Video",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Zip",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileType:Word",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:IsShared",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:FileLocation",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:ExportPDF",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:CreatePDF",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:Combine",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:ReaderMobile",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:Reader",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Filter:CreatedByTool:Acrobat",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortIcon:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:Sort:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:ViewBy:List:Checked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:ViewBy:Thumb:Checked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileNameDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileNameUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileTypeDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileTypeUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileSizeUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:FileSizeDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:DateAddedUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:DateAddedDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:DateModifiedDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SearchBar:SortBy:DateModifiedUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:NameUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:NameDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:SizeUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:SizeDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:DateUp",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:SortColumn:DateDown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:FileName:Checked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:FileName:Unchecked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NumFilesChecked:<CountValue1>",selector:"",variables:{FileList:e.FileList,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"<FileList>:ActionBar:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Cancel:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:FolderName:Checked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:FolderName:Unchecked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:NumFoldersChecked:<CountValue1>",selector:"",variables:{FileList:e.FileList,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"<FileList>:ActionBar:Rename:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:NameEntered",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Error:FileExists",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:RenameDlg:Error:FolderExists",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Move:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:MoveDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:MoveDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:MoveDlg:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Download:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Download:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Share:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Delete:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:DeleteDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:DeleteDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:DeleteDlg:Success",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Delete:Error:FolderNotEmpty:Op",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Delete:ErrorDlg:Shown",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<FileList>:ActionBar:Delete:ErrorDlg:Cancel",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"<PreviewType>:DownloadLink:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearIcon:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:DownloadIcon:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:Download:Success",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:Rename:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:RenameDlg:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:RenameDlg:NameEntered",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:RenameDlg:Cancel",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:RenameDlg:Success",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:Delete:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:DeleteDlg:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:DeleteDlg:Cancel",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:DeleteDlg:Success",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:GearMenu:Share:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:PDF:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:NonPDF:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:PDF:Failed",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:NonPDF:Failed",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"Preview:Shared:Multi:Preview:Shown",selector:""},{pageName:"Preview:Shared:Multi:Preview:Toolbar:FileInfo",selector:""},{pageName:"Preview:Shared:Multi:Preview:Toolbar:ShareIcon",selector:""},{pageName:"Preview:Shared:Multi:Preview:Toolbar:Back",selector:""},{pageName:"Preview:Shared:Single:Preview:Shown",selector:""},{pageName:"Preview:Shared:Single:Preview:Toolbar:FileInfo",selector:""},{pageName:"Preview:Shared:Single:Preview:Toolbar:ShareIcon",selector:""},{pageName:"Preview:Shared:Single:Preview:RHP:ShareFileButton",selector:""},{pageName:"Preview:Private:Single:Toolbar:FileInfo",selector:""},{pageName:"Preview:Private:Single:Toolbar:ShareIcon",selector:""},{pageName:"Preview:Private:Single:RHP:Share:PublicLink",selector:""},{pageName:"Preview:Private:Single:RHP:Share:PersonalLink",selector:""},{pageName:"Preview:Private:Single:RHP:Subject:Entered",selector:""},{pageName:"Preview:Private:Single:RHP:Message:Entered",selector:""},{pageName:"Preview:Private:Single:RHP:Subject:Default",selector:""},{pageName:"Preview:Private:Single:RHP:Message:Default",selector:""},{pageName:"Preview:Private:Single:RHP:ShareButton",selector:""},{pageName:"Preview:Private:Single:RHP:CancelButton",selector:""},{pageName:"Preview:Private:Single:CommentPane:Shown",selector:""},{pageName:"RecView:Preview:BottomNavBar:ShowRHP",selector:""},{pageName:"RecView:Multi:Preview:IPM",selector:""},{pageName:"RecView:Multi:Preview:SavetoAcrobat",selector:""},{pageName:"RecView:Single:IPM",selector:""},{pageName:"RecView:Single:SavetoAcrobat",selector:""},{pageName:"<PreviewType>:Shown",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:FitPgFull",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:FitPgWidth",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:FullScreen",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:ShowRHP",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:HideRHP",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:NextPg",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:PrevPg",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:Scroll",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:Close",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:PgNumEntered",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:ShowImagePreview",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:ShowNGDocPreview",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:ZoomIn",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:BottomNavBar:ZoomOut",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:FileInfo:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"<PreviewType>:Toolbar:Back:Clicked",selector:"",variables:{PreviewType:e.PreviewType},values:e.PreviewType},{pageName:"Tools:Share:ChooseFilesDlg:RecFiles:Shown",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:RecFiles:ChooseFiles:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:RecFiles:AddSelected:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:RecFiles:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:SentFiles:Shown",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:SentFiles:ChooseFiles:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:SentFiles:AddSelected:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:SentFiles:Cancel",selector:""},{pageName:"ProgressStatusMenu:Shown",selector:""},{pageName:"ProgressStatusMenu:Hidden",selector:""},{pageName:"ProgressStatusMenu:RemoveHistory:Clicked",selector:""},{pageName:"Tools:ExportPDF:Clicked",selector:""},{pageName:"<FileList>:ActionBar:ExportPDF:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"Tools:CreatePDF:Clicked",selector:""},{pageName:"<FileList>:ActionBar:CreatePDF:Clicked",selector:"",variables:{FileList:e.FileList},values:e.FileList},{pageName:"Tools:Combine:Clicked",selector:""},{pageName:"Tools:Organize:Clicked",selector:""},{pageName:"Tools:Acrobat:Clicked",selector:""},{pageName:"Tools:CreateForm:Clicked",selector:""},{pageName:"Tools:SettingsDlg:InitialView:<settings-plugin>",selector:""},{pageName:"Tools:SettingsDlg:Close:<settings-plugin>",selector:""},{pageName:"Tools:SettingsDlg:Cancel",selector:""},{pageName:"BusinessSource:<BusinessSource>",selector:"##aic-business-source",variables:{BusinessSource:e.BusinessSource},values:e.BusinessSource},{pageName:"BillingTerm:<Term>",selector:"##aic-subscription-term",variables:{Term:e.Term},values:e.Term},{pageName:"Tools:SendforSig:Clicked",selector:""}];return $.Deferred().resolve({variables:e,pages:t}).promise()}})}),define("app/dev/ops/site-catalyst/register-page-names-op",["core/ac-core","app/ac-app","core/utils/sc-analytics","core/ops/op"],function(e,t,n){var r=function(e,t,n,r){var i,s;return _.each(t,function(o,u){i=o.replace(/<|>/g,"");if(o.length-i.length!==2)return;(!e.variables||!e.variables[i])&&LOG("Missing site-catalyst variable: "+i,LOG.ERROR,{logServer:!0}),e.variables[i].kind==="value"?s=r&&r.value:s=n.data(i),s||LOG("Missing site-catalyst value for:"+i+" page: "+e.pageName+" selector: "+e.selector,LOG.ERROR,{logServer:!0}),t[u]=s}),t},i=function(e,t,n){var i=r(e,e.pageName.split(":"),t,n),s;return e.prop48&&(s={rawProperties:{}},s.rawProperties.prop48=r(e,e.prop48.split(":"),t,n)),e.prop49&&(s={rawProperties:{}},s.rawProperties.prop49=r(e,e.prop49.split(":"),t,n)),{page:i,options:s}},s=function(e,t,n,r){var s=i(t,n,r);e.logScEvent(s.page,s.options)},o=function(e){var t=$(e.currentTarget);_.find(this.eventStore.clickEvents,function(e){if(t.is(e.selector))return s(this.scApi,e,t),!0},this)},u=function(e){var t=$(e.currentTarget),n;if(!t.is(":visible"))return;if(e.currentTarget!==e.target)return;n=_.find(this.eventStore.renderEvents,function(e){if(t.is(e.selector))return!0},this),n&&s(this.scApi,n,t)},a=function(e){var t=$(e.currentTarget);if(e.currentTarget!==e.target)return;_.find(this.eventStore.dialogSuccessEvents,function(e){if(t.is(e.selector))return s(this.scApi,e,t),!0},this)},f=function(e){var t=$(e.currentTarget);if(e.currentTarget!==e.target)return;_.find(this.eventStore.dialogCancelEvents,function(e){if(t.is(e.selector))return s(this.scApi,e,t),!0},this)},l=function(e){var t=$(e.currentTarget);if(e.currentTarget!==e.target)return;_.find(this.eventStore.dialogValueEvents,function(e){var n;if(t.is(e.selector))return n=this.util.getValue(t),n!==null&&s(this.scApi,e,t,{value:n}),!0},this)},c=function(e){if(e.currentTarget!==e.target)return;var t=$(e.currentTarget),n,r;n=_.find(this.eventStore.dialogChangeEvents,function(e){if(t.is(e.selector))return!0},this),n&&(r=this.util.getValue(t),e.type===this.scApi.RENDER?n.dialogValue=r:r!==n.dialogValue&&s(this.scApi,n,t,{value:r}))},h=function(e,t){if(e.currentTarget!==e.target)return;var n,r=$(e.currentTarget),i=_.find(this.eventStore.countEvents,function(e){if(r.is(e.selector))return!0},this);i&&(n=this.util.getCountCode(t),s(this.scApi,i,r,{value:n}))},p=function(e){if(e.currentTarget!==e.target)return;var t=$(e.currentTarget);_.each(this.eventStore.changeEvents,function(n){if(t.is(n.selector)){var r,i=t.attr("type")==="checkbox",o;i?(r=_.last(n.pageName.split(":")),o=$(e.currentTarget).attr("checked")?"checked":"unchecked",r.toLowerCase()===o&&s(this.scApi,n,t)):s(this.scApi,n,t)}},this)};t.RegisterPageNamesOp=e.Op.extend({run:function(e,t,r,i,s){var d=s.ANALYTICS_SELECTOR,v=r,m=/:Change($|:)/;return _.isEmpty(r)&&(_.extend(r,{scApi:s,util:n,eventStore:i,changeHndlr:p,clickHndlr:o,countFileHndlr:h,dialogCancelHndlr:f,dialogChangeHndlr:c,dialogSuccessHndlr:a,dialogValueHndlr:l,renderHndlr:u}),_.bindAll(r,"renderHndlr","dialogChangeHndlr","dialogCancelHndlr","countFileHndlr","changeHndlr","clickHndlr","dialogValueHndlr","dialogSuccessHndlr"),$("body").on(s.RENDER,d,v.dialogChangeHndlr),$("body").on(s.DIALOG_COMMIT,d,v.dialogChangeHndlr),$("body").on(s.CHANGE,d,v.changeHndlr),$("body").on(s.CLICK,d,v.clickHndlr),$("body").on(s.COUNT_FILES,d,v.countFileHndlr),$("body").on(s.DIALOG_CANCEL,d,v.dialogCancelHndlr),$("body").on(s.RENDER,d,v.renderHndlr),$("body").on(s.DIALOG_COMMIT,d,v.dialogValueHndlr),$("body").on(s.DIALOG_COMMIT,d,v.dialogSuccessHndlr)),e+=".",_.each(t.pages,function(e){if(e.selector.indexOf("##")===0){i.nonUIEvents[e.selector]=e;return}if(!e.selector||e.selector.length===0)return;var t=_.last(e.pageName.split(":")).toLowerCase();m.test(e.pageName)&&e.values?i.dialogChangeEvents.push(e):t.indexOf("countvalue")!==-1?i.countEvents.push(e):e.values?i.dialogValueEvents.push(e):t==="clicked"?i.clickEvents.push(e):t==="shown"?i.renderEvents.push(e):t==="success"?i.dialogSuccessEvents.push(e):t==="cancel"?i.dialogCancelEvents.push(e):t==="checked"||t==="unchecked"?i.changeEvents.push(e):m.test(e.pageName)&&i.changeEvents.push(e)},this),this._getResolvedPromise()}})}),define("app/dev/ops/tools/loading-tools-op",["core/ac-core","app/ac-app","core/utils/util","core/ops/op"],function(e,t,n){t.LoadingToolsOp=e.Op.extend({run:function(){var t=this.options,r=t.appApi.pluginsApi,i;return n.isCEF()&&(i={readerContextModel:t.readerContextModel}),e.opFactory.create("LoadingPluginsOp",_.extend({pluginsConfig:r.getPluginTypeConfig("tools"),pluginsUiModel:t.toolsUiModel,pluginContext:i},_.pick(t,"appApi","pluginId","force"))).run()}})}),define("app/dev/ops/tools/selecting-tool-op",["core/ac-core","app/ac-app","plugins-common/ac-plugins","core/ops/op"],function(e,t,n){t.SelectingToolOp=e.Op.extend({run:function(t){function l(){return t!==s.getCommonUserPrefs().lastToolUsed?s.saveCommonPrefs():$.Deferred().resolve().promise()}var r=this.options,i=r.appApi,s=i.usersMeApi,o=r.toolsUiModel,u,a,f;u=o.get("selected_plugin_id"),a=t||r.pluginId;if(a&&a===u)return this._getResolvedPromise();if(!a||!o.get("plugins").get(a))a=o.getSelectedId();return u!==n.HOME&&i.selectionApi.clearSelection(),f=e.opFactory.create("SelectingPluginOp",_.extend({},r,{pluginId:a})),f.run().then(function(){return l()},function(){return f=e.opFactory.create("SelectingPluginOp",_.extend({},r,{pluginId:o.getFirstEnabledId()})),f.run().then(function(){return l()})})}})}),define("app/dev/ops/user/getting-all-user-info-op",["core/ac-core","app/ac-app","core/utils/ipm-util","core/ops/op"],function(e,t,n){return t.GettingAllUserInfoOp=e.Op.extend({run:function(){var r=this.options,i=r.appApi.usersMeApi,s=e.opFactory,o=t.opFactory,u,a,f,l,c=window.DIL,h,p,d;return r.baseAicUrisModel.get("api")?(u=o.create("GettingUsersMeOp",r),a=s.create("GettingUsersMeCohortsOp",r),h=s.create("CheckingStorageQuotaOnStartupOp",_.extend({},r,{parentView:t.viewMgr.getContentPageView(r)})),p=s.create("GettingCommonLimitsOp",r),d=o.create("InitializingScLoggingOp",r),$.when(u.run().then(function(){d.run(),f=i.getUserIdentity(),n.setIpmParams(f,i.getSubscription()),l=f.user_id,c&&l&&c.getDil("adobe").api.aamIdSync({dpid:"813",dpuuid:l.split("@")[0]})}),a.run()).then(function(){return h.run(),e.Features.isFeatureEnabled("my_plan_ui")&&p.run(),i.restoreCommonPrefs()})):this._getResolvedPromise()}}),t.GettingAllUserInfoOp}),define("app/dev/ops/user/getting-users-me-limits-op",["core/ac-core","app/ac-app","aicx/ac-aicx","core/ops/op"],function(e,t,n){return t.GettingUsersMeLimitsOp=e.Op.extend({run:function(e,t){var r=this.options;return r.baseAicUrisModel.get("api")?n.opFactory.create("GettingUsersMeLimitsOp",r).run(e,t):this._getResolvedPromise()}}),t.GettingUsersMeLimitsOp}),define("app/dev/ops/user/getting-users-me-op",["core/ac-core","app/ac-app","aicx/ac-aicx","core/ops/op"],function(e,t,n){return t.GettingUsersMeOp=e.Op.extend({run:function(){var e=this.options;return e.baseAicUrisModel.get("api")?n.opFactory.create("GettingUsersMeOp",e).run():this._getResolvedPromise()}}),t.GettingUsersMeOp}),define("app/dev/ops/user/getting-users-me-prefs-op",["core/ac-core","app/ac-app","aicx/ac-aicx","core/ops/op"],function(e,t,n){return t.GettingUsersMePrefsOp=e.Op.extend({run:function(e,t){var r=this.options;return r.baseAicUrisModel.get("api")?n.opFactory.create("GettingUsersMePrefsOp",r).run(e,t):this._getResolvedPromise()}}),t.GettingUsersMePrefsOp}),define("app/dev/ops/user/restoring-common-prefs-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.RestoringCommonPrefsOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi.usersMeApi.getCommonUserPrefs(),n=t.quota;return n&&e.quotaDlgUiModel.set("running_out_shown",n.running_out_shown),this._getResolvedPromise()}}),t.RestoringCommonPrefsOp}),define("app/dev/ops/user/saving-common-prefs-op",["core/ac-core","app/ac-app","core/ops/op"],function(e,t){return t.SavingCommonPrefsOp=e.Op.extend({run:function(){var e=this.options,t=e.appApi,n,r={},i=this._getResolvedPromise();return t&&(n=t.usersMeApi.getUserIdentity().email),n?(r.quota={running_out_shown:e.quotaDlgUiModel.get("running_out_shown")},r.lastToolUsed=e.toolsUiModel.getSelectedId(),t.usersMeApi.setUserPrefs("common",r)):i}}),t.SavingCommonPrefsOp}),define("app/dev/ops/user/setting-users-me-prefs-op",["core/ac-core","app/ac-app","aicx/ac-aicx","core/ops/op"],function(e,t,n){return t.SettingUsersMePrefsOp=e.Op.extend({run:function(e,t){var r=this.options;return r.baseAicUrisModel.get("api")?n.opFactory.create("SettingUsersMePrefsOp",r).run(e,t):this._getResolvedPromise()}}),t.SettingUsersMePrefsOp}),define("app/dev/ops/op-factory",["core/ac-core","app/ac-app","app/ops/account-menu/loading-account-menu-op","app/ops/account-menu/selecting-account-menu-item-op","app/ops/acrobat/closing-in-acrobat-op","app/ops/acrobat/opening-in-acrobat-op","app/ops/acrobat/selecting-acrobat-filter-op","app/ops/app/rna-starting-app-op","app/ops/app/rna-running-app-op","app/ops/app/running-app-op","app/ops/app/starting-app-op","app/ops/app/starting-authenticated-app-op","app/ops/file-selection-dlg/loading-file-selection-dlg-home-views-op","app/ops/file-selection-dlg/selecting-file-selection-dlg-home-view-op","app/ops/file-selection-dlg/showing-file-selection-dlg-op","app/ops/file-selection-dlg/loading-file-selection-dlg-op","app/ops/getting/getting-all-base-uris-op","app/ops/getting/getting-storage-info-op","app/ops/listening/listening-for-ajax-events-op","app/ops/listening/listening-for-download-errors-op","app/ops/listening/listening-for-folder-notifications-op","app/ops/listening/listening-for-inactivity-op","app/ops/listening/listening-for-network-connectivity-op","app/ops/listening/listening-for-server-errors-op","app/ops/listening/listening-for-view-events-op","app/ops/listening/listening-for-window-events-op","app/ops/misc/handling-uncaught-exceptions-op","app/ops/misc/loading-custom-css-op","app/ops/misc/loading-deep-link-plugins-op","app/ops/misc/loading-framework-versions-op","app/ops/misc/loading-plugin-configs-op","app/ops/misc/loading-plugin-configs-versions-op","app/ops/misc/loading-rna-variant-info-op","app/ops/misc/loading-rna-version-info-op","app/ops/misc/loading-template-plugins-op","app/ops/misc/loading-typekit-op","app/ops/misc/navigating-to-about-dlg-op","app/ops/misc/overriding-jquery-ajax-op","app/ops/misc/redirecting-to-apollo-op","app/ops/misc/registering-app-apis-op","app/ops/misc/registering-plugins-ui-models-op","app/ops/misc/showing-about-dlg-op","app/ops/misc/showing-load-failures-dlg-op","app/ops/misc/showing-next-error-op","app/ops/misc/showing-support-home-op","app/ops/misc/showing-user-forum-op","app/ops/misc/starting-history-op","app/ops/misc/switching-language-op","app/ops/misc/toggling-account-menu-op","app/ops/misc/toggling-help-menu-op","app/ops/misc/validating-rna-version-info-op","app/ops/preferences/restoring-preferences-op","app/ops/preferences/saving-preferences-op","app/ops/rna/configuring-rna-op","app/ops/rna/initializing-rna-op","app/ops/rna/listening-for-dialog-alert-events-op","app/ops/rna/listening-for-notification-window-events-op","app/ops/rna/listening-for-rhp-window-events-op","app/ops/rna/listening-for-rna-events-op","app/ops/rna/listening-for-session-events-op","app/ops/routing/initializing-app-routes-op","app/ops/routing/initializing-sc-logging-op","app/ops/routing/rna-routing-at-content-page-op","app/ops/routing/routing-at-content-page-op","app/ops/session/handling-401-error-op","app/ops/session/signing-in-from-error-op","app/ops/session/signing-out-op","app/ops/settings-dlg/loading-settings-dlg-views-op","app/ops/settings-dlg/selecting-settings-dlg-plugin-op","app/ops/settings-dlg/showing-settings-dlg-op","app/ops/site-catalyst/get-framework-pages-op","app/ops/site-catalyst/register-page-names-op","app/ops/tools/loading-tools-op","app/ops/tools/selecting-tool-op","app/ops/user/getting-all-user-info-op","app/ops/user/getting-users-me-limits-op","app/ops/user/getting-users-me-op","app/ops/user/getting-users-me-prefs-op","app/ops/user/restoring-common-prefs-op","app/ops/user/saving-common-prefs-op","app/ops/user/setting-users-me-prefs-op"],function(e,t){t.OpFactory=e.Op.extend({create:function(e,n){var r=t[e];if(!!r)return new r(n);LOG(0,"AcApp.OpFactory.create: Unrecognized class: "+e)}})}),define("app/dev/ac-app-init",["app/ac-app","app/models/ui/ui-model-factory","app/views/view-mgr","app/ops/op-factory"],function(e){return _.extend(e,{uiModelFactory:new e.UiModelFactory,opFactory:new e.OpFactory,viewMgr:new e.ViewMgr,router:new Backbone.Router}),e}),define("app/dev/features",["underscore"],function(e){return e.extend(Ac.Features,{isFeatureEnabled:function(e){return this.getFeature(e)===!0},getFeature:function(e){var t=this.features[e];return t},setFeature:function(e,t){this.features[e]=t}}),Ac.Features}),define("app/dev/locale",["underscore"],function(e){var t={"ar-ae":"Arabic","ca-es":"Catalan","cs-cz":"Czech","da-dk":"Dansk","de-de":"Deutsch","en-ae":"Middle Eastern English for Arabic","en-gb":"English UK","en-us":"English US","en-il":"Middle Eastern English for Hebrew","es-es":"EspaÃ±ol","eu-es":"Basque","fi-fi":"Suomi","fr-fr":"FranÃ§ais","fr-ma":"North African French","he-il":"Hebrew","hr-hr":"Croatian","hu-hu":"Hungarian","it-it":"Italiano","ja-jp":"æ—¥æœ¬èªž","ko-kr":"Korean","nb-no":"Norsk","nl-nl":"Nederlands","pl-pl":"Polish","pt-br":"PortuguÃªs","ro-ro":"Romanian",root:"English US","ru-ru":"Russian","sk-sk":"Slovak","sl-si":"Slovenian","sl-sl":"Unknown","sv-se":"Svenska","tr-tr":"Turkish","uk-ua":"Ukrainian","xx-xx":"Test Locale XX","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional"};return e.extend(Ac.Locale,{getLocaleByCountry:function(t){var n=e.keys(this.localeMap),r;return t=t.toLowerCase(),r=e.find(n,function(e){return t===e.substr(3)}),r||"root"},getImsLocale:function(e){return e=e||this.getLocale(),e.substr(0,2)+"_"+e.substr(3).toUpperCase()},getIpmLocale:function(){return this.getImsLocale().replace("_","-")},getLanguageName:function(e){var n=t[e];return n||"English US"},getHelpLocale:function(){var e=this.getLocale();return e==="root"||e==="en-us"||e==="en-gb"?"en":e.substr(3)},getSiteCatalystLocale:function(){return this.getImsLocale().toLowerCase()}}),Ac.Locale}),define("app/dev/log",["underscore"],function(e){var t=function(n,r,i){var s=window.console,o,u,a=!0,f=!1,l,c=t.appApi,h,p;i&&(e.has(i,"logConsole")&&(a=!!i.logConsole),e.has(i,"logServer")&&(f=!!i.logServer),e.isString(i.plugin)&&(l=i.plugin),e.isString(i.env)&&(p=i.env)),Ac.Features.isFeatureEnabled("javascript_console_logging")||(a=!1),e.isNumber(n)&&(o=n,n=r,r=o||10),r=r||t.DEBUG,f&&c&&c.errorApi.sendLogEvent({message:n,severity:r}),!p&&l&&c&&(h=c.pluginsApi.getBaseUrl(l),h.indexOf("local")>=0?p="localdev":h.indexOf(".dev.")>=0?p="dev":h.indexOf(".test.")>=0?p="test":h.indexOf(".stage.")>=0?p="stage":p="prod");if(p==="stage"||p==="prod"){if(r<t.ERROR)return}else if(p==="test"){if(r<t.WARNING)return}else if(p==="dev"&&r<t.INFO)return;if(a&&s){switch(r){case 10:u="debug";break;case 20:u="info";break;case 30:u="warn";break;case 40:u="error";break;default:u="log"}s[u]||(u="log"),s[u](n)}};return e.extend(t,{DEBUG:10,INFO:20,WARNING:30,ERROR:40,LOCALDEV:"localdev",DEV:"dev",TEST:"test",STAGE:"stage",PROD:"prod",setAppApi:function(e){this.appApi=e},debug:function(e,n){t(e,t.DEBUG,n)},info:function(e,n){t(e,t.INFO,n)},warn:function(e,n){t(e,t.WARNING,n)},warning:function(e,n){t(e,t.WARNING,n)},error:function(e,n){t(e,t.ERROR,n)}}),window.LOG=t,t}),define("app/dev/app",["core/ac-core","app/ac-app","aicx/ac-aicx","core/utils/date-util","core/utils/util","core/utils/router-util","app/ac-app-init","app/features","app/locale","app/log","core/nls/root/ui-strings","files/nls/root/ui-strings","app/nls/root/ui-strings","app/ops/app/starting-app-op","app/ops/app/rna-starting-app-op"],function(e,t,n,r,i,s){_.extend(t,{init:function(){var o,u,a,f,l,c,h;return s.hasQueryParam("log_elapsed_time","1")&&r.toggleElapsedTimeLogging(),r.logElapsedTime("AcApp.init",{startTime:Ac.START_TIME}),$("html").attr("lang",e.Locale.getLocale()),u=e.modelFactory,a=e.uiModelFactory,l=t.opFactory,f=t.uiModelFactory,c=n.modelFactory,o={baseFilesUrisModel:u.create("BaseFilesUrisModel"),baseCloudUrisModel:u.create("BaseCloudUrisModel"),commonLimitsModel:u.create("CommonLimitsModel"),connectorsUiHelpersModel:u.create("ConnectorsUiHelpersModel"),folderModel:u.create("FolderModel"),notificationModel:u.create("NotificationModel"),refreshSessionModel:u.create("RefreshSessionModel"),rootModel:u.create("RootModel"),sendLogEventModel:u.create("SendLogEventModel"),sessionModel:u.create("SessionModel"),sharingInfoModel:u.create("SharingInfoModel"),signOutModel:u.create("SignOutModel"),storageQuotaModel:u.create("StorageQuotaModel"),systemFoldersModel:u.create("SystemFoldersModel"),usersMeCohortsModel:u.create("UsersMeCohortsModel"),baseAicUrisModel:c.create("BaseAicUrisModel"),usersMeModel:c.create("UsersMeModel"),usersMeIdentityModel:c.create("UsersMeIdentityModel"),usersMeLimitsConversionsModel:c.create("UsersMeLimitsConversionsModel"),usersMePrefsConversionsModel:c.create("UsersMePrefsConversionsModel"),usersMeSubscriptionsModel:c.create("UsersMeSubscriptionsModel"),accountMenuPluginsUiModel:a.create("PluginsUiModel"),deepLinkPluginsUiModel:a.create("PluginsUiModel"),templatePluginsUiModel:a.create("PluginsUiModel"),dialogsUiModel:a.create("DialogsUiModel"),errorUiModel:a.create("ErrorUiModel"),fileSelectionDlgHomeViewsUiModel:a.create("PluginsUiModel"),fullPreviewUiModel:a.create("FullPreviewUiModel"),inactivityUiModel:a.create("InactivityUiModel"),leftRailUiModel:a.create("LeftRailUiModel"),menusUiModel:a.create("MenusUiModel"),networkUiModel:a.create("NetworkUiModel"),notificationUiModel:a.create("NotificationUiModel"),pluginGroupsUiModel:a.create("PluginGroupsUiModel"),quotaDisplayUiModel:a.create("BarGraphUiModel"),quotaDlgUiModel:a.create("QuotaDlgUiModel"),selectionUiModel:a.create("SelectionUiModel"),sessionUiModel:a.create("SessionUiModel"),settingsDlgUiModel:a.create("PluginsUiModel"),toolsUiModel:a.create("PluginsUiModel"),acrobatUiModel:f.create("AcrobatUiModel"),ajaxUiModel:f.create("AjaxUiModel"),filesCollectionUiModel:f.create("FilesCollectionUiModel"),fullOverlayUiModel:f.create("FullOverlayUiModel"),modalMaskUiModel:f.create("ModalMaskUiModel"),pageHeaderUiModel:f.create("PageHeaderUiModel"),signInUiModel:f.create("SignInUiModel"),statusMenuUiModel:f.create("StatusMenuUiModel"),windowUiModel:f.create("WindowUiModel"),pluginApis:{},selectorApis:{},pluginsConfigs:{},pluginsUiModels:{},keyHandlers:[],focusHandlers:[],showSpinnerRefs:1,ajaxModalRefs:0,ajaxSpinnerShown:0,spinnerOptions:undefined,prevAlertDlg:undefined,uncaughtExceptionCallbacks:[],currentFolderId:undefined,currentFolderIds:{},connectorPluginInfo:{},rnaPluginGoUrlInfo:{},fullPreviewOptions:undefined,isNavigateEnabled:!0,selectFilesPromise:undefined,routingAtContentPagePromise:undefined,settingsPromise:undefined,isScConsoleLoggingEnabled:!1,scEventStore:{clickEvents:[],dialogChangeEvents:[],dialogValueEvents:[],dialogSuccessEvents:[],dialogCancelEvents:[],renderEvents:[],countEvents:[],changeEvents:[],nonUIEvents:{}},scHandlers:{},scPageGroups:{},scListeners:[]},h=l.create("StartingAppOp",o),i.isCEF()&&(_.extend(o,{actionsUiModel:a.create("ActionsUiModel"),fullPreviewPluginsUiModel:a.create("PluginsUiModel"),fullPreviewRhpPluginsUiModel:a.create("PluginsUiModel"),fullPreviewOverlaysUiModel:a.create("PluginsUiModel"),homeViewsUiModel:a.create("PluginsUiModel"),networkConnectivityModel:u.create("NetworkConnectivityModel"),notificationContainerUiModel:f.create("NotificationContainerUiModel"),saveAsUiModel:a.create("SaveAsUiModel"),tunerUiModel:f.create("TunerUiModel")}),_.extend(o,{noToolbar:!0}),o.inactivityUiModel.set("idle_timeout",3e5,{silent:!0}),window.mboxCreate=!0,h=l.create("RNAStartingAppOp",o),i.isAcrobat()?_.extend(o,{rnaPluginGoUrlInfo:{my_files:"MY_FILES_GOURL_ACRO",exportpdf:"EXPORTPDF_GOURL",exportpdf_rhp:"EXPORTPDF_RHP_GOURL",createpdf:"CREATEPDF_GOURL",createpdf_rhp:"CREATEPDF_RHP_GOURL",fillsign:"FILLSIGN_GOURL_ACRO",send:"SEND_GOURL_ACRO",sentfiles:"SENTFILES_GOURL_ACRO"}}):_.extend(o,{rnaPluginGoUrlInfo:{my_files:"MY_FILES_GOURL",exportpdf:"EXPORTPDF_GOURL",exportpdf_rhp:"EXPORTPDF_RHP_GOURL",createpdf:"CREATEPDF_GOURL",createpdf_rhp:"CREATEPDF_RHP_GOURL",fillsign:"FILLSIGN_GOURL",send:"SEND_GOURL",sentfiles:"SENTFILES_GOURL"}})),h.run()}})}),require.config({paths:{jquery:"libs/jquery/1.11.1/jquery-1.11.1",json2:"libs/json/2012-07-19/json2",moment:"libs/moment/2.8.3/moment.min","jquery.fileupload":"libs/jquery.fileupload/5.42.0/jquery.fileupload","jquery.iframe-transport":"libs/jquery.fileupload/5.42.0/jquery.iframe-transport","jquery.ui.widget":"libs/jquery.fileupload/5.42.0/vendor/jquery.ui.widget","jquery-ui":"libs/jquery-ui/1.11.2/jquery-ui","jquery-ui-touchpunch":"libs/jquery.ui.touch-punch/0.2.2/jquery.ui.touch-punch","jquery.cookie":"libs/jquery.cookie/1.4.1/jquery.cookie","jquery.sha256":"libs/jquery.sha256/1.1/jquery.sha256",xdr:"libs/xdr/xdr","build-url":"core/build-url",html_sanitizer:"libs/google-caja/html-sanitizer"},shim:{"jquery-ui":{deps:["jquery"]},"jquery.cookie":{deps:["jquery"]},"jquery.sha256":{deps:["jquery"]},xdr:{deps:["jquery"]},"jquery-ui-touchpunch":{deps:["jquery-ui"]},"app/dev/app":{deps:["jquery","json2","xdr","jquery.sha256"]}},map:{"*":{underscore:"libs-patch/underscore/1.6.0/underscore-patch",backbone:"libs-patch/backbone/1.1.2/backbone-patch","core-unmapped":"core","files-unmapped":"files","app-unmapped":"app","app-api-unmapped":"app-api","aicx-unmapped":"aicx","plugins-common-unmapped":"plugins-common","core-unmapped/dev":"core/dev","files-unmapped/dev":"files/dev","app-unmapped/dev":"app/dev","app-api-unmapped/dev":"app-api/dev","aicx-unmapped/dev":"aicx/dev","plugins-common-unmapped/dev":"plugins-common/dev",core:"core/dev",files:"files/dev",app:"app/dev",aicx:"aicx/dev","plugins-common":"plugins-common/dev","core/dev":"core/dev","files/dev":"files/dev","app/dev":"app/dev","aicx/dev":"aicx/dev","plugins-common/dev":"plugins-common/dev"},"libs-patch/underscore/1.6.0/underscore-patch":{underscore:"underscore"},"libs-patch/backbone/1.1.2/backbone-patch":{backbone:"backbone"}}}),require.config({config:{i18n:{locale:window.Ac.Locale.getLocale()}},waitSeconds:30}),require(["jquery-ui","versions/framework-dev","app/app"],function(){Ac.App.dev.init()}),define("rna-main",function(){});