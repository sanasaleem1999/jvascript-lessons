/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2012 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

define("acplugins/tracked-send/js/home-view/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend.Home;return i||(i=e.TrackedSend.Home={}),i.PLUGIN_ID||(i.PLUGIN_ID="sentfiles"),i}),define("acplugins/tracked-send/js/home-view/models/ui/collections-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/ui/ui-model"],function(e,i){var t="list",s="thumbnail";return i.CollectionsUiModel=e.UiModel.extend({recognized:{checkbox:{type:"boolean",optional:!1},data_render_delay:{type:"number",optional:!1},scroll_duration:{type:"number",optional:!1},scroll_id_into_view:{type:"string",optional:!0},scroll_render_delay:{type:"number",optional:!1},scroll_listen_delay:{type:"number",optional:!1},view:{type:"string",optional:!1,choices:[t,s]},folders_only:{type:"boolean",optional:!1},filter_by_extension:{type:"array",optional:!1},mode:{type:"string",optional:!1,choices:["desktop","web"]},itemClickAction:{type:"string",optional:!1,choices:["open","select"]},itemDblClickAction:{type:"string",optional:!1,choices:["preview","open"]},show_empty:{type:"boolean",optional:!1},index_last_selected:{type:"number",optional:!1}},defaults:{checkbox:!0,data_render_delay:10,scroll_duration:250,scroll_render_delay:250,scroll_listen_delay:250,view:t,folders_only:!1,filter_by_extension:[],mode:"web",itemClickAction:"select",itemDblClickAction:"open",show_empty:!1,index_last_selected:-1},initializeFromCohorts:function(e){e&&e["ts-a12-ui"]&&this.set({mode:"enabled"===e["ts-a12-ui"]?"desktop":"web"})},isListView:function(){return this.get("view")===t},isThumbnailView:function(){return this.get("view")===s}},{VIEW_LIST:t,VIEW_THUMBNAIL:s}),i.CollectionsUiModel}),define("acplugins/tracked-send/js/home-view/models/parcel-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/models/model"],function(e,i,t){return i.ParcelModel=e.Model.extend({initialize:function(i,t){e.Model.prototype.initialize.call(this,i,t),this.rootUrl="",this.idAttribute="parcel_id",t.collection&&(this.rootUrl=t.collection.rootUrl),t.rootUrl&&(this.rootUrl=t.rootUrl)},url:function(){return this.rootUrl+"/a/api/parcels/"+encodeURIComponent(this.id)},getRenditionUrl:function(e,i,s){var n=Ac.baseFilesUrisModel.getRenditionUri()+"assets/"+encodeURIComponent(e)+"/"+i;return n+="?"+t.getClientIdQueryParam(),s&&(n+="&page="+s),n},idAttribute:"parcel_id",parse:function(e){return e.parcels?e.parcels[0]:e},getRecipients:function(){var e,i=this.get("invitations");return e=_.map(i,function(e){return e.recipient_email})},getViews:function(){return this.get("events").filter(function(e){return"parcel_view"===e.event_type})},isActive:function(){return this.get("is_active")},getNumHits:function(){var e=this.countEventTypes();return e.parcel_view||0},countEventTypes:function(){var e;return e=_.reduce(this.get("invitations"),function(e,i){var t=i.event_counts;return t&&(e=_.reduce(t,function(e,i,t){return e.hasOwnProperty(t)||(e[t]=0),e[t]+=i,e},e)),e},{})},getSingleFileInfo:function(){var e=this.get("files");return e&&1===e.length?e[0]:void 0},getSingleFileId:function(){var e=this.getSingleFileInfo();return e?e.id:void 0},isSingleFileNotPreviewable:function(){var e,i=this.getSingleFileInfo();return i?(e=i.content_type,"application/zip"===e):!1}}),i.ParcelModel}),define("acplugins/tracked-send/js/home-view/collections/parcel-collection",["acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","acplugins/tracked-send/js/home-view/models/parcel-model"],function(e,i){e.ParcelCollection=Backbone.Collection.extend({initialize:function(e,i){Backbone.Collection.prototype.initialize.call(this,e,i),this.rootUrl=i.rootUrl,this.sortAscending=!1,this.sortField="date_sent"},model:e.ParcelModel,setSortField:function(e,i){this.sortField=e,this.sortAscending=i},comparator:function(e,i){var t,s,n,o=e.get(this.sortField),l=i.get(this.sortField);return t=this.sortAscending?o:l,s=this.sortAscending?l:o,n=t===s?0:s>t?-1:1},url:function(){return this.rootUrl+"/a/api/parcels"},fetch:function(e){return e=i.customizeOptions("GET",e),e.data=_.extend({},{max:1e3},e.data),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return this.folder=e.folder,e.parcels}})}),define("acplugins/tracked-send/js/home-view/ops/plugin/listening-for-parcel-updates-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","core/views/view-events"],function(e,i){i.ListeningForParcelUpdatesOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this)},run:function(){return this.options.appApi.notificationApi.addFolderNotificationCallback(this._getFolder(),_.bind(function(e){e.fetch()},this,this.options.parcelCollection)),this._getResolvedPromise()},_getFolder:function(){return this.options.parcelCollection.folder}})}),define("acplugins/tracked-send/js/home-view/ops/plugin/starting-plugin-op",["core/ac-core","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/models/ui/collections-ui-model","acplugins/tracked-send/js/home-view/collections/parcel-collection","acplugins/tracked-send/js/home-view/ops/plugin/listening-for-parcel-updates-op","core/ops/op"],function(e,i,t){var s;t.StartingPluginOp=e.Op.extend({run:function(){void 0===s&&(s=!0);{var i,n,o,l,a,r=this.options;e.modelFactory,e.uiModelFactory}return i=t.opFactory,o=i.create("GettingParcelsOp",r),a=i.create("ListeningForParcelUpdatesOp",r),s===!0&&(s=!1,l=t.opFactory.create("ListeningForViewEventsOp",r),$.when(l.run())),n=i.create("ShowingSignInOp",r),n.run().then(function(){return o.run().then(function(){return a.run()})},function(){})}})}),define("acplugins/tracked-send/js/home-view/views/view-events",["acplugins/tracked-send/js/home-view/ac-tracked-send"],function(e){e.ViewEvents={DELETE:"ts:delete",DOWNLOAD_PARCEL_ASSETS:"ts:download",UNSHARE:"ts:unshare",TRACK:"ts:track",OPENBROWSER:"ts:openbrowser",SHOW_SINGLE_ASSET:"ts:show_single_asset",FORWARD:"ts:forward",SAVEAS_SINGLE_ASSET:"ts:saveas_single_asset",GET_RHP_PREVIEW_METADATA:"ts:get_rhp_preview_metadata"}}),define("acplugins/tracked-send/js/home-view/ops/plugin/listening-for-view-events-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","acplugins/tracked-send/js/home-view/views/view-events","core/views/view-events"],function(e,i){i.ListeningForViewEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._initEventMap()},run:function(){return this.options.rootView.on("all",this._onViewEvent),this._deferred=$.Deferred(),this._deferred.promise()},_onViewEvent:function(e,i){var t,s,n,o;t=this._eventMap[e],t&&(s=t[0].create(t[1],i)),s&&(n=s.options,n&&(o=n.parentDeferred),s.run().then(function(){o&&o.resolve()},function(){o&&o.reject()}))},_mapEvent:function(e,i,t,s,n){e[i]=[t,s,n]},_initEventMap:function(){var t,s,n,o,l,a;t=this._eventMap={},s=this._mapEvent,n=e.opFactory,o=i.opFactory,l=e.ViewEvents,a=i.ViewEvents,s(t,l.SELECT_ITEM,o,"SelectingCollectionItemOp"),s(t,l.CLEAR_SELECTION,n,"ClearingSelectionOp"),s(t,a.DELETE,o,"DeletingParcelIfConfirmedOp"),s(t,a.DOWNLOAD_PARCEL_ASSETS,o,"DownloadingParcelAssetsOp"),s(t,l.DOWNLOAD,n,"DownloadingAssetIfExistsOp"),s(t,a.UNSHARE,o,"UnsharingParcelIfConfirmedOp"),s(t,a.TRACK,o,"ShowingParcelPreviewOp"),s(t,a.OPENBROWSER,o,"DesktopShowInBrowserOp"),s(t,a.SHOW_SINGLE_ASSET,o,"ShowingSingleAssetOp"),s(t,a.FORWARD,o,"ForwardingParcelOp"),s(t,a.SAVEAS_SINGLE_ASSET,o,"SaveAsSingleAssetOp"),s(t,a.GET_RHP_PREVIEW_METADATA,o,"GettingRhpPreviewMetadataOp")}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-parcels-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/collections/parcel-collection","core/ops/op"],function(e,i){i.GettingParcelsOp=e.Op.extend({run:function(){var e,i,t=this.options;return e=t.parcelCollection,i=e.fetch()}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-rhp-preview-metadata-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){return i.GettingRhpPreviewMetadataOp=e.Op.extend({run:function(){function i(){var e=c.get("item_model");return e?e.getSingleFileId():void 0}function t(){return o===i()}function s(e){return r.getConnectorsUiHelpers(r.getConnectorName(e))}function n(e){return d.create("GettingFolderPathOp",a).run(e).then(function(e){t()&&(l=e.path,c.set("file_path",l),c.set("connector_info",s(l[0].id)))})}var o,l,a=this.options,r=a.appApi.connectorsApi,c=a.rhpPreviewUiModel,d=e.opFactory;return o=i(),o?d.create("GettingAssetMetadataOp",a).run(o).then(function(e){return t()?(c.set({item_info:e,page_count:e.page_count}),n(e.parent_id)):void 0},function(e){404===e.status&&c.set("item_not_found",!0)}):this._getRejectedPromise()}}),i.GettingRhpPreviewMetadataOp}),define("acplugins/tracked-send/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/tracked-send/js/nls/root/ui-strings",{SELECTOR_LABEL:"Sent Files",SELECTOR_LABEL_WEB:"Sent",TOOL_LABEL:"Send",SEND_TRACK_LABEL:"Send & Track",TYPE:"Type",ADDED_DATE:"Added",MODIFIED_DATE:"Modified",PAGES:"Pages",SIZE:"Size",SENDER_NAME:"Sent By",SENT_DATE:"Date Sent",REPORT_ABUSE:"Report Abuse",UNKNOWN:"Unknown",EXTENSION:"(.<%- ext %>)",DOWNLOAD:"Download",DOWNLOAD_ALL:"Download All",REPLY:"Reply",FORWARD:"Forward",NOTIFY_ME_WHEN_VIEWED:"Notify when recipients viewed",UNSHARE:"Unshare",VIEWED_BY:"Viewed By",VIEW_FULL_ACTIVITY:"View Full Activity",EMAIL_REPLY_FORMAT:"Re: <%= emailSubject %>",OPEN:"Open",SAVEAS:"Save As",TRACK:"Track Online",OPEN_LINK:"(Open Link)",MESSAGE_HEADING:"Message",REMOVE:"Remove",SHARED_FILES:"Sent Files",SUBJECT:"Subject",SENT_TO:"Sent To",DATE_SENT:"Date Sent",VIEWS:"Views",PARCEL_PUBLIC_SHARING:"Anonymous",EXPAND:"Expand",COLLAPSE:"Collapse",SELECT_ALL:"Select All",NUMBER_OF_VIEWS:"Number of Views",GO_TO_ADOBE_SEND_WEBSITE:"Go To Adobe Send Website",GO_TO_ADOBE_S_T_WEBSITE:"Manage Documents Sent for Signature",DATE_VIEWED:"Date Viewed",CONFIRM_UNSHARE_TITLE:"Unshare",CONFIRM_UNSHARE_MSG_ONE_ITEM:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_UNSHARE_MSG_N_ITEMS:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_REMOVE_TITLE:"Remove",CONFIRM_REMOVE_MSG_ONE_ITEM:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_REMOVE_MSG_N_ITEMS:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",NO_FILES_TITLE:"No Files",NO_FILES_MESSAGE:"There are no files available to download. The files may have been deleted.",SHARE_TITLE:"Send Files",SHARE_WELCOME:"Send and track large files online.",SHARE_WELCOME_DESKTOP:"The fast, easy way to share and monitor files.",SHARE_SELECT_FILES:"Select Files to Send",SHARE_VIEW_SHARED_FILES:"View All Sent Files",READER_FILESELECT_WINDOW_TITLE:"Select Files",READER_FILESELECT_CONTINUE_BUTTON:"Continue",ALL_SUPPORTED_FILES:"All supported files",CHOOSE_FILES:"Choose Files",ALL_SUPPORTED_FILES:"All supported files",FILE:"file",FILES:"files",UPLOADING_TO_SEND:"Uploading to Adobe Document Cloud...",SELECTED_FILES:"Selected Files",ADD_MORE_FILES:"Add Files",SHARE_WITH_HEADING:"Send To",SHARE_ADDRESS_BOOK:"Address Book",SHARE_CHOICE_WORLD:"Create Anonymous Link",SHARE_CHIOCE_WORLD_EXPLAIN:"(with basic usage information)",SHARE_CHOICE_INDIVIDUAL:"Send Personalized Invitations",SHARE_CHOICE_INDIVIDUAL_EXPLAIN:"(with detailed tracking)",SHARE_CHOICE_ALLOW_COMMENTS:"Allow Comments",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE:"Add Your Logo & Color",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE_EDIT:"Edit",SHARE_ADDRESS_HEADING:"Recipient Email Addresses",SHARE_ADDRESS_PROMPT:"Enter recipient email addresses",SHARE_SUBJECT_MSG_HEADING:"Subject & Message",SHARE_INITIAL_SUBJECT:"Shared Files",SHARE_AV_ERROR:"Audio/video files are not supported for sending, and have been omitted from your selection.",SHARE_AV_UPGRADE_MESSAGE:" Upgrade to be able to send audio/video files.",SHARE_FORMS_ERROR:"Form files are not currently supported for sending. Go to Fill & Sign to find and download the form.",SHARE_FORMS_ERROR_DESKTOP:"This file type is currently not supported and has been omitted from your selection.",SHARE_AV_FORMS_ERROR:"Audio/video and form files are not supported for sending, and have been omitted from your selection.",SHARE_OVER_LIMIT_APPEND_ERROR:"<br/><br/>Additionally, you selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_ERROR:"You selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_TITLE:"Too many files.",SHARE_NON_NATIVE_APPEND_ERROR:"<br/><br/>Additionally, your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR:"Send & Track is currently not supported for files stored in <%= connectorLabel %>. To send files from <%= connectorLabel %>, save them to your computer first.",SHARE_NON_NATIVE_ERROR_DEFAULT:"Your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR_HEADING:"Unsupported File Storage",SHARE_MESSAGE_HEADING:"Message",SHARE_MESSAGE_PROMPT:"I have shared some files with you. Please click on the link to view and download them.",SHARE_BUTTON:"Send",SHARE_BUTTON_LINK:"Create Link",SHARE_CANCEL:"Cancel",SHARE_EMAIL_INVALID_PLURAL:"The following email addresses are invalid:",SHARE_EMAIL_INVALID_SINGULAR:"The following email address is invalid:",SHARE_ERROR_SEND_LIMIT_EXCEEDED_TITLE:"Not sent",SHARE_ERROR_SEND_LIMIT_EXCEEDED:"The number of recipients you have selected exceeds your recent limit. Reduce the number of recipients, or wait until later to try again.",SHARE_ERROR_UNSUPPORTED_SHARING_MIME_TYPE:"Audio/video files aren't supported.",SHARE_ERROR_RECIPIENTS_NOT_ALLOWED:"Please upgrade to send to individuals.",SHARE_ERROR_CANNOT_CONVERT_FORM:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_RESTRICTION:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_TIMEOUT:"Files could not be sent because the form file conversion to PDF timed out.",SHARE_INDIVIDUAL_HELP_WEB:"Note: Personalized links are unique to each recipient, but anyone the recipient shares those links with can access the documents.",SHARE_INDIVIDUAL_HELP:"Note: Personalized invitations are unique to each recipient, but anyone the recipient shares those invitations with can access the documents.",SHARE_UPLOAD_ERROR_TITLE:"Error uploading files",SHARE_UPLOAD_ERROR_MSG:"One or more files could not be uploaded. Please try again.",SHARE_NO_FILES_SELECTED:"There are currently no files selected.",SHARE_CLICK_TO_ADD_FILES:"Click the Add Files button to get started.",SHARE_RECIPIENT_PAGE_HEADLINE:"Recipient Page",SHARE_CHOICE_INCLUDE_MESSAGE:"Include Message Text",SHARE_CHOICE_RESPOND_BACK:"Include Reply-To",SHARE_REMOVE:"Remove",ADD_FILES_REJECTED_TITLE:"Invalid Filename Format",ADD_FILES_REJECTED_MESSAGE:"Files must have a file name extension or be a known file type to be sent. Please ensure that your filename includes a valid file extension.",SHARE_PUBLIC_LINK_HEADING_DESKTOP:"Distribute the anonymous link by:",SHARE_COPY_LINK_BUTTON:"Copy Link",SHARE_SUCCESS_SENT_LINK:"Go to Sent Files",SHARE_SUCCESS_SENT_LINK_FOOTER:"to view all previously sent files",READER_GO_URL:"http://www.adobe.com/go/sendpluginrdr_12_0_0",ACROBAT_GO_URL:"http://www.adobe.com/go/sendpluginacro_12_0_0",SEND_UPSELL_HEADLINE:"Upgrade To",SEND_UPSELL_HEADLINE_OLD:"Upgrade to:",SEND_UPSELL_POINT_1:"• Send large files, including documents and videos",SEND_UPSELL_POINT_2:"• Receive an email when files are viewed",SEND_UPSELL_POINT_3:"• Track downloads using an online dashboard",SEND_UPSELL_LATER:"Later",SEND_UPSELL_NOW:"Upgrade Now",SEND_UPSELL_LEARN_MORE:"Learn More",SEND_UPSELL_UPGRADE_REQUIRED:"Unsupported Files",SHARE_TOO_MANY_DLG_TITLE:"Too many email addresses",SHARE_TOO_MANU_DLG_MESSAGE:"You've entered <%=numRecipients%> email addresses, but you can only send to <%=maxRecipients%> at a time. Delete some addresses and try again.",SHARE_SUCCESS_DLG_TITLE:"Files Shared",SHARE_PUBLIC_LINK_HEADING:"Anonymous Link Generated",SHARE_EMAIL_LINK_BUTTON:"Email Link",SHARE_PUBLIC_LINK_MESSAGE:"Anyone with the link will access the files anonymously.",SHARE_PUBLIC_LINK_NO_COPY_OR_EMAIL_WARNING:"You have not yet copied or emailed the link. Are you sure you want to continue?",SHARE_PUBLIC_LINK_INSTRUCTIONS:"Copy the link below to email or share it with others. Anyone who uses the link will be able to access the files.",SHARE_INVITATIONS_HEADING:"Invitations Sent",SHARE_INVITATIONS_MESSAGE:"Each recipient will receive a link by email, and you will be notified when they follow the link.",SHARE_SUCCESS_CLOSE:"Close",SHARE_SUCCESS_CONTINUE:"Continue",SHARE_FILE_EMAIL_BODY:"I'm using Adobe Send. You can view my file by clicking on the link below:",SHARE_FILES_EMAIL_BODY:"I'm using Adobe Send. You can view my files by clicking on the link below:",S_T_FILE_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my file in Adobe Document Cloud by clicking on the link below:",S_T_FILES_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my files in Adobe Document Cloud by clicking on the link below:",SHARE_CLIPBOARD_MESSAGE:"Tip: Use Ctrl + C to copy",SHARE_CLIPBOARD_MESSAGE_MAC:"Tip: Use Cmd + C to copy",SHARE_CLIPBOARD_COPIED:"link is copied to clipboard",PARCEL_ACTIVITY_DOWNLOADED:"downloaded",PARCEL_ACTIVITY_PREVIEWED:"previewed",PARCEL_ACTIVITY_PUBLIC_VISITOR:"public link visitor",PARCEL_ACTIVITY_ALL_FILES:"All Files",PARCEL_ACTIVITY_ALL_FILES_PREVIEW:"All Files Preview Page",PARCEL_ACTIVITY_HEADING:"Activity for “<%= emailSubject %>”",PARCEL_ACTIVITY_RECIPIENT:"Recipient",PARCEL_ACTIVITY_ACTIVITY:"Activity",PARCEL_ACTIVITY_ITEM:"Item",PARCEL_ACTIVITY_DATE_VIEWED:"Date Viewed",PARCEL_ACTIVITY_CLOSE:"Close",CURRENTLY_SHARED_IN:"Sent To",SHARE_THIS_FILE:"Send this File",SHARE_THIS_FILE_AGAIN:"Send this File Again",SENT_FILES_HEADER_SEARCH_CONTROLS:"Search Controls",SENT_FILES_HEADER_REFRESH:"Refresh",SENT_FILES_NUM_FILES:"<%= numFiles %> files",NO_PARCELS_SEND_PROMPT:"No Sent Files",NO_PARCELS_SEND_SUBPROMPT:"Go to <%= sendBtn %> to deliver files to others",NO_PARCELS_SEND_BTN:"Adobe Send",NO_PARCELS_S_T_BTN:"Send & Track",ON_SIGN_OUT_PROMPT:"View Files Sent via Send & Track",ON_SIGN_OUT_SUBPROMPT:"Discover who has viewed your files.",SIGN_IN_BUTTON:"Sign In Now",COULD_NOT_SEND:"Could not send",ENTERPRISE_USERS_ACCESS_ERROR:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID.",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_NOT_AVAILABLE:"Continue at Adobe Document Cloud",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your Color and Logo are currently only available online at the Adobe Send web site. Click "<%= buttonName %>" to go there now.',S_T_CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your logo and color are currently only available at Adobe Document Cloud. Click "<%= buttonName %>" to go there now.',CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_OK:"Continue",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_TITLE:"Add Your Logo & Color",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_DESCRIPTION:"Add your logo and choose a color to display on emails and recipient page.",CUSTOMIZE_RECIPIENT_PAGE_ADD_LOGO:"Add Logo",CUSTOMIZE_RECIPIENT_PAGE_REMOVE_LOGO:"Remove Logo",CUSTOMIZE_RECIPIENT_PAGE_CHOOSE_COLOR:"Choose Color",CUSTOMIZE_RECIPIENT_PAGE_SAVE:"Save",CUSTOMIZE_RECIPIENT_PAGE_CLOSE:"Cancel",CUSTOMIZE_RECIPIENT_PAGE_FILE_FILTERING_LABEL:"File Type is an image",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_TITLE:"Error",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_FORMAT:"The file you have chosen cannot be used as a logo. Please select another file. ",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_COLOR_FORMAT:"The color you have entered is invalid. Please enter a hex value like #FFFFFF or #FFF.",SURVEY_TITLE:"We are interested in your Feedback",SURVEY_LINK:"Tell Us What You Think",SURVEY_QUESTION_ONE:"Why are you using Send & Track today?",SURVEY_QUESTION_TWO:"Does it work well for you?",SURVEY_QUESTION_THREE:"Is it missing something you wanted?",SURVEY_SEND:"Send",SURVEY_CLOSE:"No Thanks",SURVEY_TEXTAREA_LIMITATION_LABEL:"characters remaining",INVALID_PARAMETER_SURVEY_MESSAGE:"Answer type not allowed",INVALID_PARAMETER_SURVEY_TITLE:"Invalid Parameter",SEND_RHP_TITLE:"Sent To",GENERIC_ARIA_LABEL_STRING:"<%= prefix %>. <%= suffix %>",ENTERPRISE_RESTRICTIONS_ENFORCED:"Enterprise Sharing Restrictions Enabled",ENTERPRISE_USERS_SHARING_ACCESS:"This feature isn't available because your organization has enabled sharing restrictions. "}),define("acplugins/tracked-send/js/home-view/ops/downloading/downloading-parcel-assets-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!core/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/http-util","core/ops/op"],function(e,i,t,s,n){return i.DownloadingParcelAssetsOp=e.Op.extend({run:function(){var e,i,o,l,a,r,c,d,h,p=this.options,u=$.Deferred(),g=p.appApi.baseFilesUrisApi.getDownloadUri(),v=p.appApi.dialogApi;return e=p.selectionUiModel,i=e.getSingleSelectedItemModel(),l=e.get("selected_item_ui_models"),i&&(a=i.id,o=l[a],d="GET",r=n.getRequestHeaders(d),o.set("masked",!0),h=i.url()+"/assets",$.ajax(h,{type:d,headers:r,dataType:"JSON"}).then(function(e){var i=e.assets,n=_.pluck(i,"id").join(";");n?p.appApi.downloadApi.getDownloadTicket(n).done(function(e){h=g+"archive/zip/"+n+"?dlticket="+e.download_ticket,c=p.iframe,c?c.attr("src",h):window.open(h,"_self"),o.set("masked",!1)}):v.displayTextAlert(v.SEVERITY_ERROR,s.NO_FILES_TITLE,s.NO_FILES_MESSAGE,t.CLOSE)},function(){o.set("masked",!1)})),u.promise()}}),i.DownloadingParcelAssetsOp}),define("acplugins/tracked-send/js/home-view/ops/downloading/saveas-single-asset-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/rna/rna-notification-model","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s,n){var o="binder.zip";i.SaveAsSingleAssetOp=e.Op.extend({run:function(){var i,n,l,a=this.options,r=e.opFactory,c=a.idToSaveAs,d=a.nameToSaveAs,h={notificationHeading:s.SHARED_FILES};return c&&d||(i=a.selectionUiModel,n=i.getSingleSelectedItemModel(),n&&(l=n.get("files"),l&&1===l.length&&(c=l[0].id,d=l[0].name))),h.fileName=o,h.fileExtn=e.Util.getExtension(o),h.showDownloadAll=!1,r.create("GettingAssetMetadataOp",a).run(c).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:t.NOTIFICATION_OPERATIONS.PROCESS,state:t.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(h),progress:0,description:"sent"}).done(_.bind(function(i){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),this._downloadSingleFileAsZip(c,i).then(_.bind(function(e){this._onDownloadCompletion(i,e)},this),_.bind(function(e){this._onDownloadFailed(i,e)},this))},this))},this))},this)),this._getResolvedPromise()},_downloadSingleFileAsZip:function(i,t){var s=this.options,n=e.opFactory;return n.create("DownloadingZipStartOp",_.extend({},s,{id_list:i,numForms:0,fileName:o,notificationObj:t})).run()},_onDownloadCompletion:function(e,i){var s=e.get("userData"),n={};try{n=JSON.parse(s)}catch(o){}i.downloadedFileSys&&(n.downloadedFileSys=i.downloadedFileSys),i.downloadedFilePath&&(n.downloadedFilePath=i.downloadedFilePath),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(n),state:t.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,i){if(7!==i){var s={errorTitle:n.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:t.NOTIFICATION_STATES.FAILED,error:JSON.stringify(s)})}}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!core/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.DeletingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,n,o,l,a=this.options,r=a.appApi.dialogApi;return e=a.selectionUiModel,n=e.getNumSelectedItems(),o=1===n?s.CONFIRM_REMOVE_MSG_ONE_ITEM:s.CONFIRM_REMOVE_MSG_N_ITEMS,l=s.CONFIRM_REMOVE_TITLE,r.displayTextAlert(r.SEVERITY_WARNING,l,o,s.REMOVE,t.CANCEL).then(function(){return i.opFactory.create("DeletingParcelOp",a).run().done(function(){e.clearSelection()})})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){i.DeletingParcelOp=e.Op.extend({run:function(){var e,i,t,s=this.options,n=[];return e=s.selectionUiModel,i=e.get("selected_item_models"),t=e.get("selected_item_ui_models"),_.each(i,function(i){var s,o=i.id,l=t[o];l.set("masked",!0),s=i.destroy({wait:!0}).then(function(){e.deselectItem(o,!0)},function(){l.set("masked",!1)}),n.push(s)}),$.when.apply($,n)}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/forwarding-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){i.ForwardingParcelOp=e.Op.extend({run:function(){var i,t,s,n=this.options,o={};return i=n.selectionUiModel,t=i.getSingleSelectedItemModel(),s="/send/parcel/"+t.id,e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){o.selectedParcelId=t.id,o.selectedAssetIds=[],o.selectedModels=[],e.stApi.launchSendTrackApp(o)},this)):(n.appApi.routerApi.navigate(s,{trigger:!0}),i.clearSelection()),this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/setting-delivery-receipts-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,i,t){i.SettingDeliveryReceiptsOp=e.Op.extend({run:function(){var e,i,s,n,o,l=this.options,a=this.options.parcelModel;return e=a.url(),i=e+"/delivery_receipts",s="PUT",n={value:l.deliveryReceipts},o=t.getRequestHeaders(s),o["Content-Type"]="application/json",$.ajax(i,{type:s,headers:o,data:JSON.stringify(n),dataType:"json"}).then(function(){l.parcelModel.set({delivery_receipts:l.deliveryReceipts})})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.UnsharingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,n,o,l,a=this.options,r=a.appApi.dialogApi;return e=a.selectionUiModel,n=e.getNumSelectedItems(),o=1===n?t.CONFIRM_UNSHARE_MSG_ONE_ITEM:_.template(t.CONFIRM_UNSHARE_MSG_N_ITEMS,{numItems:n}),l=t.CONFIRM_UNSHARE_TITLE,r.displayTextAlert(r.SEVERITY_WARNING,l,o,t.UNSHARE,s.CANCEL).then(function(){return i.opFactory.create("UnsharingParcelOp",a).run().done(function(){e.clearSelection()})})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,i,t){return i.UnshareOneParcelOp=e.Op.extend({run:function(){var e,i,s,n,o,l=this.options,a="PUT";return e=l.itemModel,i=e.url()+"/is_active",s=JSON.stringify({value:!1}),n=t.getRequestHeaders(a),n["Content-Type"]="application/json",o=$.ajax(i,{type:a,headers:n,data:s,dataType:"json"}).then(function(){e.set({is_active:!1})})}}),i.UnshareParcelOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op"],function(e,i){i.UnsharingParcelOp=e.Op.extend({run:function(){var e,t,s,n=this.options,o=[];return e=n.selectionUiModel,t=e.get("selected_item_models"),s=e.get("selected_item_ui_models"),_.each(t,function(t){var n,l,a=t.id,r=s[a];r.set("masked",!0),l=new i.UnshareOneParcelOp({itemModel:t}),n=l.run().then(function(){e.clearSelection(),t.set({is_active:!1}),r.set("masked",!1)},function(){r.set("masked",!1)}),o.push(n)}),$.when.apply($,o)}})}),define("acplugins/tracked-send/js/home-view/ops/selection/selecting-collection-item-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){return i.SelectingCollectionItemOp=e.Op.extend({run:function(){var i,t=this.options,s=t.itemView,n=this._multipleSelection();switch(this.options.selectType){case e.SelectionUiModel.SELECT_ALL:i=this._selectAll(!0);break;case e.SelectionUiModel.SELECT_NONE:i=this._selectAll(!1);break;case e.SelectionUiModel.SELECT_DESELECT:i=this._selectItem(s,!1);break;case e.SelectionUiModel.SELECT_EXTEND:i=this._extendSelectItem(s);break;case e.SelectionUiModel.SELECT_SELECT:i=this._selectItem(s);break;case e.SelectionUiModel.SELECT_TOGGLE:i=this._toggleSelectItem(s);break;case e.SelectionUiModel.SELECT_NEXT:i=this._selectNext();break;case e.SelectionUiModel.SELECT_PREVIOUS:i=this._selectPrevious();break;case e.SelectionUiModel.EXTEND_SELECT_NEXT:i=this._selectNext(n);break;case e.SelectionUiModel.EXTEND_SELECT_PREVIOUS:i=this._selectPrevious(n)}return i&&t.selectionUiModel.triggerSelectionChange(),this._getResolvedPromise()},_selectItemView:function(e,i){var t,s=this.options,n=e.model;return t=s.noFolderSelection&&n.isFolder(),s.selectionUiModel.selectItem(n,e.options.itemUiModel,t?!1:i)},_selectAll:function(e){var i,t=this.options.collectionItemsView.getChildViews();if(!(e&&t.length>1)||this._multipleSelection())return _.each(t,_.bind(function(t){this._selectItemView(t,e)&&(i=!0)},this)),i},_deselectAll:function(){return this.options.selectionUiModel.getNumSelectedItems()>0?(this._selectAll(!1),!0):!1},_selectNext:function(e){var i=this._getSelectionEnd(),t=this._getNextSelectable(i,!1);if(e||this._deselectAll())return t>=0&&(i=t),this._selectChildAt(i)},_selectPrevious:function(e){var i=this._getSelectionStart(),t=this._getNextSelectable(i,!0);if(e||this._deselectAll())return t>=0&&(i=t),this._selectChildAt(i)},_extendSelectItem:function(e){var i,t,s,n;return this._multipleSelection()||this._selectAll(!1)&&(n=!0),this._selectItemView(e,!0)&&(n=!0),i=this._getTargetIndex(),t=this._getClosestSelectedIndex(i,!1),t>0?(this._selectRange(!0,i,t)&&(n=!0),this._selectRange(!1,0,i-1)&&(n=!0)):(s=this._getClosestSelectedIndex(i,!0),s>=0?this._selectRange(!0,s,i)&&(n=!0):this._selectItem(e)&&(n=!0)),n},_selectItem:function(e){var i;return this._selectAll(!1)&&(i=!0),this._selectItemView(e,!0)&&(i=!0),i},_toggleSelectItem:function(e){var i,t=e.options.itemUiModel.get("selected");return this._multipleSelection()||this._selectAll(!1)&&(i=!0),this._selectItemView(e,!t)&&(i=!0),i},_multipleSelection:function(){return this.options.selectionUiModel.get("multiple_selection")},_getSelectionIndex:function(e){function i(e){return s=t.eq(e),r.isItemSelected(s.data("id"))}var t,s,n,o,l,a=this.options,r=a.selectionUiModel;if(t=this._getChildren(),n=t.length,l=-1,e){for(o=0;n>o;o+=1)if(i(o)){l=o;break}}else for(o=n-1;o>=0;o-=1)if(i(o)){l=o;break}return l
},_getSelectionStart:function(){return this._getSelectionIndex(!0)},_getSelectionEnd:function(){return this._getSelectionIndex(!1)},_getTargetId:function(){var e,i,t=this.options.itemView;return t&&(e=t.model,e&&(i=e.id)),i},_getTargetIndex:function(){var e,i,t;return i=this._getTargetId(),t=this.options.collectionItemsView.$el.children(),t.each(function(t,s){return $(s).data("id")===i?(e=t,!1):void 0}),e},_getClosestSelectedIndex:function(e,i){var t,s,n,o,l,a;if(t=this.options.collectionItemsView,s=t.$el.children(),n=s.length,o=-1,a=_.bind(function(e){var i=this._getItemUiModelAt(t,s,e);return i.get("selected")},this),i){for(l=e-1;l>=0;l-=1)if(a(l)){o=l;break}}else for(l=e+1;n>l;l+=1)if(a(l)){o=l;break}return o},_selectRange:function(e,i,t){var s,n,o,l,a;for(s=this.options.collectionItemsView,o=s.$el.children(),l=i;t>=l;l+=1)n=this._getItemViewAt(s,o,l),this._selectItemView(n,e)&&(a=!0);return a},_isChildAtSelectable:function(e){return this._isChildSelectable(this._getChildAt(e))},_isChildSelectable:function(e){var i=e.data("model");return!this.options.noFolderSelection||!i.isFolder()},_selectChild:function(e,i,t){var s,n,o,l=this.options,a=!1;if(e)return e=$(e),o=this.options.collectionItemsView.getChildViewById(e.data("id")),s=o.model,n=o.options.itemUiModel,t&&(a=t.scrollIntoView),a&&this._scrollItemIntoView(e),l.selectionUiModel.selectItem(s,n,this._isChildSelectable(e)?i:!1,!0)},_selectChildAndScroll:function(e,i){return this._selectChild(e,i,{scrollIntoView:!0})},_selectChildAt:function(e,i,t){return _.isUndefined(i)&&(i=!0),this._selectChildAndScroll(this._getChildAt(e),i,t)},_getItemViewAt:function(e,i,t){var s=i.eq(t),n=$(s).data("id");return e.getChildViewById(n)},_getChildren:function(){return this.options.collectionItemsView.$el.children()},_getChildCount:function(){return this._getChildren().length},_getChildAt:function(e){var i=this._getChildren();return 0>e||e>=i.length?void 0:i.eq(e)},_getNextSelectable:function(e,i){return i?Math.max(e-1,0):Math.min(this._getChildCount()-1,e+1)},_scrollItemIntoView:function(e){var i=e.position().top,t=e.height(),s=$(this.options.collectionItemsView.el).height();if(0>i||i+t>s){var n=$(this.options.collectionItemsView.el).scrollTop(),o=i-(s-t)/2;$(this.options.collectionItemsView.el).scrollTop(Math.max(n+o,0))}},_getItemUiModelAt:function(e,i,t){var s=this._getItemViewAt(e,i,t);return s.options.itemUiModel}}),i.SelectingCollectionItemOp}),define("acplugins/tracked-send/js/home-view/ops/showing/showing-parcel-preview-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){i.ShowingParcelPreviewOp=e.Op.extend({run:function(){var e,i,t,s,n=this.options;return e=n.appApi,t=n.parcelModel,t||(i=n.selectionUiModel,t=i.getSingleSelectedItemModel()),t&&(s=t.id),s&&e.routerApi.navigate("/sentfiles/"+s,{trigger:!0}),this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/showing-sign-in-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i){i.ShowingSignInOp=e.Op.extend({run:function(){return this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/showing-single-asset-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i){i.ShowingSingleAssetOp=e.Op.extend({run:function(){var i,t,s,n=this.options,o=n.idToShow,l=[];return o||(i=n.selectionUiModel,t=i.getSingleSelectedItemModel(),t&&(s=t.get("files"),s&&1===s.length&&(o=s[0].id))),e.Util.isCEF()?e.opFactory.create("GettingAssetMetadataOp",n).run(o).done(_.bind(function(e){this.options.appApi.rnaApi.done(function(i){l.push(e.parent_id),i.assetApi({methodName:"openFile",methodArgs:[o,l]})})},this)):o&&n.appApi.routerApi.navigate("/file/"+o,{trigger:!0}),this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/desktop-show-in-browser-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i){i.DesktopShowInBrowserOp=e.Op.extend({run:function(){var t=i.opFactory;if("trackObject"===this.options.eventName)var s=e.getBaseCloudUrl(),n="sentfiles/",o=this.options.selectionUiModel.getSingleSelectedItemModel().id,l=s+n+o;else if("adobeSendWebsite"===this.options.eventName)var l="/send";var a={url:l},r=t.create("JumpToBrowserApiCallOp",this.options),c=r.run(a).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.ipmApi({methodName:"executeURI",methodArgs:JSON.parse(c.responseText).uri})},this))},this));return c.promise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/jump-to-browser-api-call-op",["core/ac-core","core/utils/http-util","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,i,t){var s="reader/jump_to_browser_url";t.JumpToBrowserApiCallOp=e.Op.extend({run:function(e){var t,n,o=this.options,l=Ac.baseFilesUrisModel.getSendApiUri();return _.isEmpty(l)?this._getRejectedPromise():(t="POST",n=_.extend({},i.getRequestHeaders(t,o,!1),{"Content-Type":"application/json"}),l+=s,o.appApi.networkApi.throttledAjax(l,{type:t,headers:n,data:JSON.stringify(e),dataType:"json",global:!1}))}})}),define("acplugins/tracked-send/js/home-view/ops/op-factory",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/selection/clearing-selection-op","core/ops/selection/selecting-collection-item-op","acplugins/tracked-send/js/home-view/ops/plugin/starting-plugin-op","acplugins/tracked-send/js/home-view/ops/plugin/listening-for-view-events-op","acplugins/tracked-send/js/home-view/ops/getting/getting-parcels-op","acplugins/tracked-send/js/home-view/ops/getting/getting-rhp-preview-metadata-op","acplugins/tracked-send/js/home-view/ops/downloading/downloading-parcel-assets-op","acplugins/tracked-send/js/home-view/ops/downloading/saveas-single-asset-op","acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/forwarding-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/setting-delivery-receipts-op","acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-op","acplugins/tracked-send/js/home-view/ops/selection/selecting-collection-item-op","acplugins/tracked-send/js/home-view/ops/showing/showing-parcel-preview-op","acplugins/tracked-send/js/home-view/ops/showing/showing-sign-in-op","acplugins/tracked-send/js/home-view/ops/showing/showing-single-asset-op","acplugins/tracked-send/js/home-view/ops/showing/desktop-show-in-browser-op","acplugins/tracked-send/js/home-view/ops/showing/jump-to-browser-api-call-op"],function(e,i){i.OpFactory=e.Op.extend({create:function(e,t){var s=i[e];return s?new s(t):void LOG(0,"AcTrackedSend.OpFactory.create: Unrecognized class: "+e)}})}),define("acplugins/tracked-send/js/utils/sc-constants",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend;return i.ScConstants={ACTION:"Action",ACTIONS:"Actions",ADD_FILES_TO_SHARE:"AddFilesToShare",ADDRESS_BOOK:"AddressBook",ATTEMPTED_TO_SHARE_FORM:"AttemptedToShareForm",AUTOCOMPLETE:"Autocomplete",AVOIDED:"Avoided",BROWSER_CLOSE:"BrowserClosed",BRANDING:"Branding",CANCEL:"Cancel",CHECKED:"Checked",CHICKLET_ADDED:"ChickletAdded",CLICKED:"Clicked",CLICK_BRANDING:"ClickBranding",CLICK_BRANDING_IN_READER:"ClickBrandingInReader",CLICK_BRANDING_IN_ACROBAT:"ClickBrandingInAcrobat",CLOSE:"Close",COLOR_INPUT:"ColorInput",COLOR_MENU_BUTTON:"ColorMenuButton",COLOR_WELL:"ColorWell",CONTINUE:"Continue",DATE_VIEWED:"DateViewed",DEFAULT:"Default",DIALOG:"Dialog",DISABLED:"Disabled",DISALLOWED:"Disallowed",DOWNLOAD:"Download",DOWNLOAD_ALL:"DownloadAll",DOWNLOAD_ONE:"DownloadOne",DRAG_FILES:"DragFiles",DURATION:"Duration",EDIT_BRANDING_ONLINE:"ContinueOnline",EMAIL:"Email",EMAIL_LINK:"EmailLink",ENABLED:"Enabled",ENTERED:"Entered",EVENTUAL_CLICK:"EventualClick",FILE:"File",FILE_LIST:"FileList",FILE_NAME:"FileName",FILES_SHARED_DLG:"FilesSharedDlg",FORWARD:"Forward",FULL_ACTIVITY:"FullActivity",HIDDEN:"Hidden",IMMEDIATE_CLICK:"ImmediateClick",INCLUDE_MESSAGE_TEXT:"IncludeMessageText",INCLUDE_REPLY_TO:"IncludeReplyTo",IPM:"IPM",LATER:"Later",LOGO_BUTTON:"LogoButton",LOGO_CANCEL:"LogoCancel",LOGO_SAVE:"LogoSave",MESSAGE:"Message",MULTI:"Multi",NO_PARCELS:"NoParcels",NOTIFY_WHEN_VIEWED:"NotifyWhenViewed",NUM_FILES_CHECKED:"NumFilesChecked",PERSONAL:"Personal",PERSONAL_AND_PUBLIC:"PersonalANDPublic",PREVIEW:"Preview",PUBLIC:"Public",PUBLIC_LINK:"PublicLink",RECVIEW:"RecView",REPLY:"Reply",REMOVE:"Remove",REPORT_ABUSE:"ReportAbuse",RHP:"RHP",SCROLL:"Scroll",SAVE_AS:"SaveAs",SELECT_ALL:"SelectAll",SELECT_FILES:"SelectFiles",SENT_FILES:"SentFiles",SHARE:"Share",SHARE_BUTTON:"ShareButton",SHARE_FILE_BUTTON:"ShareFileButton",SHARE_ICON:"ShareIcon",SHARE_WITH:"ShareWith",SHARED:"Shared",SHOWN:"Shown",SINGLE:"Single",SORT:"Sort",SUBJECT:"Subject",SUCCESS:"Success",SURVEY:"Survey",SURVEY_CANCEL:"SurveyCancel",SURVEY_FIELD_FOCUS:"SurveyFieldFocus",SURVEY_LINK:"SurveyLink",SURVEY_SEND:"SurveySend",TOOLS:"Tools",TRACK:"Track",TRASH:"Trash",TURN_OFF_BRANDING:"TurnOffBranding",TURN_ON_BRANDING:"TurnOnBranding",UNCHECKED:"Unchecked",UNSHARE:"Unshare",UPGRADE:"Upgrade",URL_HIGHLIGHT:"UrlHighlight",URL_KEY_COPY:"UrlKeyCopy",VIEW:"View",VIEW_ALL_SHARED_FILES:"ViewAllSharedFiles",VIEW_FULL_ACTIVITY:"ViewFullActivity",WARNED_BEFORE_CLOSING:"WarnB4Close",WARNING:"Warning",WITH_REPLY:"wReply",1:"1","2_TO_5":"2to5","6_TO_10":"6to10","11_OR_MORE":"11orMore","11_TO_20":"11to20","21_TO_40":"21to40","41_TO_120":"41to120","121_OR_MORE":"121orMore",FSS:"FSS",FORM:"Form",OUTPUT:"Output",SAVE_TO_PDF:"SaveToPDF","1_STARTED":"1-Started","2_COMPLETED":"2-Completed",ERROR:"Error",SEND_TAB:"SendTab",COMPLETED:"Completed"},i.ScConstants}),define("acplugins/tracked-send/js/home-view/templates/tracked-send-template.html",[],function(){return'<div class="on-signed-in ui-theme theme-container"></div>    <div class="on-signed-out ui-theme theme-container "></div>    <div class="files-offline-view ui-theme theme-container"></div>	 <div class="files-no-access-view ui-theme theme-container"></div>'}),define("acplugins/tracked-send/js/tool/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend.Tool;return i||(i=e.TrackedSend.Tool={}),i.PLUGIN_ID||(i.PLUGIN_ID="send"),i}),define("acplugins/tracked-send/js/tool/models/version-model",["core/ac-core","acplugins/tracked-send/js/tool/ac-tracked-send","core/models/model"],function(e,i){return i.VersionModel=e.Model.extend({url:function(){return e.getBaseFilesUrl()+"a/version"}}),i.VersionModel}),define("acplugins/tracked-send/js/utils/sharing",[],function(){var e={Connector:{kind:"value",values:["DOCCLD","CCLOUD","ONEDRV"]},CountValue2:{kind:"value",values:["2to5","6to10","11orMore"]},CountValue1:{kind:"value",values:["1","2to5","6to10","11orMore"]},CountValue0:{kind:"value",values:["0","1","2to5","6to10","11orMore"]}},i=[{pageName:"FileList:SentFiles:Clicked",selector:""},{pageName:"FileList:SentFiles:Action:Unshare",selector:""},{pageName:"FileList:SentFiles:Action:Forward",selector:""},{pageName:"FileList:SentFiles:Action:Download",selector:""},{pageName:"FileList:SentFiles:Action:Trash",selector:""},{pageName:"FileList:SentFiles:Action:SelectAll",selector:""},{pageName:"FileList:SentFiles:FileName:Checked",selector:""},{pageName:"FileList:SentFiles:FileName:Unchecked",selector:""},{pageName:"FileList:SentFiles:NumFilesChecked:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Preview:Shared:Single:Shown",selector:""},{pageName:"Preview:Shared:Multi:Shown",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Single:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:PreviewFile:SendFileAgain",selector:""},{pageName:"Preview:Shared:Single:Unshare",selector:""},{pageName:"Preview:Shared:Multi:Unshare",selector:""},{pageName:"Preview:Shared:Single:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:Forward",selector:""},{pageName:"Preview:Shared:Multi:File:NextPg",selector:""},{pageName:"Preview:Shared:Multi:File:PrevPg",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Shown",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Clicked",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Cancel",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:All",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Recipient",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Activity",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Item",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:ViewedBy",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:DateViewed",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:File",selector:""},{pageName:"Preview:Shared:Multi:Preview:RHP:ShareFileButton",selector:""},{pageName:"RecView:Multi:Shown",selector:""},{pageName:"RecView:Multi:Shown:wReply",selector:""},{pageName:"RecView:Multi:SaveToAcrobat",selector:""},{pageName:"RecView:Multi:File:NextPg",selector:""},{pageName:"RecView:Multi:File:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgFull",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgWidth",selector:""},{pageName:"RecView:Preview:BottomNavBar:FullScreen",selector:""},{pageName:"RecView:Preview:BottomNavBar:HideRHP",selector:""},{pageName:"RecView:Preview:BottomNavBar:NextPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:Scroll",selector:""},{pageName:"RecView:Preview:BottomNavBar:Close",selector:""},{pageName:"RecView:Multi:Preview:Shown",selector:""},{pageName:"RecView:Multi:Preview:ReportAbuse",selector:""},{pageName:"RecView:Multi:Preview:Download",selector:""},{pageName:"RecView:Multi:downloadOne",selector:""},{pageName:"RecView:Multi:downloadAll",selector:""},{pageName:"RecView:Multi:Preview:BackButton",selector:""},{pageName:"RecView:Multi:Preview:Reply",selector:""},{pageName:"RecView:Single:Shown",selector:""},{pageName:"RecView:Single:Shown:wReply",selector:""},{pageName:"RecView:Single:ReportAbuse",selector:""},{pageName:"RecView:Single:Download",selector:""},{pageName:"RecView:Single:Reply",selector:""},{pageName:"Preview:Toolbar:Share:Clicked",selector:""},{pageName:"Tools:Share:Clicked",selector:""},{pageName:"Tools:Share:Shown",selector:""},{pageName:"Tools:Share:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:ts-direct-to-workflow-view:<cohort-name>",selector:""},{pageName:"Tools:Share:welcome:Shown",selector:""},{pageName:"Tools:Share:workflow:Shown",selector:""},{pageName:"Tools:Share:success:Shown",selector:""},{pageName:"Tools:Share:welcome:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:welcome:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:SelectFiles:Clicked",selector:""},{pageName:"Tools:Share:ViewAllSharedFiles:Clicked",selector:""},{pageName:"Tools:Share:AddFilesToShare",selector:""},{pageName:"Tools:Share:ShareWith:Public",selector:""},{pageName:"Tools:Share:ShareWith:Public:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Public:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:Email:Disabled:Clicked",selector:""},{pageName:"Tools:Share:Subject:Entered",selector:""},{pageName:"Tools:Share:Message:Entered",selector:""},{pageName:"Tools:Share:Subject:Default",selector:""},{pageName:"Tools:Share:Message:Default",selector:""},{pageName:"Tools:Share:IncludeMessageText:Unchecked",selector:""},{pageName:"Tools:Share:IncludeMessageText:Checked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Unchecked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Checked",selector:""},{pageName:"Tools:Share:AttemptedToShareForm",selector:""},{pageName:"Tools:Share:ShareButton",selector:""},{pageName:"Tools:Share:ShareButton:Clicked",selector:""},{pageName:"Tools:Share:ShareButton:Disabled",selector:""},{pageName:"Tools:Share:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:Clicked",selector:""},{pageName:"Tools:Share:AddressBook:Shown",selector:""},{pageName:"Tools:Share:AddressBook:Success",selector:""},{pageName:"Tools:Share:AddressBook:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:IPM",selector:""},{pageName:"Tools:Share:AddressBook:Enabled",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic::ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Close",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Shown",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:ChooseFilesButton:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:DragFiles:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:AddSelected:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Shown",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:ChooseFiles:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:AddSelected:<CountValue1>",selector:"",variables:{Connector:e.Connector,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Cancel",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:RecentFiles:Clicked",selector:""},{pageName:"Tools:Share:Branding:ColorMenuButton",selector:"",prop49:"Clicked on the color menu button in the customize branding dialog"},{pageName:"Tools:Share:Branding:LogoButton",selector:"",prop49:"Clicked to change logo in customize branding dialog"},{pageName:"Tools:Share:Branding:ClickBrandingInReader",selector:"",prop49:"Clicked to edit their branding settings while in the In Reader Browser"},{pageName:"Tools:Share:Branding:ClickBranding",selector:""},{pageName:"Tools:Share:Branding:LogoCancel",selector:""},{pageName:"Tools:Share:Branding:LogoSave",selector:""},{pageName:"Tools:Share:Branding:TurnOffBranding",selector:""},{pageName:"Tools:Share:Branding:TurnOnBranding",selector:""},{pageName:"Tools:Share:Branding:ColorWell",selector:""},{pageName:"Tools:Share:Branding:ColorInput",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Continue",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Cancel",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Success",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Cancel",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Shown",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:<cohort-name>",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Later:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Upgrade:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Disallowed:Warning:Shown",selector:""},{pageName:"Preview:FileInfo:Clicked",selector:""},{pageName:"Preview:ShareIcon:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:Continue",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:1",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:2",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:3",selector:""},{pageName:"FileList:Shared:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Cancel",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Shown",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePrivate",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePublic",selector:""},{pageName:"sent",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:DupFileNameDlg:DeleteUploaded:Success",selector:""},{pageName:"Tools:Survey:SurveyLink",selector:""},{pageName:"Tools:Survey:Cancel",selector:""},{pageName:"Tools:Survey:Send",selector:""},{pageName:"Tools:Survey:SurveyFieldFocus",selector:""}];return{variables:e,pages:i}}),define("acplugins/tracked-send/js/utils/ts-utils",[],function(){var e={extractRootUrl:function(e){var i=document.createElement("a");return i.href=e,i.protocol+"//"+i.host}};return e}),define("acplugins/tracked-send/js/home-view/models/ui/parcel-preview-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/ui/ui-model"],function(e,i){return i.ParcelPreviewUiModel=e.UiModel.extend({recognized:{parcelPreview:{type:"object",optional:!0},deferred:{type:"object",optional:!0},onHistoryChange:{type:"object",optional:!0}},defaults:{parcelPreview:void 0,deferred:void 0,onHistoryChange:void 0}}),i.ParcelPreviewUiModel}),define("viewer/ac-viewer",[],function(){var e,i,t;return e="dev",i=Ac.Viewer,i||(i=Ac.Viewer={}),t=i[e],t||(t=i[e]={}),t.VERSION=e,t.ID||(t.APP_ID="viewer"),t}),define("viewer/models/parcel-asset-model",["core/ac-core","viewer/ac-viewer","core/models/collection-item-model"],function(e,i){i.ParcelAssetModel=e.CollectionItemModel.extend({initialize:function(i,t){e.CollectionItemModel.prototype.initialize.call(this,i,t),t.collection&&(this.rootUrl=t.collection.rootUrl),t.rootUrl&&(this.rootUrl=t.rootUrl)},getRenditionUrl:function(i,t){var s,n,o;return s=this.collection.parcel,o=s.get("invitation"),o?(n=this.rootUrl+"a/invitation/"+encodeURIComponent(o)+"/asset/"+encodeURIComponent(this.get("id"))+"/"+i,t&&(n+="?page="+t),n):e.CollectionItemModel.prototype.getRenditionUrl.call(this,i,t)}})}),define("viewer/collections/parcel-asset-collection",["viewer/ac-viewer","core/utils/http-util","viewer/models/parcel-asset-model"],function(e,i){e.ParcelAssetCollection=Backbone.Collection.extend({model:e.ParcelAssetModel,initialize:function(e,i){Backbone.Collection.prototype.initialize.call(this,e,i),this.rootUrl=i.rootUrl,this.parcel_id=i.parcel_id,this.parcel=i.parcelModel,this.sortAscending=!0,this.sortField="name"},comparator:function(e,i){var t,s,n,o=e.get(this.sortField),l=i.get(this.sortField);return t=this.sortAscending?o:l,s=this.sortAscending?l:o,n=t===s?0:s>t?-1:1},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/assets"},fetch:function(e){return e=i.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.assets}})}),define("acplugins/tracked-send/js/home-view/ops/showing/parcel-preview-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","viewer/collections/parcel-asset-collection","core/ops/op"],function(e,i,t,s,n){return i.ParcelPreviewOp=e.Op.extend({run:function(){var e,o,l,a,r,c,d=this.options,h=this.options.parcelModel,p=this.options.parcelPreviewUiModel,u=this.options.appApi;e=u.displayApi.showFullOverlay(!0),o=this.options.appApi.baseFilesUrisApi.getSendApiUri(),o=n.extractRootUrl(o),d.parcelAssetsCollection=new t.ParcelAssetCollection([],{rootUrl:o,parcel_id:h.id,parcelModel:h}),l=p.get("parcelPreview"),l&&l.off(),r=p.get("deferred"),r||(r=$.Deferred(),p.set({deferred:r})),c=p.get("onHistoryChange"),c&&u.routerApi.removeHistoryChangeCallback(c),c=this._onHistoryChange,u.routerApi.addHistoryChangeCallback(c),p.set({onHistoryChange:c}),a=_.extend({},d,{el:e,parcelModel:h}),l=new i.ParcelPreviewView(a),p.set({parcelPreview:l}),this.parcelPreview=l,l.on("all",d.rootView._onViewEvent,d.rootView),l.on("ParcelPreview_Close",this._onParcelPreviewClose,this);var g=i.opFactory.create("GettingAssetsOp",d);return g.run().then(_.bind(function(){var e;e=d.parcelAssetsCollection&&d.parcelAssetsCollection.length>1?s.MULTI:s.SINGLE,u.siteCatalystApi.logScEvent([s.PREVIEW,s.SHARED,e,s.SHOWN]),this.render()},l)),r.promise()},_onParcelPreviewClose:function(){var e,i=this.options.parcelPreviewUiModel;e=i.get("parcelPreview"),e&&(i.unset("parcelPreview"),e.off(),_.defer(_.bind(function(){var t=i.get("deferred");t.resolve(),i.unset("deferred"),this.options.appApi.routerApi.removeHistoryChangeCallback(this._onHistoryChange),this.options.appApi.displayApi.showFullOverlay(!1),e.$el.empty()},this)))},_onHistoryChange:function(){this._onParcelPreviewClose()}}),i.ParcelPreviewOp}),define("acplugins/tracked-send/js/home-view/templates/on-signed-in-template.html",[],function(){return'<div class="sent-files-header files-header">Search Controls</div><div class="sent-files-body"></div><div class="sent-files-rhp files-rhp hidden invisible"></div><div class="sent-files-footer desktop ui-theme theme-container-prominent theme-border"></div>'}),define("acplugins/tracked-send/js/home-view/templates/sent-files-header-template.html",[],function(){return'<div class="sent-files-header-btns left">        <div class="core-search-icon send-search-icon"></div>    </div>    <div class="sent-files-header-btns right">        <div class="sfh-refresh-btn"><%= refresh %></div>    </div>'}),define("acplugins/tracked-send/js/home-view/views/sent-files-header-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/home-view/templates/sent-files-header-template.html"],function(e,i,t,s){i.SentFilesHeaderView=e.View.extend({events:{"click .sfh-refresh-btn":"_onRefreshClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(s)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&this.$el.html(this._template({refresh:t.SENT_FILES_HEADER_REFRESH})),this},_onRefreshClick:function(){this.options.parcelCollection.fetch()}})}),define("acplugins/tracked-send/js/home-view/templates/sent-files-body-template.html",[],function(){return'<div class="parcels"></div>    <div class="parcels-search-results"></div>    <div class="parcel-hover-details"></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-template.html",[],function(){return'<div class="parcels-content ui-theme theme-container"></div>    <div class="parcels-no-content"></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-collection-template.html",[],function(){return'<div role="toolbar" class="selection-actions ui-theme theme-container"></div><div role="group"     aria-labelledby="<%= pluginSelectorId %>"     aria-multiselectable="true">    <div role="row" class="collection-header ui-theme theme-container theme-border"></div>    <div role="presentation" tabindex="-1"         class="collection-items with-header">    </div>    <div role="presentation" class="collection-footer"></div></div>'}),define("acplugins/tracked-send/js/home-view/models/ui/parcels-list-item-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/ui/ui-model"],function(e,i){i.ParcelsListItemUiModel=e.CollectionItemUiModel.extend({recognized:{expanded:{type:"boolean",optional:!1},masked:{type:"boolean",optional:!1},selected:{type:"boolean",optional:!1}},defaults:{expanded:!1,masked:!1,selected:!1}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-file-template.html",[],function(){return'<div role="row" class="parcel-list-item-file" data-id="<%= fileId %>"        aria-selected="false" aria-level="2">    <div role="gridcell"></div>    <div role="gridcell">        <div role="img"             aria-label="<%= iconDesc %>"             class="collection-item-thumb <%= iconCls %> parcel-list-item-file-icon"></div>        <a class="parcel-list-item-file-name theme-list-item-text"           tabindex="-1"><%- filename %></a>    </div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div></div>'
}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-item-template.html",[],function(){return'<div role="<%= itemRole %>" class="parcel-list-item collection-item theme-list-item theme-border">    <div role="row" aria-selected="false">        <div role="gridcell">            <div role="checkbox"                 class="parcel-list-item-checkbox core-checkbox"                 tabindex="-1"                 aria-checked="false"                 aria-labelledby="parcel-list-item-num-files-<%= viewId %>">            </div>        </div>        <div role="presentation"             class="parcel-list-item-info-container                    collection-item-info-container">            <div role="rowheader">                <button class="parcel-list-item-expand-hitarea"                    tabindex="-1" disabled aria-hidden="true">                    <div class="core-expand-triangle                                parcel-list-item-expand-btn"></div>                </button>                <div role="img" aria-label="<%= iconDesc %>"                     aria-hidden="true"                     class="collection-item-thumb <%= iconCls %>                            parcel-list-item-icon"></div>                <a class="parcel-list-item-num-files theme-list-item-text"                     id="parcel-list-item-num-files-<%= viewId %>"                     tabindex="-1">                    <%- numFiles %></a>            </div>            <div role="gridcell" class="parcel-list-item-subject theme-list-item-text"                 id="parcel-list-item-subject-<%= viewId %>">               <%= subject %></div>            <div role="gridcell" class="parcel-list-item-to theme-list-item-text"                 id="parcel-list-item-to-<%= viewId %>">               <%= recipient %></div>            <div role="gridcell" class="parcel-list-item-date theme-list-item-text"                 id="parcel-list-item-date-<%= viewId %>">               <%= sent %></div>            <div role="gridcell" class="parcel-list-item-hits theme-list-item-text"                 id="parcel-list-item-hits-<%= viewId %>">               <%= views %></div>        </div>    </div>    <div role="presentation" class="parcel-list-item-files"></div>    <div role="presentation" class="parcel-list-item-mask"></div></div>'}),define("acplugins/tracked-send/js/home-view/views/parcels-list-item-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/view-util","core/utils/css-util","core/utils/date-util","core/utils/file-types","core/utils/truncate","acplugins/tracked-send/js/home-view/templates/parcels-list-file-template.html","acplugins/tracked-send/js/home-view/templates/parcels-list-item-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings"],function(e,i,t,s,n,o,l,a,r,c){i.ParcelsListItemView=e.View.extend({initialize:function(){var i={};e.View.prototype.initialize.call(this),this._template=_.template(r),this._fileTemplate=_.template(a),_.each(this.options.model.get("files"),function(e){e.icon_class=this._getIconClass(e),e.icon_desc=this._getIconDesc(e),i[e.id]=e},this),this._files_by_id=i,this._addUiModelEventListeners()},render:function(i,t){var s,n,o,l,a,r,d=this.options.model.get("files"),h=this.model.id;return e.View.prototype.render.call(this),this.$item?(i?i.data("id")!==h&&(this.$item=this.$item.clone(),i.replaceWith(this.$item.get(0)),this._initWrappers()):this.$el.append(this.$item.get(0)),this.invalidate()):(this._prevNumHits=this._getNumHits(),1===d.length?(s=this._getIconClass(d[0]),n=this._getIconDesc(d[0]),o="presentation"):(s="file-icon-multifile parcel-list-item-icon-hitarea",n="",o="rowgroup"),l=h,a=$(this._template({iconCls:s,iconDesc:n,numFiles:this._getNumFiles(),subject:_.escape(this._getEmailSubject()),recipient:_.escape(this._getRecipients()),sent:this._getDateSent(),views:this._prevNumHits,viewId:l,modelId:h,itemRole:o})),e.Util.isCEF()?1===d.length?a.find("[role='row']:first").addClass("parcel-list-item-row").attr({"aria-label":d[0].name,tabindex:"-1"}):a.addClass("parcel-list-item-row").attr({"aria-expanded":"false","aria-label":this._getParcelAriaLabel(d.length),"aria-level":"1","aria-selected":"false",tabindex:"-1"}):1===d.length?a.find("[role='row']:first").addClass("parcel-list-item-row").attr({"aria-labelledby":"parcel-list-item-num-files-"+l,tabindex:"-1"}):a.addClass("parcel-list-item-row").attr({"aria-expanded":"false","aria-labelledby":"parcel-list-item-num-files-"+l+" parcel-list-item-subject-"+l,"aria-level":"1","aria-selected":"false",tabindex:"-1"}),n.length&&a.find(".collection-item-thumb:first").removeAttr("aria-hidden"),i?i.replaceWith(a):this.$el.append(a),this.$item=this.$el.children().eq(t),this._initWrappers(),_.each(d,function(e){s=this._files_by_id[e.id].icon_class,n=this._files_by_id[e.id].icon_desc,r=$(this._fileTemplate({filename:e.name,iconCls:s,iconDesc:n,fileId:e.id})),r.find("a.parcel-list-item-file-name").attr("href","/file/"+e.id),this.$files.append(r)},this),this._updateExpandButtonVisibility()),this.$item.data("id",h),e.Util.isCEF()&&(this.$item.find(".parcel-list-item-subject").addClass("desktop"),this.$item.find(".parcel-list-item-to").addClass("desktop"),this.$item.find(".parcel-list-item-file-name").addClass("desktop"),this.$numHits.addClass("desktop")),this.invalidateSize(),this._initWrappers(),this._updateFields(),this.isExpanded()?(this.$item.addClass("expanded").filter("[aria-expanded]").attr("aria-expanded",!0),this.$expandBtn.addClass("expanded"),this.$expandHitArea.attr({"aria-label":c.COLLAPSE,title:c.COLLAPSE})):(this.$item.removeClass("expanded").filter("[aria-expanded]").attr("aria-expanded",!1),this.$expandBtn.removeClass("expanded"),this.$expandHitArea.attr({"aria-label":c.EXPAND,title:c.EXPAND})),e.Util.isCEF()&&this._updateForVerticalScrollBar(),this._setCheckboxVisibility(),this},_getParcelAriaLabel:function(e){return _.template(c.GENERIC_ARIA_LABEL_STRING,{prefix:e,suffix:c.FILES})},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",t.isVerticalScrollBarPresent(this.$el))},this),150)},remove:function(){this.$item.remove()},getViewElement:function(){return this.$item},setupSizedElement:function(i){var t,s,n=$(this.$item.find(i));if(".parcel-list-item-file-name"!==i||1!==n.length)for(t=0;t<n.length;t++)$(n[t]).attr("data-title")?$(n[t]).text($(n[t]).attr("data-title")):$(n[t]).attr({"data-title":$(n[t]).text()}),".parcel-list-item-file-name"===i?$(n[t]).attr("title")||($(n[t]).attr("title",$(n[t]).text()),l.truncateElementText($(n[t]))):($(n[t]).attr("title")?(e.Util.isCEF()&&".parcel-list-item-to"===i&&$(n[t]).attr("title",this._getRecipients()),$(n[t]).text($(n[t]).attr("title"))):$(n[t]).attr("title",$(n[t]).text()),l.truncateElementText($(n[t]),void 0,{truncateFromExt:!1})),e.Util.isCEF()&&(".parcel-list-item-to"===i&&(s=this.model.getRecipients(),s[0]="PARCEL_PUBLIC_SHARING"===s[0]?c.PARCEL_PUBLIC_SHARING:s[0],s=s.toString().replace(/,/g,"\n"),$(n[t]).attr("title",s)),$(n[t]).attr("title")===$(n[t]).text()&&$(n[t]).removeAttr("title"))},invalidateSize:function(){function i(e,i,t){var s=e.offset().left,n=i.offset().left;s===n&&(n=t.offset().left),e.width(n-s-10)}var t=this.$numFiles,s=this.$subject,n=this.$to,o=this.$date,l=this.$views;i(t,s,n),i(s,n,o),i(n,o,l),this.setupSizedElement(".parcel-list-item-num-files"),this.setupSizedElement(".parcel-list-item-to"),this.setupSizedElement(".parcel-list-item-subject"),e.Util.isCEF()&&this.setupSizedElement(".parcel-list-item-file-name")},invalidate:function(){e.View.prototype.invalidate.call(this),this._prevNumHits=void 0},expand:function(){this.options.itemUiModel.set("expanded",!0)},collapse:function(){this.options.itemUiModel.set("expanded",!1)},isExpanded:function(){return this.options.itemUiModel.get("expanded")},stopListening:function(i,t,s){e.View.prototype.stopListening.call(this,i,t,s)},_initWrappers:function(){this.$expandBtn=this.$item.find(".parcel-list-item-expand-btn"),this.$expandHitArea=this.$item.find(".parcel-list-item-expand-hitarea"),this.$iconHitArea=this.$item.find(".parcel-list-item-icon-hitarea"),this.$numHits=this.$item.find(".parcel-list-item-hits"),this.$infoContainer=this.$item.find(".parcel-list-item-info-container"),this.$files=this.$item.find(".parcel-list-item-files"),this.$checkbox=this.$item.find(".parcel-list-item-checkbox"),this.$fileName=this.$item.find(".parcel-list-item-file-name"),this.$numFiles=this.$item.find(".parcel-list-item-num-files"),this.$subject=this.$item.find(".parcel-list-item-subject"),this.$to=this.$item.find(".parcel-list-item-to"),this.$date=this.$item.find(".parcel-list-item-date"),this.$views=this.$item.find(".parcel-list-item-hits"),this.$itemRow=this.$item.find(".parcel-list-item-row"),this.$parcelItemIcon=this.$item.find(".parcel-list-item-icon"),this.$multiFileIcon=this.$item.find(".file-icon-multifile"),this.$parcelNumFiles=this.$item.find(".parcel-list-item-num-files")},_getNumFiles:function(){var e,i=this.model.get("files");return e=i?1===i.length?i[0].name:_.template(c.SENT_FILES_NUM_FILES,{numFiles:i.length}):0},_getEmailSubject:function(){return this.model.get("email_subject")},_getRecipients:function(){var e,i=this.model.getRecipients();return i?1===i.length?e="PARCEL_PUBLIC_SHARING"===i[0]?c.PARCEL_PUBLIC_SHARING:i[0]:(e="PARCEL_PUBLIC_SHARING"===i[0]?i[1]:i[0],e=e+" (+"+(i.length-1)+")"):e="none",e},_getDateSent:function(){return n.formatDate(this.model.get("created"))},_getIconClass:function(e){var i,t=o.getFileInfo(e.content_type||"",e.name);return i=t.iconCls||""},_getIconDesc:function(e){var i,t=o.getFileInfo(e.content_type||"",e.name);return i=t.desc||""},_getNumHits:function(){return this.model.getNumHits()},_updateExpandButtonVisibility:function(){var e=this.model.get("files").length;e>1&&(this.$expandBtn.addClass("shown"),this.$expandHitArea.removeAttr("aria-hidden disabled").prop("disabled",!1))},_setCheckboxVisibility:function(){var e=this.$checkbox;this.options.checkbox?(s.removeClass(e,"hidden"),s.removeClass(this.$item,"no-checkbox")):(s.addClass(e,"hidden"),s.addClass(this.$item,"no-checkbox"))},_updateFields:function(){var i=this.model.id,t=this.$numFiles,s=this.$infoContainer;void 0===this._prevNumHits&&(this._prevNumHits=this._getNumHits(),this.$numHits.text(this._prevNumHits)),this.model.isActive()?s.removeClass("disabled"):s.addClass("disabled"),t.attr("href")&&-1!==t.attr("href").indexOf(i)||t.attr("href","/sentfiles/"+i),e.Util.isCEF()&&this.$fileName.addClass("desktop")},onExpandButtonClick:function(i){var t=this.model.get("files");this._consumeEvent(i),t.length<2||(this.isExpanded()?this.collapse():this.expand(),e.Util.isCEF()&&this._updateForVerticalScrollBar())},_onExpandedChange:function(e,i){this._showFileList(i)},_addUiModelEventListeners:function(){var e=this.options.itemUiModel;this.listenTo(e,"change:expanded",this._onExpandedChange).listenTo(e,"change:selected",this._onUiModelSelectedChange)},_onUiModelSelectedChange:function(){this._updateSelectionStatus()},_showFileList:function(e){this.render(this.$item),e?this.$files.slideDown("fast"):this.$files.slideUp("fast")},_updateSelectionStatus:function(){var i=this.$item,n=this.$checkbox,o=this.model.get("files").length>1,l=o?i:this.$itemRow,a=l.find("[aria-selected]").addBack();this.options.itemUiModel.get("selected")?(s.addClass(i,"selected"),s.addClass(n,"selected"),a.attr("aria-selected",!0),n.attr("aria-checked",!0)):(s.removeClass(i,"selected"),s.removeClass(n,"selected"),a.attr("aria-selected",!1),n.attr("aria-checked",!1)),e.Util.isIE8()&&t.detachAndReattachElement(n)}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.UnshareOneIfConfirmedOp=e.Op.extend({run:function(){var e,n,o,l=this.options,a=l.appApi.dialogApi;return e=t.CONFIRM_UNSHARE_MSG_ONE_ITEM,n=t.CONFIRM_UNSHARE_TITLE,a.displayTextAlert(a.SEVERITY_WARNING,n,e,t.UNSHARE,s.CANCEL).then(function(){o=new i.UnshareOneParcelOp(l),o.run()})}})}),define("acplugins/tracked-send/js/home-view/templates/parcel-activity-template.html",[],function(){return'<div role="dialog" tabindex="-1" aria-label="<%- header %>" class="parcel-activity-dlg generic-dialog">        <div role="presentation" class="parcel-activity-dlg-content">            <div role="presentation" class="dialog-title-bar">                <div role="heading" class="dialog-title">                    <%= header %>                </div>            </div>            <div role="grid" class="parcel-table-container">                <div role="row" class="parcel-activity-table-header collection-header">                    <div role="columnheader" class="collection-header-column-title parcel-recipient-col parcel-activity-nosort"><%= recipient %></div>                    <div role="columnheader" class="collection-header-column-title parcel-activity-col parcel-activity-nosort"><%= activity %></div>                    <div role="columnheader" class="collection-header-column-title parcel-item-col parcel-activity-nosort"><%= item %></div>                    <button role="columnheader" tabindex="0" aria-sort="descending" class="collection-header-column-title parcel-date-col parcel-date-col-header"><%= dateViewed %>                    <div class="collection-header-column-sort descending parcel-activity-sort-btn" data-test-name="parcel-activity-date-sort"></div>                    </button>                </div>                <div role="presentation" class="parcel-activity-body"></div>            </div>            <button class="parcel-activity-close-btn control-button ui-theme theme-text button-grey"><%= close %></button>        </div>    </div>'}),define("acplugins/tracked-send/js/home-view/templates/parcel-activity-item-template.html",[],function(){return'<div role="row" class="parcel-activity-item-row collection-item">        <div role="gridcell" class="parcel-activity-item-recipient parcel-recipient-col"><%= email %></div>            <div role="gridcell" class="parcel-activity-item-what parcel-activity-col"><%= what %></div>        <div role="gridcell" class="parcel-activity-item-item parcel-item-col">            <div role="img" aria-label="<%= iconDesc %>"<% if (!iconDesc.length) { %>                 aria-hidden="true"<% } %>                 class="collection-item-thumb <%= iconCls %>"></div>            <div class="parcel-activity-item-filename"><%= filename %></div>        </div>        <div role="gridcell" class="parcel-activity-item-date parcel-date-col"><%= date %></div>    </div>'}),define("acplugins/tracked-send/js/home-view/collections/fileviewevent-collection",["acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util"],function(e,i){e.FileViewEventCollection=Backbone.Collection.extend({initialize:function(e,i){Backbone.Collection.prototype.initialize.call(this,e,i),this.parcel_id=i.parcel_id,this.rootUrl=i.rootUrl},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/file_view_events"},fetch:function(e){return e=e||{},e=i.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.events}})}),define("acplugins/tracked-send/js/home-view/views/parcel-activity-dlg",["core/ac-core","core/utils/date-util","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcel-activity-template.html","acplugins/tracked-send/js/home-view/templates/parcel-activity-item-template.html","core/utils/file-types","core/utils/truncate","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","core/utils/util","acplugins/tracked-send/js/home-view/collections/fileviewevent-collection"],function(e,i,t,s,n,o,l,a,r,c,d){t.ParcelActivityDlg=e.DialogView.extend({PAGE_SIZE:25,_page_num:0,_sort_order:"desc",_no_more_events:!1,_prev_scrolltop:0,_what_map:{parcel_view:a.PARCEL_ACTIVITY_PREVIEWED,download:a.PARCEL_ACTIVITY_DOWNLOADED},events:{"click .parcel-activity-close-btn":"_onCloseBtnClick","click .parcel-date-col-header":"_onSortClick"},initialize:function(){var i,o,l,d=this.options,h=this.options.parcelModel.get("parcel_id"),p={},u={};o=this.options.appApi.baseFilesUrisApi.getSendApiUri(),o=c.extractRootUrl(o),i={parcel_id:h,comparator:!1,rootUrl:o},e.DialogView.prototype.initialize.call(this),this._fileviewevent_collection=new t.FileViewEventCollection([],i),d.parcelModel.set("fileviewevents",this._fileviewevent_collection),this._template=_.template(s),this._itemTemplate=_.template(n),e.View.prototype.initialize.call(this),_.each(d.parcelModel.get("invitations"),function(e){p[e.invitation_id]="PARCEL_PUBLIC_SHARING"===e.recipient_email?a.PARCEL_ACTIVITY_PUBLIC_VISITOR:_.escape(e.recipient_email)},this),this._inv_emails=p,_.each(d.parcelModel.get("files"),function(e){e.icon_class=this._getIconClass(e),e.icon_desc=this._getIconDesc(e),u[e.id]=e},this),this._files_by_id=u,l=d.parcelAssetsCollection&&d.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,d.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,l,r.FULL_ACTIVITY,r.SHOWN])},render:function(){e.DialogView.prototype.render.call(this),this.$el.html(this._template({header:_.template(a.PARCEL_ACTIVITY_HEADING,{emailSubject:_.escape(this.options.parcelModel.get("email_subject"))}),recipient:a.PARCEL_ACTIVITY_RECIPIENT,activity:a.PARCEL_ACTIVITY_ACTIVITY,item:a.PARCEL_ACTIVITY_ITEM,dateViewed:a.PARCEL_ACTIVITY_DATE_VIEWED,close:a.PARCEL_ACTIVITY_CLOSE})),this.$body=this.$(".parcel-activity-body"),this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0)},this),!1),this.$body.scroll(_.bind(function(){this._checkScroll()},this)),this._initWrappers(),this._invalidateSize(),this._initTabLimits(),this.$el.find(":focusable:first").focus()},loadEvents:function(e,i){this.isLoading=!0,this._fileviewevent_collection.fetch({data:{sort:"created!"+this._sort_order,page:this._page_num,max:this.PAGE_SIZE},reset:i,success:e})},displayEvents:function(e){_.each(e.models,function(e){var t,s,n,o,l=e.get("event_type"),r=e.get("file_id"),c="hidden",d="";"parcel_view"===l?(n=this.options.parcelModel.get("files"),1===n.length?(s=this._files_by_id[n[0].id],o=s.name,c=s.icon_class,d=s.icon_desc):(o=a.PARCEL_ACTIVITY_ALL_FILES_PREVIEW,c="file-icon-multifile")):"all"===r?(o=a.PARCEL_ACTIVITY_ALL_FILES,c="file-icon-multifile"):(s=this._files_by_id[r],o=s?s.name:"",c=s?s.icon_class:"hidden",d=s?s.icon_desc:""),t=this._itemTemplate({filename:o,iconCls:c,iconDesc:d,what:this._what_map[l],email:this._inv_emails[e.get("invitation_id")],date:i.formatDate(e.get("created"))}),this.$body.append(t)},this),_.each(this.$(".parcel-recipient-col"),function(e){var i=$(e);l.truncateElementText(i)}),_.each(this.$(".parcel-activity-item-filename"),function(e){var i=$(e);l.truncateElementText(i)}),this.isLoading=!1},close:function(i,t){var s;s=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,s,r.FULL_ACTIVITY,r.CLOSE]),e.DialogView.prototype.close.call(this,i,t)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$body=this.$(".parcel-activity-body")},_onSortClick:function(){var e,i=this.options;this._sort_order="asc"===this._sort_order?"desc":"asc",this._page_num=0,this._no_more_events=!1,this.loadEvents(_.bind(function(e){var i=this.$(".parcel-activity-sort-btn"),t=this.$(".parcel-date-col-header");this.$body.empty(),this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0),"asc"===this._sort_order?(i.removeClass("descending"),t.attr("aria-sort","ascending")):(i.addClass("descending"),t.attr("aria-sort","descending"))},this),!0),e=i.parcelAssetsCollection&&i.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,i.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,e,r.FULL_ACTIVITY,r.SORT,r.DATE_VIEWED])},_checkLimit:function(e){e<this.PAGE_SIZE&&(this._no_more_events=!0)},_checkScroll:function(){var e=100,i=this.$body.height(),t=this.$body.get(0).scrollHeight,s=this.$body.scrollTop(),n=this._prev_scrolltop;this._prev_scrolltop=s,!this._no_more_events&&s>n&&!this.isLoading&&+s+i+e>t&&(this._page_num+=1,this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e)},this),!1))},_getIconClass:function(e){var i,t=o.getFileInfo(e.content_type||"",e.name);return i=t.iconCls||""},_getIconDesc:function(e){var i,t=o.getFileInfo(e.content_type||"",e.name);return i=t.desc||""},_setupSizedElement:function(e){var i=this.$(e);i.attr("data-title")?i.text(i.attr("data-title")):i.attr({"data-title":i.text()}),l.truncateElementText(i)},_invalidateSize:function(){this._setupSizedElement(".dialog-title"),this._center(),this._showModalMask(!0)},_addAppApiCallbacks:function(){e.DialogView.prototype._addAppApiCallbacks.call(this),d.isIE8()||this.options.appApi.windowApi.addWindowResizeCallback(this._onWindowResize)},_removeAppApiCallbacks:function(){e.DialogView.prototype._removeAppApiCallbacks.call(this),d.isIE8()||this.options.appApi.windowApi.removeWindowResizeCallback(this._onWindowResize)},_onWindowResize:function(){this.render()}})}),define("viewer/templates/viewer-page-template.html",[],function(){return'<div class="page-main-container">        <div class="page-error error"></div>        <div class="page-body-container parcel-container">            <div class="page-body thumbnails">                <div class="parcel-body-header">                    <div class="full-preview-home-btn-wrapper">                        <button class="full-preview-home-btn parcel-preview-home-btn"                                id="full-preview-header-home-btn"                                title="<%= back %>">                            <span class="hidden-accessible"><%= back %></span>                        </button>                        <div class="full-preview-home-btn-separator"></div>                        <div class="toolbar-item plugin-selector">                            <div class="toolbar-item-icon-container">                                <div class="toolbar-item-icon back-toolbar-icon parcel-preview-home-btn"></div>                            </div>                            <div class="toolbar-item-label"></div>                        </div>                    </div>                    <div class="full-preview-branding-logo wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>                    <div class="full-preview-name parcel-subject" id="parcel-subject" role="heading" aria-level="1"><%= parcelSubject %></div>                    <div class="parcel-action-buttons">                        <button class="toolbar-item plugin-selector tracked-send-unshare-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon unshare"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= unshare %></div>                        </button>                        <button class="toolbar-item plugin-selector tracked-send-forward-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon forward"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= forwardLabel %></div>                        </button>                        <button class="control-button ts-viewer-download-button"><%= downloadAll %></button>                    </div>                </div>                <div class="parcel-rendition-body-holder">                    <div class="parcel-rendition-list"                         role="group" aria-labelledby="parcel-subject">                    </div>                    <div role="complimentary" class="parcel-rendition-list-rhp">                    </div>                </div>            </div>            <div class="page-body full-preview"></div>        </div>    </div>'}),define("viewer/templates/page-header-template.html",[],function(){return'<div class="adc-logo"></div>    <div class="page-header-tabs">        <div class="page-header-tab selected"><%= title %></div>    </div>'}),define("viewer/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0}),define("viewer/nls/root/ui-strings",{APP_NAME:"VIEWER",UNSUPPORTED_BROWSER_TITLE_2:"Browser Unsupported",UNSUPPORTED_BROWSER_MSG_2:"You are running an unsupported version of Internet Explorer. To view shared file(s), you must upgrade to the <a class='dialog-link' href='<%= ie %>'>latest version of Internet Explorer</a>, or use the latest version of <a class='dialog-link' href='<%= chrome %>'>Google Chrome</a>, <a class='dialog-link' href='<%= safari %>'>Safari</a> or <a class='dialog-link' href='<%= firefox %>'>Firefox</a>."}),define("viewer/views/page-header-view",["core/ac-core","viewer/ac-viewer","viewer/templates/page-header-template.html","i18n!viewer/nls/ui-strings","core/views/view"],function(e,i,t,s){i.PageHeaderView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&this.$el.html(this._template({title:s.APP_NAME})),this}})}),define("viewer/templates/full-preview-tracked-send-template.html",[],function(){return'<div class="full-preview-header files-header our-preview">    <div class="full-preview-home-btn-wrapper">        <button class="full-preview-home-btn parcel-preview-home-btn"                id="full-preview-header-home-btn"                title="<%= back %>">            <span class="hidden-accessible"><%= back %></span>        </button>        <div class="full-preview-home-btn-separator"></div>    </div>     <div class="full-preview-name-container folder-path                with-home-btn">        <div class="wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>        <div id="full-preview-name" class="full-preview-name"             role="heading" aria-level="1"><%- name %></div>         <button class="full-preview-action-menu-btn                       files-header-btn"             id="full-preview-action-menu-btn"             title="<%= actions %>" aria-haspopup="true">            <span class="hidden-accessible"><%= actions %></span>        </button>        <div class="full-preview-action-menu menu" role="menu"              aria-hidden="true"></div>    </div>     <div class="full-preview-plugins-selector">        <div class="toolbar-selection-pointer"></div>        <div class="full-preview-plugins-selector-separator"></div>    </div>     <div class="full-preview-header-btns files-header-btns right">        <button class="full-preview-download-btn"             data-test-name="full-preview-header-download-btn">            <div class="full-preview-download-btn-icon"></div>            <div class="full-preview-download-btn-label">                 <%= download %></div>        </button>    </div></div> <div class="full-preview-main">    <div class="full-preview-body folder-items">        <div id="full-preview-image-container"             class="full-preview-image-container">            <!-- Intentionally omit close tag for img.                 See bug 3498744 (IE8) -->            <img class="full-preview-image single hidden" alt=""/>            <div class="full-preview-svg single hidden"/>        </div>        <div class="full-preview-not-available">            <%= previewNotAvailable %>            <span class="full-preview-not-available-desc"                ><%= previewNotAvailableDesc %></span>        </div>    </div>     <div class="full-preview-hud" role="toolbar"         aria-labelledby="full-preview-name"         aria-controls="full-preview-image-container"></div></div> <div class="full-preview-sidebar" tabindex="-1"></div>'}),define("viewer/views/full-preview-tracked-send-view",["core/ac-core","files/ac-files","viewer/ac-viewer","viewer/templates/full-preview-tracked-send-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","files/views/full-preview-view"],function(e,i,t,s){t.FullPreviewTrackedSendView=i.FullPreviewView.extend({initialize:function(){i.FullPreviewView.prototype.initialize.call(this),this._template=_.template(s),this.options.fullPreviewUiModel.on("change:show_info",this._toggleRHP,this)},template:function(){return this._template},render:function(){var e,t=(this.options.parcelModel.get("invitation"),new Image);return i.FullPreviewView.prototype.render.call(this),!this.$homeBtn||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),this.$fullPreviewHeader.addClass("has-branding"),this.$fullPreviewMain.addClass("has-branding"),this.$parcelBody.addClass("has-branding"),this.$fullPreviewSidebar.addClass("has-branding"),e=this.options.parcelModel.get("color"),this.$fullPreviewBrandingLogo.children().length<1&&this.$fullPreviewBrandingLogo.append(t)),this},_initWrappers:function(){i.FullPreviewView.prototype._initWrappers.call(this),this.$fullPreviewBrandingLogo=$(".full-preview .branding-logo"),this.$parcelContainerFullPreviewName=$(".parcel-container .full-preview-name"),this.$parcelBody=this.$(".full-preview-name-container"),this.$fullPreviewHeader=this.$(".full-preview-header"),this.$fullPreviewMain=this.$(".full-preview-main"),this.$fullPreviewName=this.$(".full-preview-name"),this.$fullPreviewSidebar=this.$(".full-preview-sidebar"),this.$fullPreviewHomeButtonWrapper=this.$(".full-preview-home-btn-wrapper"),this.$fullPreviewHomeButton=this.$(".full-preview-home-btn")},_renderHudView:function(){this._renderChildView("_fullPreviewHudView",t.FullPreviewTrackedSendHudView,this.$previewHud)},_toggleRHP:function(){var e;LOG("Toggle Right Hand Panel"),e=this.options.fullPreviewUiModel.get("show_info"),e?this.$fullPreviewSidebar.addClass("show"):this.$fullPreviewSidebar.removeClass("show")}})}),define("viewer/templates/parcel-asset-template.html",[],function(){return'<div class="parcel-asset-view spinner-icon" role="group" aria-labelledby="parcel-name-<%= viewId %>">        <div role="presentation" class="parcel-hover-preview parcel-asset-rendition-block">            <div role="presentation" class="hover-preview-page3 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page2 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page1 hover-preview-page small-shadow">                <img class="parcel-asset-rendition" alt="" src="<%= rendition_url %>" />                <div role="presentation" class="hover-preview-not-available-parcel">                    <div class="hover-preview-not-available-header"><%=PREVIEW_NOT_AVAILABLE%></div>                    <div class="hover-preview-not-available-desc">                        <%=PREVIEW_NOT_AVAILABLE_DESC%>                    </div>                </div>                <div role="presentation" class="hover-preview-hud">                    <button data-test-name="hover-preview-hud-prev"                            class="hover-preview-hud-prev                                   hover-preview-control                                   hover-preview-nav-btn disabled"                            title="<%= PREV_PAGE_TITLE %>"                            aria-label="<%= PREV_PAGE_TITLE %>" disabled>                        <div class="hover-preview-nav-btn-img hover-preview-img-prev"></div>                    </button>                    <button data-test-name="hover-preview-hud-next" class="hover-preview-hud-next                                   hover-preview-control                                   hover-preview-nav-btn"                            title="<%= NEXT_PAGE_TITLE %>"                            aria-label="<%= NEXT_PAGE_TITLE %>">                        <div class="hover-preview-nav-btn-img hover-preview-img-next"></div>                    </button>                </div>            </div>        </div>        <div role="presentation" class="parcel-asset-rendition-footer">            <button class="parcel-inline download-button" title="<%= DOWNLOAD %>" aria-label="<%= DOWNLOAD %>"></button><button class="parcel-inline parcel-name" id="parcel-name-<%= viewId %>"><%= filename %></button>        </div>    </div>'
}),define("viewer/views/parcel-asset-view",["core/ac-core","viewer/ac-viewer","viewer/templates/parcel-asset-template.html","i18n!files/nls/ui-strings","i18n!core/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,i,t,s,n,o){i.ParcelAssetView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addKeyEventListener()},resetRendition:function(){var e=this.model.getRenditionUrl("tile",this.model.get("current_page"));this.$rendition.attr("src",e)},adjustHud:function(){0===this.model.get("current_page")?(this.$prevBtn.addClass("disabled").prop("disabled",!0),this.$nextBtn.removeClass("disabled").prop("disabled",!1)):this.model.get("current_page")===this.model.get("page_count")-1?(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.addClass("disabled").prop("disabled",!0)):(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.removeClass("disabled").prop("disabled",!1))},turnPage:function(e){e.stopPropagation();var i,t,s=e.data.direction,n=1,l="NextPg",a=this.options;"prev"===s&&(n=-1,l="PrevPg"),1===n&&this.$nextBtn.hasClass("disabled")||-1===n&&this.$prevBtn.hasClass("disabled")||(t=a.parcelAssetsCollection&&a.parcelAssetsCollection.length>1?o.MULTI:o.SINGLE,a.appApi.siteCatalystApi.logScEvent(a.viewMode&&"plugin"===a.viewMode?[o.PREVIEW,t,o.FILE,l]:[o.RECVIEW,t,o.FILE,l]),i=(this.model.get("current_page")||0)+n,this.model.set("current_page",i),this.resetRendition(),this.adjustHud())},download:function(i){i.stopPropagation();var t=this.model,s=_.extend({},this.options,{id:t.get("id"),content_type:t.get("content_type")});this._triggerViewEvent(e.ViewEvents.DOWNLOAD,s),this.options.appApi.siteCatalystApi.logScEvent([o.RECVIEW,o.MULTI,o.DOWNLOAD_ONE])},render:function(i,t){var o,l=this.model.id,a=1;return e.View.prototype.render.call(this),this.$item||(o=this._template({filename:this.model.get("name"),rendition_url:this.model.getRenditionUrl("tile",0),PREVIEW_NOT_AVAILABLE:n.PREVIEW_NOT_AVAILABLE,PREVIEW_NOT_AVAILABLE_DESC:n.PREVIEW_NOT_AVAILABLE_DESC,DOWNLOAD:n.DOWNLOAD,PREV_PAGE_TITLE:s.PREV_PAGE_TITLE,NEXT_PAGE_TITLE:s.NEXT_PAGE_TITLE,viewId:l}),i?i.replaceWith(o):this.$el.append(o),this.$item=this.$el.children().eq(t),this.$rendition=$(this.$item.find(".parcel-asset-rendition")),this.$hud=$(this.$item.find("div.hover-preview-hud")),this.$prev=this.$hud.find(".hover-preview-img-prev"),this.$next=this.$hud.find(".hover-preview-img-next"),this.$prevBtn=this.$hud.find(".hover-preview-hud-prev"),this.$nextBtn=this.$hud.find(".hover-preview-hud-next"),this.$download=this.$item.find(".download-button"),this.$norendition=this.$item.find(".hover-preview-not-available-parcel"),this.$rendition.on("error",{},_.bind(function(){this.$norendition.show(),this.$rendition.hide(),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),$(this.$item.find(".hover-preview-page")).css("margin-top",this.$norendition.height()/2-this.$norendition.height())},this)),this.$rendition.on("load",{},_.bind(function(){$(this.$item.find(".hover-preview-page")).css("margin-top",this.$rendition.height()/2-this.$rendition.height()),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),this.$item.removeClass("spinner-icon")},this)),a=parseInt(this.model.get("page_count"),10),a>1?(this.$rendition.on("load",{},_.bind(function(){var e=$(this.$item.find(".hover-preview-page"));e.css("width",this.$rendition.width()).css("height",this.$rendition.height()).css("margin-top",this.$rendition.height()/2-this.$rendition.height())},this)),this.$prevBtn.on("click",{direction:"prev"},_.bind(this.turnPage,this)),this.$nextBtn.on("click",{direction:"next"},_.bind(this.turnPage,this))):this.$hud.addClass("hidden"),this.$download.on("click",{},_.bind(this.download,this)),this.$norendition.find(".preview-download").on("click",{},_.bind(this.download,this))),this.$item.data("id",l),this._checkForReportAbuseFlow(),this},_checkForReportAbuseFlow:function(){"True"===this.options.parcelModel.get("reportabuse")&&($(".parcel-asset-rendition").hide(),$(".hover-preview-not-available-parcel").show())},_onKeyPress:function(e){var i,t=$(e.target),s=e.charCode||e.keyCode,n=!1,o=this.$prevBtn,l=this.$nextBtn,a=!1;return(13===s||32===s)&&(a=t.is(o),(a||t.is(l))&&(i=a?l:o,t.trigger("click"),n=!0,t.is(":disabled")&&i.focus())),n}})}),define("viewer/views/multi-file-view",["core/ac-core","viewer/ac-viewer","i18n!acplugins/tracked-send/js/nls/ui-strings","viewer/views/parcel-asset-view","core/views/view"],function(e,i,t){i.MultiFileView=e.View.extend({events:{"click .parcel-asset-view":"_onClickView"},initialize:function(){e.View.prototype.initialize.call(this)},render:function(){return e.View.prototype.render.call(this),this._renderChildViews(),$(".parcel-rendition-list").addClass("plugin"===this.options.viewMode?"plugin":"viewer"),this},_renderChildViews:function(){var e,i=this.$el.children(),s=i.length,n=0,o=this.options.parcelAssetsCollection;o.each(function(t){var o=this._getChildItemView(t);e=s>n?i.eq(n):void 0,o.render(e,n),n+=1},this),"plugin"!==this.options.viewMode&&0===$(".report-abuse").length&&this.$el.append('<div role="button" tabindex="0" class="report-abuse"><span class="report-abuse-label">'+t.REPORT_ABUSE+"</span></div>")},_getChildItemView:function(e){var t,s=this.options,n=e.id,o=this.$el;return t=this.getChildViewById(n),t?(t.$el!==o&&t.setElement(o),_.extend(t.model.attributes,e.attributes)):(s=_.extend({},s,{el:o,model:e}),t=new i.ParcelAssetView(s),this.addChildView(t,n)),t},_getEventTargetItem:function(e){return $(e.target).closest(".parcel-asset-view")},_getEventTargetView:function(e){var i,t=this._getEventTargetItem(e);return t&&(i=this.getChildViewById(t.data("id"))),i},_onClickView:function(e){var i,t,s,n=this.options;s=this._getEventTargetView(e),t=s.model,i=t.id,this._triggerViewEvent("viewer:preview-file",_.extend({},n,{id:i,itemModel:t}))}})}),define("viewer/templates/viewer-page-rhp-view-template",[],function(){return'<div class="ts-rhp-respond-back-multi"></div><div role="button" tabindex="0" class="report-abuse">    <span class="report-abuse-label"><%= reportAbuse %></span></div> '}),define("acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html",[],function(){return'<div class="ts-rhp-respond-back-container">       <div class="ts-rhp-sender-title ts-rhp-title"><%= senderHeading %></div>       <div class="ts-rhp-sender-name"><%= senderName %></div>       <input type="button" class="button-light-blue-small ts-rhp-reply-button"           value="<%= replyBtn %>"/>       <div class="ts-rhp-message-title ts-rhp-title"><%- messageHeading %></div>       <div class="ts-rhp-email-subject ts-rhp-body-single" title="<%- emailSubject %>"><%- emailSubject %></div>       <div class="ts-rhp-email-message ts-rhp-body-multi"><%- emailMessage %></div>       <div class="ts-rhp-date-title ts-rhp-title"><%= dateTitle %></div>       <div class="ts-rhp-date-sent ts-rhp-body-single"><%= sentDate %></div>   </div>'}),define("acplugins/tracked-send/js/viewer-rhp/views/respond-back-view",["core/ac-core","acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/date-util","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,i,t,s,n){return e.View.extend({events:{"click .ts-rhp-reply-button":"_onReplyClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i)},render:function(){var i=this.options.parcelModel,s=i.get("email_message"),n=i.get("sender_email"),o=i.get("sender_name"),l=i.get("email_subject");e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({messageHeading:t.SHARE_SUBJECT_MSG_HEADING,emailSubject:l,emailMessage:s,senderEmail:n,senderHeading:t.SENDER_NAME,senderName:o,replyBtn:t.REPLY,dateTitle:t.SENT_DATE,sentDate:this._formatDateSend()})),this._initWrappers()),s||n||o?(this.$respondBackContainer.parent().show(),n?this.$replyButton.show():this.$replyButton.hide(),l?this.$emailSubject.show():this.$emailSubject.hide(),s?this.$emailMessage.show():this.$emailMessage.hide(),l||s?this.$messageTitle.show():this.$messageTitle.hide()):this.$respondBackContainer.parent().hide()},_onReplyClick:function(){var e,i,s="mailto:",o=this.options.parcelModel;i=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?[n.RECVIEW,n.MULTI,n.PREVIEW,n.REPLY]:[n.RECVIEW,n.SINGLE,n.REPLY],this.options.appApi.siteCatalystApi.logScEvent(i),s+=o.get("sender_email"),e=_.template(t.EMAIL_REPLY_FORMAT,{emailSubject:encodeURIComponent(o.get("email_subject"))}),s+="?subject="+e,document.location.href=s},_initWrappers:function(){this.$respondBackContainer=this.$(".ts-rhp-respond-back-container"),this.$replyButton=this.$(".ts-rhp-reply-button"),this.$emailSubject=this.$(".ts-rhp-email-subject"),this.$emailMessage=this.$(".ts-rhp-email-message"),this.$messageTitle=this.$(".ts-rhp-message-title")},_formatDateSend:function(){var e,i=this.options.parcelModel;return e=i.get("date_sent"),i?s.formatDate(e||""):""}})}),define("viewer/views/viewer-page-rhp-view",["core/ac-core","viewer/ac-viewer","viewer/templates/viewer-page-rhp-view-template","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/viewer-rhp/views/respond-back-view","core/views/view"],function(e,i,t,s,n){i.ViewerPageRHPView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addModelEventListeners()},render:function(){var i=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({reportAbuse:s.REPORT_ABUSE,sentBy:s.SENDER_NAME,senderName:i.get("sender_name")})),this._initWrappers()),this._renderChildViews()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$respondBack=$(".ts-rhp-respond-back")},_renderChildViews:function(){this._renderRespondBackView()},_renderRespondBackView:function(){this.$respondBack=$(".ts-rhp-respond-back-multi"),this._renderChildView("_respondBackView",n,this.$respondBack)}})}),define("viewer/views/viewer-page-view",["core/ac-core","files/ac-files","app/ac-app","viewer/ac-viewer","acplugins/tracked-send/js/tool/ac-tracked-send","core/utils/css-util","viewer/templates/viewer-page-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","viewer/views/page-header-view","viewer/views/full-preview-tracked-send-view","viewer/views/multi-file-view","viewer/views/viewer-page-rhp-view","app/views/modal-mask-view"],function(e,i,t,s,n,o,l,a,r,c){s.ViewerPageView=e.View.extend({events:{"click .ts-viewer-download-button":"_onDownloadClick","click .report-abuse":"_onReportAbuseClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(l),this._addUiModelEventListeners(),this._addModelEventListeners(),this._addAppApiCallbacks(),this._addKeyEventListener(),this.on("viewer:preview-file",this._onClickPreview,this)},render:function(){var i=this.$el,t=this.options.parcelModel,s=t.get("email_message"),n=t.get("sender_email"),o=t.get("sender_name");return e.View.prototype.render.call(this),(s||n||o)&&i.addClass("respondBack"),0===this.$el.children().length&&(this.$el.html(this._template({parcelSubject:this._getParcelSubject(),downloadAll:r.DOWNLOAD_ALL,forwardLabel:r.FORWARD,notifyMeWhenViewed:r.NOTIFY_ME_WHEN_VIEWED,viewedBy:r.VIEWED_BY,viewFullActivity:r.VIEW_FULL_ACTIVITY,unshare:r.UNSHARE,reportAbuse:r.REPORT_ABUSE,back:a.BACK})),1===this.options.parcelAssetsCollection.models.length&&"plugin"!==this.options.viewMode&&(this.$(".thumbnails").css("visibility","hidden"),this.$(".parcel-container").css("background-color","#f5f5f5")),this._initWrappers(),this._updateButtonStatus(),this._checkForReportAbuseFlow(),this._renderBrandingLogo()),this._renderChildViews(),this._updateName(),this},stopListening:function(i,t,s){e.View.prototype.stopListening.call(this,i,t,s)},teardown:function(){this._removeModelEventListeners()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){0!==this.$el.children().length&&this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$header=this.$(".page-header"),this.$error=this.$(".page-error"),this.$pageBody=this.$(".page-body.thumbnails"),this.$fullPreview=this.$(".page-body.full-preview"),this.$thumbnails=this.$(".parcel-rendition-list"),this.$rightPanel=this.$(".parcel-rendition-list-rhp"),this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$modalMask=$("#modal-mask"),this.$parcelBody=this.$(".page-body-container"),this.$parcelBodyHeader=this.$(".parcel-body-header"),this.$brandingLogo=this.$(".branding-logo"),this.$wrapBrandingLogo=this.$(".wrap-branding-logo"),this.$fullPreviewName=this.$(".full-preview-name"),this.$parcelActionBtns=this.$(".parcel-action-buttons"),this.$homeBtnWrapper=this.$(".full-preview-home-btn-wrapper"),this.$homeBtnWrapper.length||(this.$homeBtnWrapper=this.$(".full-preview-home-btn"))},_renderBrandingLogo:function(){var e,i=this.options.parcelModel.get("invitation"),t=new Image;1===this.options.parcelAssetsCollection.models.length||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),e=this.options.parcelModel.get("color"),$(t).load($.proxy(this.render,this)),t.src=this.options.itemModel.rootUrl+"a/invitation/"+i+"/asset/branding",this.$brandingLogo.append(t))},_renderChildViews:function(){return e.Features.isFeatureEnabled("ts_enable_eol_ie8and9")&&util.isIE9orBelow()?(this.$parcelBody.hide(),void this._renderUnsupportedBrowserView()):(this.$error.hide(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderMultiFileView(),void this._renderRightHandPanel())},_renderUnsupportedBrowserView:function(){this.$error.show(),this._renderChildView("_unsupportedBrowserView",s.UnsupportedBrowserView,this.$error)},_renderPageHeaderView:function(){this._renderChildView("_pageHeaderView",s.PageHeaderView,this.$header)},_renderFullPreviewView:function(){this._renderChildView("_fullPreviewView",s.FullPreviewTrackedSendView,this.$fullPreview)},_renderModalMaskView:function(){var e=this.options.dialogsUiModel.getDialogCount();0===e&&this._renderChildView("_modalMaskView",s.ModalMaskView,this.$modalMask)._updateModal()},_renderMultiFileView:function(){this._renderChildView("_multiFileView",s.MultiFileView,this.$thumbnails)},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ViewerPageRHPView,this.$rightPanel)},_updateButtonStatus:function(){var e=this.options,i=this.$notifyChbox,t=this.$notifyLable,s=e.parcelModel.get("invitations"),n=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,l=!n&&e.parcelModel.get("delivery_receipts");l?(o.addClass(i,"selected"),i.prop("checked",!0)):(o.removeClass(i,"selected"),i.prop("checked",!1)),n?(o.addClass(i,"disabled"),o.addClass(t,"disabled"),i.prop("disabled",!0)):(o.removeClass(i,"disabled"),o.removeClass(t,"disabled"),i.prop("disabled",!1))},_addUiModelEventListeners:function(){var e=this.options,i=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;i&&i.on("change:width",this._onWindowResize).on("change:height",this._onWindowResize)},_addAppApiCallbacks:function(){this.options.appApi.previewApi.addItemModelChangeCallback(this._onFullPreviewModelChange)},_onFullPreviewModelChange:function(e){this._toggleOverlay(e?!0:!1)},_toggleOverlay:function(e){var i=this.$pageBody,t="hidden";i&&i.length&&(e?i.addClass(t).attr("aria-hidden",!0):(i.removeClass(t).removeAttr("aria-hidden"),this.render()))},_onWindowResize:function(){if(!this._onDebouncedWindowResize){var e=this.options,i=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;this._onDebouncedWindowResize=_.debounce(this.render,i.get("resize_debounce_delay"))}this._onDebouncedWindowResize()},_onDownloadClick:function(){var i={parentView:this,id:"all"};this.options.appApi.siteCatalystApi.logScEvent([c.RECVIEW,c.MULTI,c.DOWNLOAD_ALL]),this._triggerViewEvent(e.ViewEvents.DOWNLOAD,i)},_onClickPreview:function(t){var s,n,o,l=i.opFactory,a=t.fullPreviewUiModel,r={item_model:t.itemModel};n=t.itemModel.get("page_count"),o=a.get("scroll_pages_limit"),o||(o=1e3);try{e.Features.isFeatureEnabled("enable_ngsend")&&(r.enable_ngdoc=!0,r.view_type="ngdoc")}catch(c){LOG("enable_ngsend is not a feature flipper")}return r.view_format=n>o?"fit_page_width":"scroll_pages",a.set(r),this.options.appApi.siteCatalystApi.logScEvent(["RecView","Multi","Preview","Shown"]),s=l.create("OpeningFullPreviewOp",t),s.run()},_checkForReportAbuseFlow:function(){var e=this.options;"True"===e.parcelModel.get("reportabuse")&&_.defer(function(){$(".report-abuse").trigger("click")}),"plugin"===e.viewMode&&$(".report-abuse").hide()},_onReportAbuseClick:function(){var i,t={parentView:this};return this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?(i=[c.RECVIEW,c.MULTI,c.PREVIEW,c.REPORT_ABUSE],t.parcelId=this.options.parcelAssetsCollection.id):(i=[c.RECVIEW,c.SINGLE,c.REPORT_ABUSE],t.id=this.options.itemModel.id),this.options.appApi.siteCatalystApi.logScEvent(i),this._triggerViewEvent(e.ViewEvents.SHOW_REPORT_ABUSE_DLG,t),!1},_getParcelSubject:function(){return _.escape(this.options.parcelModel.get("email_subject"))},_getNameWidth:function(){var e=o.getFullWidth(this.$parcelBodyHeader)-o.getFullWidth(this.$wrapBrandingLogo)-o.getExtraWidth(this.$fullPreviewName)-o.getFullWidth(this.$homeBtnWrapper)-o.getFullWidth(this.$parcelActionBtns);return e},_updateName:function(){var e=this.$fullPreviewName;e&&e.length&&(this.$fullPreviewName.text(this._getParcelSubject()),this._truncateName())},_truncateName:function(){function i(){return truncate.getTextSize(s).width-t}var t=this._getNameWidth(),s=this.$fullPreviewName;"ja-jp"===e.Locale.getLocale()&&(t*=.85,t=Math.floor(t)),!isNaN(t)&&t>0&&truncate.truncateToFit(s,i)},_onKeyPress:function(e){var i=$(e.target),t=e.charCode||e.keyCode,s=!1;return 13!==t&&32!==t||!i.is("[role='button']:not([aria-disabled='true']):not(:disabled)")||(i.trigger("click"),s=!0),s}})}),define("acplugins/tracked-send/js/home-view/templates/parcel-preview-rhp-template",[],function(){return'    <div class="parcel-topic-message-heading" role="heading" level="2"><%= emailHeading %></div>   <div class="parcel-message"><%- emailMessage %></div>   <div role="grid">       <div role="row">           <div class="parcel-viewed-by-heading" role="columnheader">               <%= viewedBy %>           </div>           <div class="hidden-accessible" role="columnheader">               <%= views %>           </div>       </div>       <div role="presentation" class="parcel-viewed-by-list">       </div>   </div>   <div role="button" tabindex="0" class="parcel-activity-btn">       <span class="parcel-activity-btn-label"><%= viewFullActivity %></span>   </div>   <div class="parcel-notify">       <input type="checkbox" class="parcel-notify-checkbox core-checkbox"              id="parcel-notify-checkbox" />       <span class="parcel-notify-checkbox-checkmark" aria-hidden="true"></span>       <div class="parcel-notify-checkbox-label">           <label for="parcel-notify-checkbox"><%= notifyMeWhenViewed %></label>       </div>   </div> '}),define("acplugins/tracked-send/js/home-view/templates/viewer-page-recipient-template.html",[],function(){return'<div role="row" class="parcel-viewed-by-item">        <div role="gridcell" class="parcel-viewed-by-email">            <%= email %>            <% if (typeof(url) != "undefined") { %><a href="<%= url %>" target="_blank"><% } %>            <% if (typeof(url) != "undefined") { %><%= openLink %><% } %>            <% if (typeof(url) != "undefined") { %></a><% } %>        </div>        <div role="gridcell" class="parcel-viewed-by-count"><%= count %></div>    </div>'}),define("acplugins/tracked-send/js/home-view/views/parcel-preview-rhp-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcel-preview-rhp-template","acplugins/tracked-send/js/home-view/templates/viewer-page-recipient-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/css-util","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants"],function(e,i,t,s,n,o,l,a,r,c){s.ParcelPreviewRHPView=e.View.extend({events:{"click .parcel-notify-checkbox":"_onDeliveryReceiptsClick","click .parcel-notify-checkbox-label":"_onDeliveryReceiptsClick","click .parcel-activity-btn":"_onActivityBtnClick","keydown .parcel-activity-btn":"_onActivityBtnClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(n),this._recipientTemplate=_.template(o),this._addModelEventListeners()},render:function(){var i=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({notifyMeWhenViewed:l.NOTIFY_ME_WHEN_VIEWED,viewedBy:l.VIEWED_BY,viewFullActivity:l.VIEW_FULL_ACTIVITY,publicLink:l.PARCEL_PUBLIC_SHARING,openLink:l.OPEN_LINK,emailHeading:l.MESSAGE_HEADING,emailTopic:i.get("email_subject"),emailMessage:i.get("email_message"),views:l.VIEWS})),this._initWrappers(),this._renderRightPanelItems()),this._updateButtonStatus()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$parcelTopicMessageHeading=this.$(".parcel-topic-message-heading"),this.$parcelMessage=this.$(".parcel-message")},_renderRightPanelItems:function(){var e,i,t,s,n=this.options.parcelModel,o=n.get("invitations"),a=[],r=!1;o=_.sortBy(o,function(e){return e.recipient_email}),_.each(o,function(n){e=n.event_counts.parcel_view||0,"PARCEL_PUBLIC_SHARING"===n.recipient_email?(s=n.preview_url,t=this._recipientTemplate({email:l.PARCEL_PUBLIC_SHARING,openLink:l.OPEN_LINK,count:e,url:s})):(r=!0,i=this._recipientTemplate({email:_.escape(n.recipient_email),count:e}),a.push(i))},this),t&&a.push(t),this.$viewedByList.append(a),r||(this.$parcelTopicMessageHeading.hide(),this.$parcelMessage.hide())},_updateButtonStatus:function(){var e=this.options,i=this.$notifyChbox,t=this.$notifyLable,s=e.parcelModel.get("invitations"),n=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,o=!n&&e.parcelModel.get("delivery_receipts");o?(a.addClass(i,"selected"),i.prop("checked",!0)):(a.removeClass(i,"selected"),i.prop("checked",!1)),r.enableInput(i,!n),n?a.addClass(t,"disabled"):a.removeClass(t,"disabled")},_onActivityBtnClick:function(e){var i,t,n,o=this.options;return"keydown"===e.type&&13!==e.which&&32!==e.which?!0:(t=_.extend(this.options,{parentView:this}),delete t.el,i=new s.ParcelActivityDlg(t),i.open(),n=o.parcelAssetsCollection&&o.parcelAssetsCollection.length>1?c.MULTI:c.SINGLE,void o.appApi.siteCatalystApi.logScEvent([c.PREVIEW,c.SHARED,n,c.VIEW_FULL_ACTIVITY]))},_onDeliveryReceiptsClick:function(){var e,i,t=this.options,n=t.parcelModel.get("invitations"),o=1===n.length&&"PARCEL_PUBLIC_SHARING"===n[0].recipient_email,l=!t.parcelModel.get("delivery_receipts");if(!o)return this._setCheckboxSelectionStatus(l),e=t.parcelAssetsCollection&&t.parcelAssetsCollection.length>1?c.MULTI:c.SINGLE,t.appApi.siteCatalystApi.logScEvent([c.PREVIEW,c.SHARED,e,c.NOTIFY_WHEN_VIEWED,l?c.CHECKED:c.UNCHECKED]),i=s.opFactory.create("SettingDeliveryReceiptsOp",{parcelModel:this.options.parcelModel,deliveryReceipts:l}),i.run().fail(_.bind(function(){this._setCheckboxSelectionStatus(!l)},this))},_setCheckboxSelectionStatus:function(e){var i=this.$(".parcel-notify-checkbox");e?(a.addClass(i,"selected"),i.prop("checked",!0)):(a.removeClass(i,"selected"),i.prop("checked",!1))}})}),define("acplugins/tracked-send/js/home-view/views/parcel-preview-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-if-confirmed-op","acplugins/tracked-send/js/home-view/views/parcel-activity-dlg","viewer/views/viewer-page-view","viewer/collections/parcel-asset-collection","core/models/ui/error-ui-model","core/models/ui/full-preview-ui-model","core/models/ui/plugins-ui-model","app/models/ui/modal-mask-ui-model","acplugins/tracked-send/js/home-view/views/parcel-preview-rhp-view"],function(e,i,t,s,n,o,l){s.ParcelPreviewView=n.ViewerPageView.extend({events:{"click .parcel-preview-home-btn":"_onHomeBtnClick","click .tracked-send-forward-btn":"_onForwardClick","click .tracked-send-unshare-btn":"_onUnshareClick","click .parcel-viewed-by-email":"_onPublicLinkClick"},initialize:function(){this.options.viewMode="plugin",this.options.errorUiModel=e.uiModelFactory.create("ErrorUiModel"),this.options.fullPreviewUiModel=e.uiModelFactory.create("FullPreviewUiModel"),this.options.fullPreviewPluginsUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.fullPreviewOverlaysUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.modalMaskUiModel=i.uiModelFactory.create("ModalMaskUiModel"),this.options.fullPreviewUiModel.set({standalone:!1,read_only:!1}),n.ViewerPageView.prototype.initialize.call(this),this.on(t.ViewEvents.FULL_PREVIEW_CLOSE,this._onFullPreviewClose,this)},render:function(){var e=this.options.parcelModel.id,i=s.PLUGIN_ID+"/"+e;n.ViewerPageView.prototype.render.call(this),this.options.appApi.routerApi.navigate(i)},_renderChildViews:function(){this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),this._renderMultiFileView(),this._renderRightHandPanel()},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ParcelPreviewRHPView,this.$rightPanel)},_onFullPreviewClose:function(){t.opFactory.create("ClosingFullPreviewOp",this.options).run()},closeWithoutResolving:function(){this.applyMethodRecursively("undelegateEvents"),this.applyMethodRecursively("stopListening"),this._triggerViewEvent("ParcelPreview_Close")},_initWrappers:function(){n.ViewerPageView.prototype._initWrappers.call(this),this.$unshareButton=this.$(".tracked-send-unshare-btn")},_updateButtonStatus:function(){n.ViewerPageView.prototype._updateButtonStatus.call(this),o.enableInput(this.$unshareButton,this.options.parcelModel.get("is_active"))},_onClickPreview:function(e){var i=e.itemModel;this.options.appApi.routerApi.navigate("/file/"+i.id,{trigger:!0}),this.closeWithoutResolving()},_onHomeBtnClick:function(e){e.preventDefault(),this.closeWithoutResolving(),this.options.appApi.routerApi.navigate(s.PLUGIN_ID)},_onForwardClick:function(){var e,i=this.options,t="/send/parcel/"+i.parcelModel.id;i.appApi.routerApi.navigate(t,{trigger:!0}),this.closeWithoutResolving(),e=i.parcelAssetsCollection&&i.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,i.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,e,l.PREVIEW,l.RHP,l.SHARE_FILE_BUTTON])},_onPublicLinkClick:function(){var e;e=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,e,l.PUBLIC_LINK])},_onUnshareClick:function(){var e,i,t;this.$unshareButton.hasClass("disabled")||(t=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,t,l.UNSHARE]),i=_.extend(this.options,{itemModel:this.options.parcelModel}),e=new s.UnshareOneIfConfirmedOp(i),e.run())}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-assets-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","viewer/collections/parcel-asset-collection"],function(e,i){i.GettingAssetsOp=e.Op.extend({run:function(){var e=this.options.parcelAssetsCollection;return e.fetch()}})}),define("acplugins/tracked-send/js/home-view/views/parcels-list-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","core/utils/view-util","core/utils/css-util","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","acplugins/tracked-send/js/home-view/models/ui/parcels-list-item-ui-model","acplugins/tracked-send/js/home-view/views/parcels-list-item-view","acplugins/tracked-send/js/home-view/views/parcel-preview-view","acplugins/tracked-send/js/home-view/ops/getting/getting-assets-op"],function(e,i,t,s,n,o,l){i.ParcelsListView=e.View.extend({events:{"click .parcel-list-item-checkbox":"_onItemCheckboxClick","dblclick .parcel-list-item":"_onItemDblClick","click .parcel-list-item":"_onItemClick","click .parcel-list-item-expand-btn":"_onExpandClick","click .parcel-list-item-expand-hitarea":"_onExpandClick"},initialize:function(){e.View.prototype.initialize.call(this),this.listenTo(this.options.collectionsUiModel,"change:checkbox",_.bind(function(){this.render()},this)),this._addKeyEventListener(),this._addFocusEventListener()},render:function(){return e.View.prototype.render.call(this),this._renderChildViews(),e.Util.isCEF()||this._updateForVerticalScrollBar(),this},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",s.isVerticalScrollBarPresent(this.$el))},this),50)},_getEventTargetItem:function(e,i){return $(e.target).closest(i)},_getEventTargetView:function(e,i){var t,s;return i||(i=".parcel-list-item"),s=this._getEventTargetItem(e,i),s&&(t=this.getChildViewById(s.data("id"))),t},_getEventTargetId:function(e,i){var t,s=this._getEventTargetItem(e,i);return s&&(t=s.data("id")),t},_getViewEventOptions:function(e){return{collectionItemsView:this,itemView:this._getEventTargetView(e)}},_addKeyEventListener:function(){this.options.appApi.keyApi.pushKeyHandler(this)},_removeKeyEventListener:function(){this.options.appApi.keyApi.popKeyHandler(this)},_selectType:function(i){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,{collectionItemsView:this,selectType:i})},_onItemCheckboxClick:function(i){var t,s,n=this._getViewEventOptions(i),o=$(i.target);i.stopPropagation(),t=i.shiftKey?e.SelectionUiModel.SELECT_EXTEND:e.SelectionUiModel.SELECT_TOGGLE,_.extend(n,{selectType:t}),s=o.hasClass("selected"),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n),this._logScSelectionEvent(o,s)},_onExpandClick:function(i){var t=this._getEventTargetView(i);t.onExpandButtonClick(i),e.Util.isCEF()||this._updateForVerticalScrollBar()},showParcelPreview:function(e){var s,n,a,r,c,d,h=this.options,p=h.appApi;s=p.displayApi.showFullOverlay(!0),r=this.options.appApi.baseFilesUrisApi.getSendApiUri(),r=l.extractRootUrl(r),h.parcelAssetsCollection=new t.ParcelAssetCollection([],{rootUrl:r,parcel_id:e.id,parcelModel:e}),this._parcelPreview&&this._parcelPreview.off(),n=_.extend({},h,{el:s,parcelModel:e}),a=new i.ParcelPreviewView(n),this._parcelPreview=a,a.on("ParcelPreview_Close",this._onParcelPreviewClose,this),d=i.opFactory.create("GettingAssetsOp",h),d.run().then(_.bind(function(){c=h.parcelAssetsCollection&&h.parcelAssetsCollection.length>1?o.MULTI:o.SINGLE,p.siteCatalystApi.logScEvent([o.PREVIEW,o.SHARED,c,o.SHOWN]),this.render()
},a))},_handleModifiedClick:function(i){var t,s;s=i.shiftKey?e.SelectionUiModel.SELECT_EXTEND:i.ctrlKey||i.metaKey?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT,t=this._getViewEventOptions(i),_.extend(t,{selectType:s}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,t)},_onItemClick:function(t){var s,n,o,l,a,r=this.options.collectionsUiModel,c=this._getEventTargetItem(t,".parcel-list-item");if(e.Util.isCEF()&&(l=this._getEventTargetId(t,".parcel-list-item-file"),l&&(s=this._getEventTargetView(t),s.model.get("files").length>0))){var d=this._getEventTargetItem(t,".parcel-list-item-file-name").text();d&&("function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),d.endsWith(".pdf")||d.endsWith(".PDF")?this._triggerViewEvent(i.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this,idToShow:l}):this._triggerViewEvent(i.ViewEvents.SAVEAS_SINGLE_ASSET,{parentView:this,idToSaveAs:l,nameToSaveAs:d}))}r.get("checkbox")?t.shiftKey||t.ctrlKey||t.metaKey?this._handleModifiedClick(t):(s=this._getEventTargetView(t),this._triggerViewEvent(i.ViewEvents.TRACK,{parentView:this,parcelModel:s.model})):"open"===r.get("itemClickAction")?this._doOpenFile(t):"select"===r.get("itemClickAction")&&(o=t.shiftKey?e.SelectionUiModel.SELECT_EXTEND:t.ctrlKey||t.metaKey?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT,a=c.hasClass("selected"),n=this._getViewEventOptions(t),_.extend(n,{selectType:o}),this._consumeEvent(t),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n),this._logScSelectionEvent(c,a))},_onItemDblClick:function(e){var t,s=this.options.collectionsUiModel;s.get("checkbox")||("preview"===s.get("itemDblClickAction")?(t=this._getEventTargetView(e),this._triggerViewEvent(i.ViewEvents.TRACK,{parentView:this,parcelModel:t.model})):"open"===s.get("itemDblClickAction")&&this._doOpenFile(e)),this._consumeEvent(e)},_doOpenFile:function(e){var t,s,n=this.options.selectionUiModel,o=n.getSingleSelectedItemModel();s=this._getEventTargetId(e,".parcel-list-item-file"),s||(t=this._getEventTargetView(e),1===t.model.get("files").length&&(s=t.model.get("files")[0].id)),s&&o.get("files")&&1===o.get("files").length?"application/pdf"===o.get("files")[0].content_type?this._triggerViewEvent(i.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this,idToShow:s}):this._triggerViewEvent(i.ViewEvents.SAVEAS_SINGLE_ASSET,{parentView:this,idToSaveAs:s,nameToSaveAs:o.get("files")[0].name}):this._onExpandClick(e)},_onParcelPreviewClose:function(){_.defer(_.bind(function(){var e=this._parcelPreview;e.off(),this.options.appApi.displayApi.showFullOverlay(!1),delete this._parcelPreview},this))},_renderChildViews:function(){var e=this.collection.length;this._renderInProgress||(this._renderInProgress=!0,this._asyncBeginRenderingListItems().then(_.bind(this._asyncRenderListItems,this,0,e,10)).then(_.bind(this._asyncEndRenderingListItems,this)).then(_.bind(function(){this._renderInProgress=!1},this)))},_beginRenderingListItems:function(){var e=this.getChildViews();_.each(e,function(e){e.options.remove=!0})},_asyncBeginRenderingListItems:function(){var e=$.Deferred();return _.defer(_.bind(function(){this._beginRenderingListItems(),e.resolve()},this)),e.promise()},_endRenderingListItems:function(){var e,i,t,s=this.getChildViews(),n=this.$el.children();for(i=s.length-1;i>=0;i-=1)e=s[i],e.options.remove&&this.removeChildView(e);for(n=this.$el.children(),t=this.collection.length-1,i=n.length-1;i>t;i-=1)n.eq(i).remove();this._setTabbableItem()},_asyncEndRenderingListItems:function(){var e=$.Deferred();return _.defer(_.bind(function(){this._endRenderingListItems(),e.resolve()},this)),e.promise()},_renderSomeListItems:function(e,i){var t,s,n=this.$el.children(),o=n.length,l=e;this.collection.each(function(a,r){r>=e&&i>r&&(t=this._getChildItemView(a),s=o>l?n.eq(l):void 0,t.render(s,l),delete t.options.remove,l+=1)},this)},_asyncRenderSomeListItems:function(e,i){var t,s=$.Deferred();return t=_.bind(function(e,i){this._renderSomeListItems(e,i),s.resolve()},this,e,i),_.delay(t,100),s.promise()},_asyncRenderListItems:function(e,i,t){return i>e?this._asyncRenderSomeListItems(e,e+t).then(_.bind(this._asyncRenderListItems,this,e+t,i,t)):this._getResolvedPromise()},_getChildItemView:function(e){var t,s,n=this.options,o=e.id,l=this.$el;return t=this.getChildViewById(o),t?(t.$el!==l&&t.setElement(l),_.extend(t.model.attributes,e.attributes),t.options.checkbox=n.collectionsUiModel.get("checkbox")):(s=new i.ParcelsListItemUiModel,n=_.extend({},n,{el:l,checkbox:n.collectionsUiModel.get("checkbox"),model:e,itemUiModel:s}),t=new i.ParcelsListItemView(n),this.addChildView(t,o)),t},_getContainingItem:function(e){return e.closest(".parcel-list-item")},_getContainingRowOrRowGroup:function(e){return e.closest(".parcel-list-item-row")},_isItemSelected:function(e){return this._getContainingItem(e).hasClass("selected")},_logScSelectionEvent:function(e,i){var t;t=this._isItemSelected(e),t!==i&&this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.FILE_NAME,t?o.CHECKED:o.UNCHECKED])},_getChildViewHeight:function(){var e=this.$el.children();return e.length>0?n.getFullHeight(e.eq(0)):void 0},_onFocusIn:function(e){var i,t,s=$(e.target);return i=this.$(".parcel-list-item-row"),t=this._getContainingRowOrRowGroup(s),i.attr("tabindex",-1),t.addClass("focused").attr("tabindex",0).find("[role=checkbox]:focusable, button:focusable, a[href]:focusable, [role=link]:not(.parcel-list-item-file-name):focusable").attr("tabindex",0),s.attr("tabindex",0),this._lastActiveRowIndex=i.index(t),this._consumeEvent(e),this.$el.scrollLeft(0),!0},_onFocusOut:function(e){var i,t=$(e.target);return i=this._getContainingRowOrRowGroup(t),i.removeClass("focused").find("[role=checkbox]:tabbable, button:tabbable, a[href]:tabbable, [role=link]:tabbable").attr("tabindex",-1),!0},_setTabbableItem:function(){var e=this.$(".parcel-list-item-row:focusable"),i=this.$(":tabbable");0===i.length&&e.attr("tabindex","0")},_onKeyDown:function(t){function n(e){c.stop(!0,!0),c.animate({scrollTop:e},m.get("scroll_duration"))}var o,l,a,r=$(t.target),c=this.$el,d=c[0],h=t.which,p=c.height(),u=c.scrollTop(),_=this._getChildViewHeight(),g=0,v=!1,m=this.options.collectionsUiModel,w=this.options.selectionUiModel,E=this.$(".parcel-list-item-row"),S=this._getContainingRowOrRowGroup(r),f=S.find(".parcel-list-item-checkbox"),A=E.first(),C=E.last(),b=r.is(S),I=!S.is(r),T=r.is("a[href], [role=link]"),k=r.is(".parcel-list-item-expand-hitarea,.parcel-list-item-expand-btn"),N=E.index(S),R=$.Event("click"),L=$.Event("dblclick"),P=s.descendantHasFocus(".parcels-content"),V=s.descendantHasFocus(c),y=!V&&P,O=!1,F=S.hasClass("expanded"),M=S.find(".parcel-list-item-files");if(_&&(g=Math.floor(p/_)),s.isElementHidden(c))return v;if(r.is(":focusable")&&!P)return v;switch(o=this._getViewEventOptions(t),R.shiftKey=t.shiftKey,h){case 9:0===w.getNumSelectedItems()&&b?(r.trigger(R),v=!0):this._setTabbableItem();break;case 32:V&&(T?(r.trigger(L),v=!0):k||((t.shiftKey?S:f).trigger(R),v=!0));break;case 13:V&&(e.Util.isCEF()?(1===w.getNumSelectedItems()&&(l=w.getSingleSelectedItemModel(),1===l.get("files").length?"application/pdf"===l.get("files")[0].content_type?this._triggerViewEvent(i.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this,idToShow:l.get("files")[0].id}):this._triggerViewEvent(i.ViewEvents.SAVEAS_SINGLE_ASSET,{parentView:this,idToSaveAs:l.get("files")[0].id,nameToSaveAs:l.get("files")[0].name}):this._triggerViewEvent(i.ViewEvents.OPENBROWSER,{parentView:this,eventName:"trackObject"})),this._consumeEvent(t)):(r.trigger(R),v=!0));break;case 33:V?a=E.eq(Math.max(0,N-g)):(n(u-p),v=!0);break;case 34:V?a=E.eq(Math.min(E.length-1,N+g)):(n(u+p),v=!0);break;case 35:n(d.scrollHeight),v=!0,S.is(C)||(a=C);break;case 36:n(0),v=!0,S.is(A)||(a=A);break;case 37:case 39:V&&(O=37===h,(t.ctrlKey||t.metaKey)&&S.is("[aria-expanded]")?(F&&O||!F&&!O)&&(S.find("button").trigger(R),v=!0):r.hasClass("parcel-list-item-file-name")||(a=s.getNextFocusableDescendant(S,O,!0,":not(.parcel-list-item-file-name)")));break;case 38:V?(F&&I&&(a=s.getNextFocusableDescendant(M,!0)),a&&a.length||(I?a=S:b&&N>0&&(a=E.eq(N-1),a.hasClass("expanded")&&(a=a.find(":focusable:last"))))):_&&!y&&(n(u-_),v=!0);break;case 40:V?(F&&(a=s.getNextFocusableDescendant(M)),a&&a.length||N<E.length-1&&(a=E.eq(N+1))):_&&!y&&(n(u+_),v=!0);break;case 65:(t.ctrlKey||t.metaKey)&&(t.shiftKey?this._clearSelection(o):this._selectAll(o),this._consumeEvent(t),v=!0);break;case 68:(t.ctrlKey||t.metaKey)&&(v=this._deleteIfSelected());break;case 127:case 46:v=this._deleteIfSelected()}return a&&a.length>0&&(v=!0,this._isItemSelected(S)&&t.shiftKey&&a.trigger(R),a.focus()),v},_selectAll:function(i){_.extend(i,{selectType:e.SelectionUiModel.SELECT_ALL}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,i)},_clearSelection:function(i){this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION,i)},_deleteIfSelected:function(){var e,t=this.options;return e=t.selectionUiModel.getNumSelectedItems()>0,e&&this._triggerViewEvent(i.ViewEvents.DELETE,{parentView:this}),e}})}),define("acplugins/tracked-send/js/home-view/templates/selection-actions-template.html",[],function(){return'<div class="selection-action-checkbox"        title="<%= checkboxTitle %>"        role="checkbox" aria-checked="false" tabindex="0"></div>    <div class="selection-action-btns">        <button class="selection-action-btn view desktop-mode theme-hyperlink"             data-test-name="selection-action-view-btn"             title="<%= actionOpenTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionOpen %></div>        </button>        <button class="selection-action-btn saveAs desktop-mode theme-hyperlink"             data-test-name="selection-action-saveAs-btn"             title="<%= actionSaveAsTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionSaveAs %></div>        </button>        <button class="selection-action-btn track desktop-mode theme-hyperlink"             data-test-name="selection-action-track-btn"             title="<%= actionTrackTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionTrack %></div>        </button>        <button class="selection-action-btn unshare disabled theme-hyperlink"             data-test-name="selection-action-unshare-btn"             title="<%= actionUnshareTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionUnshare %></div>        </button>        <button class="selection-action-btn forward disabled theme-hyperlink"             data-test-name="selection-action-forward-btn"             title="<%= actionForwardTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionForward %></div>        </button>        <button class="selection-action-btn download disabled web-mode theme-hyperlink"             data-test-name="selection-action-download-btn"             title="<%= actionDownloadTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionDownload %>        </button>        <button class="selection-action-btn delete theme-hyperlink"             data-test-name="selection-action-delete-btn"             title="<%= actionRemoveTitle %>"             tabindex="-1">            <div class="selection-action-label delete"            ><%= actionRemove %></div>        </button>    </div>'}),define("acplugins/tracked-send/js/home-view/views/selection-actions-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/selection-actions-template.html","i18n!core/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/utils/css-util","core/utils/sc-analytics","core/utils/view-util","core/views/view","core/views/view-events"],function(e,i,t,s,n,o,l,a,r){i.SelectionActionsView=e.View.extend({events:{click:"_onClick","click .selection-action-checkbox":"_onCheckboxClick","click .selection-action-btn.unshare":"_onUnshareClick","click .selection-action-btn.delete":"_onDeleteClick","click .selection-action-btn.download":"_onDownloadClick","click .selection-action-btn.forward":"_onForwardClick","click .selection-action-btn.view":"_onViewClick","click .selection-action-btn.track":"_onTrackClick","click .selection-action-btn.saveAs":"_onSaveAsClick"},initialize:function(){e.View.prototype.initialize.call(this),this.template=_.template(t),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.empty().html(this.template({checkboxTitle:s.CLOSE,actionUnshare:n.UNSHARE,actionUnshareTitle:n.UNSHARE,actionUnshareElem:n.UNSHARE,actionForward:n.FORWARD,actionForwardTitle:n.FORWARD,actionForwardElem:n.FORWARD,actionDownload:n.DOWNLOAD,actionDownloadTitle:n.DOWNLOAD,actionDownloadElem:n.DOWNLOAD,actionRemove:s.REMOVE,actionRemoveTitle:s.REMOVE,actionRemoveElem:s.REMOVE,actionOpen:n.OPEN,actionOpenTitle:n.OPEN,actionOpenElem:n.OPEN,actionTrack:n.TRACK,actionTrackTitle:n.TRACK,actionTrackElem:n.TRACK,actionSaveAs:n.SAVEAS,actionSaveAsTitle:n.SAVEAS,actionSaveAsElem:n.SAVEAS})),this._initWrappers(),this._updateSelectionActions()),this._updateCheckbox(),this._updateButtons(),this.$(":tabbable").length||this.$(":focusable:first").attr("tabindex","0"),this},_initWrappers:function(){this.$checkbox=this.$(".selection-action-checkbox"),this.$btns=this.$(".selection-action-btns"),this.$unshareBtn=this.$(".selection-action-btn.unshare"),this.$deleteBtn=this.$(".selection-action-btn.delete"),this.$downloadBtn=this.$(".selection-action-btn.download"),this.$forwardBtn=this.$(".selection-action-btn.forward"),this.$viewBtn=this.$(".selection-action-btn.view"),this.$trackBtn=this.$(".selection-action-btn.track"),this.$saveAsBtn=this.$(".selection-action-btn.saveAs"),this.$selectors=this.$(".selection-action-btn"),this.$labels=this.$(".selection-action-label")},_getNumSelected:function(){var e=0,i=0,t=this.options,s=t.selectionUiModel.get("selected_item_models");return _.each(s,function(t){t.get("is_active")?e+=1:i+=1}),{numShared:e,numUnshared:i}},_isItemSelectable:function(){return!0},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(i){this._isItemSelectable(i)&&(e+=1)},this)),e},_updateCheckbox:function(){var i=this.$checkbox,t=this.options,s=t.selectionUiModel.getSelectionCount();this.options.collectionsUiModel.get("checkbox")?(i.removeClass("hidden dash check").removeAttr("aria-hidden"),this.$btns.removeClass("no-checkbox"),this.$btns.removeClass("unselectable"),i.removeClass("dash check"),s>0&&(s===this._getNumSelectable()?i.addClass("check").attr("aria-checked","true"):i.addClass("dash").attr("aria-checked","mixed"))):(i.addClass("hidden").attr("aria-hidden",!0),this.$btns.addClass("no-checkbox"),this.$btns.addClass("unselectable")),e.Util.isIE8()&&r.detachAndReattachElement(i)},_updateSelectionActions:function(){var e=this.options,i=e.collectionsUiModel.get("mode");"desktop"===i?($(".desktop-mode").show(),$(".web-mode").hide()):($(".desktop-mode").hide(),$(".web-mode").show())},_updateButtons:function(){var i=this.options,t=i.selectionUiModel,s=t.getSingleSelectedItemModel(),n=this._getNumSelected();s?(r.enableInput(this.$unshareBtn,s.get("is_active")),r.enableInput(this.$deleteBtn,!0),r.enableInput(this.$downloadBtn,!0),r.enableInput(this.$forwardBtn,!0),r.enableInput(this.$trackBtn,!0),e.Util.isCEF()&&(s.get("files")&&1===s.get("files").length?(r.enableInput(this.$viewBtn,!0),r.enableInput(this.$saveAsBtn,!0),"application/pdf"===s.get("files")[0].content_type?(this.$viewBtn.show(),this.$saveAsBtn.hide()):(this.$viewBtn.hide(),this.$saveAsBtn.show())):(this.$viewBtn.hide(),this.$saveAsBtn.hide()))):(r.enableInput(this.$unshareBtn,n.numShared>0),e.Util.isCEF()&&(this.$viewBtn.hide(),this.$saveAsBtn.hide(),r.enableInput(this.$trackBtn,!1)),r.enableInput(this.$deleteBtn,!0),r.enableInput(this.$downloadBtn,!1),r.enableInput(this.$forwardBtn,!1)),e.Util.isCEF()&&(this.$unshareBtn.removeAttr("title"),this.$deleteBtn.removeAttr("title"),this.$forwardBtn.removeAttr("title"),this.$trackBtn.removeAttr("title"),this.$saveAsBtn.removeAttr("title"),this.$viewBtn.removeAttr("title"))},_onClick:function(i){e.Util.isCEF()&&(i.target!==this.$el.get(0)||this.options.collectionsUiModel.get("checkbox")||this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION))},_onCheckboxClick:function(){this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.SELECT_ALL]),this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION)},_onDeleteClick:function(){e.Util.isCEF()&&this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.TRASH]),this._triggerViewEvent(i.ViewEvents.DELETE,{parentView:this})},_onUnshareClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.UNSHARE]),this._triggerViewEvent(i.ViewEvents.UNSHARE,{parentView:this}))},_onDownloadClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.DOWNLOAD]),this._triggerViewEvent(i.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this}))},_onForwardClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.FORWARD]),this._triggerViewEvent(i.ViewEvents.FORWARD,{parentView:this}))},_onViewClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.VIEW]),this._triggerViewEvent(i.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this}))},_onTrackClick:function(e){var t=this.options.collectionsUiModel.get("mode");$(e.target).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.TRACK]),"desktop"===t&&this.options.appApi.rnaApi?this._triggerViewEvent(i.ViewEvents.OPENBROWSER,{parentView:this,eventName:"trackObject"}):this._triggerViewEvent(i.ViewEvents.TRACK,{parentView:this}))},_onSaveAsClick:function(e){{var t,s;this.options.collectionsUiModel.get("mode")}$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.SAVE_AS]),t=this.options.selectionUiModel,s=t.getSingleSelectedItemModel(),this._triggerViewEvent(i.ViewEvents.SAVEAS_SINGLE_ASSET,{parentView:this}))},_onKeyDown:function(e){var i,t=this.$el,s=e.which,n=37===s,o=!1;if(!r.descendantHasFocus(t))return o;switch(s){case 13:case 32:this.$checkbox.is(e.target)&&(this.$checkbox.click(),o=!0);break;case 37:case 39:i=r.getNextFocusableDescendant(t,n,!0)}return i&&1===i.length&&(o=!0,i.focus()),o},_onFocusIn:function(e){var i=$(e.target);this.$(":focusable").not(i).attr("tabindex",-1),i.attr("tabindex",0)},_addUiModelEventListeners:function(){var e=this.options;e.selectionUiModel.on("change:selected_item_models",this._onSelectedItemModelsChange),e.collectionsUiModel.on("change:mode",this._updateSelectionActions)},_onSelectedItemModelsChange:function(){var i=this.options,t=this.$el;i.appApi.usersMeApi.isUserInCohort("bh-home20","enabled")||i.noSelectionActions||i.appApi.acrobatApi.isInAcrobat()||(i.selectionUiModel.getSelectionCount()>0?(t.hasClass("open")||t.addClass("open"),this.render(),e.Util.isIE8()&&_.defer(this.render)):t.removeClass("open"))},_logNumSelectedItems:function(){var e=this.options,i=e.selectionUiModel.getSelectionCount();e.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.NUM_FILES_CHECKED,a.getCountCode(i)])}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-header-template.html",[],function(){return'<div role="columnheader">    <div role="checkbox"         class="parcel-list-header-checkbox                parcel-list-item-checkbox                core-checkbox"         title="<%=SELECT_ALL%>"         tabindex="0"         aria-checked="false"></div></div><div role="presentation" class="parcel-list-header-info-container">   <div role="columnheader" class="parcel-list-header-files theme-header-text"></div>   <div role="columnheader" class="parcel-list-header-subject theme-header-text"></div>   <div role="columnheader" class="parcel-list-header-to theme-header-text"></div>   <div role="columnheader" class="parcel-list-header-date theme-header-text"></div>   <div role="columnheader" class="parcel-list-header-views theme-header-text"></div></div>'}),define("acplugins/tracked-send/js/home-view/views/parcels-list-header-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-list-header-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/truncate","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants"],function(e,i,t,s,n,o,l){i.ParcelsListHeaderView=e.View.extend({events:{"click .parcel-list-header-checkbox":"_onCheckboxClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addKeyEventListener(),this._addUiModelEventListeners()},render:function(){var i,n,o=this.$el;return e.View.prototype.render.call(this),0===o.children().length&&(o.html(_.template(t)({SELECT_ALL:s.SELECT_ALL})),this._initWrappers()),e.Util.isCEF()?(this.$views.text(s.VIEWS),this.$views.attr("title",s.NUMBER_OF_VIEWS),this.$views.css("background-image","none").css("background-position",0),this.$subject.addClass("desktop"),this.$views.addClass("desktop")):this.$views.addClass("web"),i=this.options.collectionUiModel,i.get("has_vertical_scrollbar")?(n=this._getScrollBarWidth(),this.$header.css({right:n+"px"})):this.$header.css({right:0}),this._updateCheckbox(),this.$sentFiles.text(s.SHARED_FILES),this.$subject.text(s.SUBJECT),this.$to.text(s.SENT_TO),this.$date.text(s.DATE_SENT),this.$views.text(s.VIEWS),this.invalidateSize(),this},invalidateSize:function(){function e(e,i){e.width(i),n.truncateElementText(e)}var i=this.$sentFiles,t=this.$subject,s=this.$to,o=this.$date,l=i.offset(),a=t.offset(),r=s.offset(),c=o.offset();e(i,a.left-l.left-10),e(t,r.left-a.left-10),e(s,c.left-r.left-5)},_initWrappers:function(){this.$checkbox=this.$(".parcel-list-header-checkbox"),this.$header=this.$(".parcel-list-header-info-container"),this.$sentFiles=this.$(".parcel-list-header-files"),this.$views=this.$(".parcel-list-header-views"),this.$subject=this.$(".parcel-list-header-subject"),this.$to=this.$(".parcel-list-header-to"),this.$date=this.$(".parcel-list-header-date"),this.$views=this.$(".parcel-list-header-views")},_isItemSelectable:function(){return!0},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(i){this._isItemSelectable(i)&&(e+=1)},this)),e},_getNumSelected:function(){return this.options.selectionUiModel.getSelectionCount()},_getScrollBarWidth:function(){var e=this._scrollBarWidth;return void 0===e&&(e=o.getScrollBarWidth(),this._scrollBarWidth=e),e},_updateCheckbox:function(){var i=this.$checkbox,t=this.options,s=t.selectionUiModel.getSelectionCount();this.options.collectionsUiModel.get("checkbox")?(i.removeClass("hidden dash selected").removeAttr("aria-hidden"),this.$header.removeClass("no-checkbox"),s>0&&(s===this._getNumSelectable()?i.addClass("selected").attr("aria-checked","true"):i.addClass("dash").attr("aria-checked","mixed"))):(i.addClass("hidden").attr("aria-hidden",!0),this.$header.addClass("no-checkbox")),e.Util.isIE8()&&o.detachAndReattachElement(i)},_onCheckboxClick:function(){this._getNumSelected()>0?this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION):(this.options.collection.length>0&&this.options.appApi.siteCatalystApi.logScEvent([l.FILE_LIST,l.SENT_FILES,l.ACTION,l.SELECT_ALL]),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend({},this.options,{selectType:e.SelectionUiModel.SELECT_ALL})))},_onKeyDown:function(e){var i=!1,t=$(e.target);if(!o.descendantHasFocus(this.$el))return i;switch(e.which){case 13:case 32:t.is(this.$checkbox)&&(t.click(),i=!0)}return i},_addUiModelEventListeners:function(){var e=this.options;e.collectionUiModel.on("change:has_vertical_scrollbar",this._onHasVerticalScrollbarChange),e.collectionsUiModel.on("change:checkbox",this.render),e.selectionUiModel.on("change:selected_item_models",this._updateCheckbox)},_onHasVerticalScrollbarChange:function(){this.render()}})}),define("acplugins/tracked-send/js/home-view/views/parcels-collection-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-collection-template.html","core/utils/view-util","acplugins/tracked-send/js/home-view/views/parcels-list-view","acplugins/tracked-send/js/home-view/views/selection-actions-view","acplugins/tracked-send/js/home-view/views/parcels-list-header-view"],function(e,i,t,s){i.ParcelsCollectionView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addKeyEventListener(),this._addCollectionEventListeners()},render:function(){var i=this.$el,t=this.options,s=t.appApi.pluginsApi,n=t.pluginId;return e.View.prototype.render.call(this),0===i.children().length&&(i.html(this._template({pluginSelectorId:s.getPluginSelectorId(n)})),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$header=this.$(".collection-header"),this.$selectionActions=this.$(".selection-actions"),this.$items=this.$(".collection-items")},_renderChildViews:function(){this._renderItemsView(),this._renderHeaderView(),this._renderSelectionActionsView()},_renderItemsView:function(){this._renderChildView("_itemsView",i.ParcelsListView,this.$items)},_renderHeaderView:function(){this._renderChildView("_headerView",i.ParcelsListHeaderView,this.$header,{collectionItemsView:this._itemsView})},_renderSelectionActionsView:function(){this._renderChildView("_selectionActionsView",i.SelectionActionsView,this.$selectionActions)},_setFocusToChildView:function(e,i){var t=i?"[role=checkbox]:focusable":":tabbable:first",s=e.find(t);return s.length?(s.focus(),!0):!1},_onKeyDown:function(e){var i=!1;switch(e.which){case 38:s.descendantHasFocus(this.$items)&&(this.setFocusToHeaderView(!0)||this.setFocusToSelectionActionsView(),i=!0);break;case 40:(s.descendantHasFocus(this.$header)||s.descendantHasFocus(this.$selectionActions))&&(this.setFocusToCollectionItemsView(),i=!0)}return i&&this._consumeEvent(e),i},setFocusToHeaderView:function(e){var i=this._setFocusToChildView(this.$header,e);return i},setFocusToSelectionActionsView:function(e){var i=this._setFocusToChildView(this.$selectionActions,e);return i},setFocusToCollectionItemsView:function(){var e=this._setFocusToChildView(this.$items);return e},_correctFocusOnSelectionChange:function(i,t){var s=this.$header,n=s.find("[role=checkbox]"),o=this.$selectionActions,l=!1,a=!1;i&&(l=i.is(s),a=i.is(o)),this._hideOrShowHeaderCheckbox(),l&&t.selectType===e.SelectionUiModel.SELECT_ALL?this.setFocusToSelectionActionsView(!0):a&&(n.is(":focusable")?this.setFocusToHeaderView(!0):this.setFocusToCollectionItemsView())},_hideOrShowHeaderCheckbox:function(){var i=this.$header.find("[role=checkbox]"),t=this.$selectionActions;t.hasClass("open")||e.Util.isCEF()?i.hide():i.show()},_addCollectionEventListeners:function(){var e,i,t=this.options,s=t.collectionsUiModel,n=t.collectionUiModel,o=this.collection;e=s.get("debounced_render_delay"),i=_.debounce(_.bind(function(){this.invalidateViewsRecursively(),this.render(),n.set("show_empty",0===o.length)},this),e),o.on("add change remove reset",function(){i()})},_onViewEvent:function(i,t){switch(i){case e.ViewEvents.SELECT_ITEM:this._onSelectItem(t);break;case e.ViewEvents.CLEAR_SELECTION:this._onClearSelection(t)}e.View.prototype._onViewEvent.call(this,i,t)},_onSelectItem:function(e){var i,t=s.descendantHasFocus(this.$header),n=s.descendantHasFocus(this.$selectionActions);t?i=this.$header:n&&(i=this.$selectionActions),_.delay(this._correctFocusOnSelectionChange,this.options.collectionsUiModel.get("scroll_render_delay"),i,e)},_onClearSelection:function(e){this._onSelectItem(e)}})}),define("acplugins/tracked-send/js/home-view/templates/no-parcels-collection-template.html",[],function(){return'<div id="parcels-no-parcels-prompt" class="parcels-no-parcels shown">       <div class="parcels-no-parcels-instruction-container theme-text">            <div><%= sendPrompt %></div>        </div>        <div class="parcels-no-parcels-subprompt theme-text">            <%= subPrompt %>         </div>   </div>'}),define("acplugins/tracked-send/js/home-view/templates/no-parcels-button-template",[],function(){return'<button id="parcels-no-parcels-send-btn" class="parcels-no-parcels-btn theme-hyperlink">       <%= sendBtn %></button> '}),define("acplugins/tracked-send/js/home-view/views/no-parcels-collection-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/no-parcels-collection-template.html","acplugins/tracked-send/js/home-view/templates/no-parcels-button-template","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,i,t,s,n,o){return i.NoParcelsCollectionView=e.View.extend({events:{"click #parcels-no-parcels-send-btn":"_onSendClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._buttonTemplate=_.template(s),this._addUiModelEventListeners()},render:function(){var i,t,s;return e.View.prototype.render.call(this),0===this.$el.children().length&&(s="desktop"===this.options.collectionsUiModel.get("mode")?n.NO_PARCELS_S_T_BTN:n.NO_PARCELS_SEND_BTN,t=this._buttonTemplate({sendBtn:s}),i=_.template(n.NO_PARCELS_SEND_SUBPROMPT,{sendBtn:t}),this.$el.html(this._template({sendPrompt:n.NO_PARCELS_SEND_PROMPT,subPrompt:i})),this._initWrappers(),this.options.collectionUiModel.get("show_empty")?this.$noParcelsSendPrompt.addClass("shown"):this.$noParcelsSendPrompt.removeClass("shown")),this},_initWrappers:function(){this.$noParcelsSendPrompt=this.$("#parcels-no-parcels-prompt"),this.$noParcelsSendBtn=this.$("#parcels-no-parcels-send-btn")},_onSendClick:function(){var i,t=this.options,s={};t.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.NO_PARCELS,o.SHARE_BUTTON,o.CLICKED]),e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){s.selectedParcelId="",s.selectedAssetIds=[],s.selectedModels=[],e.stApi.launchSendTrackApp(s)},this)):(i="send",t.appApi.routerApi.navigate(i,{trigger:!0}))},_addUiModelEventListeners:function(){this.listenTo(this.options.collectionUiModel,"change:show_empty",this._onShowEmptyChange)},_onShowEmptyChange:function(e,i){i?(this.render(),this.$noParcelsSendPrompt.addClass("shown")):this.$noParcelsSendPrompt.removeClass("shown")}}),i.NoParcelsCollectionView}),define("acplugins/tracked-send/js/home-view/views/parcels-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-template.html","acplugins/tracked-send/js/home-view/views/parcels-collection-view","acplugins/tracked-send/js/home-view/views/no-parcels-collection-view"],function(e,i,t){i.ParcelsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcelsContent=this.$(".parcels-content"),this.$parcelsNoContent=this.$(".parcels-no-content")
},_renderChildViews:function(){var i=this._collectionUiModel;e.Util.isCEF()&&_.isUndefined(this.options.parcelCollection)||(i||(i=this._collectionUiModel=e.uiModelFactory.create("CollectionUiModel"),i.set("show_empty",0===this.options.parcelCollection.length)),this._renderParcelsNoContentView(i),this._renderParcelsContentView(i))},_renderParcelsNoContentView:function(e){this._renderChildView("_noParcelsContentView",i.NoParcelsCollectionView,this.$parcelsNoContent,{collection:this.options.parcelCollection,collectionUiModel:e})},_renderParcelsContentView:function(e){this._renderChildView("_parcelsContentView",i.ParcelsCollectionView,this.$parcelsContent,{collection:this.options.parcelCollection,collectionUiModel:e})}})}),define("acplugins/tracked-send/js/home-view/views/sent-files-body-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/sent-files-body-template.html","acplugins/tracked-send/js/home-view/views/parcels-view"],function(e,i,t){i.SentFilesBodyView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcels=this.$(".parcels"),this.$searchResults=this.$(".parcels-search-results")},_renderChildViews:function(){var e=!0;e&&this._renderParcelsView()},_renderParcelsView:function(){this._renderChildView("_parcelsView",i.ParcelsView,this.$parcels)}})}),define("acplugins/tracked-send/js/home-view/templates/sent-files-footer-template.html",[],function(){return'<div class="adobe-send-btn desktop theme-hyperlink" role="link" id="footer-link" disabled tabindex="-1"><%=GO_TO_ADOBE_SEND_WEBSITE%></div>'}),define("acplugins/tracked-send/js/home-view/views/sent-files-footer-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/home-view/templates/sent-files-footer-template.html","core/utils/view-util"],function(e,i,t,s,n){i.SentFilesFooterView=e.View.extend({events:{"click .adobe-send-btn":"_onAdobeSendWebsiteClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener(),this._addKeyEventListener(),this._template=_.template(s)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({GO_TO_ADOBE_SEND_WEBSITE:t.GO_TO_ADOBE_S_T_WEBSITE})),this._initWrappers(),this._setTabbableItem()),this._updateSendButton(),this},_initWrappers:function(){this.$adobeSendBtn=this.$(".adobe-send-btn")},_updateSendButton:function(){this.$adobeSendBtn.addClass("desktop")},_onFocusIn:function(e){var i=$(e.target);return this.$(":focusable").not(i).attr("tabindex",-1),i.attr("tabindex",0),!0},_onFocusOut:function(){return!0},_setTabbableItem:function(){var e=this.$(".adobe-send-btn:focusable"),i=this.$(":tabbable");0===i.length&&e.attr("tabindex","0")},_onKeyDown:function(e){var i=this.$el,t=e.which,s=!1;if(!n.descendantHasFocus(i))return s;switch(t){case 13:s=!0,$(e.target).click();break;case 32:s=!0,$(e.target).click()}return s},_onAdobeSendWebsiteClick:function(){var e=this.options;e.appApi.rnaApi?this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.invokeMethod({methodName:"launchSFSManagePage"})},this)):e.appApi.routerApi.navigate("/send",{trigger:!0})}})}),define("acplugins/tracked-send/js/home-view/views/on-signed-in-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/on-signed-in-template.html","core/utils/util","acplugins/tracked-send/js/home-view/views/sent-files-header-view","acplugins/tracked-send/js/home-view/views/sent-files-body-view","acplugins/tracked-send/js/home-view/views/sent-files-footer-view"],function(e,i,t,s){return i.OnSignedInView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){var i=this.$el;return e.View.prototype.render.call(this),0===i.children().length&&(i.html(_.template(t)),this._initWrappers()),this._updateDesktopView(),this._renderChildViews(),this},_initWrappers:function(){this.$header=this.$(".sent-files-header"),this.$body=this.$(".sent-files-body"),this.$footer=this.$(".sent-files-footer")},_updateDesktopView:function(){"desktop"===this.options.collectionsUiModel.get("mode")?(s.isCEF()&&this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.isSendForSignEnabled()&&(this.$body.addClass("desktop"),this.$footer.addClass("desktop"))},this)),this.$footer.addClass("unselectable"),$(".page-main-container").addClass("sent-files-container")):(this.$body.removeClass("desktop"),this.$footer.removeClass("desktop"),this.$footer.removeClass("unselectable"))},_renderChildViews:function(){this._renderSentFilesHeaderView(),this._renderSentFilesBodyView(),"desktop"===this.options.collectionsUiModel.get("mode")&&this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.isSendForSignEnabled()&&this._renderSentFilesFooterView()},this))},_renderSentFilesHeaderView:function(){this._renderChildView("_sentFilesHeaderView",i.SentFilesHeaderView,this.$header)},_renderSentFilesBodyView:function(){this._renderChildView("_sentFilesBodyView",i.SentFilesBodyView,this.$body)},_renderSentFilesFooterView:function(){this._renderChildView("_sentFilesFooterView",i.SentFilesFooterView,this.$footer)}}),i.OnSignedInView}),define("acplugins/tracked-send/js/home-view/templates/on-signed-out-template.html",[],function(){return'<div class="adobe-send-icon"></div><div class="on-sign-out-prompt theme-text"><%=ON_SIGN_OUT_PROMPT%></div><div class="on-sign-out-subprompt  theme-text"><%=ON_SIGN_OUT_SUBPROMPT%></div><div class="sign-in-btn control-button theme-button theme-button-label" role="button" aria-label="<%= SIGN_IN_BUTTON_LABEL %>" tabindex = "0"><%=SIGN_IN_BUTTON%></div>'}),define("acplugins/tracked-send/js/home-view/views/on-signed-out-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/on-signed-out-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/views/view"],function(e,i,t,s){return i.OnSignedOutView=e.View.extend({events:{"click .sign-in-btn":"_onSignInClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({ON_SIGN_OUT_PROMPT:s.ON_SIGN_OUT_PROMPT,ON_SIGN_OUT_SUBPROMPT:s.ON_SIGN_OUT_SUBPROMPT,SIGN_IN_BUTTON:s.SIGN_IN_BUTTON,SIGN_IN_BUTTON_LABEL:this._getSignInButtonAriaLabel()})),this._initWrappers()),this},_initWrappers:function(){this.$adobeSendIcon=this.$(".adobe-send-icon"),this.$onSignOutPrompt=this.$(".on-sign-out-prompt"),this.$onSignOutSubprompt=this.$(".on-sign-out-subprompt"),this.$signInBtn=this.$(".sign-in-btn")},_onKeyDown:function(e){return 32===e.which||13===e.which?($(e.target).click(),!0):!1},_onSignInClick:function(e){this._consumeEvent(e),this.$el.hide(),this.options.appApi.displayApi.showSpinner(!0),this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this),_.bind(function(){this.options.appApi.displayApi.showSpinner(!1),this.$el.show()},this))},_getSignInButtonAriaLabel:function(){return _.template(s.GENERIC_ARIA_LABEL_STRING,{prefix:s.ON_SIGN_OUT_PROMPT,suffix:s.SIGN_IN_BUTTON})}}),i.OnSignedOutView}),define("acplugins/tracked-send/js/home-view/views/tracked-send-home-view-view",["core/ac-core","files/ac-files","plugins-common/ac-plugins","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/home-view/templates/tracked-send-template.html","acplugins/tracked-send/js/tool/models/version-model","acplugins/tracked-send/js/utils/sharing","acplugins/tracked-send/js/utils/ts-utils","acplugins/tracked-send/js/home-view/models/ui/parcel-preview-ui-model","core/views/home-view-view","acplugins/tracked-send/js/home-view/ops/showing/parcel-preview-op","acplugins/tracked-send/js/home-view/views/on-signed-in-view","acplugins/tracked-send/js/home-view/views/on-signed-out-view"],function(e,i,t,s,n,o,l,a,r){return s.HomeViewView=e.PluginContentView.extend({initialize:function(){e.PluginContentView.prototype.initialize.call(this),e.Util.isCEF()&&(require(["files/views/files-offline-view"],function(){}),require(["files/views/files-no-access-view"],function(){})),s.plugin=this},render:function(){var i=this.$el;e.PluginContentView.prototype.render.call(this),this._processRouterArgs().then(_.bind(function(){0===i.children().length&&(i.html(_.template(o)),this._initWrappers()),this._isSelected&&!i.closest(".hidden").length&&this._renderChildViews()},this))},initPlugin:function(){var i=this.options,t=e.modelFactory,n=e.uiModelFactory;return _.extend(i,{sessionModel:t.create("SessionModel"),collectionsUiModel:new s.CollectionsUiModel,selectionUiModel:n.create("SelectionUiModel"),dialogsUiModel:n.create("DialogsUiModel"),rhpPreviewUiModel:n.create("RhpPreviewUiModel"),itemUiModel:n.create("CollectionItemUiModel"),parcelPreviewUiModel:new s.ParcelPreviewUiModel}),e.Util.isCEF()&&this._changeModeToDesktop(),i.appApi.siteCatalystApi.register("sharing",a),i.collectionsUiModel.on("change:mode",this._onModeChange),this._onModeChange(),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._onWindowResize)),this._isSelected=!1,this._getResolvedPromise()},selectPlugin:function(i){var t,o,l=this.options,a=l.appApi.networkConnectivityApi;if(this._pluginOptions=i,i&&(o=i.noHistoryEffect),o||(t=l.appApi.routerApi,t.navigate(s.PLUGIN_ID)),e.Util.isCEF()){if(this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.CLICKED]),this._isSelected&&_.isUndefined(this.options.parcelCollection))return this._renderForStartup(),this._getResolvedPromise();this.options.appApi.displayApi.applyUIThemeStyles(this.$el).then(_.bind(function(){this.render()},this))}return this.options.appApi.displayApi.showSpinner(!0),"desktop"===l.collectionsUiModel.get("mode")?(a.removeNetworkConnectivtyChangeCallback(this._onConnectionChanged),a.addNetworkConnectivtyChangeCallback(this._onConnectionChanged),l.appApi.networkConnectivityApi.isOnline()&&l.appApi.sessionApi.isSignedInReader()?(this.$onSignedOut&&this.$onSignedOut.hide(),this.$offlineView&&this.$offlineView.hide(),l.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){return this._isSelected=!0,this._startPlugin()},this),_.bind(function(e){return l.appApi.displayApi.showSpinner(!1),e&&"NoAccessToPdfServices"===e.errorString?(this._isSelected=!0,this._addAppApiCallbacks(),this._renderForStartup(),this.options.appApi.displayApi.showSpinner(!1),this._getResolvedPromise()):void(0===this.$el.children().length&&l.appApi.pluginsApi.handleServerOutageFailure())},this)),this._getResolvedPromise()):(this._isSelected=!0,this._addAppApiCallbacks(),this._renderForStartup(),this.options.appApi.displayApi.showSpinner(!1),this._getResolvedPromise())):(this._isSelected=!0,this._startPlugin())},deselectPlugin:function(){e.Util.isCEF()&&$(".page-main-container").removeClass("sent-files-container"),e.PluginContentView.prototype.deselectPlugin.call(this),this._isSelected=!1},releasePlugin:function(){delete this._startingPluginPromise,e.PluginContentView.prototype.releasePlugin.call(this)},clickedOutsideAiCview:function(){return e.Util.isCEF()&&this.options.selectionUiModel.clearSelection(),this._getResolvedPromise()},getSiteCatalystName:function(){return n.SENT_FILES},getPluginVersionList:function(){var e=this.options,i=[],t=$.Deferred(),s=this._versionModel;return s||(s=this._versionModel=new l(e)),s.get("version")?(i.push(s.get("version")),t.resolve()):s.fetch().then(function(){i.push(s.get("version")),t.resolve()}),t.promise(i)},getAppApiVersion:function(){return void 0==Ac.Plugins.groups.send?"dev":Ac.Plugins.groups.send.FRAMEWORK_VERSION},_initWrappers:function(){this.$onSignedIn=this.$(".on-signed-in"),this.$onSignedOut=this.$(".on-signed-out"),this.$offlineView=this.$(".files-offline-view"),this.$noAccessView=this.$(".files-no-access-view")},_renderChildViews:function(){var e=this.options.collectionsUiModel.get("mode");"desktop"===e?this.options.appApi.networkConnectivityApi.isOnline()?this.options.appApi.sessionApi.isSignedInReader()?this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView()},this),_.bind(function(e){e&&"NoAccessToPdfServices"===e.errorString&&(this.$noAccessView.show(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$offlineView.hide(),this._renderNoAccessView())},this)):(this.$onSignedOut.show(),this.$onSignedOut.addClass("unselectable"),this.$onSignedIn.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedOutView()):(this.$offlineView.show(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$noAccessView.hide(),this._renderOfflineView()):(this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView())},_renderOnSignedInView:function(){this._renderChildView("_onSignedInView",s.OnSignedInView,this.$onSignedIn)},_renderOnSignedOutView:function(){this._renderChildView("_onSignedOutView",s.OnSignedOutView,this.$onSignedOut)},_renderOfflineView:function(){this._renderChildView("_filesOfflineView",i.FilesOfflineView,this.$offlineView)},_renderNoAccessView:function(){this._renderChildView("_filesNoAccessView",i.FilesNoAccessView,this.$noAccessView)},_whenSignedInFunction:function(){var e,i=this.options;e=i.appApi.baseFilesUrisApi.getSendApiUri(),e=r.extractRootUrl(e),i.parcelCollection=new s.ParcelCollection([],{rootUrl:e}),i.collectionsUiModel.initializeFromCohorts(i.appApi.usersMeApi.getUserCohorts())},_startPlugin:function(){var e=this._startingPluginPromise,i=this.options.collectionsUiModel.get("mode");return e?("desktop"===i&&this.options.parcelCollection.fetch(),this._renderForStartup()):(this._whenSignedInFunction(),e=this._startingPluginPromise=s.opFactory.create("StartingPluginOp",this.options).run().then(_.bind(function(){"desktop"===i&&this._addAppApiCallbacks(),this._renderForStartup()},this))),this.options.appApi.displayApi.showSpinner(!1),e},_addAppApiCallbacks:function(){var e=(this.options,this.options.appApi),i=e.sessionApi;i.removeSignedInChangeCallback(this._onSignedInChange),i.addSignedInChangeCallback(this._onSignedInChange)},_onSignedInChange:function(e,i){i?this._isSelected&&(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this.options.selectionUiModel.clearSelection(),this.releasePlugin(),this._renderForStartup())},_onConnectionChanged:function(e,i){i?(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this._renderForStartup())},_renderForStartup:function(){var i=this.options.selectionUiModel;e.Util.isCEF()||i.clearSelection(),setTimeout(_.bind(function(){this.render()},this),500)},_onWindowResize:function(){this._isSelected&&this.render()},_processRouterArgs:function(){var e,i,t,n=s.selector.routerArgs,o=this.options,l=$.Deferred();return n?(e=n.parcelID,this._startingPluginPromise.then(_.bind(function(){var n;t=o.appApi.baseFilesUrisApi.getSendApiUri(),t=r.extractRootUrl(t),i=new s.ParcelModel({parcel_id:e},{rootUrl:t}),i.fetch().then(_.bind(function(e){n=_.extend({},o,{},{parcelModel:e})},this,i))},this))):l.resolve(),delete s.selector.routerArgs,l.promise()},_changeModeToDesktop:function(){var e=this.options,i=e.collectionsUiModel.get("mode");"web"===i&&e.collectionsUiModel.set("mode","desktop")},_onModeChange:function(){var e=this.options,i=e.collectionsUiModel,t=e.selectionUiModel,s=i.get("mode");"desktop"===s?(i.set("checkbox",!1),t.set("multiple_selection",!0)):"web"===s&&(i.set("checkbox",!0),t.set("multiple_selection",!0))},_onViewEvent:function(i,t){"ParcelPreview_Close"===i&&this._renderChildViews(),e.View.prototype._onViewEvent.call(this,i,t)}}),s.HomeViewView}),define("acplugins/tracked-send/js/home-view/tracked-send",["acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/ops/op-factory","acplugins/tracked-send/js/home-view/views/tracked-send-home-view-view"],function(e){_.extend(e,{init:function(){e.opFactory=new e.OpFactory}})}),define("acplugins/tracked-send/js/home-view/plugin",["acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/tracked-send"],function(e){e.init()});